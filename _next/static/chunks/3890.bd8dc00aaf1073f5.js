"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3890],{29422:function(e,t,n){n.d(t,{Z:function(){return c}});var o=n(77349),a=n(11640),r=n(19013),s=n(13882),i=n(83946);function c(e,t){if((0,s.Z)(2,arguments),!t||"object"!=typeof t)return new Date(NaN);var n=t.years?(0,i.Z)(t.years):0,c=t.months?(0,i.Z)(t.months):0,l=t.weeks?(0,i.Z)(t.weeks):0,u=t.days?(0,i.Z)(t.days):0,d=t.hours?(0,i.Z)(t.hours):0,h=t.minutes?(0,i.Z)(t.minutes):0,m=t.seconds?(0,i.Z)(t.seconds):0,p=(0,r.Z)(e),v=c||n?(0,a.Z)(p,c+12*n):p,y=u||l?(0,o.Z)(v,u+7*l):v;return new Date(y.getTime()+1e3*(m+60*(h+60*d)))}},93890:function(e,t,n){n.r(t),n.d(t,{default:function(){return ev}});var o=n(47568),a=n(14924),r=n(26042),s=n(69396),i=n(828),c=n(7297),l=n(97582),u=n(85893),d=n(67294),h=n(45697),m=n(66252),p=n(6812),v=n(50319),y=n(75063);function b(){var e=(0,c.Z)(["\n  query GetDashboard(\n    $accountId: Int\n    $adminId: Int\n    $timezone: String\n    $asAt: timestamptz\n    $monthStart: timestamptz\n    $dayStart: timestamptz\n    $userId: Int\n    $currentUserId: Int\n    $yearStart: timestamptz\n  ) {\n    dashboardTilesData: getDashboard_HomeTiles(\n      args: {\n        adminId: $adminId\n        asAt: $asAt\n        accountId: $accountId\n        monthStart: $monthStart\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n      }\n    ) {\n      thresholdApprovals\n      outstandingInvoices\n      outstandingInvoicesValues\n      invoiceUnsent\n      reactiveJobsToday\n      plannedJobsToday\n      complianceJobToday\n      liveP1Jobs\n      liveP2Jobs\n      liveP3Jobs\n      liveP4Jobs\n      liveP5Jobs\n      offeredJobs\n      quotesToday\n      quotesNotSent\n      quotesOverdue\n      quotesDueThisWeek\n      inprogressJobs\n      numberOfOpenJobs\n      jobsInDispute\n      worksValueMTD\n      worksValueYTD\n      overdueComplianceJobs\n      onHold\n      upliftRequested\n      ppmOverdue\n      reactiveOverdue\n      failedJobs\n      imminentJobSlaBreaches\n      openRemedialQuotes\n      openQuotes\n      imminentQuoteSlaBreaches\n      quoteSlaBreached\n      jobSlaBreachedOnSite\n      jobSlaBreachedJobReport\n    }\n    chartJobsPerDay: getDashboard_HomeTiles_Jobs_perDay(\n      args: {\n        adminId: $adminId\n        timeZone: $timezone\n        asAt: $asAt\n        accountId: $accountId\n        monthStart: $monthStart\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n      }\n    ) {\n      jobsOnThisMonth\n    }\n    chartRevenuesPerDay: getDashboard_HomeTiles_Revenues_perDay(\n      args: {\n        adminId: $adminId\n        timeZone: $timezone\n        asAt: $asAt\n        accountId: $accountId\n        monthStart: $monthStart\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n      }\n    ) {\n      revenuesOnThisMonth\n    }\n    chartRevenuesPerYear: getDashboard_HomeTiles_Revenues_perYear(\n      args: {\n        adminId: $adminId\n        timeZone: $timezone\n        asAt: $asAt\n        accountId: $accountId\n        monthStart: $monthStart\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n      }\n    ) {\n      revenuesOnThisYear\n    }\n  }\n"]);return b=function(){return e},e}function g(){var e=(0,c.Z)(["\n  query GetDashboard(\n    $accountId: Int\n    $adminId: Int\n    $asAt: timestamptz\n    $monthStart: timestamptz\n    $dayStart: timestamptz\n    $userId: Int\n    $yearStart: timestamptz\n  ) {\n    ",": getDashboard_HomeTiles_","(\n      args: {\n        adminId: $adminId\n        asAt: $asAt\n        accountId: $accountId\n        monthStart: $monthStart\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n      }\n    ) {\n      sum\n    }\n  }\n"]);return g=function(){return e},e}function f(){var e=(0,c.Z)(["\n  query GetSuppliersLocation($where: UserLocation_bool_exp) {\n    suppliersLocation: UserLocation(distinct_on: userId, where: $where) {\n      id\n      geo\n      account: Account {\n        id\n        name\n      }\n      user: User {\n        id\n        fullName\n      }\n    }\n  }\n"]);return f=function(){return e},e}function I(){var e=(0,c.Z)(['\n  query GetJobsLocation($where: Job_bool_exp) {\n    jobsLocation: Job(where: $where, order_by: { createdAt: desc }) {\n      id\n      number\n      type\n      location: Location {\n        id\n        name\n        addresses: Addresses(\n          where: { registered: { _eq: true }, entity: { _eq: "Location" } }\n          order_by: { createdAt: desc }\n        ) {\n          address: Address {\n            addressLine1\n            addressLine2\n            addressLine3\n            postCode\n            name\n            geo\n          }\n        }\n      }\n      supplier: Supplier {\n        id\n        name\n      }\n      service: Service {\n        id\n        name\n      }\n    }\n  }\n']);return I=function(){return e},e}var w=(0,y.Ps)(b()),Z=(0,y.Ps)(f()),k=(0,y.Ps)(I()),S=n(11163),J=n.n(S),T=n(83894),j=n(23855),M=n(43703),D=n(69119),B=n(38148),A=n(78200),x=n(10367),_=[{type:"tile",pinned:!0,colourConfig:{success:[0,15],danger:[16,30],warning:[30,null]},name:"reactiveJobsToday",greaterIsBetter:!0},{type:"tile",pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},name:"plannedJobsToday",greaterIsBetter:!0},{type:"tile",pinned:!0,colourConfig:{success:[0,5],danger:[6,10],warning:[11,null]},name:"quotesToday",greaterIsBetter:!0},{type:"tile",pinned:!0,colourConfig:{success:[0,5],danger:[6,10],warning:[11,null]},name:"liveP1Jobs",greaterIsBetter:!0},{type:"tile",pinned:!0,colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},name:"offeredJobs",greaterIsBetter:!0},{type:"chart",name:"chartJobMetrics"},{type:"mapChart",name:"mapChart"},{type:"chart",name:"numberOfNotifications"}],C=n(29815),N=n(7069),q=n(77349),P=n(29383),L=n(96486),$=function(e){var t=[];return e.forEach(function(e){if(!e.hide){if("chart"===e.type&&"object"==typeof e.values&&Object.keys(e.values).length>0){var n={};Object.keys(e.values).forEach(function(t){var o=e.values[t];Array.isArray(o)&&o.forEach(function(e){e.hide||(Array.isArray(n[t])?n[t].push(e):n[t]=[e])})}),t.push((0,s.Z)((0,r.Z)({},e),{values:n}))}else t.push(e)}}),t},z="/dashboard",R=function(e){var t,n,o,a,i,c,l,u,d,h,m=e.isCustomerUser,p=e.hasQuotesModule,v=e.hasFinancesModule,y=e.asAt,b=e.userTiles,g=e.dashboardTilesData,f=e.userId,I=e.accountId,w=g||{},Z=w.thresholdApprovals,k=w.outstandingInvoices,S=w.outstandingInvoicesValues,J=w.complianceJobToday,T=w.inprogressJobs,j=w.liveP1Jobs,M=w.liveP2Jobs,D=w.liveP3Jobs,B=w.liveP4Jobs,x=w.liveP5Jobs,_=w.plannedJobsToday,R=w.quotesDueThisWeek,O=w.quotesToday,E=w.reactiveJobsToday,Q=w.upliftRequested,U=w.worksValueMTD,V=w.worksValueYTD,W=w.jobsOnThisMonth,Y=w.revenuesOnThisMonth,G=w.revenuesOnThisYear,H=w.jobsLocation,F=w.failedJobs,K=w.imminentJobSlaBreaches,X=w.openRemedialQuotes,ee=w.openQuotes,et=w.imminentQuoteSlaBreaches,en=w.quoteSlaBreached,eo=w.jobSlaBreachedOnSite,ea=w.jobSlaBreachedJobReport,er=[],es=[],ei=[],ec=[],el=[],eu=[],ed=[],eh=[],em=[],ep=[];if(W&&W.length>0&&W.forEach(function(e,t){var n=e.date,o=e.ppmJobsOnThisMonth,a=e.reactiveJobsOnThisMonth,r=new Date(y),s=new Date(n);if(s>=(0,N.Z)(r,8)&&s<=(0,q.Z)(r,7)){if(W[t-1])for(var i=W[t-1].date,c=(0,P.Z)(s,new Date(i)),l=1;l<c;l++)er.push({date:(0,N.Z)(s,l),values:[]}),ec.push({date:(0,N.Z)(s,l),values:[]});er.push({date:s,values:o}),ec.push({date:s,values:a})}if(s>=(0,N.Z)(r,15)&&s<=(0,q.Z)(r,14)){if(W[t-1])for(var u=W[t-1].date,d=(0,P.Z)(s,new Date(u)),h=1;h<d;h++)es.push({date:(0,N.Z)(s,h),values:[]}),el.push({date:(0,N.Z)(s,h),values:[]});es.push({date:s,values:o}),el.push({date:s,values:a})}if(s>=(0,N.Z)(r,31)&&s<=(0,q.Z)(r,30)){if(W[t-1])for(var m=W[t-1].date,p=(0,P.Z)(s,new Date(m)),v=1;v<p;v++)ei.push({date:(0,N.Z)(s,v),values:[]}),eu.push({date:(0,N.Z)(s,v),values:[]});ei.push({date:s,values:o}),eu.push({date:s,values:a})}}),Y&&Y.length>0){var ev="dd/MM";Y.forEach(function(e,t){var n=e.date,o=e.revenuesOnThisDay,a=new Date(y),r=new Date(n);if(r>=(0,N.Z)(a,8)){if(Y[t-1])for(var s=Y[t-1].date,i=(0,P.Z)(new Date(s),r),c=1;c<i;c++)ed.push({date:(0,q.Z)(r,c),sum:[]});ed.push({date:r,sum:o,formatDate:ev})}if(r>=(0,N.Z)(a,15)){if(Y[t-1])for(var l=Y[t-1].date,u=(0,P.Z)(new Date(l),r),d=1;d<u;d++)eh.push({date:(0,q.Z)(r,d),sum:[]});eh.push({date:r,sum:o,formatDate:ev})}if(r>=(0,N.Z)(a,31)){if(Y[t-1])for(var h=Y[t-1].date,m=(0,P.Z)(new Date(h),r),p=1;p<m;p++)em.push({date:(0,q.Z)(r,p),sum:[]});em.push({date:r,sum:o,formatDate:ev})}})}G&&G.length>0&&G.forEach(function(e){var t=e.date,n=e.revenuesOnThisMonth;ep.push({date:t,sum:n,formatDate:"MM/yyyy"})});var ey=y?(0,A.Z)(y,"yyyy-MM-dd"):"",eb=$([{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,15],danger:[16,30],warning:[30,null]},title:"Reactive jobs today",description:"Reactive jobs scheduled to happen today",name:"reactiveJobsToday",to:"".concat(z,"/issues?asAt=").concat(ey,"&tileName=reactiveJobsToday").concat(f?"&userId=".concat(f):"").concat(I?"&accountId=".concat(I):""),values:{today:(null==E?void 0:E.today)||0,week:(null==E?void 0:E.week)||0,month:(null==E?void 0:E.month)||0,threeMonth:(null==E?void 0:E.threeMonth)||0,year:(null==E?void 0:E.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"PPM jobs today",description:"Planned maintenance jobs scheduled to happen today",name:"plannedJobsToday",to:"".concat(z,"/issues?type=ppm&asAt=").concat(ey,"&tileName=plannedJobsToday").concat(f?"&userId=".concat(f):""),values:{today:(null==_?void 0:_.today)||0,week:(null==_?void 0:_.week)||0,month:(null==_?void 0:_.month)||0,threeMonth:(null==_?void 0:_.threeMonth)||0,year:(null==_?void 0:_.year)||0},greaterIsBetter:!0},{hide:!p&&m,type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,5],danger:[6,10],warning:[11,null]},title:"Quotes today",description:"Quotes where due date is today",name:"quotesToday",to:"".concat(z,"/quotes?asAt=").concat(ey,"&tileName=quotesToday").concat(f?"&userId=".concat(f):""),values:{today:(null==O?void 0:O.today)||0,week:(null==O?void 0:O.week)||0,month:(null==O?void 0:O.month)||0,threeMonth:(null==O?void 0:O.threeMonth)||0,year:(null==O?void 0:O.year)||0},greaterIsBetter:!0},{type:"chart",size:[2,1],title:"Jobs metrics",name:"chartJobMetrics",values:{week:[{groupLabel:"Jobs per day",groupName:"jobsPerUnit",groupDescription:"Number of jobs currently in the system for selected time range",chartData:[{label:"Planned",color:"#1E88E5",data:null!==(t=(0,L.orderBy)(er,"date","asc"))&&void 0!==t?t:[]},{label:"Reactive",color:"#cfd9e0",data:null!==(n=(0,L.orderBy)(ec,"date","asc"))&&void 0!==n?n:[]}]},{hide:m&&!v,groupLabel:"Spend per day",groupName:"revenuesPerUnit",groupDescription:"Sum of all job totals by day for selected time range",chartData:[{label:"Revenue",color:"#1E88E5",data:null!==(o=(0,L.orderBy)(ed,"date","asc"))&&void 0!==o?o:[]}]}],twoWeeks:[{groupLabel:"Jobs per day",groupName:"jobsPerUnit",groupDescription:"Number of jobs currently in the system for selected time range",chartData:[{label:"Planned",color:"#1E88E5",data:null!==(a=(0,L.orderBy)(es,"date","asc"))&&void 0!==a?a:[]},{label:"Reactive",color:"#cfd9e0",data:null!==(i=(0,L.orderBy)(el,"date","asc"))&&void 0!==i?i:[]}]},{hide:m&&!v,groupLabel:"Spend per day",groupName:"revenuesPerUnit",groupDescription:"Sum of all job totals by day for selected time range",chartData:[{label:"Revenue",color:"#1E88E5",data:null!==(c=(0,L.orderBy)(eh,"date","asc"))&&void 0!==c?c:[]}]}],month:[{groupLabel:"Jobs per day",groupName:"jobsPerUnit",groupDescription:"Number of jobs currently in the system for selected time range",chartData:[{label:"Planned",color:"#1E88E5",data:null!==(l=(0,L.orderBy)(ei,"date","asc"))&&void 0!==l?l:[]},{label:"Reactive",color:"#cfd9e0",data:null!==(u=(0,L.orderBy)(eu,"date","asc"))&&void 0!==u?u:[]}]},{hide:m&&!v,groupLabel:"Spend per day",groupName:"revenuesPerUnit",groupDescription:"Sum of all job totals by day for selected time range",chartData:[{label:"Revenue",color:"#1E88E5",data:null!==(d=(0,L.orderBy)(em,"date","asc"))&&void 0!==d?d:[]}]}],year:[{hide:m&&!v,groupLabel:"Monthly job spend",groupName:"revenuesPerYear",groupDescription:"Sum of all job totals by day for selected time range",chartData:[{label:"Revenue",color:"#1E88E5",data:null!==(h=(0,L.orderBy)(ep,"date","asc"))&&void 0!==h?h:[]}]}]}},{type:"mapChart",size:[2,1],title:"Geolocation info",name:"mapChart",values:{month:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==H?void 0:H.month)||[]}]}],threeMonth:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==H?void 0:H.threeMonth)||[]}]}],tomorrow:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==H?void 0:H.tomorrow)||[]}]}],today:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==H?void 0:H.today)||[]}]}],nextWeek:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==H?void 0:H.nextWeek)||[]}]}],nextTwoWeeks:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==H?void 0:H.nextTwoWeeks)||[]}]}],nextMonth:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==H?void 0:H.nextMonth)||[]}]}],week:[{groupLabel:"Job location by post-code",groupName:"jobsLocation",groupDescription:"Job location by post-code",chartData:[{label:"Job location by post-code",markerIcon:"job",data:(null==H?void 0:H.week)||[]}]}]}},{type:"tile",size:[1,1],colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},title:"Live P1 jobs",description:"Jobs with P1 status scheduled for today but not completed",name:"liveP1Jobs",to:"".concat(z,"/issues?asAt=").concat(ey,"&tileName=liveP1Jobs").concat(f?"&userId=".concat(f):"").concat(I?"&accountId=".concat(I):""),values:{today:(null==j?void 0:j.today)||0,week:(null==j?void 0:j.week)||0,month:(null==j?void 0:j.month)||0,threeMonth:(null==j?void 0:j.threeMonth)||0,year:(null==j?void 0:j.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},title:"P2 jobs today",description:"Jobs with P2 status scheduled for today but not completed",name:"liveP2Jobs",to:"".concat(z,"/issues?asAt=").concat(ey,"&tileName=liveP2Jobs").concat(f?"&userId=".concat(f):"").concat(I?"&accountId=".concat(I):""),values:{today:(null==M?void 0:M.today)||0,week:(null==M?void 0:M.week)||0,month:(null==M?void 0:M.month)||0,threeMonth:(null==M?void 0:M.threeMonth)||0,year:(null==M?void 0:M.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},title:"P3 jobs today",description:"Jobs with P3 status scheduled for today but not completed",name:"liveP3Jobs",to:"".concat(z,"/issues?asAt=").concat(ey,"&tileName=liveP3Jobs").concat(f?"&userId=".concat(f):"").concat(I?"&accountId=".concat(I):""),values:{today:(null==D?void 0:D.today)||0,week:(null==D?void 0:D.week)||0,month:(null==D?void 0:D.month)||0,threeMonth:(null==D?void 0:D.threeMonth)||0,year:(null==D?void 0:D.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},title:"P4 jobs today",description:"Jobs with P4 status scheduled for today but not completed",name:"liveP4Jobs",to:"".concat(z,"/issues?asAt=").concat(ey,"&tileName=liveP4Jobs").concat(f?"&userId=".concat(f):"").concat(I?"&accountId=".concat(I):""),values:{today:(null==B?void 0:B.today)||0,week:(null==B?void 0:B.week)||0,month:(null==B?void 0:B.month)||0,threeMonth:(null==B?void 0:B.threeMonth)||0,year:(null==B?void 0:B.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},title:"P5 jobs today",description:"Jobs with P5 status scheduled for today but not completed",name:"liveP5Jobs",to:"".concat(z,"/issues?asAt=").concat(ey,"&tileName=liveP5Jobs").concat(f?"&userId=".concat(f):"").concat(I?"&accountId=".concat(I):""),values:{today:(null==x?void 0:x.today)||0,week:(null==x?void 0:x.week)||0,month:(null==x?void 0:x.month)||0,threeMonth:(null==x?void 0:x.threeMonth)||0,year:(null==x?void 0:x.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Compliance jobs today",description:"Compliance work orders that are scheduled to take place today",name:"complianceJobToday",to:"".concat(z,"/issues?asAt=").concat(ey,"&tileName=complianceJobToday").concat(f?"&userId=".concat(f):"").concat(I?"&accountId=".concat(I):""),values:{today:(null==J?void 0:J.today)||0,week:(null==J?void 0:J.week)||0,month:(null==J?void 0:J.month)||0,threeMonth:(null==J?void 0:J.threeMonth)||0,year:(null==J?void 0:J.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,20],danger:[21,40],warning:[41,null]},title:"Jobs in progress",description:"Jobs currently in progress",name:"inprogressJobs",to:"".concat(z,"/issues?asAt=").concat(ey,"&tileName=inprogressJobs").concat(f?"&userId=".concat(f):"").concat(I?"&accountId=".concat(I):""),values:{today:(null==T?void 0:T.today)||0,week:(null==T?void 0:T.week)||0,month:(null==T?void 0:T.month)||0,threeMonth:(null==T?void 0:T.threeMonth)||0,year:(null==T?void 0:T.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,4],danger:[5,5],warning:[6,null]},title:"Uplift requests",description:"Jobs where an uplift has been requested but not yet approved or rejected",name:"upliftRequested",to:"".concat(z,"/issues?asAt=").concat(ey,"&tileName=upliftRequested").concat(f?"&userId=".concat(f):"").concat(I?"&accountId=".concat(I):""),values:{today:(null==Q?void 0:Q.today)||0,week:(null==Q?void 0:Q.week)||0,month:(null==Q?void 0:Q.month)||0,threeMonth:(null==Q?void 0:Q.threeMonth)||0,year:(null==Q?void 0:Q.year)||0},greaterIsBetter:!0},{hide:!v&&m,type:"tile",size:[1,1],colourConfig:{success:[0,9],danger:[10,10],warning:[11,null]},title:"Work order value (MTD)",description:"Value of jobs completed in the month to date",name:"worksValueMTD",to:"".concat(z,"/issues?asAt=").concat(ey,"&tileName=worksValueMTD").concat(f?"&userId=".concat(f):"").concat(I?"&accountId=".concat(I):""),values:{today:(null==U?void 0:U.today)||0,week:(null==U?void 0:U.week)||0,month:(null==U?void 0:U.month)||0,threeMonth:(null==U?void 0:U.threeMonth)||0,year:(null==U?void 0:U.year)||0},greaterIsBetter:!0,valueType:"price"},{hide:!v&&m,type:"tile",size:[1,1],colourConfig:{success:[0,9],danger:[10,10],warning:[11,null]},title:"Work order value (YTD)",description:"Value of jobs completed in the year to date",name:"worksValueYTD",to:"".concat(z,"/issues?asAt=").concat(ey,"&tileName=worksValueYTD").concat(f?"&userId=".concat(f):"").concat(I?"&accountId=".concat(I):""),values:{today:(null==V?void 0:V.today)||0,week:(null==V?void 0:V.week)||0,month:(null==V?void 0:V.month)||0,threeMonth:(null==V?void 0:V.threeMonth)||0,year:(null==V?void 0:V.year)||0},greaterIsBetter:!0,valueType:"price"},{hide:!p&&m,type:"tile",size:[1,1],colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Quotes due this week",description:"Quotes where due date is within next 7 days",name:"quotesDueThisWeek",to:"".concat(z,"/quotes?asAt=").concat(ey,"&tileName=quotesDueThisWeek").concat(f?"&userId=".concat(f):"").concat(I?"&accountId=".concat(I):""),values:{today:(null==R?void 0:R.today)||0,week:(null==R?void 0:R.week)||0,month:(null==R?void 0:R.month)||0,threeMonth:(null==R?void 0:R.threeMonth)||0,year:(null==R?void 0:R.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Number of outstanding invoices",description:"The number of invoices that have been sent to customers but not reconciled",name:"outstandingInvoices",to:"".concat(z,"/issues?asAt=").concat(ey,"&tileName=outstandingInvoices").concat(f?"&userId=".concat(f):"").concat(I?"&accountId=".concat(I):""),values:{today:(null==k?void 0:k.today)||0,week:(null==k?void 0:k.week)||0,month:(null==k?void 0:k.month)||0,threeMonth:(null==k?void 0:k.threeMonth)||0,year:(null==k?void 0:k.year)||0},greaterIsBetter:!0},{hide:!v&&m,type:"tile",size:[1,1],colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Value of outstanding invoices",description:"The value of invoices that have been sent to customers but not reconciled",name:"outstandingInvoicesValues",to:"".concat(z,"/issues?asAt=").concat(ey,"&tileName=outstandingInvoices").concat(f?"&userId=".concat(f):"").concat(I?"&accountId=".concat(I):""),values:{today:(null==S?void 0:S.today)||0,week:(null==S?void 0:S.week)||0,month:(null==S?void 0:S.month)||0,threeMonth:(null==S?void 0:S.threeMonth)||0,year:(null==S?void 0:S.year)||0},greaterIsBetter:!0,valueType:"price"},{type:"tile",size:[1,1],colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Threshold approvals outstanding",description:"Work orders and quotes where approval is required based on threshold levels",name:"thresholdApprovals",to:"".concat(z,"/issues?asAt=").concat(ey,"&tileName=thresholdApprovals").concat(f?"&userId=".concat(f):"").concat(I?"&accountId=".concat(I):""),values:{today:(null==Z?void 0:Z.today)||0,week:(null==Z?void 0:Z.week)||0,month:(null==Z?void 0:Z.month)||0,threeMonth:(null==Z?void 0:Z.threeMonth)||0,year:(null==Z?void 0:Z.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Failed jobs",description:"Jobs where supplier has reported failures and these have not been resolved.",name:"failedJobs",to:"".concat(z,"/issues?asAt=").concat(ey,"&tileName=failedJobs").concat(f?"&userId=".concat(f):"").concat(I?"&accountId=".concat(I):""),values:{today:(null==F?void 0:F.today)||0,week:(null==F?void 0:F.week)||0,month:(null==F?void 0:F.month)||0,threeMonth:(null==F?void 0:F.threeMonth)||0,year:(null==F?void 0:F.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Imminent job SLA breaches",description:"These are jobs where there is a potential SLA breach in 1 hour or less.",name:"imminentJobSlaBreaches",to:"".concat(z,"/issues?asAt=").concat(ey,"&tileName=imminentJobSlaBreaches").concat(f?"&userId=".concat(f):"").concat(I?"&accountId=".concat(I):""),values:{today:(null==K?void 0:K.today)||0,week:(null==K?void 0:K.week)||0,month:(null==K?void 0:K.month)||0,threeMonth:(null==K?void 0:K.threeMonth)||0,year:(null==K?void 0:K.year)||0},greaterIsBetter:!0},{hide:!p&&m,type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,5],danger:[6,10],warning:[11,null]},title:"Open remedial quotes",description:"These are remedial quotes that have not yet been resolved -\n        for example, accepted or rejected by the customer or closed.",name:"openRemedialQuotes",to:"".concat(z,"/quotes?asAt=").concat(ey,"&tileName=openRemedialQuotes").concat(f?"&userId=".concat(f):"").concat(I?"&accountId=".concat(I):""),values:{today:(null==X?void 0:X.today)||0,week:(null==X?void 0:X.week)||0,month:(null==X?void 0:X.month)||0,threeMonth:(null==X?void 0:X.threeMonth)||0,year:(null==X?void 0:X.year)||0},greaterIsBetter:!0},{hide:!p&&m,type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,5],danger:[6,10],warning:[11,null]},title:"Open quotes",description:"These are quotes that have not yet been resolved -\n      for example, accepted or rejected by the customer or closed.",name:"openQuotes",to:"".concat(z,"/quotes?asAt=").concat(ey,"&tileName=openQuotes").concat(f?"&userId=".concat(f):"").concat(I?"&accountId=".concat(I):""),values:{today:(null==ee?void 0:ee.today)||0,week:(null==ee?void 0:ee.week)||0,month:(null==ee?void 0:ee.month)||0,threeMonth:(null==ee?void 0:ee.threeMonth)||0,year:(null==ee?void 0:ee.year)||0},greaterIsBetter:!0},{hide:!p&&m,type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"Imminent quote SLA breaches",description:"These are quotes where there is a potential SLA breach in 1 day or less.",name:"imminentQuoteSlaBreaches",to:"".concat(z,"/quotes?asAt=").concat(ey,"&tileName=imminentQuoteSlaBreaches").concat(f?"&userId=".concat(f):"").concat(I?"&accountId=".concat(I):""),values:{today:(null==et?void 0:et.today)||0,week:(null==et?void 0:et.week)||0,month:(null==et?void 0:et.month)||0,threeMonth:(null==et?void 0:et.threeMonth)||0,year:(null==et?void 0:et.year)||0},greaterIsBetter:!0},{hide:!p&&m,type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"SLA breaches",subtitle:"Quotes - Quote return time",description:"These are quotes where the SLA was not returned within the relevant timeframe.",name:"quoteSlaBreached",to:"".concat(z,"/quotes?asAt=").concat(ey,"&tileName=quoteSlaBreached").concat(f?"&userId=".concat(f):"").concat(I?"&accountId=".concat(I):""),values:{today:(null==en?void 0:en.today)||0,week:(null==en?void 0:en.week)||0,month:(null==en?void 0:en.month)||0,threeMonth:(null==en?void 0:en.threeMonth)||0,year:(null==en?void 0:en.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"SLA breaches",subtitle:"Work orders - On site time",description:"These are jobs where the time taken for the engineer /\n       operative to arrive on site was beyond the relevant SLA. ",name:"jobSlaBreachedOnSite",to:"".concat(z,"/issues?asAt=").concat(ey,"&tileName=jobSlaBreachedOnSite").concat(f?"&userId=".concat(f):"").concat(I?"&accountId=".concat(I):""),values:{today:(null==eo?void 0:eo.today)||0,week:(null==eo?void 0:eo.week)||0,month:(null==eo?void 0:eo.month)||0,threeMonth:(null==eo?void 0:eo.threeMonth)||0,year:(null==eo?void 0:eo.year)||0},greaterIsBetter:!0},{type:"tile",size:[1,1],pinned:!0,colourConfig:{success:[0,10],danger:[11,20],warning:[21,null]},title:"SLA breaches",subtitle:"Work orders - Report submission time",description:"These are jobs where the time taken to submit the report\n        to the customer was more than the relevant SL.A.",name:"jobSlaBreachedJobReport",to:"".concat(z,"/issues?asAt=").concat(ey,"&tileName=jobSlaBreachedJobReport").concat(f?"&userId=".concat(f):"").concat(I?"&accountId=".concat(I):""),values:{today:(null==ea?void 0:ea.today)||0,week:(null==ea?void 0:ea.week)||0,month:(null==ea?void 0:ea.month)||0,threeMonth:(null==ea?void 0:ea.threeMonth)||0,year:(null==ea?void 0:ea.year)||0},greaterIsBetter:!0}]),eg=eb.map(function(e){return e.name}),ef={success:[0,10],danger:[11,20],warning:[21,null]},eI=b.reduce(function(e,t){var n,o=t.colourConfig,a=t.pinned,i=t.greaterIsBetter,c=t.name,l=eb.find(function(e){return e.name===c});return l?(0,C.Z)(e).concat([(0,s.Z)((0,r.Z)({},l),{pinned:null!==(n=null!=a?a:l.pinned)&&void 0!==n&&n,colourConfig:void 0===o?ef:o,greaterIsBetter:void 0===i||i})]):e},[]).sort(function(e,t){return eg.indexOf(e)-eg.indexOf(t)});return{fullTilesList:eb,userTilesList:eI}},O=n(5616),E=n(98456),Q=n(86886),U=n(62192),V=n(76665),W=n(44460),Y=n(86550),G=n(12340),H=n(94885),F=n(29422),K=n(30734),X=function(e){var t=e.groupName,n=e.time,o=e.asAt,a=null,r={};switch(t){case"jobsLocation":a=k;break;case"suppliersLocation":a=Z}if("jobsLocation"===t)switch(r.Location={Addresses:{registered:{_eq:!0},entity:{_eq:"Location"},Address:{geo:{_is_null:!1}}}},n){case"today":r._and=[{timingStart:{_lte:o}},{timingStart:{_gte:(0,D.Z)(o)}}];break;case"tomorrow":r._and=[{timingStart:{_lte:(0,F.Z)(o,{days:1})}},{timingStart:{_gte:(0,F.Z)((0,D.Z)(o),{days:1})}}];break;case"nextWeek":r._and=[{timingStart:{_lte:(0,F.Z)(o,{weeks:1})}},{timingStart:{_gte:(0,F.Z)((0,D.Z)(o),{days:1})}}];break;case"nextTwoWeeks":r._and=[{timingStart:{_lte:(0,F.Z)(o,{weeks:2})}},{timingStart:{_gte:(0,F.Z)((0,D.Z)(o),{days:1})}}];break;case"nextMonth":r._and=[{timingStart:{_lte:(0,F.Z)(o,{months:1})}},{timingStart:{_gte:(0,F.Z)((0,D.Z)(o),{days:1})}}];break;case"week":r._and=[{timingStart:{_lte:o}},{timingStart:{_gte:(0,K.Z)(o,{weeks:1})}}];break;case"month":r._and=[{timingStart:{_lte:o}},{timingStart:{_gte:(0,K.Z)(o,{months:1})}}];break;case"threeMonth":r._and=[{timingStart:{_lte:o}},{timingStart:{_gte:(0,K.Z)(o,{months:3})}}]}else r.geo={_is_null:!1},"month"===n&&(r._and=[{createdAt:{_lte:o}},{createdAt:{_gte:(0,K.Z)(o,{months:1})}}]);return{query:a,variables:{where:r}}},ee=function(e){var t=e.state,n=e.data,o=e.groupName,i=e.time,c={};if("suppliersLocation"===o)c=(0,s.Z)((0,r.Z)({},t[o]||{}),(0,a.Z)({},i,n[o].map(function(e){var t,n,o,a=e.id,r=e.geo;return{id:a,account:e.account,user:e.user,position:{lat:null===(t=r.coordinates)||void 0===t?void 0:t[1],lng:null===(n=r.coordinates)||void 0===n?void 0:n[0]}}})));else{var l=n[o].map(function(e){var t,n,o,a,r,s=e.id,i=e.number,c=e.type,l=e.location;return{id:s,number:i,type:c,location:l,supplier:e.supplier,service:e.service,position:{lat:null===(t=l.addresses[0].address.geo)||void 0===t?void 0:null===(n=t.coordinates)||void 0===n?void 0:n[1],lng:null===(o=l.addresses[0].address.geo)||void 0===o?void 0:null===(a=o.coordinates)||void 0===a?void 0:a[0]}}});c=(0,s.Z)((0,r.Z)({},t[o]||{}),(0,a.Z)({},i,l))}return c},et=function(e){var t=e.prevData,n=e.data,o=e.type;return Object.keys(n).reduce(function(e,i){return(0,s.Z)((0,r.Z)({},e),(0,a.Z)({},i,(0,s.Z)((0,r.Z)({},(null==t?void 0:t[i])||{}),(0,a.Z)({},o,n[i]))))},{})},en=function(e){var t,n=e.name,o=e.asAt,a=e.userId,r=e.adminId,s=e.accountId,i=e.time,c=(0,y.Ps)(g(),n,n),l=null;switch(i){case"week":l=(0,K.Z)(o,{weeks:1});break;case"month":l=(0,K.Z)(o,{months:1});break;case"threeMonth":l=(0,K.Z)(o,{months:3});break;case"year":l=(0,K.Z)(o,{years:1})}return{query:c,variables:{adminId:r,accountId:s,asAt:l,dayStart:(0,D.Z)(l),monthStart:(0,M.Z)(l),userId:a,yearStart:(0,B.Z)(l)}}},eo=n(53767),ea=n(74944);function er(){var e=(0,c.Z)(["\n  width: 100%;\n  height: 100%;\n\n  .firstBlock {\n    margin: 0;\n    flex-basis: 50% !important;\n    max-width: 50% !important;\n    min-width: auto;\n  }\n\n  .firstBlockItem {\n    padding-left: 24px;\n    padding-top: 24px;\n  }\n\n  .bigTile {\n    flex-basis: 50% !important;\n    max-width: 50%;\n  }\n\n  .secondBlock {\n    margin: 0;\n    flex-basis: 50% !important;\n    min-width: auto;\n  }\n\n  .secondBlockItem {\n    flex-basis: 50% !important;\n    max-width: 50% !important;\n    padding-left: 24px;\n    padding-top: 24px;\n  }\n\n  @media (max-width: 1550px) {\n    .firstBlock {\n      margin: 0;\n      flex-basis: 100% !important;\n      max-width: 100% !important;\n    }\n\n    .bigTile {\n      flex-basis: 100% !important;\n      max-width: 100%;\n    }\n\n    .secondBlock {\n      flex-basis: 100% !important;\n    }\n    .restTilesBoxItem {\n      flex-basis: 100% !important;\n    }\n  }\n\n  @media (max-width: 800px) {\n    .secondBlock {\n      flex-basis: 100% !important;\n    }\n    .secondBlockItem {\n      flex-basis: 100% !important;\n      max-width: 100% !important;\n  }\n"]);return er=function(){return e},e}function es(){var e=(0,c.Z)(["\n  align-content: flex-start;\n  height: auto;\n  min-height: 400px;\n  justify-content: space-between;\n"]);return es=function(){return e},e}function ei(){var e=(0,c.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n\n  min-width: 824px;\n\n  justify-content: space-between;\n  align-content: space-between;\n"]);return ei=function(){return e},e}function ec(){var e=(0,c.Z)(["\n  justify-content: space-between;\n"]);return ec=function(){return e},e}var el=(0,T.Z)(new Date),eu=function(e){var t,n,c=e.user;e.theme;var h=(0,eo.q)().hasUserModule,y=(0,ea.x)().hasRole,b=(0,S.useRouter)(),g=(0,m.x)(),f=y("customer_user"),I=h("quotes"),Z=h("finances"),k=(0,d.useState)(!1),x=k[0],C=k[1],N=(0,d.useState)({}),q=N[0],P=N[1],L=(0,d.useState)(_),$=L[0],z=L[1],F=(0,d.useState)([]),K=F[0],er=F[1],es=(0,d.useState)([]),ei=es[0],ec=es[1],eu=(0,d.useState)(b.query.asAt?(0,T.Z)((0,j.Z)(b.query.asAt)):el)[0],ev=(0,d.useState)({monthStart:(0,M.Z)(eu),todayEnd:(0,T.Z)(eu),todayStart:(0,D.Z)(eu),yearStart:(0,B.Z)(eu)})[0],ey=(0,d.useState)(b.query.userId?b.query.userId:c.id)[0];(0,d.useEffect)(function(){"/dashboard"===J().pathname&&J().push({pathname:"/dashboard",query:(0,s.Z)((0,r.Z)({},b.query),{asAt:(0,A.Z)(eu,"yyyy-MM-dd"),userId:ey})})},[eu,ey]);var eb=(0,p.a)(H.iM,{variables:{userId:c.id,accountId:c.accountId}}),eg=eb.data,ef=eb.refetch,eI=(null==eg?void 0:null===(t=eg.accountUser)||void 0===t?void 0:null===(n=t[0])||void 0===n?void 0:n.meta)||{},ew=(0,i.Z)((0,v.D)(H.fA),1)[0];(0,d.useEffect)(function(){(null==eI?void 0:eI.dashboard)&&z(eI.dashboard)},[eI]),(0,d.useEffect)(function(){var e=R({isCustomerUser:f,hasQuotesModule:I,hasFinancesModule:Z,asAt:eu,dashboardTilesData:(0,r.Z)({},q),userTiles:$,accountId:c.accountId,userId:ey}),t=e.userTilesList,n=e.fullTilesList;ec(t),er(n)},[eu,q,I,Z,f,c.accountId,ey,$]);var eZ,ek,eS,eJ=(0,p.a)(w,{variables:{accountId:c.accountId,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,adminId:c.adminId,asAt:eu,currentUserId:c.id,dayStart:ev.todayStart,monthStart:ev.monthStart,userId:ey,yearStart:ev.yearStart},onCompleted:function(e){P(function(t){return(0,r.Z)((0,s.Z)((0,r.Z)({},t,et({prevData:t,data:e.dashboardTilesData[0],type:"today"})),{jobsOnThisMonth:e.chartJobsPerDay.jobsOnThisMonth}),e.chartRevenuesPerDay[0],e.chartRevenuesPerYear[0])}),eM()}}),eT=eJ.loading,ej=eJ.refetch,eM=(eZ=(0,o.Z)(function(){var e,t;return(0,l.__generator)(this,function(e){switch(e.label){case 0:var n;return[4,Promise.all($.map((n=(0,o.Z)(function(e){var t,n,o,r,s,u,d,h,m,p;return(0,l.__generator)(this,function(n){switch(n.label){case 0:if(t=e.name,"tile"!==e.type)return[2,{}];return r=(o=en({name:t,asAt:eu,adminId:c.adminId,accountId:c.accountId,userId:ey,time:"week"})).query,s=o.variables,[4,g.query({query:r,variables:s})];case 1:return h=void 0===(d=n.sent().data)?(0,a.Z)({},t,[{sum:0}]):d,p=(0,i.Z)(h[t],1)[0].sum,[2,(0,a.Z)({},t,p||0)]}})}),function(e){return n.apply(this,arguments)})))];case 1:return t=e.sent().reduce(function(e,t){return(0,r.Z)({},e,t)},{}),P(function(e){return(0,r.Z)({},e,et({prevData:e,data:t,type:"week"}))}),[2]}})}),function(){return eZ.apply(this,arguments)}),eD=function(e){var t=e.tiles,n=e.skipRefetch,o=e.skipRefetchMeta;ew({variables:{userId:c.id,accountId:c.accountId,changes:{meta:(0,s.Z)((0,r.Z)({},eI),{dashboard:t})}}}).then(function(){n||ej(),o||ef()})},eB=function(e){eD({tiles:$.filter(function(t){return t.name!==e})})},eA=function(e,t){eD({tiles:$.map(function(n){return n.name===e?(0,s.Z)((0,r.Z)({},n),{colourConfig:t}):n}),skipRefetch:!0})},ex=(ek=(0,o.Z)(function(e,t){var n,o,u,d,h,m,p,v;return(0,l.__generator)(this,function(l){switch(l.label){case 0:return o=(n=en({name:e,asAt:eu,adminId:c.adminId,accountId:c.accountId,userId:ey,time:t})).query,u=n.variables,[4,g.query({query:o,variables:u})];case 1:return m=void 0===(h=l.sent().data)?(0,a.Z)({},e,[{sum:0}]):h,v=(0,i.Z)(m[e],1)[0].sum,P(function(n){return(0,s.Z)((0,r.Z)({},n),(0,a.Z)({},e,(0,s.Z)((0,r.Z)({},n[e]||{}),(0,a.Z)({},t,v||0))))}),[2]}})}),function(e,t){return ek.apply(this,arguments)}),e_=(eS=(0,o.Z)(function(e,t){var n,o,i,c;return(0,l.__generator)(this,function(l){switch(l.label){case 0:return o=(n=X({groupName:e,time:t,asAt:eu})).query,i=n.variables,[4,g.query({query:o,variables:i})];case 1:return c=l.sent().data,P(function(n){return(0,s.Z)((0,r.Z)({},n),(0,a.Z)({},e,ee({state:n,data:c,groupName:e,time:t})))}),[2]}})}),function(e,t){return eS.apply(this,arguments)}),eC=(0,d.useCallback)(function(){var e=[],t=[],n=[],o=[];if(ei.forEach(function(e){"tile"===e.type&&e.pinned?t.push(e):"mapChart"===e.type||"chart"===e.type?n.push(e):o.push(e)}),t.length){var a=(0,u.jsx)(em,{container:!0,spacing:3,className:"firstBlock",children:t.map(function(e){var t=e.title,n=e.subtitle,o=e.name,a=e.description,r=e.colourConfig,s=e.values,i=e.valueType,c=e.size,l=e.to,d=e.greaterIsBetter;return(0,u.jsx)(V.Z,{name:o,asAt:eu,className:"firstBlockItem",xs:12,sm3:6,colourConfig:r,title:t,subtitle:n,description:a,to:l,values:s,valueType:i,size:c,greaterIsBetter:d,editable:!0,onEdit:function(){return C(!0)},onVersusChange:ex,onConfigChange:eA})})});e.push(a)}if(n.length){var r=n.map(function(e){var t=e.type,n=e.title,o=e.description,a=e.name,r=e.values,s=e.size;return"chart"===t?(0,u.jsx)(Q.ZP,{item:!0,className:"bigTile",children:(0,u.jsx)(W.Z,{asAt:eu,title:n,description:o,showLegend:!0,name:a,data:r,size:s})}):"mapChart"===t?(0,u.jsx)(Q.ZP,{item:!0,className:"bigTile",children:(0,u.jsx)(Y.Z,{asAt:eu,title:n,description:o,showLegend:!0,name:a,data:r,size:s,onChangeChartGroup:e_})}):null});e.push(r)}if(n.length%2==0){var s=o.splice(0,4),i=(0,u.jsx)(em,{container:!0,spacing:3,className:"secondBlock",children:s.slice(0,4).map(function(e,t){var n=e.title,o=e.subtitle,a=e.name,r=e.description,i=e.colourConfig,c=e.values,l=e.valueType,d=e.size,h=e.to,m=e.greaterIsBetter;return(0,u.jsx)(V.Z,{name:a,asAt:eu,className:"secondBlockItem",sm:12,lg:6,xl:t===s.length-4?12:4,colourConfig:i,title:n,subtitle:o,description:r,to:h,values:c,valueType:l,size:d,greaterIsBetter:m,onVersusChange:ex,onConfigChange:eA})})});e.push(i)}var c=o.map(function(e){var t=e.name,n=e.subtitle,o=e.title,a=e.description,r=e.colourConfig,s=e.values,i=e.valueType,c=e.size,l=e.to,d=e.greaterIsBetter;return(0,u.jsx)(V.Z,{asAt:eu,xs:12,sm3:6,xl:3,className:"restTilesBoxItem",colourConfig:r,name:t,title:o,subtitle:n,description:a,to:l,values:s,valueType:i,size:c,greaterIsBetter:d,editable:!0,onEdit:function(){return C(!0)},deletable:!0,onDelete:eB,onVersusChange:ex,onConfigChange:eA})});K.length>ei.length&&c.push((0,u.jsx)(U.Z,{width:"100%",xs:12,sm3:6,xl:3,onAddCard:function(){return C(!0)}}));var l=(0,u.jsx)(ep,{container:!0,spacing:3,m:0,sx:{justifyContent:"flex-start"},children:c});return e.push(l),(0,u.jsx)(eh,{container:!0,spacing:3,children:e})},[ei]);return(0,u.jsxs)(O.Z,{sx:{width:"100%",height:"100%"},children:[(0,u.jsx)(ed,{children:eT?(0,u.jsx)(O.Z,{sx:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,u.jsx)(E.Z,{})}):eC()}),(0,u.jsx)(G.Z,{open:x,fullTilesList:K,selectedTiles:$,onSaveTilesList:function(e){return eD({tiles:e})},onClose:function(){return C(!1)}})]})},ed=(0,x.ZP)(O.Z).withConfig({displayName:"dashboard__DashboardBox",componentId:"sc-8b5bc436-0"})(er()),eh=(0,x.ZP)(Q.ZP).withConfig({displayName:"dashboard__SecondRowBox",componentId:"sc-8b5bc436-1"})(es()),em=(0,x.ZP)(Q.ZP).withConfig({displayName:"dashboard__FirstBox",componentId:"sc-8b5bc436-2"})(ei()),ep=(0,x.ZP)(Q.ZP).withConfig({displayName:"dashboard__RestTilesBox",componentId:"sc-8b5bc436-3"})(ec());eu.propTypes={user:h.object.isRequired};var ev=(0,x.Zz)(eu)}}]);