"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9766],{18531:function(e,n,t){t.d(n,{q:function(){return p}});var r=t(26042),i=t(69396),a=t(99534),o=t(85893),s=t(87918),l=t(98456),c=t(23776),u=t(50135),d=t(67294),x=t(45697),h=t.n(x),p=function(e){var n=e.loading,t=e.setSearch,x=e.textFieldProps,h=(e.disableClearable,(0,a.Z)(e,["loading","setSearch","textFieldProps","disableClearable"])),p=(0,d.useState)(""),f=p[0],g=p[1];return(0,d.useEffect)(function(){var e=setTimeout(function(){t(f)},500);return function(){return clearTimeout(e)}},[f,t]),(0,o.jsx)(c.Z,(0,i.Z)((0,r.Z)({isOptionEqualToValue:function(e,n){return e.value===n.value}},h),{loading:n,onInputChange:function(e,n){g(n)},getOptionLabel:function(e){return"".concat(e.label)},renderTags:function(e,n){return e.map(function(e,t){return(0,o.jsx)(s.Z,(0,r.Z)({size:"small",label:e.label},n({index:t})))})},renderInput:function(e){return(0,o.jsx)(u.Z,(0,i.Z)((0,r.Z)({},e,x),{InputProps:(0,i.Z)((0,r.Z)({},e.InputProps,x.InputProps||{}),{endAdornment:(0,o.jsxs)(o.Fragment,{children:[n?(0,o.jsx)(l.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))}}))};p.defaultProps={color:"secondary",onChange:function(){},options:[],onOpen:function(){},setSearch:function(){},textFieldProps:{}},p.propTypes={multiple:h().bool,limitTags:h().number,filterSelectedOptions:h().bool,color:h().string,loading:h().bool,value:h().oneOf([h().array,h().object]),onChange:h().func,options:h().arrayOf(h().shape({value:h().any.isRequired,label:h().string.isRequired})).isRequired,onOpen:h().func,setSearch:h().func,textFieldProps:h().shape({label:h().string,variant:h().oneOf(["standard"]),color:h().string,error:h().bool,helperText:h().string})}},89766:function(e,n,t){t.r(n),t.d(n,{Dux:function(){return eH}});var r=t(85893),i=t(29815),a=t(67294),o=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.maxRetries,r=void 0===t?5:t,i=n.retryInterval,o=void 0===i?1e3:i,s=n.exponentialBackoff,l=void 0===s||s,c=(0,a.useState)(WebSocket.CLOSED),u=c[0],d=c[1],x=(0,a.useState)(null),h=x[0],p=x[1],f=(0,a.useState)(null),g=f[0],m=f[1],Z=(0,a.useRef)(null),j=(0,a.useRef)(0),v=(0,a.useCallback)(function(){return Z.current},[]),b=(0,a.useCallback)(function(e){u===WebSocket.OPEN?Z.current.send(e):console.warn("WebSocket is not open.")},[u]),y=(0,a.useCallback)(function(e){b(JSON.stringify(e))},[b]),C=(0,a.useCallback)(function(){var n=new WebSocket(e);n.binaryType="arraybuffer",Z.current=n,n.onopen=function(){d(n.readyState),j.current=0},n.onmessage=function(e){p(e.data);try{var n=JSON.parse(e.data);m(n)}catch(t){console.warn("Received non-JSON message")}},n.onclose=function(){if(d(n.CLOSED),j.current<r){var e=l?o*Math.pow(2,j.current):o;j.current+=1,setTimeout(C,e)}},n.onerror=function(){d(n.CLOSED)}},[e,r,o,l]);return(0,a.useEffect)(function(){return C(),function(){Z.current&&Z.current.close()}},[C]),{sendMessage:b,sendJsonMessage:y,lastMessage:h,lastJsonMessage:g,readyState:u,getWebSocket:v}},s=(0,a.createContext)(null),l=function(e){var n=e.children,t=(0,a.useState)(!1),l=t[0],c=t[1],u=o("https://dux-server-pre-prod.cleverly.works/chat/"),d=u.sendMessage,x=u.sendJsonMessage,h=u.lastMessage,p=u.lastJsonMessage,f=u.readyState,g=(0,a.useCallback)(function(){c(!0)},[]),m=(0,a.useCallback)(function(){c(!1)},[]);return(0,r.jsx)(s.Provider,{value:{isOpen:l,open:g,close:m,sendMessage:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return d.apply(void 0,(0,i.Z)(n))},sendJsonMessage:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return x.apply(void 0,(0,i.Z)(n))},lastMessage:h,lastJsonMessage:p,readyState:f},children:n})},c=function(){var e=(0,a.useContext)(s);if(!e)throw Error("useDux must be used within a DuxProvider");return e},u=t(47568),d=t(14924),x=t(26042),h=t(69396),p=t(97582),f=t(74944),g=t(5616),m=t(69661),Z=t(15861),j=t(11057),v=t(51233),b=t(90948),y=t(76388),C=function(e){if("Cleverly"===e)return"/static/logo/icon-white.png"},w=t(30381),S=t.n(w),k=t(18531),P=t(41796),I=function(){return(0,r.jsx)(D,{className:"dot-flashing-container",children:(0,r.jsx)("div",{className:"dot-flashing"})})},D=(0,b.ZP)("div")(function(e){var n=e.theme;return{"&.dot-flashing-container":{marginLeft:"15px"},"& .dot-flashing":{position:"relative",width:"10px",height:"10px",borderRadius:"5px",backgroundColor:n.palette.secondary.main,color:n.palette.secondary.main,animation:"dot-flashing 1s infinite linear alternate",animationDelay:"0.5s"},"& .dot-flashing::before, .dot-flashing::after":{content:"''",display:"inline-block",position:"absolute",top:0},"& .dot-flashing::before":{left:"-15px",width:"10px",height:"10px",borderRadius:"5px",backgroundColor:n.palette.secondary.main,color:n.palette.secondary.main,animation:"dot-flashing 1s infinite alternate",animationDelay:"0s"},"& .dot-flashing::after":{left:"15px",width:"10px",height:"10px",borderRadius:"5px",backgroundColor:n.palette.secondary.main,color:n.palette.secondary.main,animation:"dot-flashing 1s infinite alternate",animationDelay:"1s"},"@keyframes dot-flashing":{"0%":{backgroundColor:n.palette.secondary.main},"50%, 100%":{backgroundColor:(0,P.$n)(n.palette.secondary.main,.8)}}}}),O=function(e){var n=e.loading,t=e.messages,i=e.showCreateNew,a=e.onSuggestionSelect,o=e.onCreateNewClick;return(0,r.jsxs)(W,{children:[t.map(function(e,n){var t;return(0,r.jsxs)(T,{children:[(0,r.jsx)(m.Z,(0,h.Z)((0,x.Z)({},(0,y.G)(e.fullName)),{src:C(e.fullName)})),(0,r.jsxs)(N,{children:[(0,r.jsx)(R,{children:e.fullName}),(0,r.jsx)(M,{children:"message"===e.type?e.text:"message-with-suggestions"===e.type?(0,r.jsxs)(v.Z,{spacing:1,children:[(0,r.jsx)(Z.Z,{children:e.text}),Object.keys(e.suggestions).map(function(n){return(0,r.jsx)(k.q,{options:e.suggestions[n],textFieldProps:{label:"Select ".concat(n),color:"secondary"},onChange:function(t,r){return a(e,n,r)}})})]}):void 0}),(0,r.jsx)(E,{children:S()(e.timestamp).format("HH:mm")})]})]},n)}),n&&(0,r.jsxs)(T,{children:[(0,r.jsx)(m.Z,(0,h.Z)((0,x.Z)({},(0,y.G)("Cleverly")),{src:C("Cleverly")})),(0,r.jsx)(g.Z,{sx:{display:"flex",paddingLeft:"15px",alignItems:"center"},children:(0,r.jsx)(I,{})})]},"loading"),i&&(0,r.jsx)(j.Z,{color:"secondary",variant:"contained",sx:{position:"sticky",bottom:0,zIndex:10},onClick:o,children:"Start new conversation"})]})},W=(0,b.ZP)(g.Z)(function(e){return{position:"relative",display:"flex",flexDirection:"column",height:"100%",padding:"16px",backgroundColor:e.theme.palette.white.main,borderRadius:"8px",overflow:"auto","&>:not(style):not(style)":{marginBottom:"16px"}}}),T=(0,b.ZP)(g.Z)(function(){return{display:"flex"}}),N=(0,b.ZP)(g.Z)(function(){return{display:"flex",width:"100%",flexDirection:"column",marginLeft:"8px",boxShadow:"0px 2px 1px -1px rgba(0,0,0,0.2),\n    0px 1px 1px 0px rgba(0,0,0,0.14),\n    0px 1px 3px 0px rgba(0,0,0,0.12)",borderRadius:"4px",padding:"8px"}}),R=(0,b.ZP)(Z.Z)(function(){return{fontWeight:700}}),M=(0,b.ZP)(Z.Z)(function(){return{}}),E=(0,b.ZP)(Z.Z)(function(){return{alignSelf:"flex-end"}}),F=t(50135),A=t(93946),B=t(8821),L=t(24339),H=j.Z,J=function(e){var n=e.onSend,t=e.onFileUpload,i=(0,a.useState)(""),o=i[0],s=i[1],l=function(){o.trim()&&(n(o),s(""))},c=function(e){e.target.files&&e.target.files[0]&&t(e.target.files[0])},u=function(e){"Enter"===e.key&&l()};return(0,r.jsxs)(v.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,r.jsxs)(A.Z,{component:"label",children:[(0,r.jsx)(B.Z,{}),(0,r.jsx)(_,{type:"file",onChange:c})]}),(0,r.jsx)(F.Z,{fullWidth:!0,color:"secondary",value:o,onChange:function(e){return s(e.target.value)},placeholder:"Message Dux...",onKeyDown:u,sx:{"& .MuiInputBase-root":{bgcolor:"white.main"}}}),(0,r.jsx)(H,{disableMinWidth:!0,variant:"contained",sx:{height:"36px",backgroundColor:"#304268","&.MuiButtonBase-root.MuiButton-root:hover":{backgroundColor:(0,P.$n)("#304268",.2)}},onClick:l,children:(0,r.jsx)(L.Z,{})})]})},_=(0,b.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1}),U=t(828),q=t(86532),z=t(86886),G=t(38895),$=t(22797),K=t(94054),V=t(79717),Y=t(50480),Q=t(36872),X=t(69368),ee=t(90629),en=t(18972),et=t(18360),er=t(47312),ei=t(72882),ea=t(7906),eo=t(53184),es=t(68509),el=t(53252),ec=t(295),eu=t(23508),ed=t(36191),ex=["Hours","Minutes","Days"],eh=["Today","This week","This month","Next three months"],ep=["admin","customer","contactUser","source","jobDescription","costCategory","service","property","sublocation","assetCategory"],ef=function(e){var n=e.responseData,t=c().close,i=(0,a.useState)({admin:null,customer:null,contactUser:null,source:null,property:null,sublocation:null,access:"",assetCategory:null,jobDescription:null,workDescription:"",priority:"",estimatedDuration:"",unit:"",reference:"",costCategory:null,service:null,pricing:"",timeSpan:"",timing:"",startTime:"",endTime:"",allowPremiumRates:!1,compliance:!1,jobHistory:[]}),o=i[0],s=i[1];(0,a.useEffect)(function(){if(n&&"pdf_result"===n.type){var e=Object.entries(n.data).reduce(function(e,n){var t=(0,U.Z)(n,2),r=t[0],i=t[1];return"string"!=typeof i||ep.includes(r)?"string"==typeof i&&ep.includes(r)?e[r]={label:i,value:i}:"object"==typeof i&&null!==i&&ep.includes(r)&&i.label&&i.value&&(e[r]={label:i.label,value:i.value}):e[r]=i,e},{});s(function(n){return(0,x.Z)({},n,e)})}},[n]);var l=function(e,n){s(function(t){return(0,h.Z)((0,x.Z)({},t),(0,d.Z)({},e,n))})},u=function(e){s(function(n){return(0,h.Z)((0,x.Z)({},n),(0,d.Z)({},e,!n[e]))})},p=function(){t()},f=function(e,n){return(0,r.jsx)(K.Z,{fullWidth:!0,margin:"dense",variant:"outlined",style:{position:"relative"},children:(0,r.jsx)(k.q,{options:[],value:o[n],onChange:function(e,t){return l(n,t)},textFieldProps:{label:e,color:"secondary"}})})};return n?(0,r.jsxs)(eg,{children:[(0,r.jsx)(em,{children:(0,r.jsx)(A.Z,{onClick:p,children:(0,r.jsx)(ed.Z,{})})}),(0,r.jsx)(eZ,{children:(0,r.jsxs)(z.ZP,{container:!0,columnSpacing:2,children:[(0,r.jsx)(z.ZP,{item:!0,xs:6,children:(0,r.jsxs)(v.Z,{spacing:2,children:[(0,r.jsx)(ev,{children:(0,r.jsxs)(q.Z,{defaultExpanded:!0,children:[(0,r.jsx)(G.Z,{expandIcon:(0,r.jsx)(eu.Z,{}),children:(0,r.jsx)(Z.Z,{variant:"subtitle1",children:"Admin User"})}),(0,r.jsx)($.Z,{children:f("Assigned to","admin")})]})}),(0,r.jsx)(ev,{children:(0,r.jsxs)(q.Z,{defaultExpanded:!0,children:[(0,r.jsx)(G.Z,{expandIcon:(0,r.jsx)(eu.Z,{}),children:(0,r.jsx)(Z.Z,{variant:"subtitle1",children:"Customer"})}),(0,r.jsxs)($.Z,{children:[f("Customer","customer"),f("Contact User","contactUser"),f("Source","source")]})]})}),(0,r.jsx)(ev,{children:(0,r.jsxs)(q.Z,{defaultExpanded:!0,children:[(0,r.jsx)(G.Z,{expandIcon:(0,r.jsx)(eu.Z,{}),children:(0,r.jsx)(Z.Z,{variant:"subtitle1",children:"Description"})}),(0,r.jsxs)($.Z,{children:[f("Short job description","jobDescription"),(0,r.jsx)(K.Z,{fullWidth:!0,margin:"dense",variant:"outlined",children:(0,r.jsx)(F.Z,{label:"Work Description",value:o.workDescription,onChange:function(e){return l("workDescription",e.target.value)},multiline:!0,variant:"outlined"})}),(0,r.jsx)(K.Z,{component:"fieldset",margin:"dense",children:(0,r.jsxs)(V.Z,{row:!0,value:o.priority,onChange:function(e){return l("priority",e.target.value)},children:[(0,r.jsx)(Y.Z,{value:"P0",control:(0,r.jsx)(Q.Z,{}),label:"P0"}),(0,r.jsx)(Y.Z,{value:"P1",control:(0,r.jsx)(Q.Z,{}),label:"P1"}),(0,r.jsx)(Y.Z,{value:"P2",control:(0,r.jsx)(Q.Z,{}),label:"P2"}),(0,r.jsx)(Y.Z,{value:"P3",control:(0,r.jsx)(Q.Z,{}),label:"P3"}),(0,r.jsx)(Y.Z,{value:"P4",control:(0,r.jsx)(Q.Z,{}),label:"P4"}),(0,r.jsx)(Y.Z,{value:"P5",control:(0,r.jsx)(Q.Z,{}),label:"P5"})]})}),(0,r.jsx)(K.Z,{fullWidth:!0,margin:"dense",variant:"outlined",children:(0,r.jsx)(F.Z,{label:"Estimated duration",type:"number",value:o.estimatedDuration,onChange:function(e){return l("estimatedDuration",e.target.value)},variant:"outlined"})}),(0,r.jsxs)(K.Z,{fullWidth:!0,margin:"dense",variant:"outlined",children:[(0,r.jsx)(er.Z,{children:"Unit"}),(0,r.jsx)(et.Z,{value:o.unit,onChange:function(e){return l("unit",e.target.value)},label:"Unit",children:ex.map(function(e){return(0,r.jsx)(en.Z,{value:e,children:e},e)})})]}),(0,r.jsx)(K.Z,{fullWidth:!0,margin:"dense",variant:"outlined",children:(0,r.jsx)(F.Z,{label:"Customer reference",value:o.reference,onChange:function(e){return l("reference",e.target.value)},variant:"outlined"})}),(0,r.jsx)(Y.Z,{control:(0,r.jsx)(X.Z,{checked:o.compliance,onChange:function(){return u("compliance")}}),label:"Compliance"})]})]})}),(0,r.jsx)(ev,{children:(0,r.jsxs)(q.Z,{defaultExpanded:!0,children:[(0,r.jsx)(G.Z,{expandIcon:(0,r.jsx)(eu.Z,{}),children:(0,r.jsx)(Z.Z,{variant:"subtitle1",children:"Service"})}),(0,r.jsxs)($.Z,{children:[f("Cost category","costCategory"),f("Service","service")]})]})}),(0,r.jsx)(ev,{children:(0,r.jsxs)(q.Z,{defaultExpanded:!0,children:[(0,r.jsx)(G.Z,{expandIcon:(0,r.jsx)(eu.Z,{}),children:(0,r.jsx)(Z.Z,{variant:"subtitle1",children:"Pricing"})}),(0,r.jsx)($.Z,{children:(0,r.jsx)(K.Z,{component:"fieldset",margin:"dense",children:(0,r.jsxs)(V.Z,{row:!0,value:o.pricing,onChange:function(e){return l("pricing",e.target.value)},children:[(0,r.jsx)(Y.Z,{value:"Time & Materials",control:(0,r.jsx)(Q.Z,{}),label:"Time & Materials"}),(0,r.jsx)(Y.Z,{value:"Fixed",control:(0,r.jsx)(Q.Z,{}),label:"Fixed"})]})})})]})}),(0,r.jsx)(ev,{children:(0,r.jsxs)(q.Z,{defaultExpanded:!0,children:[(0,r.jsx)(G.Z,{expandIcon:(0,r.jsx)(eu.Z,{}),children:(0,r.jsx)(Z.Z,{variant:"subtitle1",children:"Timing"})}),(0,r.jsxs)($.Z,{children:[(0,r.jsxs)(K.Z,{fullWidth:!0,margin:"dense",variant:"outlined",children:[(0,r.jsx)(er.Z,{children:"Select Time span"}),(0,r.jsx)(et.Z,{value:o.timeSpan,onChange:function(e){return l("timeSpan",e.target.value)},label:"Select Time span",children:eh.map(function(e){return(0,r.jsx)(en.Z,{value:e,children:e},e)})})]}),(0,r.jsx)(K.Z,{fullWidth:!0,margin:"dense",variant:"outlined",children:(0,r.jsx)(F.Z,{label:"Timing",value:o.timing,onChange:function(e){return l("timing",e.target.value)},variant:"outlined"})}),(0,r.jsx)(K.Z,{fullWidth:!0,margin:"dense",variant:"outlined",children:(0,r.jsx)(F.Z,{label:"Start time",type:"time",value:o.startTime,onChange:function(e){return l("startTime",e.target.value)},variant:"outlined",InputLabelProps:{shrink:!0}})}),(0,r.jsx)(K.Z,{fullWidth:!0,margin:"dense",variant:"outlined",children:(0,r.jsx)(F.Z,{label:"End time",type:"time",value:o.endTime,onChange:function(e){return l("endTime",e.target.value)},variant:"outlined",InputLabelProps:{shrink:!0}})}),(0,r.jsx)(Y.Z,{control:(0,r.jsx)(X.Z,{checked:o.allowPremiumRates,onChange:function(){return u("allowPremiumRates")}}),label:"Allow premium rates to be used"})]})]})})]})}),(0,r.jsx)(z.ZP,{item:!0,xs:6,children:(0,r.jsxs)(v.Z,{spacing:2,children:[(0,r.jsx)(ev,{children:(0,r.jsxs)(q.Z,{defaultExpanded:!0,children:[(0,r.jsx)(G.Z,{expandIcon:(0,r.jsx)(eu.Z,{}),children:(0,r.jsx)(Z.Z,{variant:"subtitle1",children:"Location"})}),(0,r.jsxs)($.Z,{children:[f("Property","property"),f("Sublocation","sublocation"),(0,r.jsx)(K.Z,{fullWidth:!0,margin:"dense",variant:"outlined",children:(0,r.jsx)(F.Z,{label:"Access information",value:o.access,onChange:function(e){return l("access",e.target.value)},multiline:!0,variant:"outlined"})}),f("Asset Category","assetCategory")]})]})}),(0,r.jsx)(ev,{children:(0,r.jsxs)(q.Z,{defaultExpanded:!0,children:[(0,r.jsx)(G.Z,{expandIcon:(0,r.jsx)(eu.Z,{}),children:(0,r.jsx)(Z.Z,{variant:"subtitle1",children:"Job History"})}),(0,r.jsx)($.Z,{children:(0,r.jsx)(ei.Z,{component:ee.Z,children:(0,r.jsxs)(ea.Z,{size:"small",children:[(0,r.jsx)(eo.Z,{children:(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(el.Z,{children:"Title"}),(0,r.jsx)(el.Z,{children:"Service"}),(0,r.jsx)(el.Z,{children:"Date"})]})}),(0,r.jsx)(ec.Z,{children:o.jobHistory.length>0?o.jobHistory.map(function(e,n){return(0,r.jsxs)(es.Z,{children:[(0,r.jsx)(el.Z,{children:e.title}),(0,r.jsx)(el.Z,{children:e.service}),(0,r.jsx)(el.Z,{children:e.date})]},n)}):(0,r.jsx)(es.Z,{children:(0,r.jsx)(el.Z,{colSpan:3,align:"center",children:"No job history available"})})})]})})})]})})]})})]})}),(0,r.jsx)(ej,{children:(0,r.jsx)(j.Z,{variant:"contained",color:"primary",children:"Submit"})})]}):(0,r.jsxs)(eg,{small:!0,children:[(0,r.jsx)(em,{children:(0,r.jsx)(A.Z,{onClick:p,children:(0,r.jsx)(ed.Z,{})})}),(0,r.jsx)(v.Z,{justifyContent:"center",alignItems:"center",p:2,sx:{height:"calc(100% - 40px)"},children:(0,r.jsx)(eb,{src:"/static/dux/right-response.png",alt:"Cleverly Logo",sx:{width:"auto",height:"240px"}})})]})},eg=(0,b.ZP)(g.Z)(function(e){var n=e.theme;return{width:e.small?"40%":"60%",borderTopRightRadius:"12px",borderBottomRightRadius:"12px",backgroundColor:n.palette.background.default,transition:"width 0.6s"}}),em=(0,b.ZP)(g.Z)(function(){return{width:"100%",display:"flex",justifyContent:"flex-end"}}),eZ=(0,b.ZP)(g.Z)(function(){return{height:"calc(100% - 120px)",width:"100%",padding:"20px",overflow:"auto"}}),ej=(0,b.ZP)(g.Z)(function(){return{display:"flex",justifyContent:"flex-end",padding:"16px"}}),ev=(0,b.ZP)(g.Z)(function(){return{}}),eb=(0,b.ZP)("img")(function(){return{width:"100%",transform:"translateY(-40px)"}}),ey=t(50594),eC=function(e){var n=e.open,t=e.close,i=e.handleCreateWorkOrder;return(0,r.jsx)(ew,{open:n,onClose:t,children:(0,r.jsxs)(eS,{children:[(0,r.jsx)(A.Z,{sx:{alignSelf:"flex-end"},onClick:t,children:(0,r.jsx)(ey.Z,{})}),(0,r.jsxs)(v.Z,{width:"100%",alignItems:"center",spacing:2,children:[(0,r.jsxs)(v.Z,{width:"100%",alignItems:"center",children:[(0,r.jsx)("img",{src:"/static/logo/icon-white.png",style:{width:"70px",height:"70px",borderRadius:"50%",marginBottom:"16px"}}),(0,r.jsx)(Z.Z,{children:"Hi, I’m Dux - your Cleverly AI Assistant."}),(0,r.jsx)(Z.Z,{children:"What can I do for you today?"}),(0,r.jsx)(Z.Z,{children:"Choose one of the options below and we will get started!"})]}),(0,r.jsx)(j.Z,{fullWidth:!0,color:"secondary",variant:"contained",onClick:i,children:"Create a work order"}),(0,r.jsx)(j.Z,{fullWidth:!0,color:"secondary",variant:"contained",children:"Get help with Cleverly"}),(0,r.jsx)(j.Z,{fullWidth:!0,color:"secondary",variant:"contained",children:"Get a report"}),(0,r.jsx)(j.Z,{fullWidth:!0,color:"secondary",variant:"contained",children:"Ask Cleverly a question"})]})]})})},ew=(0,b.ZP)(g.Z)(function(e){return{display:e.open?"flex":"none",position:"absolute",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",zIndex:1300,backgroundColor:"rgba(0, 0, 0, 0.5)",borderRadius:"12px"}}),eS=(0,b.ZP)(ee.Z)(function(){return{width:"100%",maxWidth:"500px",padding:"16px",display:"flex",flexDirection:"column"}}),ek=t(11994),eP=t(28886),eI=t(25934),eD=function(){return{id:(0,eI.Z)(),type:"message",fullName:"Cleverly",text:"Great! Drop a document with the work order information\n  in it or paste the text into the window below, and I will get started.",timestamp:S()().toISOString()}},eO=function(e){var n=e.fullName,t=e.fileName;return{id:(0,eI.Z)(),type:"message",fullName:n,text:(0,r.jsxs)(v.Z,{direction:"row",alignItems:"center",children:[(0,r.jsx)("span",{children:"PDF file:"}),(0,r.jsx)(eP.Z,{sx:{ml:1}}),(0,r.jsx)("span",{children:t})]}),timestamp:S()().toISOString()}},eW=function(e){var n=e.status,t=e.suggestions;return"success"===n&&t?{id:(0,eI.Z)(),type:"message-with-suggestions",fullName:"Cleverly",text:"Please see the work order created on the right.\n      To generate the work order, you must press submit. However,\n      please check this information and ensure you are happy with all the relevant information.",suggestions:t,timestamp:S()().toISOString()}:("success"!==n||t)&&"validation_error"!==n?void 0:{id:(0,eI.Z)(),type:"message",fullName:"Cleverly",text:"Please see the work order created on the right.\n      To generate the work order, you must press submit. However,\n      please check this information and ensure you are happy with all the relevant information.",timestamp:S()().toISOString()}},eT=function(e,n,t){var i=e.id,a=e.text;return{id:i,type:"message",fullName:"Cleverly",text:(0,r.jsxs)(v.Z,{spacing:2,children:[(0,r.jsx)(Z.Z,{children:a}),(0,r.jsxs)(Z.Z,{children:["Selected ",n," is ",t.label]})]}),timestamp:S()().toISOString()}},eN=t(71496),eR=function(){var e=(0,f.x)().user,n=c(),t=n.isOpen,o=n.open,s=n.close,l=n.sendMessage,g=n.lastJsonMessage,m=(0,a.useState)([]),Z=m[0],j=m[1],v=(0,a.useState)(!1),b=v[0],y=v[1],C=(0,a.useState)(!0),w=C[0],k=C[1],P=(0,a.useState)(null),I=P[0],D=P[1],W=(0,a.useState)(null),T=W[0],N=W[1];(0,a.useEffect)(function(){"createWorkOrder"===I&&j(function(e){return(0,i.Z)(e).concat([eD()])})},[I]),(0,a.useEffect)(function(){if(null!==g){if("message"===g.type){var e={fullName:"Cleverly",text:g.text,timestamp:S()().toISOString()};j(function(n){return(0,i.Z)(n).concat([e])})}else"pdf_result"===g.type&&(y(!1),j(function(e){return(0,i.Z)(e).concat([eW(g)])}),N(g))}},[g]);var R=(0,a.useCallback)((0,u.Z)(function(){return(0,p.__generator)(this,function(e){return"createWorkOrder"!==I?[2,null]:[2]})}),[I]),M=function(n){if("createWorkOrder"===I){var t=new FileReader;t.onload=function(){t.result&&(y(!0),l(t.result),j(function(t){return(0,i.Z)(t).concat([eO({fullName:"".concat(e.nameFirst," ").concat(e.nameLast),fileName:n.name}),{id:(0,eI.Z)(),type:"message",fullName:"Cleverly",text:"Thank you. I am extracting the text\n          from your document and will then try to create the work order.",timestamp:S()().toISOString()}])}))},t.readAsArrayBuffer(n)}},E=function(){D("createWorkOrder"),k(!1)},F=function(e,n,t){j(function(r){return r.map(function(r){return r.id===e.id?eT(e,n,t):r})}),N(function(e){return(0,h.Z)((0,x.Z)({},e),{data:(0,h.Z)((0,x.Z)({},e.data),(0,d.Z)({},n,t))})})},A=function(){j([]),N(null),setTimeout(function(){return j([eD()])},1e3)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eM,{open:t,onClose:s,children:(0,r.jsxs)(eE,{small:!T,children:[(0,r.jsx)(eC,{open:w,close:s,handleCreateWorkOrder:E}),(0,r.jsxs)(eF,{small:!!T,children:[(0,r.jsx)(eA,{children:(0,r.jsx)(eB,{src:"/static/logo/icon-white.png"})}),(0,r.jsx)(O,{loading:b,messages:Z,showCreateNew:!!T,onSuggestionSelect:F,onCreateNewClick:A}),(0,r.jsx)(J,{onSend:R,onFileUpload:M})]}),(0,r.jsx)(ef,{responseData:T})]})}),(0,r.jsx)(eL,{onClick:function(){return t?s():o()},children:t?(0,r.jsx)(eN.Z,{}):(0,r.jsx)("img",{src:"/static/dux/bulb.png",style:{height:"60px",borderRadius:"50%"}})})]})},eM=(0,b.ZP)(ek.Z)(function(e){return e.theme,{display:"flex",justifyContent:"flex-end",alignItems:"flex-end",width:"100%",height:"100%",zIndex:1300,paddingRight:"24px",paddingBottom:"100px"}}),eE=(0,b.ZP)(g.Z)(function(e){var n=e.theme;return{position:"relative",fontFamily:"Arial, sans-serif",display:"flex",width:"100%",height:"100%",maxWidth:e.small?"70vw":"90vw",maxHeight:"80vh",borderRadius:"12px",backgroundColor:(0,P.$n)(n.palette.secondary.main,.8),transition:"max-width 0.6s"}}),eF=(0,b.ZP)(g.Z)(function(e){var n=e.theme;return{display:"flex",flexDirection:"column",width:e.small?"40%":"60%",borderRight:"1px solid ".concat(n.palette.muiLightGray.main),padding:"20px",boxShadow:"2px 0 5px rgba(0, 0, 0, 0.1)",transition:"width 0.6s","&>:not(style):not(style)":{marginBottom:"16px"},"&>:last-child:not(style):not(style)":{marginBottom:0}}}),eA=(0,b.ZP)(g.Z)(function(){return{display:"flex"}}),eB=(0,b.ZP)("img")(function(){return{width:"50px",height:"50px",borderRadius:"50%"}}),eL=(0,b.ZP)(A.Z)(function(){return{position:"fixed",bottom:"24px",right:"24px",height:"60px",width:"60px",color:"#fff",backgroundColor:"#304268",zIndex:1301,"&.MuiButtonBase-root.MuiIconButton-root:hover":{backgroundColor:(0,P._j)("#304268",.2)}}}),eH=function(){return(0,r.jsx)(l,{children:(0,r.jsx)(eR,{})})}}}]);