"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5427],{85427:function(e,n,t){t.d(n,{w:function(){return e1}});var r=t(47568),o=t(82670),i=t(26042),s=t(69396),a=t(7297),d=t(29815),l=t(97582),c=t(85893),u=t(67294),p=t(11163),h=t.n(p),v=t(30381),m=t.n(v),x=t(66252),f=t(75063),b=t(22666);function g(){var e=(0,a.Z)(['\n  query GetEvents($where: Job_bool_exp) {\n    events: Job(where: $where) {\n      id\n      number\n      type\n      description\n      timingEnd\n      scheduledAt\n      siteVisitStart\n      timingStart\n      status\n      title\n      quoteDue\n      estimatedDuration\n      estimatedDurationUnit\n      anyTimeOption\n      hourStart\n      hourEnd\n      shortJobDesc: Taxonomy(\n        where: { entity: { _eq: "Job" }, Taxonomy: { type: { _eq: "jobTags" } } }\n      ) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n      supplierQuotes: SupplierQuotes(\n        where: {\n          siteVisitAt: { _is_null: false }\n          status: { _neq: "cancelled" }\n          type: { _eq: "quote" }\n        }\n      ) {\n        siteVisitAt\n        quoteNumber\n      }\n      location: Location {\n        id\n        access\n        createdAt\n        name\n        contactUserId\n        addresses: Addresses(where: { entity: { _eq: "Location" } }) {\n          ...AddressEntityFields\n          address: Address {\n            ...AddressFields\n          }\n        }\n      }\n      supplier: Supplier {\n        addresses: Addresses(where: { entity: { _eq: "Account" } }) {\n          ...AddressEntityFields\n          address: Address {\n            ...AddressFields\n          }\n        }\n      }\n    }\n  }\n  ',"\n  ","\n"]);return g=function(){return e},e}function y(){var e=(0,a.Z)(["\n  query GetCompliancesCalendar($locationId: Int, $start: date, $end: date) {\n    compliances: Compliance(\n      where: { locationId: { _eq: $locationId }, expiryDate: { _gte: $start, _lte: $end } }\n    ) {\n      id\n      name\n      expiryDate\n    }\n  }\n"]);return y=function(){return e},e}function j(){var e=(0,a.Z)(['\n  query GetJobEventDetails($jobId: Int!) {\n    job: Job_by_pk(id: $jobId) {\n      access\n      costCategory\n      customerSpendThreshold\n      description\n      supplierLabourAmount\n      supplierMaterialsAmount\n      quoteDue\n      quoteNumber\n      id\n      number\n      meta\n      paymentMethod\n      reference\n      status\n      title\n      type\n      quoted\n      sublocation: Sublocation {\n        name\n      }\n      invoices: Invoices(order_by: { createdAt: desc }) {\n        id\n        invoiceNumber\n      }\n      quotations: SupplierQuotes {\n        id\n        quoteNumber\n        status\n        lineItems: SupplierQuoteLineItems {\n          id\n          description\n          item\n          qty\n          qtyUnit\n          quoteId\n          total\n          type\n          unitRate\n          supplierTotal\n        }\n        supplier: Supplier {\n          id\n          type\n          name\n          accountUsers: Account_Users {\n            user: User {\n              id\n              fullName\n              nameFirst\n              nameLast\n              phone\n              email\n              devices: UserDevices(where: { status: { _eq: "active" } }) {\n                id\n                playerId\n              }\n            }\n          }\n        }\n      }\n      admin: Admin {\n        id\n        name\n      }\n      service: Service {\n        id\n        name\n      }\n      manager: Manager {\n        id\n        nameFirst\n        nameLast\n      }\n      customer: Customer {\n        id\n        name\n        website\n        slas: SLAs(where: { entity: { _eq: "Account" } }) {\n          id\n          entity\n          entityId\n          onSite\n          onSiteUnit\n          jobReport\n          jobReportUnit\n          completion\n          completionUnit\n          notes\n          inUse\n          normalRate\n          oohRate\n          premiumRate\n          minimumInterval\n          minimumLength\n          slaId\n          sla: SLA {\n            id\n            name\n            notes\n            normalRate\n            oohRate\n            premiumRate\n            onSite\n            onSiteUnit\n            jobReport\n            jobReportUnit\n            completion\n            completionUnit\n            minimumInterval\n            minimumLength\n          }\n        }\n      }\n      customerUser: CustomerUser {\n        id\n        nameFirst\n        nameLast\n        fullName\n        email\n        phone\n      }\n      supplier: Supplier {\n        id\n        name\n        contactUsers: Account_Users(where: { isContact: { _eq: true } }) {\n          id\n          role\n          position\n          isContact\n          lastSignInAt\n          userId\n          user: User {\n            id\n            fullName\n            nameFirst\n            nameLast\n            email\n            phone\n          }\n        }\n      }\n      supplierUser: SupplierUser {\n        id\n        fullName\n        nameFirst\n        nameLast\n        email\n        phone\n      }\n      location: Location {\n        id\n        name\n        addresses: Addresses(where: { entity: { _eq: "Location" } }) {\n          ...AddressEntityFields\n          address: Address {\n            ...AddressFields\n            country: Country {\n              id\n              name\n            }\n          }\n        }\n        slas: SLAs(where: { entity: { _eq: "Location" } }) {\n          id\n          entity\n          entityId\n          onSite\n          onSiteUnit\n          jobReport\n          jobReportUnit\n          completion\n          completionUnit\n          notes\n          inUse\n          normalRate\n          oohRate\n          premiumRate\n          minimumInterval\n          minimumLength\n          slaId\n          sla: SLA {\n            id\n            name\n            notes\n            normalRate\n            oohRate\n            premiumRate\n            onSite\n            onSiteUnit\n            jobReport\n            jobReportUnit\n            completion\n            completionUnit\n            minimumInterval\n            minimumLength\n          }\n        }\n      }\n      sla: SLA {\n        id\n        name\n        notes\n        normalRate\n        oohRate\n        premiumRate\n        onSite\n        onSiteUnit\n        jobReport\n        jobReportUnit\n        completion\n        completionUnit\n        minimumInterval\n        minimumLength\n      }\n      costCategoryTaxonomy: CostCategory {\n        id\n        name\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n      compliance: Compliance {\n        id\n        name\n        complianceCategory: ComplianceCategory {\n          id\n          name\n        }\n        parentCompliance: ParentCompliance {\n          id\n          name\n        }\n      }\n    }\n  }\n  ',"\n  ","\n"]);return j=function(){return e},e}function Z(){var e=(0,a.Z)(['\n  query GetComplianceEventDetails($id: Int!) {\n    compliance: Compliance_by_pk(id: $id) {\n      id\n      name\n      registeredNumber\n      repeat\n      status\n      expiryDate\n\n      location: Location {\n        id\n        name\n        addresses: Addresses(where: { entity: { _eq: "Location" } }) {\n          ...AddressEntityFields\n          address: Address {\n            ...AddressFields\n          }\n        }\n      }\n      sublocation: Sublocation {\n        id\n        name\n      }\n      assetCategory: AssetCategory {\n        id\n        name\n      }\n      complianceCategory: ComplianceCategory {\n        id\n        name\n      }\n      parentCompliance: ParentCompliance {\n        id\n        name\n      }\n      assets: Assets(where: { entity: { _eq: "Compliance" } }) {\n        id\n        entity\n        entityId\n        assetId\n        asset: Asset {\n          id\n          name\n        }\n      }\n      customer: Customer {\n        id\n        name\n        accountUsers: Account_Users(where: { isContact: { _eq: true } }) {\n          user: User {\n            id\n            fullName\n          }\n        }\n      }\n    }\n  }\n  ',"\n  ","\n"]);return Z=function(){return e},e}var C=(0,f.Ps)(g(),b.WW,b.MR),w=(0,f.Ps)(y()),k=(0,f.Ps)(j(),b.WW,b.MR),S=(0,f.Ps)(Z(),b.WW,b.MR),R=t(70917),O=t(10166),A=t(51233),q=t(61730),P=t(5883),F=t(51246),E=t(59613),L=t(34707),U=t(10737),I=t(90244),_=t(45697),D=t.n(_),W=t(5616),M=t(87918),T=t(15861),Q=t(90948),N=t(41796),z=t(39418),H=t(83372),G=["reactive","ppm","quote","cppm"],$=[{text:"Not yet offered",value:"pending",colour:H.Q.COLOUR.muiGray},{text:"Not yet offered",value:"raised",colour:H.Q.COLOUR.muiGray},{text:"Offered",value:"offered",colour:H.Q.COLOUR.warning},{text:"Not yet started",value:"accepted",colour:H.Q.COLOUR.white},{text:"In Progress",value:"inProgress",colour:H.Q.COLOUR.primary},{text:"Completed",value:"completed",colour:H.Q.COLOUR.secondary},{text:"Requires approval",value:"waitingThresholdApproval",colour:H.Q.COLOUR.info},{text:"Completed",value:"reportSent",colour:H.Q.COLOUR.secondary},{text:"Completed",value:"invoiceSent",colour:H.Q.COLOUR.secondary},{text:"Completed",value:"customerPaid",colour:H.Q.COLOUR.secondary},{text:"Completed",value:"supplierPaid",colour:H.Q.COLOUR.secondary},{text:"Quote",value:"quote",colour:H.Q.COLOUR.white},{text:"Not yet started",value:"siteVisit",colour:H.Q.COLOUR.white},{text:"Closed",value:"canceled",colour:H.Q.COLOUR.black},{text:"Closed",value:"closed",colour:H.Q.COLOUR.black},{text:"On Hold",value:"onHold",colour:H.Q.COLOUR.help},{text:"In Progress",value:"continued",colour:H.Q.COLOUR.primary},{text:"Closed",value:"paused",colour:H.Q.COLOUR.black},{text:"Not yet offered",value:"quoteNew",colour:H.Q.COLOUR.muiGray},{text:"Offered",value:"quoteOffered",colour:H.Q.COLOUR.warning},{text:"Received from supplier",value:"quoteReceived",colour:H.Q.COLOUR.primary},{text:"Requires approval",value:"quoteSent",colour:H.Q.COLOUR.info},{text:"Not yet started",value:"quoteAccepted",colour:H.Q.COLOUR.white},{text:"Closed",value:"quoteRejected",colour:H.Q.COLOUR.black},{text:"Closed",value:"quoteCancelled",colour:H.Q.COLOUR.black},{text:"Closed",value:"quoteClosed",colour:H.Q.COLOUR.black},{text:"Not yet started",value:"ppmNew",colour:H.Q.COLOUR.white}],J=t(58632),B=function(e){var n,t,r,o=e.title,i=e.start,s=e.extendedProps,a=(0,d.Z)(J.x).find(function(e){return e.value===s.type}),l=(null==a?void 0:a.context)||"",u=$.find(function(e){return e.value===s.status}),p=(null==u?void 0:u.colour)||H.Q.COLOUR.muiGray;return(0,c.jsxs)(X,{color:l,children:[(0,c.jsx)(W.Z,{sx:{width:"100%",height:"4px",backgroundColor:p}}),(0,c.jsxs)(A.Z,{p:.5,children:[(0,c.jsx)(Y,{children:o}),(0,c.jsxs)(A.Z,{direction:"row",mb:2,children:[(0,c.jsx)(V,{labelColor:l,label:m()(i).format("HH:mm")}),(0,c.jsx)(z.Z,{sx:{height:"13px"}})]}),(null==s?void 0:null===(n=s.propertyAddress)||void 0===n?void 0:n.address)&&(0,c.jsxs)(A.Z,{children:[(0,c.jsx)(Y,{children:"Customer Location"}),(0,c.jsx)(T.Z,{sx:{fontSize:"0.7rem"},children:"".concat((null===(t=s.location)||void 0===t?void 0:t.name)||"","\n                      ").concat(s.propertyAddress.address.name||"","\n                      ").concat(s.propertyAddress.address.addressLine1||"","\n                      ").concat(s.propertyAddress.address.addressLine2||"","\n                      ").concat(s.propertyAddress.address.addressLine3||"","\n                      ").concat(s.propertyAddress.address.city||"","\n                      ").concat(s.propertyAddress.address.county||"","\n                      ").concat(s.propertyAddress.address.postCode||"")})]}),(null==s?void 0:null===(r=s.supplierAddress)||void 0===r?void 0:r.address)&&(0,c.jsxs)(A.Z,{children:[(0,c.jsx)(Y,{children:"Supplier Location"}),(0,c.jsx)(T.Z,{sx:{fontSize:"0.7rem"},children:"".concat(s.supplierAddress.address.name||"","\n                      ").concat(s.supplierAddress.address.addressLine1||"","\n                      ").concat(s.supplierAddress.address.addressLine2||"","\n                      ").concat(s.supplierAddress.address.addressLine3||"","\n                      ").concat(s.supplierAddress.address.city||"","\n                      ").concat(s.supplierAddress.address.county||"","\n                      ").concat(s.supplierAddress.address.postCode||"")})]})]})]})};B.propTypes={title:D().string.isRequired,start:D().object.isRequired,extendedProps:D().shape({type:D().oneOf(["quote","reactive","ppm","cppm"]),status:D().string})},B.defaultProps={};var V=(0,Q.ZP)(M.Z)(function(e){var n=e.theme,t=e.labelColor;return{color:n.palette.white.main,fontSize:"0.7rem",fontWeight:700,height:"13px",borderRadius:"3px",backgroundColor:t,"& span":{color:n.palette.white.main,padding:"0 4px"}}}),Y=(0,Q.ZP)(T.Z)(function(){return{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"0.7rem",fontWeight:700}}),X=(0,Q.ZP)(W.Z)(function(e){var n=e.theme,t=e.color;return{height:"100%",overflow:"hidden",border:"2px solid ".concat(t),borderRadius:"5px",backgroundColor:(0,N.$n)(t,.8),color:n.palette.black.main}}),K=t(31312),ee=function(e){var n=e.title,t=e.start,r=e.extendedProps,o=(0,d.Z)(J.x).find(function(e){return e.value===r.type})||{context:""},i=(null==o?void 0:o.context)||"",s=(0,d.Z)($).concat((0,d.Z)(K.iz)).find(function(e){return e.value===r.status}),a=s&&"colour"in s?s.colour:H.Q.COLOUR.muiGray;return(0,c.jsx)(en,{children:(0,c.jsxs)(A.Z,{direction:"row",alignItems:"center",spacing:.5,pl:.5,children:[(0,c.jsx)(W.Z,{sx:{minWidth:"8px",height:"8px",border:"".concat("#FFFFFF"===a?"2px solid black":"none"),borderRadius:"50%",backgroundColor:a}}),(0,c.jsx)(et,{labelColor:i,label:m()(t).format("HH:mm")}),(0,c.jsx)(z.Z,{sx:{height:"13px"}}),(0,c.jsx)(er,{eventColor:a,children:n})]})})};ee.propTypes={title:D().string.isRequired,start:D().object.isRequired,isStart:D().bool,isEnd:D().bool,extendedProps:D().shape({type:D().oneOf(["quote","reactive","ppm","cppm"]),status:D().string})},ee.defaultProps={isStart:!0,isEnd:!0};var en=(0,Q.ZP)(W.Z)(function(){return{height:"100%",overflow:"hidden"}}),et=(0,Q.ZP)(M.Z)(function(e){var n=e.theme,t=e.labelColor;return{color:n.palette.white.main,fontSize:"0.7rem",fontWeight:700,height:"13px",borderRadius:"3px",backgroundColor:t,"& span":{color:n.palette.white.main,padding:"0 4px"}}}),er=(0,Q.ZP)(T.Z)(function(e){var n=e.theme;return{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"0.7rem",fontWeight:700,color:"#FFFFFF"===e.eventColor?n.palette.black.main:void 0}}),eo=t(26535),ei=t(11057),es=t(14564),ea=t(50594),ed=function(e){var n=e.textColor,t=e.backgroundColor,r=e.title;return(0,c.jsx)(el,{sx:{backgroundColor:t},children:(0,c.jsx)(A.Z,{direction:"row",alignItems:"center",spacing:.5,pl:.5,children:(0,c.jsx)(ec,{textColor:n,children:r})})})},el=(0,Q.ZP)(W.Z)(function(){return{width:"100%",height:"100%",overflow:"hidden",borderRadius:"4px"}}),ec=(0,Q.ZP)(T.Z)(function(e){return{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"0.7rem",fontWeight:700,color:e.textColor}}),eu=function(e){var n=e.anchorEl,t=e.setAnchorEl,r=e.event,o=e.setEvent,i=e.eventClick,s=function(){o(null),t(null)},a=Boolean(n),d=function(e){if(e.start&&e.end)switch(e.extendedProps.eventType){case"job":return(0,c.jsx)(ep,{onClick:function(n){return i({event:e,el:n.currentTarget})},children:(0,c.jsx)(ee,{title:e.title,start:e.start,backgroundColor:e.backgroundColor,extendedProps:e.extendedProps})},e.id);case"compliance":return(0,c.jsx)(ep,{onClick:function(n){return i({event:e,el:n.currentTarget})},children:(0,c.jsx)(ed,{title:e.title,textColor:e.textColor,backgroundColor:e.backgroundColor})},e.id)}};return(0,c.jsx)(eh,{id:a?"simple-popover":void 0,open:a,anchorEl:n,onClose:s,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,c.jsx)(W.Z,{sx:{maxHeight:"80vh",width:"280px"},children:r&&(0,c.jsxs)(A.Z,{width:"100%",p:1,children:[(0,c.jsx)(A.Z,{width:"100%",direction:"row",justifyContent:"flex-end",children:(0,c.jsx)(ei.Z,{variant:"contained",color:"secondary",onClick:s,size:"small",sx:{padding:"5px",borderRadius:"25px",minWidth:"auto"},children:(0,c.jsx)(ea.Z,{sx:{width:"15px"}})})}),(0,c.jsxs)(A.Z,{width:"100%",alignItems:"center",mt:-2,mb:1,children:[(0,c.jsx)(T.Z,{sx:{color:(0,N.$n)("#444C63",.54),fontWeight:700},children:m()(r.date).format("dddd")}),(0,c.jsx)(T.Z,{sx:{fontWeight:700},children:m()(r.date).format("M/D")})]}),(0,c.jsx)(A.Z,{children:r.allSegs.map(function(e){return d(e.event)})})]})})})};eu.propTypes={anchorEl:D().object,setAnchorEl:D().func,event:D().shape({date:D().object,event:D().shape({allSegs:D().arrayOf(D().shape({title:D().string.isRequired,start:D().object.isRequired,extendedProps:D().shape({type:D().oneOf(["quote","reactive","ppm","cppm"]),status:D().string})}))})}),setEvent:D().func,eventClick:D().func};var ep=(0,Q.ZP)(W.Z)(function(){return{cursor:"pointer",padding:"2px",borderRadius:"3px","&:hover":{background:"rgba(0, 0, 0, 0.1)"}}}),eh=(0,Q.ZP)(es.ZP)(function(){return{"& .MuiPaper-root":{fontFamily:"Nunito-Regular",borderRadius:"12px"},"& .MuiTypography-root":{fontFamily:"Nunito-Regular"}}}),ev=t(99534),em=t(6812),ex=t(98456),ef=t(67720),eb=t(53767),eg=t(74944),ey=t(83162),ej=t(48795),eZ=t(59505),eC=function(e){var n,t,r,o,i,s,a,l,u,p,h,v,x,f,b,g,y,j,Z,C,w,S,R,O,q,P,F,E,L,U,I,_,D,M,Q=e.anchorEl,G=e.setAnchorEl,B=e.event,V=e.setEvent,Y=(0,eb.q)(),X=(0,eg.x)().hasRole,K=null===(n=Y.admin)||void 0===n?void 0:null===(t=n.jobSetting)||void 0===t?void 0:t.jobNumberPrefix,ee=null===(r=Y.admin)||void 0===r?void 0:null===(o=r.jobSetting)||void 0===o?void 0:o.jobNumberSuffix,en=X("supplier"),et=X("customer"),er=X("tenant"),es=(0,em.a)(k,{skip:!(null==B?void 0:B.id),variables:{jobId:null==B?void 0:B.id}}),ed=es.loading,el=es.data,ec=(void 0===el?{job:{}}:el).job,eu=(0,eo.WE)(null==ec?void 0:ec.location,"registered"),ep=(0,d.Z)(J.x).find(function(e){return e.value===ec.type}),eh=null==ep?void 0:ep.text,ev=(null==ep?void 0:ep.context)||"",eC=$.find(function(e){return e.value===ec.status}),ew=(null==eC?void 0:eC.colour)||H.Q.COLOUR.muiGray,eO=null==ec?void 0:null===(i=ec.supplier)||void 0===i?void 0:null===(s=i.contactUsers)||void 0===s?void 0:s[0],eA=(null==ec?void 0:null===(a=ec.supplierUser)||void 0===a?void 0:a.id)&&(null==eO?void 0:eO.user)&&(null==ec?void 0:null===(l=ec.supplierUser)||void 0===l?void 0:l.id)!==(null==eO?void 0:null===(u=eO.user)||void 0===u?void 0:u.id),eq=function(){V(null),G(null)},eP=Boolean(Q);return(0,c.jsx)(ek,{id:eP?"simple-popover":void 0,open:eP,anchorEl:Q,onClose:eq,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:ed?(0,c.jsx)(A.Z,{justifyContent:"center",alignItems:"center",width:"320px",height:"300px",children:(0,c.jsx)(ex.Z,{color:"secondary"})}):(0,c.jsxs)(A.Z,{sx:{maxHeight:"80vh",width:"320px"},children:[(0,c.jsxs)(A.Z,{pt:2,pl:2,pr:2,pb:1,children:[(0,c.jsxs)(A.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:1.5,children:[(0,c.jsx)(eS,{labelColor:ev,label:m()(null==B?void 0:B.start).format("HH:mm")}),(0,c.jsx)(ei.Z,{variant:"contained",color:"secondary",onClick:eq,size:"small",sx:{padding:"5px",borderRadius:"25px",minWidth:"auto"},children:(0,c.jsx)(ea.Z,{sx:{width:"15px"}})})]}),(0,c.jsxs)(A.Z,{direction:"row",alignItems:"center",mb:1,children:[(0,c.jsx)(W.Z,{sx:{ml:"4px",mr:1,minWidth:"8px",width:"8px",height:"8px",borderRadius:"50%",border:"#FFFFFF"===ew?"2px solid black":"none",backgroundColor:ew}}),(0,c.jsx)(T.Z,{sx:{fontWeight:700,color:(0,N.$n)("#444C63",.54)},children:(null==ec?void 0:null===(p=ec.shortJobDesc)||void 0===p?void 0:null===(h=p[0])||void 0===h?void 0:null===(v=h.taxonomy)||void 0===v?void 0:v.name)||ec.title})]}),(0,c.jsx)(W.Z,{children:(0,c.jsxs)(A.Z,{direction:"row",alignItems:"center",children:[(0,c.jsx)(z.Z,{sx:{mr:1,width:"14px",height:"14px"}}),(0,c.jsx)(T.Z,{sx:{fontWeight:700},variant:"subtitle2",children:m()(null==B?void 0:B.start).format("dddd, MMMM D")})]})})]}),(0,c.jsx)(ef.Z,{}),(0,c.jsxs)(A.Z,{spacing:1,pl:4.5,pr:2,pt:1,pb:1,sx:{overflowY:"scroll"},children:[(0,c.jsxs)(W.Z,{children:[(0,c.jsx)(T.Z,{variant:"subtitle2",children:"Job Number"}),(0,c.jsx)(T.Z,{variant:"subtitle2",children:(0,c.jsx)(ey.r,{color:"secondary",href:"/dashboard/issues/view?id=".concat(ec.number),children:(0,c.jsx)(ej.D,{id:ec.id,number:ec.number,invoiceNumber:null==ec?void 0:null===(x=ec.invoices)||void 0===x?void 0:null===(f=x[0])||void 0===f?void 0:f.invoiceNumber,type:ec.type,numberPrefix:K,numberSuffix:ee,isQuote:ec.quoted})})})]}),(0,c.jsxs)(W.Z,{children:[(0,c.jsx)(T.Z,{variant:"subtitle2",children:"Job Type"}),(0,c.jsx)(T.Z,{variant:"subtitle2",children:eh})]}),(0,c.jsxs)(W.Z,{children:[(0,c.jsx)(T.Z,{variant:"subtitle2",children:"Job Status"}),(0,c.jsx)(T.Z,{variant:"subtitle2",children:(0,c.jsx)(eZ.B,{value:ec.status})})]}),!en&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(W.Z,{children:[(0,c.jsx)(T.Z,{variant:"subtitle2",children:"Customer"}),(0,c.jsx)(eR,{noWrap:er,color:"secondary",href:"/dashboard/customers/view?id=".concat(null===(b=ec.customer)||void 0===b?void 0:b.id),children:(0,c.jsx)(T.Z,{variant:"subtitle2",children:null===(g=ec.customer)||void 0===g?void 0:g.name})})]}),(0,c.jsxs)(W.Z,{children:[(0,c.jsx)(T.Z,{variant:"subtitle2",children:"Customer Contact"}),(0,c.jsx)(T.Z,{variant:"subtitle2",children:null===(y=ec.customerUser)||void 0===y?void 0:y.fullName})]})]}),(0,c.jsxs)(W.Z,{children:[(0,c.jsx)(T.Z,{variant:"subtitle2",children:"Location"}),(0,c.jsxs)(eR,{noWrap:en||er,color:"secondary",href:"/dashboard/properties/view?id=".concat(null===(j=ec.location)||void 0===j?void 0:j.id),children:[(0,c.jsxs)(T.Z,{variant:"subtitle2",children:[(null===(Z=ec.location)||void 0===Z?void 0:Z.name)||""," "]}),(0,c.jsx)(T.Z,{variant:"subtitle2",children:(null==eu?void 0:null===(C=eu.address)||void 0===C?void 0:C.name)||""}),(0,c.jsx)(T.Z,{variant:"subtitle2",children:(null==eu?void 0:null===(w=eu.address)||void 0===w?void 0:w.addressLine)||""}),(0,c.jsx)(T.Z,{variant:"subtitle2",children:(null==eu?void 0:null===(S=eu.address)||void 0===S?void 0:S.addressLine)||""}),(0,c.jsx)(T.Z,{variant:"subtitle2",children:(null==eu?void 0:null===(R=eu.address)||void 0===R?void 0:R.addressLine)||""}),(0,c.jsx)(T.Z,{variant:"subtitle2",children:(null==eu?void 0:null===(O=eu.address)||void 0===O?void 0:O.city)||""}),(0,c.jsx)(T.Z,{variant:"subtitle2",children:(null==eu?void 0:null===(q=eu.address)||void 0===q?void 0:q.county)||""}),(0,c.jsx)(T.Z,{variant:"subtitle2",children:(null==eu?void 0:null===(P=eu.address)||void 0===P?void 0:P.postCode)||""})]})]}),(null===(F=ec.service)||void 0===F?void 0:F.name)&&(0,c.jsxs)(W.Z,{children:[(0,c.jsx)(T.Z,{variant:"subtitle2",children:"Service"}),(0,c.jsx)(T.Z,{variant:"subtitle2",children:ec.service.name})]}),(0,c.jsxs)(W.Z,{children:[(0,c.jsx)(T.Z,{variant:"subtitle2",children:"Short job description"}),(0,c.jsx)(T.Z,{variant:"subtitle2",children:(null==ec?void 0:null===(E=ec.shortJobDesc)||void 0===E?void 0:E.length)>0&&(null===(L=null==ec?void 0:ec.shortJobDesc[0])||void 0===L?void 0:L.taxonomy.name)||ec.title})]}),!et&&!er&&(0,c.jsxs)(c.Fragment,{children:[(null===(U=ec.supplier)||void 0===U?void 0:U.name)&&(0,c.jsxs)(W.Z,{children:[(0,c.jsx)(T.Z,{variant:"subtitle2",children:"Supplier"}),(0,c.jsx)(ey.r,{color:"secondary",href:"/dashboard/suppliers/view?id=".concat(null===(I=ec.supplier)||void 0===I?void 0:I.id),children:(0,c.jsx)(T.Z,{variant:"subtitle2",children:null===(_=ec.supplier)||void 0===_?void 0:_.name})})]}),(null==eO?void 0:null===(D=eO.user)||void 0===D?void 0:D.fullName)&&(0,c.jsxs)(W.Z,{children:[(0,c.jsx)(T.Z,{variant:"subtitle2",children:eA?"Contact":"Contact / Operative"}),(0,c.jsx)(T.Z,{variant:"subtitle2",children:null==eO?void 0:null===(M=eO.user)||void 0===M?void 0:M.fullName})]}),ec.supplierUser&&eA&&(0,c.jsxs)(W.Z,{children:[(0,c.jsx)(T.Z,{variant:"subtitle2",children:"Operative"}),(0,c.jsx)(T.Z,{variant:"subtitle2",children:ec.supplierUser.fullName})]})]}),ec.compliance&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(W.Z,{children:[(0,c.jsx)(T.Z,{variant:"subtitle2",children:"Compliance "}),(0,c.jsx)(T.Z,{variant:"subtitle2",children:ec.compliance.name})]}),(0,c.jsxs)(W.Z,{children:[(0,c.jsx)(T.Z,{variant:"subtitle2",children:"Compliance category"}),(0,c.jsx)(T.Z,{variant:"subtitle2",children:ec.compliance.complianceCategory.name}),(0,c.jsx)(T.Z,{variant:"subtitle2",children:ec.compliance.parentCompliance.name})]})]})]})]})})};eC.defaultProps={setAnchorEl:function(){},setEvent:function(){}},eC.propTypes={anchorEl:D().object,setAnchorEl:D().func,event:D().shape({id:D().number,start:D().object}),setEvent:D().func};var ew,ek=(0,Q.ZP)(es.ZP)(function(){return{"& .MuiPaper-root":{fontFamily:"Nunito-Regular",borderRadius:"12px",overflow:"hidden"},"& .MuiTypography-root":{fontFamily:"Nunito-Regular"}}}),eS=(0,Q.ZP)(M.Z)(function(e){var n=e.theme,t=e.labelColor;return{color:n.palette.white.main,fontWeight:700,height:"20px",borderRadius:"3px",backgroundColor:t,"& span":{color:n.palette.white.main,padding:"0 4px"}}}),eR=function(e){var n=e.children,t=e.noWrap,r=(0,ev.Z)(e,["children","noWrap"]);return t?n:(0,c.jsx)(ey.r,(0,s.Z)((0,i.Z)({},r),{children:n}))},eO=function(e){var n,t,r,o,i,s,a,d=e.anchorEl,l=e.setAnchorEl,u=e.event,p=e.setEvent,h=(0,em.a)(S,{skip:!(null==u?void 0:u.id),variables:{id:null==u?void 0:u.id}}),v=h.loading,x=h.data,f=(void 0===x?{}:x).compliance,b=function(){p(null),l(null)},g=Boolean(d);return(0,c.jsx)(eA,{id:g?"simple-popover":void 0,open:g,anchorEl:d,onClose:b,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:v?(0,c.jsx)(A.Z,{justifyContent:"center",alignItems:"center",width:"320px",height:"300px",children:(0,c.jsx)(ex.Z,{color:"secondary"})}):f?(0,c.jsxs)(A.Z,{sx:{maxHeight:"80vh",width:"320px"},children:[(0,c.jsxs)(A.Z,{direction:"column",pt:2,pl:2,pr:2,pb:1,spacing:1,children:[(0,c.jsxs)(A.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:1.5,children:[(0,c.jsx)(T.Z,{sx:{fontWeight:700},children:"Compliance item"}),(0,c.jsx)(ei.Z,{disableMinWidth:!0,variant:"contained",color:"secondary",onClick:b,size:"small",sx:{padding:"5px",borderRadius:"25px"},children:(0,c.jsx)(ea.Z,{sx:{width:"15px"}})})]}),(0,c.jsx)(W.Z,{children:(0,c.jsx)(T.Z,{sx:{fontWeight:700,color:(0,N.$n)("#444C63",.54),ml:"22px"},children:f.name})}),(0,c.jsxs)(A.Z,{direction:"row",alignItems:"center",children:[(0,c.jsx)(z.Z,{sx:{mr:1,width:"14px",height:"14px"}}),(0,c.jsxs)(T.Z,{sx:{fontWeight:700},variant:"subtitle2",children:["Expiry date: ","  ",m()(f.expiryDate).format("dddd, MMMM D")]})]}),(0,c.jsx)(W.Z,{children:(0,c.jsxs)(T.Z,{sx:{fontWeight:700,ml:"22px"},variant:"subtitle2",children:["Frequency: ","  ",f.repeat]})})]}),(0,c.jsx)(ef.Z,{}),(0,c.jsxs)(A.Z,{direction:"column",pt:2,pl:"38px",pr:2,pb:1,spacing:1,children:[(0,c.jsxs)(A.Z,{children:[(0,c.jsx)(T.Z,{variant:"subtitle2",children:"Category"}),(0,c.jsx)(T.Z,{variant:"subtitle2",children:f.complianceCategory.name}),(0,c.jsx)(T.Z,{variant:"subtitle2",children:f.parentCompliance.name})]}),(0,c.jsxs)(A.Z,{children:[(0,c.jsx)(T.Z,{variant:"subtitle2",children:"Registered number"}),(0,c.jsx)(T.Z,{variant:"subtitle2",children:f.registeredNumber})]}),(0,c.jsxs)(A.Z,{children:[(0,c.jsxs)(T.Z,{variant:"subtitle2",children:[(0,c.jsx)("strong",{children:"Sublocation:"})," ",(null===(n=f.sublocation)||void 0===n?void 0:n.name)||"-"]}),(0,c.jsxs)(T.Z,{variant:"subtitle2",children:[(0,c.jsx)("strong",{children:"Asset category:"})," ",(null===(t=f.assetCategory)||void 0===t?void 0:t.name)||"-"]}),(0,c.jsxs)(T.Z,{variant:"subtitle2",children:[(0,c.jsx)("strong",{children:"Asset name:"})," ",Array.isArray(f.assets)&&(null===(r=f.assets)||void 0===r?void 0:r.length)>0?null===(o=f.assets)||void 0===o?void 0:o.map(function(e){return e.asset.name}):"-"]})]}),(0,c.jsxs)(A.Z,{children:[(0,c.jsx)(T.Z,{fontWeight:700,variant:"subtitle2",children:"Customer"}),(0,c.jsx)(ey.r,{href:"/dashboard/customers/view?id=".concat(f.customer.id),color:"secondary",variant:"subtitle2",children:f.customer.name})]}),(0,c.jsxs)(A.Z,{children:[(0,c.jsx)(T.Z,{fontWeight:700,variant:"subtitle2",children:"Contact user"}),(0,c.jsx)(T.Z,{variant:"subtitle2",children:(null===(i=f.customer.accountUsers[0])||void 0===i?void 0:null===(s=i.user)||void 0===s?void 0:s.fullName)||"-"})]}),(0,c.jsxs)(A.Z,{children:[(0,c.jsx)(T.Z,{fontWeight:700,variant:"subtitle2",children:"Location"}),(0,c.jsx)(ey.r,{href:"/dashboard/properties/view?id=".concat(f.location.id),color:"secondary",variant:"subtitle2",children:f.location.name||"-"}),(null===(a=f.location.addresses)||void 0===a?void 0:a[0])?(0,c.jsxs)(T.Z,{variant:"subtitle2",children:[f.location.addresses[0].address.addressLine1,","," ",f.location.addresses[0].address.addressLine2,","," ",f.location.addresses[0].address.addressLine3,","," ",f.location.addresses[0].address.city,","," ",f.location.addresses[0].address.county,","," ",f.location.addresses[0].address.postCode]}):null]})]})]}):"Can`t fetch this item."})},eA=(0,Q.ZP)(es.ZP)(function(){return{"& .MuiPaper-root":{fontFamily:"Nunito-Regular",borderRadius:"12px",overflow:"hidden"},"& .MuiTypography-root":{fontFamily:"Nunito-Regular"}}}),eq=function(e){var n=e.anchorEl,t=e.setAnchorEl,r=e.event,o=e.setEvent;if(!(null==r?void 0:r.eventType))return null;switch(r.eventType){case"job":return(0,c.jsx)(eC,{anchorEl:n,setAnchorEl:t,event:r,setEvent:o});case"compliance":return(0,c.jsx)(eO,{anchorEl:n,setAnchorEl:t,event:r,setEvent:o})}},eP=t(86532),eF=t(22797),eE=t(38895),eL=t(69368),eU=t(50480),eI=t(86886),e_=t(72852),eD=t(50135),eW=t(6848),eM=t(27434),eT=t(14924),eQ=function(e){var n=e.query,t=e.defaultFilters;return Array.isArray(n)?t:G.includes(n)?[n]:t},eN=function(e){var n=e.arrayOfStatuses,t=e.key,r=Array.from(new Set(n.map(function(e){return e[t]}))),o=r.reduce(function(e,r){return(0,s.Z)((0,i.Z)({},e),(0,eT.Z)({},r,n.filter(function(e){return e[t]===r})))},{});return{colors:r,colorObjects:o}},ez=function(e){var n=e.filterDisabled,t=void 0===n?{}:n,r=e.hideFilters,o=void 0===r?[]:r,a=e.title,l=e.types,p=e.date,h=e.setDate,v=e.setTypes,x=e.setSiteVisit,f=e.fullWidth,b=e.expanded,g=e.onChangeExpanded,y=e.hideExpandIcon,j=eN({arrayOfStatuses:$,key:"colour"}),Z=j.colors,C=j.colorObjects;(0,u.useEffect)(function(){h(m()())},[h]);var w=function(e,n){n.target.checked?v((0,d.Z)(l).concat([e])):v(l.filter(function(n){return n!==e}))},k=function(e){x(e.target.checked)};return(0,c.jsxs)(eH,{fullWidth:f,expanded:b,onChange:g,children:[(0,c.jsx)(eE.Z,(0,s.Z)((0,i.Z)({},y?{}:{expandIcon:(0,c.jsx)(eM.Z,{})}),{children:(0,c.jsx)(T.Z,{variant:"h6",sx:{fontWeight:700,color:"#444C63"},children:a})})),(0,c.jsx)(eF.Z,{sx:{padding:0},children:(0,c.jsxs)(A.Z,{width:"100%",children:[(0,c.jsx)(e$,{showDaysOutsideCurrentMonth:!0,displayStaticWrapperAs:"desktop",openTo:"day",value:p,onChange:function(e){h(e)},renderInput:function(e){return(0,c.jsx)(eD.Z,(0,i.Z)({},e))}}),(0,c.jsxs)(A.Z,{width:"100%",pl:2,spacing:2,children:[!o.includes("siteVisit")&&(0,c.jsx)(eI.ZP,{container:!0,children:(0,c.jsx)(eI.ZP,{item:!0,xs:12,display:"flex",justifyContent:"center",children:(0,c.jsx)(eU.Z,{control:(0,c.jsx)(eL.Z,{color:"secondary",onChange:k}),label:"Only Show Site Visits"})})}),(0,c.jsxs)(eI.ZP,{container:!0,rowGap:2,children:[!o.includes("reactive")&&(0,c.jsxs)(eI.ZP,{item:!0,xs:6,display:"flex",alignItems:"center",children:[(0,c.jsx)(eG,{color:"#2EE6CA",mr:1}),(0,c.jsx)(eU.Z,{control:(0,c.jsx)(e_.Z,{disabled:t.reactive,color:"secondary",size:"small",checked:l.includes("reactive"),onChange:function(e){return w("reactive",e)}}),label:"Reactive"})]}),!o.includes("ppm")&&(0,c.jsxs)(eI.ZP,{item:!0,xs:6,display:"flex",alignItems:"center",children:[(0,c.jsx)(eG,{color:"#D67EFF",mr:1}),(0,c.jsx)(eU.Z,{control:(0,c.jsx)(e_.Z,{disabled:t.ppm,color:"secondary",size:"small",checked:l.includes("ppm"),onChange:function(e){return w("ppm",e)}}),label:"PPM"})]}),!o.includes("cppm")&&(0,c.jsxs)(eI.ZP,{item:!0,xs:6,display:"flex",alignItems:"center",children:[(0,c.jsx)(eG,{color:"#CC7429",mr:1}),(0,c.jsx)(eU.Z,{control:(0,c.jsx)(e_.Z,{disabled:t.cppm,color:"secondary",size:"small",checked:l.includes("cppm"),onChange:function(e){return w("cppm",e)}}),label:"Compliance"})]}),!o.includes("quote")&&(0,c.jsxs)(eI.ZP,{item:!0,xs:6,display:"flex",alignItems:"center",children:[(0,c.jsx)(eG,{color:"#7D7",mr:1}),(0,c.jsx)(eU.Z,{control:(0,c.jsx)(e_.Z,{disabled:t.quote,color:"secondary",size:"small",checked:l.includes("quote"),onChange:function(e){return w("quote",e)}}),label:"Quote"})]})]}),(0,c.jsxs)(eI.ZP,{container:!0,rowSpacing:1,pb:2,children:[(0,c.jsx)(eI.ZP,{item:!0,xs:12,children:(0,c.jsx)(T.Z,{variant:"h6",sx:{color:"#444C63",fontWeight:700},children:"Statuses"})}),Z.map(function(e){var n,t;return(0,c.jsxs)(eI.ZP,{item:!0,display:"flex",alignItems:"center",xs:12,children:[(0,c.jsx)(eJ,{color:e,mr:1}),(0,c.jsx)(T.Z,{children:(null===(n=C[e])||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.text)||"No text available"})]})})]})]})]})})]})},eH=(0,Q.ZP)(eP.Z)(function(e){var n=e.fullWidth;return{maxHeight:n?"100%":"calc(100vh - 32px)",minHeight:n?"inherit":"650px",height:"initial",minWidth:"330px",width:n?"100%":"330px",overflowY:"scroll"}}),eG=(0,Q.ZP)(W.Z)(function(e){var n=e.color;return{width:"16px",height:"16px",border:"2px solid ".concat(n),borderRadius:"3px",backgroundColor:(0,N.$n)(n,.8)}}),e$=(0,Q.ZP)(eW.w)(function(e){var n=e.theme;return{"& .MuiCalendarPicker-root":{"& .MuiPickersCalendarHeader-root":{position:"relative",marginLeft:"24px",marginRight:"24px",marginTop:"0px","& .MuiPickersCalendarHeader-labelContainer":{position:"absolute",top:"2px",left:"50%",transform:"translateX(-50%)",width:"max-content","& .MuiPickersCalendarHeader-label":{fontSize:"17px",fontWeight:700,color:"#444C63"}}},"& .MuiPickersArrowSwitcher-root":{"& .MuiButtonBase-root.MuiIconButton-root.MuiIconButton-edgeEnd":{position:"absolute",left:0,top:"5px",height:"24px",borderRadius:"5px 0 0 5px",border:"1px solid ".concat(n.palette.divider),"& svg":{width:"13px",height:"13px"}},"& .MuiButtonBase-root.MuiIconButton-root.MuiIconButton-edgeStart":{position:"absolute",right:0,top:"5px",height:"24px",borderRadius:"0 5px 5px 0",border:"1px solid ".concat(n.palette.divider),"& svg":{width:"13px",height:"13px"}}},"& .PrivatePickersSlideTransition-root.MuiDayPicker-slideTransition":{minHeight:"180px"},"& .MuiButtonBase-root.MuiPickersDay-root.MuiPickersDay-dayWithMargin":{"&.MuiPickersDay-today":{},"&.Mui-selected":{color:n.palette.white.main,backgroundColor:"#444C63"}},"& .MuiDayPicker-monthContainer":{"& .MuiDayPicker-weekContainer":{margin:0}}}}}),eJ=(0,Q.ZP)(W.Z)(function(e){var n=e.color;return{width:"16px",height:"16px",minWidth:"16px",minHeight:"16px",borderRadius:"3px",backgroundColor:n,border:"".concat("#FFFFFF"===n?"2px solid black":"none")}}),eB=function(e){var n=e.title,t=e.backgroundColor;return(0,c.jsxs)(eY,{color:t,children:[(0,c.jsx)(W.Z,{sx:{width:"100%",height:"4px"}}),(0,c.jsx)(A.Z,{p:.5,children:(0,c.jsx)(eV,{children:n})})]})},eV=(0,Q.ZP)(T.Z)(function(){return{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"0.7rem",fontWeight:700}}),eY=(0,Q.ZP)(W.Z)(function(e){var n=e.theme,t=e.color;return{height:"100%",overflow:"hidden",border:"2px solid ".concat(t),borderRadius:"5px",backgroundColor:(0,N.$n)(t,.8),color:n.palette.black.main}}),eX=t(84808),eK=(ew=(0,r.Z)(function(e){var n,t;return(0,l.__generator)(this,function(t){return(n=e.query,e.skip)?[2,{data:void 0,loading:!1,networkStatus:7}]:[2,n()]})}),function(e){return ew.apply(this,arguments)});function e0(){var e=(0,a.Z)(["\n  --fc-small-font-size: 1em;\n  --fc-page-bg-color: #fff;\n  --fc-neutral-bg-color: #fff;\n  --fc-neutral-text-color: #000000;\n  --fc-border-color: ",";\n\n  --fc-button-text-color: ",";\n  --fc-button-bg-color: ",";\n  --fc-button-border-color: ",";\n  --fc-button-hover-text-color: ",";\n  --fc-button-hover-bg-color: ",";\n  --fc-button-hover-border-color: ",";\n  --fc-button-active-text-color: ",";\n  --fc-button-active-bg-color: ",";\n  --fc-button-active-border-color: ",";\n\n  --fc-event-bg-color: ",";\n  --fc-event-border-color: ",";\n  --fc-event-text-color: ",";\n  --fc-event-selected-overlay-color: rgba(0, 0, 0, 0.25);\n\n  --fc-more-link-bg-color: #d0d0d0;\n  --fc-more-link-text-color: inherit;\n\n  --fc-event-resizer-thickness: 8px;\n  --fc-event-resizer-dot-total-width: 8px;\n  --fc-event-resizer-dot-border-width: 1px;\n\n  --fc-non-business-color: rgba(215, 215, 215, 0.3);\n  --fc-bg-event-color: rgb(143, 223, 130);\n  --fc-bg-event-opacity: 0.2;\n  --fc-highlight-color: rgba(188, 232, 241, 0.3);\n  --fc-today-bg-color: #c7e6ff;\n  --fc-now-indicator-color: #ff6633;\n\n  --fc-daygrid-event-dot-width: 8px;\n\n  width: 100%;\n  background-color: #ffffff;\n\n  div.fc {\n    min-height: 650px;\n    width: 100%;\n    color: ",";\n  }\n\n  div.fc .fc-timegrid.fc-timeGridDay-view.fc-view {\n    --fc-today-bg-color: none;\n  }\n\n  div.fc .fc-timegrid.fc-timeGridWeek-view.fc-view {\n    --fc-today-bg-color: none;\n    overflow-x: auto;\n\n    & .fc-scrollgrid {\n      overflow-x: auto;\n      min-width: 500px;\n    }\n  }\n\n  div.fc .fc-daygrid.fc-dayGridMonth-view.fc-view {\n    --fc-today-bg-color: none;\n\n    overflow-x: auto;\n\n    & .fc-scrollgrid {\n      overflow-x: auto;\n      min-width: 500px;\n    }\n\n    & .fc-scrollgrid-section.fc-scrollgrid-section-header > td {\n      border-bottom: none;\n    }\n\n    & .fc-scrollgrid-section.fc-scrollgrid-section-body.fc-scrollgrid-section-liquid > td,\n    .fc-daygrid-day.fc-day {\n      border-top: none;\n    }\n\n    & .fc-col-header-cell.fc-day {\n      height: auto;\n      border-bottom: none;\n    }\n\n    & .fc-day-today .fc-daygrid-day-number {\n      width: 24px;\n      height: 24px;\n      border-radius: 100%;\n      text-align: center;\n      color: var(--fc-button-active-text-color);\n      background-color: #444c63;\n    }\n\n    & .fc-daygrid-day-number {\n      font-size: 12px;\n      font-weight: 700;\n      padding: 0;\n      padding-top: 4px;\n    }\n\n    & .fc-daygrid-day-top {\n      justify-content: center;\n    }\n\n    & .fc-daygrid-event.fc-daygrid-dot-event {\n      margin: 0;\n      margin-left: 2px;\n      margin-right: 2px;\n    }\n  }\n\n  div.fc .fc-scrollgrid {\n    border-collapse: collapse;\n  }\n\n  div.fc.fc-theme-standard td,\n  div.fc.fc-theme-standard th {\n    border: 2px solid var(--fc-border-color);\n  }\n\n  div.fc .fc-header-toolbar.fc-toolbar {\n    justify-content: space-between;\n    flex-wrap: wrap;\n    row-gap: 5px;\n    column-gap: 10px;\n    padding: 1.5rem 8px;\n    margin: 0;\n    background-color: #eef1f7;\n  }\n\n  div.fc-toolbar .fc-toolbar-chunk > div:last-child {\n    display: flex;\n    align-items: center;\n  }\n\n  div.fc .fc-button-primary:not(:disabled).fc-button-active {\n    color: var(--fc-button-active-text-color);\n\n    &:focus {\n      box-shadow: none;\n    }\n  }\n\n  div.fc .fc-button-primary {\n    height: 30px;\n    padding: 0 8px;\n    background-color: inherit;\n\n    &:focus {\n      box-shadow: none;\n    }\n\n    &:hover {\n      color: var(--fc-button-hover-text-color);\n      background-color: var(--fc-button-hover-bg-color);\n    }\n\n    &:hover:disabled {\n      color: inherit;\n      background-color: inherit;\n    }\n  }\n\n  div.fc .fc-createWorkOrder-button {\n    color: var(--fc-button-active-text-color);\n    border-color: var(--fc-button-active-bg-color);\n    background-color: var(--fc-button-active-bg-color);\n  }\n\n  div.fc .fc-createWorkOrder-button:hover {\n    border-color: ",";\n    background-color: ",";\n  }\n\n  div.fc .fc-toolbar-title {\n    font-size: 17px;\n    margin-left: 24px;\n    margin-right: 24px;\n  }\n\n  div.fc .fc-prev-button {\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n    background-color: inherit;\n\n    &:hover {\n      background-color: var(--fc-button-hover-bg-color);\n    }\n  }\n\n  div.fc .fc-next-button {\n    border-top-left-radius: 0;\n    border-bottom-left-radius: 0;\n    background-color: inherit;\n\n    &:hover {\n      background-color: var(--fc-button-hover-bg-color);\n    }\n  }\n\n  div.fc .fc-col-header-cell.fc-day,\n  div.fc th.fc-timegrid-axis {\n    height: 60px;\n    font-size: 12px;\n    font-weight: 700;\n    vertical-align: middle;\n    border-bottom: none;\n  }\n\n  div.fc .fc-timegrid-divider.fc-cell-shaded {\n    padding: 0;\n  }\n\n  div.fc .fc-daygrid-day.fc-day {\n    height: 60px;\n  }\n\n  div.fc .fc-timegrid-slot {\n    height: 30px;\n  }\n\n  div.fc .fc-timegrid-axis-frame.fc-scrollgrid-shrink-frame.fc-timegrid-axis-frame-liquid {\n    justify-content: center;\n\n    & > span {\n      padding: 0;\n      margin-bottom: -10px;\n    }\n  }\n\n  div.fc .fc-timegrid-slot-label-cushion.fc-scrollgrid-shrink-cushion {\n    font-size: 12px;\n    font-weight: 700;\n    position: absolute;\n    left: 0;\n    transform: translateY(20%);\n  }\n\n  div.fc .fc-timegrid-now-indicator-container {\n    overflow: visible;\n  }\n\n  div.fc .fc-timegrid-now-indicator-line {\n    height: 2px;\n    border-width: 2px 0 0;\n    width: 2000%;\n    left: -1000%;\n  }\n\n  div.fc .fc-timegrid-now-indicator-arrow {\n    border: 5px solid var(--fc-now-indicator-color);\n    border-radius: 5px;\n  }\n\n  div.fc .fc-timegrid-slot.fc-timegrid-slot-label.fc-scrollgrid-shrink {\n    border-bottom-style: none;\n    border-right-style: none;\n  }\n  div.fc .fc-timegrid-slot.fc-timegrid-slot-lane {\n    border-bottom-style: none;\n    border-left-style: none;\n  }\n  div.fc .fc-timegrid-slot.fc-timegrid-slot-minor {\n    border: none;\n    border-top-style: none;\n  }\n\n  div.fc .fc-timegrid-event.fc-v-event {\n    border: none;\n    border-radius: 0;\n    box-shadow: none;\n    background: none !important;\n  }\n  // div.fc .fc-daygrid-event.fc-daygrid-block-event.fc-h-event.fc-event {\n  //   color: var(--fc-event-text-color);\n  // }\n\n  div.fc .fc-timegrid-event .fc-event-main {\n    padding: 0;\n  }\n\n  div.fc .fc-daygrid-more-link.fc-more-link {\n    font-size: 10px;\n    font-weight: 700;\n  }\n\n  div.fc .fc-daygrid-day-bottom {\n    padding: 0;\n    padding-left: 8px;\n  }\n\n  div.fc .fc-popover.fc-more-popover {\n    border-radius: 10px;\n\n    & .fc-popover-header {\n      background: none;\n    }\n  }\n\n  div.fc .fc-timegrid.fc-timeGridWeek-view.fc-view {\n    overflow-x: auto;\n\n    & .fc-scrollgrid {\n      overflow-x: auto;\n      min-width: 500px;\n    }\n\n    & .fc-media-screen .fc-timegrid-cols > table {\n      min-width: 500px;\n    }\n\n    & .fc-scroller .fc-col-header {\n      min-width: 500px;\n    }\n\n    & .fc-timegrid .fc-daygrid-body {\n      min-width: 500px;\n    }\n\n    & .fc-scrollgrid-section-body table,\n    & .fc-scrollgrid-section-footer table {\n      min-width: 500px;\n    }\n  }\n\n  div.fc .fc-daygrid.fc-dayGridMonth-view.fc-view {\n    overflow-x: auto;\n\n    & .fc-scrollgrid {\n      overflow-x: auto;\n      min-width: 500px;\n    }\n\n    & .fc-media-screen .fc-timegrid-cols > table {\n      min-width: 500px;\n    }\n\n    & .fc-scroller .fc-col-header {\n      min-width: 500px;\n    }\n\n    & .fc-daygrid-body {\n      min-width: 500px;\n    }\n\n    & .fc-scrollgrid-section-body table,\n    & .fc-scrollgrid-section-footer table {\n      min-width: 500px;\n    }\n  }\n"]);return e0=function(){return e},e}function e2(){var e=(0,a.Z)(["\n  ","\n"]);return e2=function(){return e},e}var e1=function(e){var n,t=e.defaultFilters,a=e.locationId,v=e.supplierId,f=e.showFilters,b=e.showSiteVisits,g=e.filterDisabled,y=e.hideCreateWorkOrder,j=e.hideFilters,Z=e.complianceOnly,k=(0,q.Z)("(max-width: 1080px)"),S=(0,q.Z)("(max-width: 800px)"),R=(0,q.Z)("(max-width: 500px)"),O=(0,p.useRouter)().query,_=(0,x.x)(),D=(0,u.useState)(null),W=D[0],M=D[1],T=(0,u.useState)(eQ({query:O.type,defaultFilters:void 0===t?["reactive","ppm","quote","cppm"]:t})),Q=T[0],N=T[1],z=(0,u.useState)(b),G=z[0],J=z[1],V=(0,u.useState)(!1),Y=V[0],X=V[1],K=(0,u.useState)(null),en=K[0],et=K[1],er=(0,u.useState)(null),ei=er[0],es=er[1],ea=(0,u.useState)(null),el=ea[0],ec=ea[1],ep=(0,u.useState)(null),eh=ep[0],ev=ep[1],em=(0,u.useState)(!1),ef=em[0],eb=em[1],eg=(0,u.useRef)(null);(0,u.useEffect)(function(){eg.current&&W&&eg.current.getApi().gotoDate(W.toDate())},[W]);var ey=(0,u.useCallback)((n=(0,r.Z)(function(e,n,t){var r,o,c,u,p,h,x,f,b,g;return(0,l.__generator)(this,function(o){switch(o.label){case 0:eb(!0),o.label=1;case 1:return o.trys.push([1,4,5,6]),r={type:{_in:Q},_and:[{_or:[{_and:[{timingStart:{_gte:e.start}},{timingStart:{_lte:e.end}}]},{_and:[{timingEnd:{_gte:e.start}},{timingEnd:{_lte:e.end}}]},{_and:[{scheduledAt:{_gte:e.start}},{scheduledAt:{_lte:e.end}}]},{_and:[{quoteDue:{_gte:e.start}},{quoteDue:{_lte:e.end}}]},{_and:[{siteVisitStart:{_gte:e.start}},{siteVisitStart:{_lte:e.end}}]}]}]},a&&(r.locationId={_eq:a}),v&&r._and.push({_or:[{supplierId:{_eq:v}},{SupplierOffers:{accountId:{_eq:v},status:{_in:["offered","accepted"]}},status:{_eq:"offered"}},{SupplierQuotes:{accountId:{_eq:v},status:{_in:["supplierQuoteRequested","supplierQuoteComplete","supplierQuoteDraft","waitingThresholdApproval"]}},status:{_in:["quoteOffered","waitingThresholdApproval","quoteReceived"]}}]}),G&&(r.siteVisitStart={_is_null:!1}),Z&&(r.Compliance={}),[4,_.query({query:C,variables:{where:r}})];case 2:return u=(void 0===(c=o.sent().data)?{events:[]}:c).events,[4,eK({query:function(){return _.query({query:w,variables:{locationId:a,start:e.start,end:e.end}})},skip:!Q.includes("cppm")})];case 3:return x=(void 0===(h=o.sent().data)?{compliances:[]}:h).compliances,f=[],u.forEach(function(e){var n,t,r,o=(null==e?void 0:null===(n=e.shortJobDesc)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:null===(r=t.taxonomy)||void 0===r?void 0:r.name)||e.title,a=e.estimatedDuration||54e5,d=$.find(function(n){return n.value===e.status}),l=(null==d?void 0:d.colour)?null==d?void 0:d.colour:H.Q.COLOUR.muiGray,c=e.scheduledAt||e.quoteDue||e.timingStart;if(c){var u=m()(c).add(a,"milliseconds").toISOString(),p=(0,eo.WE)(e.location,"registered"),h=(0,eo.WE)(e.supplier,"registered"),v={id:"".concat(e.id),title:o||"",start:c,end:u,color:l,borderColor:"#FFFFFF"===l?"black":"#FFFFFF",extendedProps:{eventType:"job",type:e.type,status:e.status,estimatedDuration:a,anyTimeOption:!!e.anyTimeOption,hourStart:e.hourStart,location:e.location,supplier:e.supplier,scheduledAt:e.scheduledAt,quoteDue:e.quoteDue,siteVisitStart:e.siteVisitStart,shortJobDesc:e.shortJobDesc,supplierQuotes:e.supplierQuotes,propertyAddress:p,supplierAddress:h}};if(!e.scheduledAt&&e.anyTimeOption&&e.timingStart&&e.timingEnd){var x=m()(e.timingStart),b=m()(e.timingEnd),g=m()(e.hourStart,"HH:mm:ssZ"),y=x.set({hour:g.hour()||0,minute:g.minute()||0,second:g.second()||0,millisecond:g.millisecond()||0}),j=b.set({hour:g.hour()||0,minute:g.minute()||0,second:g.second()||0,millisecond:g.millisecond()||0});return m()(e.timingStart).isSame(m()(e.timingEnd),"date")?f.push((0,s.Z)((0,i.Z)({},v),{start:y.toISOString()})):f.push((0,s.Z)((0,i.Z)({},v),{start:y.toISOString()}),(0,s.Z)((0,i.Z)({},v),{start:j.toISOString()}))}return f.push(v)}}),b=[],x.forEach(function(e){var n=e.name,t=m()(e.expiryDate).startOf("day").toISOString(),r=m()(e.expiryDate).endOf("day").toISOString(),o={id:"".concat(e.id),title:n,start:t,end:r,color:"#FFFFFF",textColor:"#FFFFFF",borderColor:"#CC7429",backgroundColor:"#CC7429",extendedProps:{eventType:"compliance",name:e.name}};return b.push(o)}),n((0,d.Z)(f).concat((0,d.Z)(b))),[3,6];case 4:return t(o.sent()),[3,6];case 5:return eb(!1),[7];case 6:return[2]}})}),function(e,t,r){return n.apply(this,arguments)}),[Q,a,v,G,_]),ej=(0,u.useCallback)(function(e){e.event.start&&e.event.id&&(ev({eventType:e.event.extendedProps.eventType,id:e.event.id,start:e.event.start}),ec(e.el))},[]),eZ=(0,u.useCallback)(function(e){var n=e.date,t=n.toLocaleString("en-US",{weekday:R?"narrow":"long"}),r=n.toLocaleString("en-US",{month:"2-digit",day:"2-digit"});return"".concat(t," ").concat(r)},[R]),eC=(0,u.useMemo)(function(){return{timeGridWeek:{dayHeaderContent:eZ}}},[eZ]),ew=(0,u.useCallback)(function(){return(0,c.jsx)(I.Z,{})},[]),ek=(0,u.useCallback)(function(e){var n=e.date,t=e.isAxis,r=m()(n).format("HH");return t?r:(0,c.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"80px"},children:r})},[]),eS=(0,u.useCallback)(function(e){var n=e.event,t=e.isStart,r=e.isEnd,o=e.view;return"job"===n.extendedProps.eventType?"dayGridMonth"===o.type?(0,c.jsx)(ee,{title:n.title,start:n.start,isStart:t,isEnd:r,backgroundColor:n.backgroundColor,extendedProps:n.extendedProps}):(0,c.jsx)(B,{title:n.title,start:n.start,extendedProps:n.extendedProps}):"compliance"===n.extendedProps.eventType?"dayGridMonth"===o.type?(0,c.jsx)(ed,{title:n.title,textColor:n.textColor,backgroundColor:n.backgroundColor}):(0,c.jsx)(eB,{title:n.title,backgroundColor:n.backgroundColor}):void 0},[]),eR=(0,u.useCallback)(function(e){return es((0,i.Z)({},e)),(0,o.Z)(e.jsEvent.currentTarget,HTMLElement)&&et(e.jsEvent.currentTarget),!0},[]);return(0,c.jsxs)(A.Z,{direction:k?"column":"row",width:"100%",children:[(0,c.jsx)(eX.Z,{open:ef,sx:{zIndex:1e5},children:(0,c.jsx)(ex.Z,{color:"secondary"})}),(0,c.jsx)(eu,{anchorEl:en,setAnchorEl:et,event:ei,setEvent:es,eventClick:ej}),(0,c.jsx)(eq,{anchorEl:el,setAnchorEl:ec,event:eh,setEvent:ev}),(void 0===f||f)&&(0,c.jsx)(ez,{filterDisabled:g,hideFilters:j,fullWidth:k,expanded:!k||Y,onChangeExpanded:function(e,n){return X(n)},hideExpandIcon:!k,title:"Calendar",date:W,setDate:M,setTypes:N,setSiteVisit:J,types:Q}),(0,c.jsx)(e4,{children:(0,c.jsx)(P.Z,{ref:eg,firstDay:1,businessHours:!1,buttonIcons:!0,dayMaxEvents:!0,editable:!1,expandRows:!1,height:"95vh",navLinks:!0,nowIndicator:!0,selectable:!1,weekNumbers:!1,views:eC,date:W,allDayContent:ew,slotLabelContent:ek,eventMaxStack:S?1:6,initialView:"day"===O.show?"timeGridDay":void 0,plugins:[F.Z,E.ZP,L.Z,U.Z],events:ey,eventClick:ej,eventContent:eS,moreLinkClick:eR,headerToolbar:{center:"prev,title,next",right:y?void 0:"createWorkOrder",left:"timeGridDay,timeGridWeek,dayGridMonth today"},customButtons:{createWorkOrder:{text:"Create work order",click:function(){h().push("/dashboard/issues/manage")}}}})})]})},e5=function(e){return(0,R.iv)(e0(),e.theme.palette.divider,e.theme.palette.white.contrastText,e.theme.palette.white.main,e.theme.palette.divider,e.theme.palette.secondary.contrastText,e.theme.palette.secondary.main,e.theme.palette.secondary.main,e.theme.palette.secondary.contrastText,e.theme.palette.secondary.main,e.theme.palette.secondary.main,e.theme.palette.secondary.main,e.theme.palette.secondary.main,e.theme.palette.secondary.contrastText,e.theme.palette.text.primary,e.theme.palette.secondary.dark,e.theme.palette.secondary.dark)},e4=O.Z.div(e2(),e5)},58632:function(e,n,t){t.d(n,{x:function(){return r}});var r=[{text:"Reactive",value:"reactive",context:"#2EE6CA"},{text:"Planned Maintenance",value:"ppm",context:"#D67EFF"},{text:"Quote",value:"quote",context:"#7D7"},{text:"Compliance",value:"cppm",context:"#CC7429"}]}}]);