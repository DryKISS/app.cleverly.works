"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8359],{74492:function(e,n,t){t.d(n,{a:function(){return o}});var i=t(55508),r=t(67294),o=function(){var e=(0,r.useContext)(i.d);if(!e)throw Error("useOffCanvasContext must be used within the OffCanvasProvider");return e}},19512:function(e,n,t){t.d(n,{D:function(){return o}});var i=t(67294),r=t(21925),o=function(){var e=(0,i.useContext)(r.S);if(!e)throw Error("useSnackbarContext must be used within the SnackbarProvider");return e}},36740:function(e,n,t){t.d(n,{s:function(){return d}});var i=t(26042),r=t(85893),o=t(67294),s=t(45697),a=t(27434),l=t(86532),u=t(38895),c=t(22797),d=function(e){var n=e.title,t=e.children,s=e.accordionSx,a=e.accordionSummarySx,d=e.accordionDetailsSx,p=e.expandIcon,x=e.headerAdornment,m=void 0===x?null:x,v=e.disabled,f=void 0!==v&&v,h=(0,o.useState)(!f),b=h[0],j=h[1];return(0,o.useEffect)(function(){f||j(!0)},[f]),(0,r.jsxs)(l.Z,{sx:(0,i.Z)({borderTop:"none!important",boxShadow:"none",marginBottom:"15px",opacity:f?.5:1},s),expanded:b,onClick:f?function(){}:function(e){e.stopPropagation(),j(function(e){return!e})},children:[(0,r.jsxs)(u.Z,{sx:(0,i.Z)({backgroundColor:"#F2F2F2",borderRadius:"4px"},a),expandIcon:(0,r.jsx)(p,{}),children:[m&&(0,r.jsx)(m,{}),n]}),(0,r.jsx)(c.Z,{onClick:function(e){return e.stopPropagation()},sx:(0,i.Z)({},d),children:t})]})};d.propTypes={title:s.node,children:s.object,accordionSx:s.object,accordionDetailsSx:s.object,accordionSummarySx:s.object,expandIcon:s.object},d.defaultProps={accordionSx:{},accordionSummarySx:{},accordionDetailsSx:{},expandIcon:a.Z}},52666:function(e,n,t){t.d(n,{b:function(){return r}});var i=t(26042),r=function(e,n){if(null===(t=e.meta)||void 0===t?void 0:null===(r=t.customerVATInvoice)||void 0===r?void 0:null===(o=r.rateInfo)||void 0===o?void 0:o.selectedSla)return e.meta.customerVATInvoice.rateInfo.selectedSla;var t,r,o,s,a,l,u,c=(0,i.Z)({},e.sla);c.entity="Job";var d=(0,i.Z)({},null===(s=e.location)||void 0===s?void 0:null===(a=s.slas)||void 0===a?void 0:a.find(function(e){return e.slaId===(null==c?void 0:c.id)&&e.inUse}));(null==d?void 0:d.sla)&&(d.entity="Property",d.name=d.sla.name);var p=(0,i.Z)({},null===(l=e.customer)||void 0===l?void 0:null===(u=l.slas)||void 0===u?void 0:u.find(function(e){return e.slaId===(null==c?void 0:c.id)&&e.inUse}));return(null==p?void 0:p.sla)&&(p.entity="Customer",p.name=p.sla.name),(0,i.Z)({},c,p,d)}},48795:function(e,n,t){t.d(n,{D:function(){return m}});var i=t(7297),r=t(85893),o=t(45697),s=t(10367),a=t(51466),l=t(64277),u=t(16166),c=t(21813),d=t(75118),p=t(74492);function x(){var e=(0,i.Z)(["\n  display: flex;\n  color: ",";\n  cursor: ",";\n"]);return x=function(){return e},e}var m=function(e){var n=e.id,t=e.invoiceNumber,i=e.number,o=e.numberPrefix,s=e.numberSuffix,x=e.openCanvas,m=e.isQuote,f=e.shortJobDesc,h=e.status,b=e.style,j=e.type,g=e.toggleShow,Z=(0,p.a)(),y=function(e){e.stopPropagation(),Z.show({content:(0,r.jsx)(c.g,{jobId:n,toggleShow:function(){Z.close(),g&&g()},numberPrefix:o,numberSuffix:s}),submit:!1,title:m?"Quote Details":"Job Details",xs3:"100vw",sm:"100vw",sm2:"100vw",sm3:"40vw",md2:"40vw",lg:"40vw",lg2:"40vw"})};return(0,r.jsxs)("div",{style:b,children:[(0,r.jsxs)(v,{onClick:function(e){return x&&y(e)},openCanvas:x,children:[h&&(0,u.B)({value:h,withTooltip:!0}),"".concat((0,l.y)(j)," ").concat("quote"!==j&&m?"Q":""),(0,d.p)({id:n,number:i,invoiceNumber:t,numberPrefix:o,numberSuffix:s})]}),f&&(0,r.jsx)(a.Z,{size:"xs",children:f})]})},v=s.ZP.a.withConfig({displayName:"renderJobId__StyledLink",componentId:"sc-9908e378-0"})(x(),function(e){var n=e.openCanvas,t=e.theme;return n&&t.COLOUR&&t.COLOUR.secondary},function(e){return e.openCanvas&&"pointer"});m.propTypes={id:o.number.isRequired,invoiceNumber:(0,o.oneOfType)([o.number,o.string]),openCanvas:o.bool,status:o.string,style:o.object,type:o.string.isRequired,number:o.string,numberPrefix:o.string,numberSuffix:o.string,toggleShow:o.func},m.defaultProps={openCanvas:!1,numberPrefix:"",numberSuffix:""}},21813:function(e,n,t){t.d(n,{g:function(){return H},h:function(){return eh}});var i=t(29815),r=t(85893),o=t(67294),s=t(45697),a=t.n(s),l=t(6812),u=t(66292),c=t(11163),d=t(26535),p=t(69661),x=t(15861),m=t(34193),v=t(51233),f=p.Z,h=function(e){var n=e.avatar,t=e.entity;return(0,r.jsxs)(v.Z,{direction:"row",alignItems:"center",sx:{margin:"1.3em 0em"},spacing:4,children:[(0,r.jsx)(f,{sx:{width:"55px",height:"55px"},content:(null==t?void 0:t.name)||"test",context:"primary",src:n}),(0,r.jsxs)(v.Z,{direction:"row",alignItems:"center",sx:{color:"#000"},children:[(0,r.jsx)(m.Z,{sx:{marginRight:"5px",width:"14px",height:"14px"}}),(0,r.jsx)(x.Z,{variant:"h6",sx:{height:"24px"},children:null==t?void 0:t.name})]})]})},b=t(84808),j=t(98456),g=t(74944),Z=t(30381),y=t.n(Z),C=t(5616),S=t(86886),R=t(90948),P=t(83162),w=t(52666),I=t(59505),q=t(48795),U=t(36740),O=(0,R.ZP)(C.Z)({margin:"5px 0px"}),T=function(e){var n,t,i,o,s,a,l=e.isQuotes,u=e.job,c=e.numberPrefix,d=e.numberSuffix,p=e.showOrder,m=(0,w.b)(u),f=(0,g.x)().hasRole;return(0,r.jsx)(U.s,{title:"Details",children:(0,r.jsxs)(S.ZP,{container:!0,children:[(0,r.jsxs)(S.ZP,{item:!0,xs:8,md:6,lg:6,rowSpacing:6,children:[p&&(0,r.jsxs)(O,{children:[(0,r.jsx)(x.Z,{children:"Order"}),(0,r.jsx)(P.r,{sx:{color:"#2196F3"},href:"/dashboard/issues/view?id=".concat(u.number),children:(0,r.jsx)(q.D,{id:u.id,number:u.number,numberPrefix:c,numberSuffix:d,type:u.type})})]}),u.tenantUser&&(0,r.jsxs)(O,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:"Tenant"}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:u.tenantUser.fullName})]}),u.reference&&(0,r.jsxs)(O,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:"Reference"}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:u.reference})]}),(0,r.jsxs)(O,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:l?"Description":"Short Job Description"}),(0,r.jsx)(x.Z,{variant:"subtitle1",sx:{maxWidth:"14rem"},children:(null==u?void 0:null===(n=u.shortJobDesc)||void 0===n?void 0:n.length)>0&&(null===(t=null==u?void 0:u.shortJobDesc[0])||void 0===t?void 0:t.taxonomy.name)||u.title})]}),(0,r.jsxs)(O,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:"Status"}),(0,r.jsx)(I.B,{value:u.status})]}),l&&(0,r.jsxs)(O,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:"Quote due date"}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:y()(u.quoteDue).format("YYYY-MM-DD")})]}),l&&!f("customer")&&(0,r.jsxs)(v.Z,{rowGap:.5,children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:"Supplier(s)"}),null===(i=u.quotations)||void 0===i?void 0:i.map(function(e){var n=e.supplier;return(0,r.jsx)(P.r,{href:"/dashboard/suppliers/view?id=".concat(null==n?void 0:n.id),color:"secondary",noWrap:!f("admin"),children:null==n?void 0:n.name})})]})]}),(0,r.jsxs)(S.ZP,{item:!0,xs:8,md:6,lg:6,rowSpacing:6,children:[l&&!f("customer")&&(0,r.jsxs)(O,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:f("admin")?"Required quotes":"Quotation"}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:u.quotations.length})]}),l&&!f("customer")&&(0,r.jsxs)(O,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:f("admin")?"Quotes received":"Received"}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:"".concat((u.quotations||[]).reduce(function(e,n){return"supplierQuoteComplete"===n.status?e+1:e},0),"/").concat((null===(o=u.quotations)||void 0===o?void 0:o.length)||0)})]}),!l&&(0,r.jsxs)(O,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:"Cost Category"}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:null===(s=u.costCategoryTaxonomy)||void 0===s?void 0:s.name})]}),!l&&(0,r.jsxs)(O,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:"Service"}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:null===(a=u.service)||void 0===a?void 0:a.name})]}),"ppm"!==u.type&&(0,r.jsxs)(O,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:"Priority"}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:"".concat((null==m?void 0:m.name)||"Not Specified "," (").concat((null==m?void 0:m.entity)||"Default",")")})]}),(0,r.jsxs)(O,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:"Assigned To"}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:u.manager?"".concat(u.manager.nameFirst," ").concat(u.manager.nameLast," "):"Unassigned"})]}),u.compliance&&(0,r.jsxs)(O,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:"Compliance"}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:u.compliance.name})]})]})]})})};T.propTypes={isQuotes:s.bool,job:s.object,showOrder:s.bool},T.defaultProps={showOrder:!0};var Q=t(50108),L=t(53767),A=(0,R.ZP)(C.Z)({margin:"5px 0px"}),_=function(e){var n,t,i=e.job,o=(0,L.q)().hasUserModule,s=(0,(0,g.x)().hasRole)("customer_user"),a=o("finances");return(0,r.jsx)(U.s,{title:"Customer",children:(0,r.jsxs)(S.ZP,{container:!0,children:[(0,r.jsxs)(S.ZP,{item:!0,xs:8,md:6,lg:6,rowSpacing:6,children:[(0,r.jsxs)(A,{children:[(0,r.jsx)(x.Z,{children:"Name"}),(0,r.jsx)(P.r,{sx:{color:"#2196F3"},href:"/dashboard/customers/view?id=".concat(i.customer.id),children:i.customer.name})]}),i.customerUser&&(0,r.jsxs)(A,{children:[(0,r.jsx)(x.Z,{children:"Contact"}),(0,r.jsx)(P.r,{sx:{color:"#2196F3"},href:"/dashboard/users/view?id=".concat(i.customerUser.id),children:i.customerUser.fullName})]}),(!s||a)&&(0,r.jsxs)(A,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:"Spend Threshold"}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:(0,Q.T)(i.customerSpendThreshold)})]})]}),(0,r.jsxs)(S.ZP,{item:!0,xs:8,md:6,lg:6,rowSpacing:6,children:[(0,r.jsxs)(A,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:"Email"}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:null===(n=i.customerUser)||void 0===n?void 0:n.email})]}),(0,r.jsxs)(A,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:"Phone"}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:null===(t=i.customerUser)||void 0===t?void 0:t.phone})]})]})]})})};_.propTypes={job:s.object.isRequired};var k=(0,R.ZP)(C.Z)({margin:"5px 0px"}),D=function(e){var n,t,i,o,s,a,l,u,c,d,p=e.job,m=null===(n=p.supplier)||void 0===n?void 0:null===(t=n.contactUsers)||void 0===t?void 0:t[0],v=(null===(i=p.supplierUser)||void 0===i?void 0:i.id)&&(null==m?void 0:m.user)&&(null===(o=p.supplierUser)||void 0===o?void 0:o.id)!==(null==m?void 0:null===(s=m.user)||void 0===s?void 0:s.id);return(0,r.jsx)(U.s,{title:"Supplier",children:(0,r.jsxs)(S.ZP,{container:!0,children:[(0,r.jsxs)(S.ZP,{item:!0,xs:8,md:6,lg:6,rowSpacing:6,children:[(0,r.jsxs)(k,{children:[(0,r.jsx)(x.Z,{children:"Name"}),(0,r.jsx)(P.r,{sx:{color:"#2196F3"},href:"/dashboard/suppliers/view?id=".concat(p.supplier.id),children:p.supplier.name})]}),m&&(0,r.jsxs)(k,{children:[(0,r.jsx)(x.Z,{children:v?"Contact":"Contact / Operative"}),(0,r.jsx)(P.r,{sx:{color:"#2196F3"},href:"/dashboard/users/view?id=".concat(m.user.id),children:m.user.fullName})]}),p.supplierUser&&v&&(0,r.jsxs)(k,{children:[(0,r.jsx)(x.Z,{children:"Operative"}),(0,r.jsx)(P.r,{sx:{color:"#2196F3"},href:"/dashboard/users/view?id=".concat(p.supplierUser.id),children:p.supplierUser.fullName})]})]}),(0,r.jsxs)(S.ZP,{item:!0,xs:8,md:6,lg:6,rowSpacing:6,children:[(0,r.jsxs)(k,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:v?"Contact email":"Email"}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:null==m?void 0:null===(a=m.user)||void 0===a?void 0:a.email})]}),(0,r.jsxs)(k,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:v?"Contact phone":"Phone"}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:null!==(d=null==m?void 0:null===(l=m.user)||void 0===l?void 0:l.phone)&&void 0!==d?d:"N/A"})]}),p.supplierUser&&v&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(k,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:"Operative email"}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:null===(u=p.supplierUser)||void 0===u?void 0:u.email})]}),(0,r.jsxs)(k,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:"Operative phone"}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:null===(c=p.supplierUser)||void 0===c?void 0:c.phone})]})]})]})]})})};D.propTypes={job:s.object};var J=(0,R.ZP)(C.Z)({margin:"5px 0px"}),N=function(e){var n=e.address,t=e.location,i=e.sublocation,o=(0,g.x)().hasRole;return(0,r.jsx)(U.s,{title:"Address",children:(0,r.jsxs)(S.ZP,{container:!0,children:[(0,r.jsxs)(S.ZP,{item:!0,xs:8,md:6,lg:6,rowSpacing:6,children:[(0,r.jsxs)(J,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:"Property"}),(0,r.jsx)(P.r,{href:"/dashboard/properties/view?id=".concat(t.id,"&tab=details"),noWrap:o("supplier"),color:"secondary",children:t.name}),"\xa0",i&&(0,r.jsxs)(P.r,{href:"/dashboard/properties/view?id=".concat(t.id,"&tab=sublocations"),noWrap:o("supplier"),color:"secondary",children:["(",i.name,")"]})]}),(0,r.jsxs)(J,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:"Name"}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:n.name||"N/A"})]})]}),(0,r.jsxs)(S.ZP,{item:!0,xs:8,md:6,lg:6,rowSpacing:6,children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:"Address"}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:n.addressLine1}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:n.addressLine2}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:n.addressLine3}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:n.city}),o(["admin","customer"])&&(0,r.jsx)(x.Z,{variant:"subtitle1",children:n.county}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:n.postCode})]})]})})};N.propTypes={address:s.object};var $=t(12978),F=t(49418),M=(0,R.ZP)(C.Z)({margin:"5px 0px"}),W=function(e){var n,t=e.isQuote,i=e.job,o=i.shortJobDesc&&i.shortJobDesc.length?i.shortJobDesc[0].taxonomy.name:"",s=null===(n=i.answers)||void 0===n?void 0:n.map(function(e){var n,t=e.id,i=e.taxonomyId;return{id:t,taxonomyId:i,comments:e.comments,name:e.taxonomy.name}});return(0,r.jsxs)(U.s,{title:"Issue Reported - Client",children:[(0,r.jsxs)(M,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:"Short Job Description"}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:o||"N/A"})]}),(0,r.jsxs)(M,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:t?"Description":"Job Description"}),(0,r.jsx)($.O,{sx:{fontSize:"1rem"},children:i.description||"N/A"})]}),(0,r.jsx)(F.y,{answers:s})]})};W.propTypes={job:s.object,isQuote:s.bool};var E=t(31312),V=(0,R.ZP)(C.Z)({margin:"5px 0px"}),z=function(e){var n=e.quotation,t=(0,L.q)().hasUserModule,i=(0,g.x)().hasRole,o=i("supplier"),s=i("customer"),a=i("tenant"),l=i("customer_user"),u=t("finances"),c=E.E6.find(function(e){return e.value===n.status})||{text:"-",context:"info"},d=(0,Q.T)(null==n?void 0:n.lineItems.filter(function(e){return"Labour"===e.type}).reduce(function(e,n){return e+n.supplierTotal},0)),p=(0,Q.T)(null==n?void 0:n.lineItems.filter(function(e){return"Materials"===e.type}).reduce(function(e,n){return e+n.supplierTotal},0)),m=(0,Q.T)(null==n?void 0:n.lineItems.reduce(function(e,n){return e+n.supplierTotal},0)),v=(0,Q.T)(null==n?void 0:n.lineItems.reduce(function(e,n){return e+n.total*n.qty},0));return(0,r.jsx)(U.s,{title:"Quotation ".concat((null==n?void 0:n.quoteNumber)||""),children:(0,r.jsxs)(S.ZP,{container:!0,children:[(0,r.jsxs)(S.ZP,{item:!0,xs:8,md:6,lg:6,rowSpacing:6,children:[(0,r.jsxs)(V,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:"Status"}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:c.text})]}),!s&&!a&&(0,r.jsxs)(V,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:"Labour Total"}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:d})]}),!s&&!a&&(0,r.jsxs)(V,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:"Materials Total"}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:p})]})]}),(0,r.jsxs)(S.ZP,{item:!0,xs:8,md:6,lg:6,rowSpacing:6,children:[!s&&!a&&(0,r.jsxs)(V,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:"Supplier Total"}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:m})]}),!o&&(!l&&!a||u)&&(0,r.jsxs)(V,{children:[(0,r.jsx)(x.Z,{variant:"subtitle2",children:"Customer Total"}),(0,r.jsx)(x.Z,{variant:"subtitle1",children:v})]})]})]})})};z.propTypes={quotation:s.object};var G=function(e){var n,t=e.jobId,s=e.toggleShow,a=e.numberPrefix,p=e.numberSuffix,x=(0,L.q)().hasUserModule,m=(0,g.x)().hasRole,v=(0,c.useRouter)(),f=m("tenant"),Z=m("customer_user"),y=x("finances"),C=x("quotes");(0,o.useEffect)(function(){var e=function(){s()};return v.events.on("routeChangeComplete",e),function(){v.events.off("routeChangeComplete",e)}},[v.events,s]);var S=(0,l.a)(u.Vw,{variables:{jobId:t}}),R=S.loading,P=S.data,w=(void 0===P?{job:{}}:P).job,I=w.quoted;if(R)return(0,r.jsx)(b.Z,{sx:{zIndex:1e5},open:!0,children:(0,r.jsx)(j.Z,{color:"secondary"})});var q,U,O=(null==w?void 0:null===(n=w.quotations)||void 0===n?void 0:n.length)?(0,i.Z)(w.quotations).sort(function(e,n){return e.id-n.id}):[],Q=(0,d.WE)(null==w?void 0:w.location,"registered");return(0,r.jsxs)(r.Fragment,{children:[w.customer&&(0,r.jsx)(h,{editable:!1,entity:{id:w.customer.id,name:w.customer.name,website:w.customer.website},entityName:"Account"}),(0,r.jsx)(T,{isQuotes:I,job:w,numberPrefix:a,numberSuffix:p}),Q&&(0,r.jsx)(N,{address:Q.address,location:null==w?void 0:w.location,sublocation:null==w?void 0:w.sublocation}),m(["admin","customer","tenant"])&&(0,r.jsx)(_,{job:w}),m(["admin"])&&w.supplier&&(0,r.jsx)(D,{job:w}),!!O.length&&I&&(!Z&&!f||C)&&(!Z&&!f||y)&&(U=(0,i.Z)(O),m("customer")&&(U=U.filter(function(e){var n=e.status;return"supplierQuoteSent"===n||"quotationAccepted"===n||"quotationRejected"===n})),U).map(function(e){return(0,r.jsx)(z,{quotation:e})}),(0,r.jsx)(W,{isQuote:I,job:w})]})};G.propTypes={jobId:s.number.isRequired,toggleShow:s.func.isRequired,numberPrefix:s.string,numberSuffix:s.string},G.defaultProps={numberPrefix:"",numberSuffix:""};var H=G,B=t(47568),Y=t(828),K=t(97582),X=t(42283),ee=t(91830),en=t(50319),et=t(16310),ei=t(79665),er=t(19512),eo=t(1691),es=t(11057),ea=t(64666),el=t(31425),eu=t(6514),ec=t(58951),ed=t(37645),ep=t(67797),ex=es.Z,em=[{label:"Accepted",value:"accepted",color:"white.main",bgcolor:"success.main"},{label:"In Progress",value:"inProgress",color:"white.main",bgcolor:"primary.main"}],ev=et.Ry({status:et.Z_().oneOf(em.map(function(e){return e.value})).required()}),ef=function(e){var n,t=e.jobId,i=e.completed,s=e.close,a=(0,Y.Z)((0,ep.d)(),2),l=a[0],c=a[1],d=(0,X.cI)({defaultValues:{status:"accepted"},resolver:(0,ei.S)(ev)}),p=d.control,x=d.errors,m=d.handleSubmit,v=(0,er.D)(),f=(0,Y.Z)((0,en.D)(u.Nl,{refetchQueries:["GetJob"],onCompleted:function(){v.show({content:"Success: Job was roll backed",severity:"success"}),s()},onError:function(e){v.show({content:"Error: ".concat(e.message),severity:"error"})}}),1)[0],h=(n=(0,B.Z)(function(e){return(0,K.__generator)(this,function(n){return c({content:function(n){var i=n.onClose;return(0,r.jsx)(eb,{onClose:i,onApprove:function(){f({variables:{jobId:t,status:e.status}})}})}}),[2]})}),function(e){return n.apply(this,arguments)}),b=(0,o.useMemo)(function(){return em.filter(function(e){return"inProgress"!==e.value||i})},[i]);return(0,r.jsxs)(r.Fragment,{children:[l,(0,r.jsxs)("form",{id:"offCanvasForm",onSubmit:m(h),children:[(0,r.jsx)(eo.Z,{severity:"warning",color:"info",variant:"filled",sx:{mb:2},children:"Where possible, information such as added media, follow on jobs and remedial quotes will be saved along with the original work order details. However, please note that some information will be lost in reverting a job to a prior status."}),(0,r.jsx)(X.Qr,{control:p,name:"status",render:function(e){var n,t=e.value,i=e.onChange;return(0,r.jsx)(ee.P,{formControl:{color:"secondary",variant:"standard",error:x.status,helperText:null===(n=x.status)||void 0===n?void 0:n.message},selectProps:{fullWidth:!0},inputComponent:"chip",selectComponent:"chip",label:"Status:",value:t,onChange:i,options:b})}})]})]})};ef.defaultProps={close:function(){}},ef.propTypes={jobId:a().number.isRequired,completed:a().bool.isRequired,close:a().func};var eh=ef;function eb(e){var n=e.onClose,t=e.onApprove,i=function(){t()},o=function(){n()};return(0,r.jsxs)(ea.Z,{open:!0,onClose:o,children:[(0,r.jsx)(ed.Z,{children:"Roll back?"}),(0,r.jsx)(eu.Z,{children:(0,r.jsx)(ec.Z,{children:"Rolling the job back will revert the job back to its immediately prior status. Please note some information may be lost by doing so."})}),(0,r.jsxs)(el.Z,{children:[(0,r.jsx)(ex,{onClick:o,color:"danger",variant:"contained",children:"Cancel"}),(0,r.jsx)(ex,{onClick:i,color:"secondary",variant:"contained",autoFocus:!0,children:"Ok"})]})]})}},66292:function(e,n,t){t.d(n,{Jw:function(){return j},Nl:function(){return b},Vw:function(){return h},xY:function(){return f}});var i=t(7297),r=t(75063),o=t(22666);function s(){var e=(0,i.Z)(["\n  fragment JobFields on Job {\n    access\n    adminId\n    costCategory\n    createdAt\n    description\n    id\n    meta\n    pricing\n    reference\n    scheduledAt\n    status\n    supplierLabourAmount\n    supplierMaterialsAmount\n    timing\n    timingEnd\n    timingNormalHours\n    timingStart\n    title\n    type\n    siteVisitStart\n    siteVisitEnd\n    siteVisitWeekends\n    amount\n    number\n    quoted\n    timingStatus\n    correctDuration\n    correctStart\n    correctEnd\n  }\n"]);return s=function(){return e},e}function a(){var e=(0,i.Z)(["\n  fragment JobQuoteFields on Job {\n    quoted\n    quoteNumber\n    quoteDue\n    quoteCharge\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,i.Z)(["\n  fragment JobAdminFields on Job {\n    supplierId\n    supplierUserId\n  }\n"]);return l=function(){return e},e}function u(){var e=(0,i.Z)(["\n  fragment JobSupplierFields on Job {\n    supplierId\n    supplierUserId\n  }\n"]);return u=function(){return e},e}function c(){var e=(0,i.Z)(["\n  mutation UpdateJob(\n    $id: Int!\n    $changes: Job_set_input\n    $timing: [JobTiming_insert_input!]!\n    $_append: Job_append_input = {}\n  ) {\n    update_Job_by_pk(pk_columns: { id: $id }, _set: $changes, _append: $_append) {\n      id\n    }\n    insert_JobTiming(objects: $timing) {\n      returning {\n        id\n        status\n        createdAt\n      }\n    }\n  }\n"]);return c=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation InsertJobTiming($timing: [JobTiming_insert_input!]!) {\n    insert_JobTiming(objects: $timing) {\n      returning {\n        id\n        status\n        createdAt\n      }\n    }\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,i.Z)(['\n  query GetJobHistory(\n    $jobId: Int\n    $locationId: Int!\n    $limit: Int\n    $offset: Int\n    $serviceId: Int\n    $startDate: timestamptz!\n  ) {\n    jobs: Job(\n      limit: $limit\n      offset: $offset\n      order_by: { createdAt: desc }\n      where: {\n        createdAt: { _gte: $startDate }\n        id: { _neq: $jobId }\n        locationId: { _eq: $locationId }\n        serviceId: { _eq: $serviceId }\n        status: { _nin: ["pending", "raised", "offered", "accepted", "inProgress"] }\n      }\n    ) {\n      id\n      title\n      status\n      scheduledAt\n      createdAt\n      meta\n      service: Service {\n        id\n        name\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n    }\n    meta: Job_aggregate(\n      where: {\n        createdAt: { _gte: $startDate }\n        id: { _neq: $jobId }\n        locationId: { _eq: $locationId }\n        serviceId: { _eq: $serviceId }\n        status: { _nin: ["pending", "raised", "offered", "accepted", "inProgress"] }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n']);return p=function(){return e},e}function x(){var e=(0,i.Z)(['\n  query GetJobOffCanvas($jobId: Int!) {\n    job: Job_by_pk(id: $jobId) {\n      access\n      costCategory\n      customerSpendThreshold\n      description\n      supplierLabourAmount\n      supplierMaterialsAmount\n      quoteDue\n      quoteNumber\n      id\n      number\n      meta\n      paymentMethod\n      reference\n      status\n      title\n      type\n      quoted\n      sublocation: Sublocation {\n        name\n      }\n      invoices: Invoices(order_by: { createdAt: desc }) {\n        id\n        invoiceNumber\n      }\n      quotations: SupplierQuotes {\n        id\n        quoteNumber\n        status\n        lineItems: SupplierQuoteLineItems {\n          id\n          description\n          item\n          qty\n          qtyUnit\n          quoteId\n          total\n          type\n          unitRate\n          supplierTotal\n        }\n        supplier: Supplier {\n          id\n          type\n          name\n          accountUsers: Account_Users {\n            user: User {\n              id\n              fullName\n              nameFirst\n              nameLast\n              phone\n              email\n              devices: UserDevices(where: { status: { _eq: "active" } }) {\n                id\n                playerId\n              }\n            }\n          }\n        }\n      }\n      admin: Admin {\n        id\n        name\n      }\n      service: Service {\n        id\n        name\n      }\n      manager: Manager {\n        id\n        nameFirst\n        nameLast\n      }\n      customer: Customer {\n        id\n        name\n        website\n        slas: SLAs(where: { entity: { _eq: "Account" } }) {\n          id\n          entity\n          entityId\n          onSite\n          onSiteUnit\n          jobReport\n          jobReportUnit\n          completion\n          completionUnit\n          notes\n          inUse\n          normalRate\n          oohRate\n          premiumRate\n          minimumInterval\n          minimumLength\n          slaId\n          sla: SLA {\n            id\n            name\n            notes\n            normalRate\n            oohRate\n            premiumRate\n            onSite\n            onSiteUnit\n            jobReport\n            jobReportUnit\n            completion\n            completionUnit\n            minimumInterval\n            minimumLength\n          }\n        }\n      }\n      customerUser: CustomerUser {\n        id\n        nameFirst\n        nameLast\n        fullName\n        email\n        phone\n      }\n      supplier: Supplier {\n        id\n        name\n        contactUsers: Account_Users(where: { isContact: { _eq: true } }) {\n          id\n          role\n          position\n          isContact\n          lastSignInAt\n          userId\n          user: User {\n            id\n            fullName\n            nameFirst\n            nameLast\n            email\n            phone\n          }\n        }\n      }\n      supplierUser: SupplierUser {\n        id\n        fullName\n        nameFirst\n        nameLast\n        email\n        phone\n      }\n      location: Location {\n        id\n        name\n        addresses: Addresses(where: { entity: { _eq: "Location" } }) {\n          ...AddressEntityFields\n          address: Address {\n            ...AddressFields\n            country: Country {\n              id\n              name\n            }\n          }\n        }\n        slas: SLAs(where: { entity: { _eq: "Location" } }) {\n          id\n          entity\n          entityId\n          onSite\n          onSiteUnit\n          jobReport\n          jobReportUnit\n          completion\n          completionUnit\n          notes\n          inUse\n          normalRate\n          oohRate\n          premiumRate\n          minimumInterval\n          minimumLength\n          slaId\n          sla: SLA {\n            id\n            name\n            notes\n            normalRate\n            oohRate\n            premiumRate\n            onSite\n            onSiteUnit\n            jobReport\n            jobReportUnit\n            completion\n            completionUnit\n            minimumInterval\n            minimumLength\n          }\n        }\n      }\n      sla: SLA {\n        id\n        name\n        notes\n        normalRate\n        oohRate\n        premiumRate\n        onSite\n        onSiteUnit\n        jobReport\n        jobReportUnit\n        completion\n        completionUnit\n        minimumInterval\n        minimumLength\n      }\n      costCategoryTaxonomy: CostCategory {\n        id\n        name\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n    }\n  }\n  ',"\n  ","\n"]);return x=function(){return e},e}function m(){var e=(0,i.Z)(["\n  mutation RollbackToStatus($jobId: Int!, $status: String!) {\n    rollbackToStatus(jobId: $jobId, status: $status) {\n      data\n      success\n    }\n  }\n"]);return m=function(){return e},e}function v(){var e=(0,i.Z)(["\n  mutation CompleteJob($jobId: Int!) {\n    completeJob(jobId: $jobId) {\n      message\n    }\n  }\n"]);return v=function(){return e},e}(0,r.Ps)(s()),(0,r.Ps)(a()),(0,r.Ps)(l()),(0,r.Ps)(u());var f=(0,r.Ps)(c());(0,r.Ps)(d()),(0,r.Ps)(p());var h=(0,r.Ps)(x(),o.WW,o.MR),b=(0,r.Ps)(m()),j=(0,r.Ps)(v())},59505:function(e,n,t){t.d(n,{B:function(){return f}});var i=t(40872),r=t(26042),o=t(69396),s=t(99534),a=t(29815),l=t(85893),u=t(45697),c=t.n(u),d=t(87918),p=t(52150),x=t(74944),m=t(31312),v=d.Z,f=function(e){var n=(0,i.Z)({},e),t=n.value,u=(0,s.Z)(n,["value"]),c=(0,p.b)(t),d=(0,x.x)().hasRole,f=(0,a.Z)(m.iz).concat((0,a.Z)(m.yW),(0,a.Z)(m.l8)).find(function(e){return e.value===t})||{statusText:""},h=f.text,b=f.customerText,j=f.supplierText,g=d("admin")?h:d("supplier")?j||h:d("customer")&&b||h;return(0,l.jsx)(v,(0,o.Z)((0,r.Z)({},u),{label:g,color:c,size:"small"}))};f.propTypes={value:c().string.isRequired}},75118:function(e,n,t){t.d(n,{p:function(){return i}});var i=function(e){var n=e.id,t=e.number,i=e.invoiceNumber,r=e.numberPrefix,o=e.numberSuffix,s=n?"".concat(r," ").concat(t||n," ").concat(o):"";return i?"".concat(s," / ").concat(i):s}},16166:function(e,n,t){t.d(n,{B:function(){return m}});var i=t(7297),r=t(29815),o=t(85893),s=t(45697),a=t(10367),l=t(41564),u=t(51466),c=t(31312),d=t(52150),p=t(74944);function x(){var e=(0,i.Z)(["\n  display: flex;\n  align-items: center;\n"]);return x=function(){return e},e}var m=function(e){var n=e.size,t=e.value,i=e.withTooltip,s=e.textColor,a=(0,d.t)(t),x=(0,p.x)().hasRole,m=(0,r.Z)(c.iz).concat((0,r.Z)(c.yW),(0,r.Z)(c.l8)).find(function(e){return e.value===t})||{statusText:""},f=m.text,h=m.customerText,b=m.supplierText,j=x("admin")?f:x("supplier")?b||f:x("customer")&&h||f;return i?(0,o.jsx)(l.Z,{content:j,context:"black",children:(0,o.jsx)(v,{children:(0,o.jsx)("svg",{height:"16",width:"16",children:(0,o.jsx)("circle",{cx:"8",cy:"8",r:"6",fill:a})})})}):(0,o.jsxs)(v,{children:[(0,o.jsx)("svg",{height:"16",width:"16",children:(0,o.jsx)("circle",{cx:"8",cy:"8",r:"6",fill:a})}),(0,o.jsx)(u.Z,{size:n,context:s,children:j})]})},v=a.ZP.span.withConfig({displayName:"status__StyledLabel",componentId:"sc-92a50dbd-0"})(x());m.propTypes={size:s.string,value:s.string.isRequired,withTooltip:s.bool},m.defaultProps={size:"sm",withTooltip:!1}},83162:function(e,n,t){t.d(n,{r:function(){return p}});var i=t(26042),r=t(69396),o=t(99534),s=t(85893),a=t(45697),l=t.n(a),u=t(41664),c=t.n(u),d=t(23795),p=function(e){var n=e.children,t=e.href,a=e.noWrap,l=e.target,u=e.sx,p=void 0===u?{}:u,x=(0,o.Z)(e,["children","href","noWrap","target","sx"]);return a?(0,s.jsx)(s.Fragment,{children:n}):t?(0,s.jsx)(c(),{href:t,target:l,passHref:!0,children:(0,s.jsx)(d.Z,(0,r.Z)((0,i.Z)({sx:p,children:n,href:t,noWrap:a,target:l},x),{children:n}))}):(0,s.jsx)(d.Z,(0,r.Z)((0,i.Z)({sx:p,children:n,href:t,noWrap:a,target:l},x),{children:n}))};p.defaultProps={onClick:function(e){e.stopPropagation()}},p.propTypes={onClick:l().func,href:l().string,noWrap:l().bool,color:l().string}},91830:function(e,n,t){t.d(n,{P:function(){return y}});var i=t(26042),r=t(69396),o=t(85893),s=t(67294),a=t(10166),l=t(45697),u=t.n(l),c=t(94054),d=t(47312),p=t(18972),x=t(18360),m=t(56815),v=t(51233),f=t(15861),h=t(5616),b=t(87918),j=t(69368),g={text:function(e){var n=e.option,t=e.multiple,i=e.index;return t&&i>0?", ".concat(n.label):n.label},textWithIcon:function(e){var n=e.option;return(0,o.jsxs)(v.Z,{direction:"row",alignItems:"center",spacing:1,children:[n.icon,(0,o.jsxs)(f.Z,{children:[" ",n.label]})]})},chip:function(e){var n=e.chipProps,t=e.option;return(0,s.createElement)(b.Z,(0,r.Z)((0,i.Z)({},n),{key:t.value,label:t.label,icon:t.icon,sx:{color:t.color,bgcolor:t.bgcolor}}))}},Z={text:function(e){return e.option.label},textWithIcon:function(e){var n=e.option;return(0,o.jsxs)(v.Z,{direction:"row",alignItems:"center",spacing:1,children:[n.icon,(0,o.jsxs)(f.Z,{children:[" ",n.label]})]})},chip:function(e){var n=e.chipProps,t=e.option;return(0,s.createElement)(b.Z,(0,r.Z)((0,i.Z)({},n),{key:t.value,label:t.label,icon:t.icon,sx:{color:t.color,bgcolor:t.bgcolor}}))},checkbox:function(e){var n=e.option,t=e.value;return(0,o.jsxs)(v.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,o.jsx)(j.Z,{color:"secondary",sx:{height:"10px"},checked:t.indexOf(n.value)>-1}),(0,o.jsxs)(f.Z,{children:[" ",n.label]})]})}},y=function(e){var n=e.label,t=e.value,s=e.onChange,a=e.leftSideLabel,l=e.options,u=e.inputComponent,c=e.selectComponent,d=e.withoutSelectIcon,v=e.formControl,b=e.chipProps,j=e.selectProps,y=function(e){return l.find(function(n){return n.value===e})};return(0,o.jsxs)(C,(0,r.Z)((0,i.Z)({},v),{leftSideLabel:a,withoutSelectIcon:d,children:[n&&a&&(0,o.jsx)(f.Z,{children:n}),n&&!a&&(0,o.jsx)(S,{shrink:""!==t&&void 0!==t,children:n}),(0,o.jsx)(x.Z,(0,r.Z)((0,i.Z)({displayEmpty:!0},j),{value:t,onChange:s,inputProps:{shrink:!0},renderValue:function(){if(Array.isArray(t))return(0,o.jsx)(h.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:t.map(function(e,n){var t=y(e);return t?g[u]({chipProps:b,option:t,multiple:!0,index:n}):""})});var e=y(t);return e?(0,o.jsx)(h.Z,{children:g[u]({chipProps:b,option:e})}):""},children:l.map(function(e){return(0,o.jsx)(p.Z,{value:e.value,children:Z[c]({chipProps:b,option:e,value:t})},e.value)})})),(null==v?void 0:v.helperText)&&(0,o.jsx)(m.Z,{children:v.helperText})]}))};y.defaultProps={label:"",onChange:function(){},leftSideLabel:!1,options:[],inputComponent:"text",selectComponent:"text",withoutSelectIcon:!1,formControl:{error:!1,helperText:""},chipProps:{size:"small"},selectProps:{}},y.propTypes={label:u().string,value:u().oneOfType([u().string,u().array]),onChange:u().func,leftSideLabel:u().bool,options:u().arrayOf(u().shape({label:u().string.isRequired,value:u().string.isRequired,color:u().string,bgcolor:u().string,icon:u().node}).isRequired),inputComponent:u().oneOf(["text","textWithIcon","chip"]),selectComponent:u().oneOf(["text","textWithIcon","chip","checkbox"]),withoutSelectIcon:u().bool,formControl:u().object,chipProps:u().object,selectProps:u().object};var C=(0,a.Z)(c.Z)(function(e){e.theme;var n=e.leftSideLabel,t=e.withoutSelectIcon;return{"&.MuiFormControl-root":(0,i.Z)({display:"flex",flexDirection:"column",alignItems:"flex-start"},n&&{display:"flex",flexDirection:"row",alignItems:"center",gap:"10px"}),"& .MuiSelect-icon":(0,i.Z)({},t&&{display:"none"})}}),S=(0,a.Z)(d.Z)(function(e){return{"&.MuiFormLabel-root.MuiInputLabel-root.Mui-focused":{color:e.theme.palette.secondary.main}}})},49418:function(e,n,t){t.d(n,{y:function(){return u}});var i=t(85893),r=t(45697),o=t.n(r),s=t(5616),a=t(67720),l=t(15861),u=function(e){var n=e.answers;return(0,i.jsxs)(i.Fragment,{children:[n&&n.length>0&&(0,i.jsx)(a.Z,{children:"Questions"}),n&&n.map(function(e){var n,t,r,o=e.meta;return(null==o?void 0:o.input)==="media"?null:(0,i.jsxs)(s.Z,{children:[(0,i.jsx)(l.Z,{variant:"subtitle2",children:(null===(n=e.taxonomy)||void 0===n?void 0:n.name)||e.name}),(0,i.jsx)(l.Z,{children:e.comments||(null===(t=e.taxonomy_entity)||void 0===t?void 0:null===(r=t[0])||void 0===r?void 0:r.comments)})]},e.id||e.taxonomyId)}),n&&n.length>0&&(0,i.jsx)(a.Z,{})]})};u.propTypes={answers:o().array}},12978:function(e,n,t){t.d(n,{O:function(){return p}});var i=t(26042),r=t(69396),o=t(99534),s=t(85893),a=t(67294),l=t(83162),u=t(45697),c=t.n(u),d=t(15861),p=function(e){var n=e.maxLength,t=e.children,u=e.href,c=e.fontSize,p=(0,o.Z)(e,["maxLength","children","href","fontSize"]),x=(0,a.useState)(!1),m=x[0],v=x[1],f=function(e){e.stopPropagation(),v(!m)},h=(null==t?void 0:t.length)>n?"".concat(t.slice(0,n),"..."):t,b=m?t:h,j=u?(0,s.jsx)(l.r,{color:"secondary",href:u,children:b}):b;return(0,s.jsxs)(d.Z,(0,r.Z)((0,i.Z)({fontSize:c},p),{children:[j,!m&&(null==t?void 0:t.length)>n&&(0,s.jsx)(d.Z,{underline:"none",fontSize:c,sx:{cursor:"pointer",display:"inline-block",fontWeight:600,color:"rgba(0, 0, 0, 0.5)"},onClick:f,children:"more"}),m&&t.length>n&&(0,s.jsx)(d.Z,{underline:"none",fontSize:c,sx:{cursor:"pointer",display:"inline-block",fontWeight:600,color:"rgba(0, 0, 0, 0.5)"},onClick:f,children:" | less"})]}))};p.defaultProps={maxLength:100,children:""},p.propTypes={maxLength:c().number,children:c().node}},50108:function(e,n,t){t.d(n,{T:function(){return i}});function i(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GBP";return new Intl.NumberFormat(["en-GB"],{currency:n,currencyDisplay:"symbol",style:"currency"}).format(e)}},52150:function(e,n,t){t.d(n,{b:function(){return o},t:function(){return r}});var i=t(83372),r=function(e){switch(e){case"raised":case"pending":default:return i.Q.COLOUR.info;case"offered":return i.Q.COLOUR.warning;case"accepted":return i.Q.COLOUR.success;case"inProgress":return i.Q.COLOUR.primary;case"completed":return i.Q.COLOUR.muiLightGray;case"reportSent":case"quoteRejected":return i.Q.COLOUR.muiGray;case"invoiceSent":return i.Q.COLOUR.secondary;case"customerPaid":case"supplierPaid":case"quoteReceived":return i.Q.COLOUR.help;case"closed":case"quoteClosed":return i.Q.COLOUR.black;case"quoteOffered":return i.Q.COLOUR.danger;case"quoteNew":return i.Q.COLOUR.muiLightViolet;case"quoteSent":return i.Q.COLOUR.muiInfo}},o=function(e){switch(e){case"raised":case"pending":default:return"info";case"offered":return"warning";case"accepted":return"success";case"inProgress":case"quoteReceived":return"primary";case"completed":return"muiLightGray";case"reportSent":return"muiGray";case"invoiceSent":return"secondary";case"customerPaid":case"supplierPaid":return"help";case"quoteClosed":case"closed":case"quoteCancelled":case"quoteRejected":return"black";case"quoteOffered":return"danger";case"quoteNew":return"muiLightViolet";case"quoteSent":return"muiInfo"}}},64277:function(e,n,t){t.d(n,{y:function(){return i}});var i=function(e){switch(e){case"ppm":return"PM";case"quote":return"Q";case"reactive":return"J";case"cppm":return"C";default:return""}}},67797:function(e,n,t){t.d(n,{d:function(){return s}});var i=t(85893),r=t(11994),o=t(67294);function s(){var e=(0,o.useState)(null),n=e[0],t=e[1],s=(0,o.useCallback)(function(){t(null)},[]),a=(0,o.useMemo)(function(){if(null===n)return null;var e=n.content,t=n.keepMounted;return(0,i.jsx)(r.Z,{open:!0,keepMounted:t,onClose:s,children:e})},[n,s]),l=(0,o.useCallback)(function(e){var n=e.content,i=e.keepMounted;t({keepMounted:void 0===i||i,content:n({onClose:s})})},[s]);return[a,l]}},31312:function(e,n,t){t.d(n,{AK:function(){return l},E6:function(){return r},cj:function(){return a},hD:function(){return c},iz:function(){return o},l8:function(){return u},yW:function(){return s}});var i=t(83372),r=[{text:"Quotation Requested",value:"supplierQuoteRequested",context:"info"},{text:"Quotation Completed",value:"supplierQuoteComplete",context:"help"},{text:"Draft Quotation",value:"supplierQuoteDraft",context:"info"},{text:"Awaiting threshold approval",value:"waitingThresholdApproval",context:"info"},{text:"Quotation Refused",value:"supplierQuoteRefused",context:"danger"},{text:"Quotation Sent",value:"supplierQuoteSent",context:"success"},{text:"Quotation Accepted",value:"quotationAccepted",context:"success"},{text:"Quotation Rejected",value:"quotationRejected",context:"danger"},{text:"Quotation Updated",value:"supplierQuoteUpdated",context:"success"}],o=[{text:"New Quote",value:"quoteNew",customerText:"Quote issued",supplierText:null},{text:"Sent to Supplier(s)",value:"quoteOffered",customerText:"Quote issued",supplierText:"Quote offered"},{text:"Received from Supplier(s)",value:"quoteReceived",customerText:"Final review",supplierText:"Quote submitted"},{text:"Sent to Customer",value:"quoteSent",customerText:"Awaiting approval",supplierText:"Awaiting approval"},{text:"Quote Accepted",value:"quoteAccepted",customerText:"Quote accepted",supplierText:"Quote accepted"},{text:"Quote Rejected",value:"quoteRejected",customerText:"Quote rejected",supplierText:"Quote rejected"},{text:"Canceled",value:"quoteCancelled",customerText:"Cancelled",supplierText:null},{text:"Closed",value:"quoteClosed",customerText:"Closed",supplierText:"Closed"}],s=[{text:"Pending",value:"pending",colour:i.Q.COLOUR.info},{text:"Raised",value:"raised",colour:i.Q.COLOUR.info},{text:"Offered",value:"offered",colour:i.Q.COLOUR.warning},{text:"Accepted",value:"accepted",colour:i.Q.COLOUR.success},{text:"In Progress",value:"inProgress",colour:i.Q.COLOUR.primary},{text:"Completed",value:"completed",colour:i.Q.COLOUR.muiLightGray},{text:"Awaiting threshold approval",value:"waitingThresholdApproval",colour:i.Q.COLOUR.info},{text:"Report Sent",value:"reportSent",colour:i.Q.COLOUR.muiGray},{text:"Invoice Sent",value:"invoiceSent",colour:i.Q.COLOUR.secondary},{text:"Customer Paid",value:"customerPaid",colour:i.Q.COLOUR.help},{text:"Supplier Paid",value:"supplierPaid",colour:i.Q.COLOUR.help},{text:"Canceled",value:"canceled",colour:i.Q.COLOUR.black},{text:"Closed",value:"closed",colour:i.Q.COLOUR.black},{text:"On Hold",value:"onHold",colour:i.Q.COLOUR.black},{text:"Continued",value:"continued",colour:i.Q.COLOUR.primary},{text:"Paused",value:"paused",colour:i.Q.COLOUR.black}],a=[{label:"Pending",value:"pending"},{label:"Raised",value:"raised"},{label:"Offered",value:"offered"},{label:"Accepted",value:"accepted"},{label:"In Progress",value:"inProgress"},{label:"Completed",value:"completed"},{label:"Awaiting threshold approval",value:"waitingThresholdApproval"},{label:"Report Sent",value:"reportSent"},{label:"Invoice Sent",value:"invoiceSent"},{label:"Customer Paid",value:"customerPaid"},{label:"Supplier Paid",value:"supplierPaid"},{label:"Quote",value:"quote"},{label:"Site Visit",value:"siteVisit"},{label:"Canceled",value:"canceled"},{label:"Closed",value:"closed"},{label:"On Hold",value:"onHold"},{label:"Continued",value:"continued"},{label:"Paused",value:"paused"}],l=[{text:"Uplift Draft",value:"upliftDraft",context:"info"},{text:"Supplier Uplift Requested",value:"supplierUpliftRequested",context:"secondary"},{text:"Uplift Requested Send to Customer",value:"upliftRequestSendCustomer",context:"secondary"},{text:"Uplift Approved",value:"customerUpliftApproved",context:"success"},{text:"Uplift Rejected",value:"customerUpliftRejected",context:"danger"}],u=[{text:"Offered",value:"offered",context:"info"},{text:"Raised",value:"raised",context:"info"},{text:"Pending",value:"pending",context:"info"},{text:"Accepted",value:"accepted",context:"info"},{text:"Uplift Requested by Supplier",value:"supplierUpliftRequested",context:"info"},{text:"Uplift Draft",value:"upliftDraft",context:"info"},{text:"Uplift Requested Send Customer",value:"upliftRequestSendCustomer",context:"info"},{text:"Uplift Requested Approved",value:"customerUpliftApproved",context:"success"},{text:"In Dispute",value:"inDispute",context:"info"},{text:"Resumed",value:"resumed",context:"Danger"},{text:"Quote Sent",value:"quoteSent",context:"info"},{text:"Quote Offered",value:"quoteOffered",context:"info"},{text:"Report Sent Supplier",value:"reportSentSupplier",context:"info"},{text:"Dispute Resolved",value:"disputeResolved",context:"info"},{text:"Validated",value:"validated",context:"success"},{text:"Un Validated",value:"unvalidated",context:"success"},{text:"Paused",value:"paused",context:"info"},{text:"TimingChanged",value:"timingChanged",context:"info"},{text:"Customer Paid",value:"customerPaid",context:"info"},{text:"In Progress",value:"inProgress",context:"info"},{text:"PPM Invoice Created",value:"ppmInvoiceCreated",context:"success"},{text:"Late Arrival",value:"lateArrival",context:"info"},{text:"Pricing Changed",value:"pricingChanged",context:"info"},{text:"Report Sent",value:"reportSent",context:"info"},{text:"Invoice Sent Supplier",value:"invoiceSentSupplier",context:"info"},{text:"Invoice Sent",value:"invoiceSent",context:"info"},{text:"Invoice Sent Customer",value:"invoiceSentCustomer",context:"info"},{text:"Quote Accepted",value:"quoteAccepted",context:"info"},{text:"On Hold",value:"onHold",context:"info"},{text:"Continued",value:"continued",context:"info"},{text:"Quote Received",value:"quoteReceived",context:"info"},{text:"Quote New",value:"quoteNew",context:"info"},{text:"Closed",value:"closed",context:"danger"},{text:"Re posted",value:"reposted",context:"info"},{text:"Supplier Paid",value:"supplierPaid",context:"info"},{text:"Rejected",value:"rejected",context:"info"},{text:"Completed",value:"completed",context:"info"},{text:"Canceled",value:"canceled",context:"danger"}],c=[{value:"complete",text:"Complete"},{value:"returnVisitByAnother",text:"Return Visit By Another"},{value:"returnVisit",text:"Return Visit"},{value:"completeCertificate",text:"Complete Certificate"},{value:"couldNotDo",text:"Could Not Do"}]}}]);