"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3261],{51233:function(n,e,t){t.d(e,{Z:function(){return S}});var r=t(63366),i=t(87462),a=t(67294),o=t(70828),s=t(68027),u=t(8027),c=t(58510),l=t(45098),d=t(29628),p=t(39707),m=t(17172),f=t(95408),_=t(98700),g=t(85893);let v=["component","direction","spacing","divider","children","className","useFlexGap"],y=(0,m.Z)(),$=(0,l.Z)("div",{name:"MuiStack",slot:"Root",overridesResolver:(n,e)=>e.root});function h(n){return(0,d.Z)({props:n,name:"MuiStack",defaultTheme:y})}let A=n=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[n],b=({ownerState:n,theme:e})=>{let t=(0,i.Z)({display:"flex",flexDirection:"column"},(0,f.k9)({theme:e},(0,f.P$)({values:n.direction,breakpoints:e.breakpoints.values}),n=>({flexDirection:n})));if(n.spacing){let r=(0,_.hB)(e),a=Object.keys(e.breakpoints.values).reduce((e,t)=>(("object"==typeof n.spacing&&null!=n.spacing[t]||"object"==typeof n.direction&&null!=n.direction[t])&&(e[t]=!0),e),{}),o=(0,f.P$)({values:n.direction,base:a}),u=(0,f.P$)({values:n.spacing,base:a});"object"==typeof o&&Object.keys(o).forEach((n,e,t)=>{let r=o[n];if(!r){let i=e>0?o[t[e-1]]:"column";o[n]=i}});let c=(e,t)=>n.useFlexGap?{gap:(0,_.NA)(r,e)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${A(t?o[t]:n.direction)}`]:(0,_.NA)(r,e)}};t=(0,s.Z)(t,(0,f.k9)({theme:e},u,c))}return(0,f.dt)(e.breakpoints,t)};var I=t(90948),Z=t(71657);let q=function(n={}){let{createStyledComponent:e=$,useThemeProps:t=h,componentName:s="MuiStack"}=n,l=()=>(0,c.Z)({root:["root"]},n=>(0,u.ZP)(s,n),{}),d=e(b),m=a.forwardRef(function(n,e){let s=t(n),u=(0,p.Z)(s),{component:c="div",direction:m="column",spacing:f=0,divider:_,children:y,className:$,useFlexGap:h=!1}=u,A=(0,r.Z)(u,v),b=l();return(0,g.jsx)(d,(0,i.Z)({as:c,ownerState:{direction:m,spacing:f,useFlexGap:h},ref:e,className:(0,o.Z)(b.root,$)},A,{children:_?function(n,e){let t=a.Children.toArray(n).filter(Boolean);return t.reduce((n,r,i)=>(n.push(r),i<t.length-1&&n.push(a.cloneElement(e,{key:`separator-${i}`})),n),[])}(y,_):y}))});return m}({createStyledComponent:(0,I.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:(n,e)=>e.root}),useThemeProps:n=>(0,Z.Z)({props:n,name:"MuiStack"})});var S=q},45098:function(n,e,t){t.d(e,{Z:function(){return y}});var r=t(87462),i=t(63366),a=t(32485),o=t(68027),s=t(17172),u=t(86523);let c=["ownerState"],l=["variants"],d=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function p(n){return"ownerState"!==n&&"theme"!==n&&"sx"!==n&&"as"!==n}let m=(0,s.Z)(),f=n=>n?n.charAt(0).toLowerCase()+n.slice(1):n;function _({defaultTheme:n,theme:e,themeId:t}){var r;return 0===Object.keys(e).length?n:e[t]||e}function g(n,e){let{ownerState:t}=e,a=(0,i.Z)(e,c),o="function"==typeof n?n((0,r.Z)({ownerState:t},a)):n;if(Array.isArray(o))return o.flatMap(n=>g(n,(0,r.Z)({ownerState:t},a)));if(o&&"object"==typeof o&&Array.isArray(o.variants)){let{variants:s=[]}=o,u=(0,i.Z)(o,l),d=u;return s.forEach(n=>{let e=!0;"function"==typeof n.props?e=n.props((0,r.Z)({ownerState:t},a,t)):Object.keys(n.props).forEach(r=>{(null==t?void 0:t[r])!==n.props[r]&&a[r]!==n.props[r]&&(e=!1)}),e&&(Array.isArray(d)||(d=[d]),d.push("function"==typeof n.style?n.style((0,r.Z)({ownerState:t},a,t)):n.style))}),d}return o}let v=function(n={}){let{themeId:e,defaultTheme:t=m,rootShouldForwardProp:s=p,slotShouldForwardProp:c=p}=n,l=n=>(0,u.Z)((0,r.Z)({},n,{theme:_((0,r.Z)({},n,{defaultTheme:t,themeId:e}))}));return l.__mui_systemSx=!0,(n,u={})=>{var m,v;(0,a.internal_processStyles)(n,n=>n.filter(n=>!(null!=n&&n.__mui_systemSx)));let{name:y,slot:$,skipVariantsResolver:h,skipSx:A,overridesResolver:b=(m=f($))?(n,e)=>e[m]:null}=u,I=(0,i.Z)(u,d),Z=void 0!==h?h:$&&"Root"!==$&&"root"!==$||!1,q=A||!1,S,k=p;"Root"===$||"root"===$?k=s:$?k=c:"string"==typeof(v=n)&&v.charCodeAt(0)>96&&(k=void 0);let w=(0,a.default)(n,(0,r.Z)({shouldForwardProp:k,label:S},I)),C=n=>"function"==typeof n&&n.__emotion_real!==n||(0,o.P)(n)?i=>g(n,(0,r.Z)({},i,{theme:_({theme:i.theme,defaultTheme:t,themeId:e})})):n,j=(i,...a)=>{let o=C(i),s=a?a.map(C):[];y&&b&&s.push(n=>{let i=_((0,r.Z)({},n,{defaultTheme:t,themeId:e}));if(!i.components||!i.components[y]||!i.components[y].styleOverrides)return null;let a=i.components[y].styleOverrides,o={};return Object.entries(a).forEach(([e,t])=>{o[e]=g(t,(0,r.Z)({},n,{theme:i}))}),b(n,o)}),y&&!Z&&s.push(n=>{var i;let a=_((0,r.Z)({},n,{defaultTheme:t,themeId:e})),o=null==a||null==(i=a.components)||null==(i=i[y])?void 0:i.variants;return g({variants:o},(0,r.Z)({},n,{theme:a}))}),q||s.push(l);let u=s.length-a.length;if(Array.isArray(i)&&u>0){let c=Array(u).fill("");(o=[...i,...c]).raw=[...i.raw,...c]}let d=w(o,...s);return n.muiName&&(d.muiName=n.muiName),d};return w.withConfig&&(j.withConfig=w.withConfig),j}}();var y=v},45698:function(n,e,t){t.d(e,{F:function(){return u}});var r=t(85893),i=t(11057),a=t(90629),o=t(51233),s=t(15861),u=function(n){var e=n.onCancel,t=n.onConfirm;return(0,r.jsx)(a.Z,{sx:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",padding:"24px",borderRadius:"8px"},children:(0,r.jsxs)(o.Z,{spacing:2,children:[(0,r.jsx)(s.Z,{variant:"h6",children:"VAT number?"}),(0,r.jsxs)(s.Z,{children:["VAT Number This supplier does not appear to have a valid VAT number supplied.",(0,r.jsx)("br",{}),"Please note that no VAT will be charged for this supplier without a valid VAT number."]}),(0,r.jsxs)(o.Z,{width:"100%",direction:"row",justifyContent:"flex-end",spacing:2,children:[(0,r.jsx)(i.Z,{variant:"contained",color:"danger",onClick:e,children:"Cancel"}),(0,r.jsx)(i.Z,{variant:"contained",color:"secondary",onClick:t,children:"Confirm"})]})]})})}},894:function(n,e,t){t.d(e,{f:function(){return i}});var r=t(16310),i=function(){return(0,r.Ry)().shape({managerSelected:(0,r.Ry)().required(),name:(0,r.Z_)().required(),website:(0,r.Z_)(),companyNumber:(0,r.Z_)(),vatId:(0,r.Z_)(),status:(0,r.Z_)().oneOf(["active","inactive"]).required(),typeOfOrganisation:(0,r.Z_)(),quotingEmail:(0,r.Z_)(),utrNumber:(0,r.Z_)(),cisRegistered:(0,r.Z_)(),contactUseremail:(0,r.Z_)().when("contactUser",{is:function(n){return!!n},then:function(){return(0,r.Z_)().required()}}),contactUsernameFirst:(0,r.Z_)().when("contactUser",{is:function(n){return!!n},then:function(){return(0,r.Z_)().required()}}),contactUsernameLast:(0,r.Z_)().when("contactUser",{is:function(n){return!!n},then:function(){return(0,r.Z_)().required()}}),contactUserphone:(0,r.Z_)().when("contactUser",{is:function(n){return!!n},then:function(){return(0,r.Z_)()}}),contactUserstatus:(0,r.Z_)().when("contactUser",{is:function(n){return!!n},then:function(){return(0,r.Z_)().required()}})})}},39710:function(n,e,t){t.d(e,{D7:function(){return h},KQ:function(){return $},R7:function(){return y},j$:function(){return b},kx:function(){return I},l1:function(){return v},lk:function(){return A},ys:function(){return g}});var r=t(7297),i=t(75063);function a(){var n=(0,r.Z)(['\n  query GetSuppliers(\n    $limit: Int\n    $offset: Int\n    $orderBy: Account_order_by!\n    $where: Account_bool_exp\n  ) {\n    suppliers: Account(limit: $limit, offset: $offset, where: $where, order_by: [$orderBy]) {\n      id\n      createdAt\n      name\n      status\n      companyNumber\n      vatId\n      website\n      jobs: SupplierJobs_aggregate {\n        aggregate {\n          count\n          max {\n            scheduledAt\n          }\n          sum {\n            amount\n          }\n        }\n      }\n      jobList: SupplierJobs(order_by: { createdAt: desc }) {\n        id\n      }\n      services: Services(where: { entity: { _eq: "Account" } }) {\n        id\n        service: Service {\n          id\n          name\n        }\n      }\n      addresses: Addresses(where: { entity: { _eq: "Account" } }) {\n        id\n        registered\n        operating\n        trading\n        invoice\n        status\n        createdAt\n        address: Address {\n          id\n          name\n          addressLine1\n          addressLine2\n          addressLine3\n          city\n          county\n          geo\n          postCode\n          country: Country {\n            id\n            name\n          }\n        }\n      }\n      locations: Account_Locations {\n        id\n      }\n      manager: Manager {\n        id\n        nameFirst\n        nameLast\n      }\n      contactUsers: Account_Users(where: { isContact: { _eq: true } }) {\n        id\n        role\n        position\n        isContact\n        lastSignInAt\n        userId\n        user: User {\n          id\n          name: nameFirst\n          nameFirst\n          nameLast\n          phone\n          status\n          email\n          createdAt\n          fullName\n          accounts: Account_Users {\n            id\n            role\n            position\n            isContact\n            status\n            account: Account {\n              id\n              name\n              type\n            }\n          }\n        }\n      }\n    }\n    meta: Account_aggregate(where: $where) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n']);return a=function(){return n},n}function o(){var n=(0,r.Z)(['\n  query GetSupplier($id: Int!) {\n    supplier: Account_by_pk(id: $id) {\n      id\n      companyNumber\n      createdAt\n      name\n      status\n      type\n      updatedAt\n      website\n      clientType\n      managerId\n      vatId\n      meta\n      statusLogs: StatusLog(where: { entity: { _eq: "Account" } }) {\n        id\n        status\n        createdAt\n      }\n      media: Media {\n        id\n        medium: Medium {\n          id\n          category\n          filename\n          meta\n          type\n        }\n      }\n      manager: Manager {\n        id\n        fullName\n      }\n      addresses: Addresses(where: { entity: { _eq: "Account" } }) {\n        id\n        registered\n        operating\n        trading\n        invoice\n        status\n        createdAt\n        address: Address {\n          id\n          name\n          addressLine1\n          addressLine2\n          addressLine3\n          city\n          county\n          geo\n          postCode\n          country: Country {\n            id\n            name\n          }\n        }\n      }\n\n      details: SupplierDetail {\n        cisRegistered\n        quotingEmail\n        typeOfOrganisation\n        utrNumber\n        accountId\n      }\n\n      contactUsers: Account_Users(where: { isContact: { _eq: true } }) {\n        role\n        position\n        isContact\n        lastSignInAt\n        userId\n        user: User {\n          id\n          name: nameFirst\n          nameFirst\n          nameLast\n          phone\n          status\n          email\n          createdAt\n          fullName\n        }\n      }\n      usersMeta: Account_Users_aggregate {\n        aggregate {\n          count\n        }\n      }\n\n      coverage: PostcodeAreas(where: { entity: { _eq: "Account" }, status: { _eq: "active" } }) {\n        id\n        status\n        createdAt\n        area: PostcodeArea {\n          id\n          name\n          area\n        }\n      }\n      services: Services {\n        serviceId\n        createdAt\n      }\n      references: References {\n        id\n        createdAt\n      }\n    }\n  }\n']);return o=function(){return n},n}function s(){var n=(0,r.Z)(["\n  query GetSupplierManage($id: Int!) {\n    supplier: Account_by_pk(id: $id) {\n      id\n      name\n      website\n      companyNumber\n      vatId\n      status\n      meta\n      managerSelected: Manager {\n        id\n        label: fullName\n        value: id\n      }\n      supplierDetails: SupplierDetail {\n        id\n        cisRegistered\n        quotingEmail\n        typeOfOrganisation\n        utrNumber\n      }\n    }\n  }\n"]);return s=function(){return n},n}function u(){var n=(0,r.Z)(["\n  mutation AddSupplier($objects: [Account_insert_input!]!) {\n    insert_Account(objects: $objects) {\n      returning {\n        id\n      }\n    }\n  }\n"]);return u=function(){return n},n}function c(){var n=(0,r.Z)(["\n  mutation AddSupplierDetail($objects: [SupplierDetail_insert_input!]!) {\n    insert_SupplierDetail(objects: $objects) {\n      returning {\n        id\n        accountId\n      }\n    }\n  }\n"]);return c=function(){return n},n}function l(){var n=(0,r.Z)(["\n  mutation AddSupplierOffer($objects: [SupplierOffer_insert_input!]!) {\n    insert_SupplierOffer(objects: $objects) {\n      returning {\n        id\n      }\n    }\n  }\n"]);return l=function(){return n},n}function d(){var n=(0,r.Z)(["\n  mutation UpdateSupplier(\n    $supplierId: Int!\n    $supplier: Account_set_input\n    $supplierDetails: SupplierDetail_set_input\n  ) {\n    update_SupplierDetail(where: { accountId: { _eq: $supplierId } }, _set: $supplierDetails) {\n      returning {\n        id\n      }\n    }\n\n    update_Account_by_pk(pk_columns: { id: $supplierId }, _set: $supplier) {\n      id\n    }\n  }\n"]);return d=function(){return n},n}function p(){var n=(0,r.Z)(['\n  query GetPostCodeAreas(\n    $limit: Int\n    $offset: Int\n    $q: String\n    $supplierId: Int\n    $status: String = "active"\n  ) {\n    coverage: PostcodeArea_Entity(\n      where: {\n        entity: { _eq: "Account" }\n        entityId: { _eq: $supplierId }\n        status: { _eq: $status }\n        PostcodeArea: { name: { _ilike: $q } }\n      }\n      order_by: { PostcodeArea: { name: asc } }\n      limit: $limit\n      offset: $offset\n    ) {\n      id\n      status\n      createdAt\n      area: PostcodeArea {\n        id\n        name\n        area\n      }\n    }\n    meta: PostcodeArea_Entity_aggregate(\n      where: {\n        entity: { _eq: "Account" }\n        entityId: { _eq: $supplierId }\n        status: { _eq: $status }\n        PostcodeArea: { name: { _ilike: $q } }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n']);return p=function(){return n},n}function m(){var n=(0,r.Z)(["\n  query GetPostCodeAreaForSelect($countryId: Int, $q: String) {\n    items: PostcodeArea(\n      where: { name: { _ilike: $q }, countryId: { _eq: $countryId } }\n      order_by: { name: asc }\n    ) {\n      area\n      label: name\n      value: id\n    }\n  }\n"]);return m=function(){return n},n}function f(){var n=(0,r.Z)(['\n  query GetServicesForSelect($q: String, $limit: Int, $offset: Int) {\n    items: Service(\n      where: { name: { _ilike: $q }, status: { _eq: "active" } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n']);return f=function(){return n},n}function _(){var n=(0,r.Z)(['\n  query GetFinancialJob(\n    $adminId: Int\n    $customerId: Int\n    $endDate: timestamptz\n    $startDate: timestamptz\n    $limit: Int\n    $status: [String]\n    $managerId: Int\n    $locationId: Int\n    $offset: Int\n    $supplierId: Int\n    $q: String\n    $orderBy: Job_order_by!\n  ) {\n    jobs: Job(\n      limit: $limit\n      offset: $offset\n      where: {\n        type: { _in: ["reactive", "ppm"] }\n        _and: [\n          {\n            _or: [\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { Invoices: { invoiceNumber: { _ilike: $q } } }\n            ]\n          }\n          {\n            _or: [\n              { _and: [{ timingStart: { _gte: $startDate } }, { timingStart: { _lte: $endDate } }] }\n              { _and: [{ scheduledAt: { _gte: $startDate } }, { scheduledAt: { _lte: $endDate } }] }\n            ]\n          }\n        ]\n        status: { _in: $status }\n        customerId: { _eq: $customerId }\n        supplierId: { _eq: $supplierId }\n        managerId: { _eq: $managerId }\n        adminId: { _eq: $adminId }\n        locationId: { _eq: $locationId }\n      }\n      order_by: [$orderBy]\n    ) {\n      id\n      type\n      number\n      status\n      description\n      reference\n      timingStart\n      scheduledAt\n      createdAt\n\n      customerTotal: customerFinances(path: "amountInfo.total")\n      supplierTotal: supplierFinances(path: "amountInfo.total")\n      customerVatTotal: customerFinances(path: "amountInfo.vatTotal")\n      supplierVatTotal: supplierFinances(path: "amountInfo.vatTotal")\n      customerExpensesTotal: customerFinances(path: "expensesInfo.expensesTotal")\n      supplierExpensesTotal: supplierFinances(path: "expensesInfo.expensesTotal")\n      customerRebateAmount: customerFinances(path: "rebate.amount")\n\n      slaId\n      invoices: Invoices(order_by: { createdAt: desc }) {\n        invoiceNumber\n      }\n      customer: Customer {\n        id\n        name\n      }\n      supplier: Supplier {\n        id\n        name\n      }\n      location: Location {\n        id\n        name\n      }\n      sublocation: Sublocation {\n        id\n        name\n      }\n      sla: SLA {\n        name\n      }\n      manager: Manager {\n        fullName\n        nameLast\n        nameFirst\n        id\n      }\n      service: Service {\n        id\n        name\n      }\n    }\n    meta: Job_aggregate(\n      where: {\n        type: { _in: ["reactive", "ppm"] }\n        _and: [\n          {\n            _or: [\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { Invoices: { invoiceNumber: { _ilike: $q } } }\n            ]\n          }\n          {\n            _or: [\n              { _and: [{ timingStart: { _gte: $startDate } }, { timingStart: { _lte: $endDate } }] }\n              { _and: [{ scheduledAt: { _gte: $startDate } }, { scheduledAt: { _lte: $endDate } }] }\n            ]\n          }\n        ]\n        status: { _in: $status }\n        customerId: { _eq: $customerId }\n        supplierId: { _eq: $supplierId }\n        managerId: { _eq: $managerId }\n        adminId: { _eq: $adminId }\n        locationId: { _eq: $locationId }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n']);return _=function(){return n},n}var g=(0,i.Ps)(a()),v=(0,i.Ps)(o()),y=(0,i.Ps)(s()),$=(0,i.Ps)(u());(0,i.Ps)(c()),(0,i.Ps)(l());var h=(0,i.Ps)(d()),A=(0,i.Ps)(p()),b=(0,i.Ps)(m()),I=(0,i.Ps)(f());(0,i.Ps)(_())},67797:function(n,e,t){t.d(e,{d:function(){return o}});var r=t(85893),i=t(11994),a=t(67294);function o(){var n=(0,a.useState)(null),e=n[0],t=n[1],o=(0,a.useCallback)(function(){t(null)},[]),s=(0,a.useMemo)(function(){if(null===e)return null;var n=e.content,t=e.keepMounted;return(0,r.jsx)(i.Z,{open:!0,keepMounted:t,onClose:o,children:n})},[e,o]),u=(0,a.useCallback)(function(n){var e=n.content,r=n.keepMounted;t({keepMounted:void 0===r||r,content:e({onClose:o})})},[o]);return[s,u]}}}]);