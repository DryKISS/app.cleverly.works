(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3383,7493],{40145:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/assets",function(){return t(75023)}])},74492:function(n,e,t){"use strict";t.d(e,{a:function(){return r}});var i=t(55508),o=t(67294),r=function(){var n=(0,o.useContext)(i.d);if(!n)throw Error("useOffCanvasContext must be used within the OffCanvasProvider");return n}},19512:function(n,e,t){"use strict";t.d(e,{D:function(){return r}});var i=t(67294),o=t(21925),r=function(){var n=(0,i.useContext)(o.S);if(!n)throw Error("useSnackbarContext must be used within the SnackbarProvider");return n}},21830:function(n,e,t){"use strict";t.d(e,{C:function(){return P}});var i=t(85893),o=t(67294),r=t(45697),a=t.n(r),s=t(93946),c=t(25464),l=t(18972),u=t(57976),d=t(73890),m=t(69008),f=t(41687),p=t(60888),h=t(40535),v=t(63441),g=t(41733),y=t(77957),x=t(2548),b=t(24519),Z=t(2391),I=t(69308),$=t(79369),_=t(22961),q=t(28201),w=t(51233),j=t(15861),C={add:(0,i.jsx)(f.Z,{}),archive:(0,i.jsx)(d.Z,{}),avatar:(0,i.jsx)(q.Z,{}),check:(0,i.jsx)(p.Z,{}),delete:(0,i.jsx)(g.Z,{}),description:(0,i.jsx)(h.Z,{}),download:(0,i.jsx)(v.Z,{}),info:(0,i.jsx)(x.Z,{}),edit:(0,i.jsx)(y.Z,{}),location:(0,i.jsx)(I.Z,{}),unarchive:(0,i.jsx)(m.Z,{}),uploadFile:(0,i.jsx)(b.Z,{}),receipt:(0,i.jsx)(Z.Z,{}),visibility:(0,i.jsx)(_.Z,{})},S={default:(0,i.jsx)(u.Z,{}),defaultHoriz:(0,i.jsx)($.Z,{}),description:(0,i.jsx)(h.Z,{})},P=function(n){var e=n.actionsData,t=n.icon,r=n.row,a=n.disabled,u=(0,o.useState)(null),d=u[0],m=u[1],f=function(n){n.stopPropagation(),m(n.currentTarget)},p=function(){m(null)};return(0,i.jsxs)("div",{children:[(0,i.jsx)(s.Z,{sx:{":hover":{backgroundColor:"#DDDDDD"}},disabled:a,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:f,children:S[t]}),(0,i.jsx)(c.Z,{id:"simple-menu",anchorEl:d,keepMounted:!0,open:Boolean(d),onClose:p,PaperProps:{sx:{borderRadius:2}},children:e(r).map(function(n,e){return(0,i.jsx)(l.Z,{disabled:n.disabled,onClick:function(e){n.onClick(e),p()},sx:{pl:3,pr:4},children:(0,i.jsxs)(w.Z,{direction:"row",alignItems:"center",spacing:2,children:[(null==C?void 0:C[n.icon])||null,(0,i.jsx)(j.Z,{children:n.tooltip})]})},e)})})]})};P.propTypes={actionsData:a().func.isRequired,icon:a().oneOf(["default","description"]),row:a().any.isRequired,disabled:a().bool},P.defaultProps={actionsData:function(){return[{disabled:!1,onClick:function(){},icon:"edit",tooltip:"Edit"}]},icon:"default",disabled:!1}},49408:function(n,e,t){"use strict";t.d(e,{E:function(){return z}});var i=t(26042),o=t(85893),r=t(11163),a=t.n(r),s=t(45697),c=t.n(s),l=t(74492),u=t(45451),d=t(12632),m=t(80426),f=t(6812),p=t(30381),h=t.n(p),v=t(11994),g=t(11057),y=t(90629),x=t(51233),b=t(15861),Z=t(83162),I=t(81261),$=t(89591),_=t(21830),q=t(69396),w=t(828),j=t(86886),C=t(50135),S=t(61730),P=t(45307),k=t(42283),M=t(73359),T=t(67294),A=t(4595),F=t(57493),G=t(10166),L=j.ZP,D=g.Z,N=function(n){var e,t=n.open,r=n.setOpen,a=n.initialFilters,s=n.filters,c=n.setFilters,l=(0,S.Z)("(max-width: 400px)")?4:0,u=(0,w.Z)((0,P.X)("form_data_".concat(a.filterType),a),2),d=u[0],m=u[1],f=(0,k.cI)({defaultValues:d}),p=f.control,h=f.handleSubmit,v=f.register,g=f.reset,y=(0,f.watch)(),b=(0,w.Z)((0,M.t)(F.SW),2),Z=b[0],I=b[1],$=I.loading,_=I.data,j=(void 0===_?{items:[]}:_).items,G=(0,w.Z)((0,M.t)(F._d,{variables:{where:{status:{_eq:"active"},Account_Locations:{accountId:{_eq:null===(e=y.customer)||void 0===e?void 0:e.value}}}}}),2),N=G[0],z=G[1],U=z.loading,E=z.data,H=(void 0===E?{items:[]}:E).items,B=(0,w.Z)((0,M.t)(F.UM),2),W=B[0],V=B[1],J=V.loading,Y=V.data,Q=(void 0===Y?{items:[]}:Y).items;(0,T.useEffect)(function(){t&&g(d)},[t]),(0,T.useEffect)(function(){m((0,q.Z)((0,i.Z)({},y),{filterType:a.filterType}))},[s]);var X=function(n){try{var e,t,o,a={customerId:null===(e=n.customer)||void 0===e?void 0:e.value,locationId:null===(t=n.location)||void 0===t?void 0:t.value,categoryId:null===(o=n.assetCategory)||void 0===o?void 0:o.value,q:n.search?"%".concat(n.search,"%"):null};c(function(n){return(0,i.Z)({},n,a)})}finally{r(!1)}},K=function(){c(a),g(a),r(!1)};return(0,o.jsx)(R,{keepMounted:!0,open:t,onClose:function(){return r(!1)},children:(0,o.jsx)("form",{onSubmit:h(X),children:(0,o.jsx)(O,{children:(0,o.jsxs)(L,{container:!0,rowGap:4,children:[(0,o.jsx)(L,{container:!0,children:(0,o.jsx)(L,{item:!0,xs:12,children:(0,o.jsx)(C.Z,{fullWidth:!0,variant:"standard",color:"secondary",label:"Search...",name:"search",inputRef:v})})}),(0,o.jsxs)(L,{container:!0,columnSpacing:4,rowGap:l,children:[(0,o.jsx)(L,{item:!0,xs:12,xs2:6,children:(0,o.jsx)(k.Qr,{name:"customer",control:p,render:function(n){var e=n.value,t=n.onChange;return(0,o.jsx)(A.F,{value:e,onChange:function(n,e){return t(e)},label:"Select customer",loading:$,onOpen:function(){return Z()},options:j})}})}),(0,o.jsx)(L,{item:!0,xs:12,xs2:6,children:(0,o.jsx)(k.Qr,{name:"location",control:p,render:function(n){var e=n.value,t=n.onChange;return(0,o.jsx)(A.F,{value:e,onChange:function(n,e){return t(e)},label:"Select location",loading:U,onOpen:function(){return N()},options:H})}})})]}),(0,o.jsx)(L,{container:!0,columnSpacing:4,rowGap:l,children:(0,o.jsx)(L,{item:!0,xs:12,xs2:6,children:(0,o.jsx)(k.Qr,{name:"assetCategory",control:p,render:function(n){var e=n.value,t=n.onChange;return(0,o.jsx)(A.F,{value:e,onChange:function(n,e){return t(e)},label:"Select asset category",loading:J,onOpen:function(){return W()},options:Q})}})})}),(0,o.jsx)(L,{container:!0,item:!0,xs:12,children:(0,o.jsxs)(x.Z,{width:"100%",direction:"row",justifyContent:"flex-end",spacing:2,children:[(0,o.jsx)(D,{variant:"contained",color:"danger",onClick:function(){return K()},children:"Cancel"}),(0,o.jsx)(D,{variant:"contained",color:"secondary",type:"submit",children:"Search"})]})})]})})})})};N.defaultProps={open:!1,setOpen:function(){},initialFilters:{},filters:{},setFilters:function(){}},N.propTypes={open:c().bool,setOpen:c().func,initialFilters:c().object,filters:c().object,setFilters:c().func};var R=(0,G.Z)(v.Z)(function(){return{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"}}),O=(0,G.Z)(y.Z)(function(){return{padding:"24px",maxWidth:"700px",maxHeight:"100vh",overflowY:"scroll"}}),z=function(n){var e,t=n.hideLink,r=n.hideCustomerInfo,s=n.hideLocationInfo,c=n.showHeader,p=n.initialFilters,q=n.editable,w=n.createFormDefaultValues,j=(0,l.a)(),C=(0,T.useState)(!1),S=C[0],P=C[1],k=(0,T.useState)(null),M=k[0],A=k[1],F=(0,T.useState)((0,i.Z)({},p)),G=F[0],L=F[1],D=(0,d.x)({filters:G}),R=D.initialData,O=D.ref,z=(0,f.a)(m.tG,{variables:(0,i.Z)({},R)}),U=z.data,E=void 0===U?{assets:[],meta:{aggregate:{totalCount:0}}}:U,H=E.assets,B=E.meta,W=z.loading,V=z.refetch,J=function(){j.show({content:(0,o.jsx)($.R,{offCanvas:j,defaultValues:w}),title:"Add Asset",submit:!0})},Y=function(n){j.show({content:(0,o.jsx)($.R,{assetId:n.id,offCanvas:j,defaultValues:w}),title:"Edit Asset",submit:!0})},Q=function(n){var e=[];return q&&e.push({icon:"edit",onClick:function(e){e.stopPropagation(),Y(n)},tooltip:"Edit"}),e.push({icon:"info",onClick:function(e){e.stopPropagation(),a().push("/dashboard/assets/view?id=".concat(n.id))},tooltip:"Info"}),e},X=function(n){var e=n.row;a().push("/dashboard/assets/view?id=".concat(e.id))};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(x.Z,{width:"100%",spacing:2,sx:{height:"calc(100% - 58px)"},children:[c&&(0,o.jsxs)(x.Z,{width:"100%",direction:"row",justifyContent:"space-between",children:[(0,o.jsx)(g.Z,{variant:"contained",startIcon:(0,o.jsx)(I.Z,{}),onClick:function(){return P(!0)},children:"Filters"}),q&&(0,o.jsx)(x.Z,{direction:"row",spacing:2,children:(0,o.jsx)(g.Z,{variant:"contained",color:"secondary",onClick:J,children:"Create Asset"})})]}),(0,o.jsxs)(y.Z,{sx:{paddingTop:"16px",paddingBottom:"16px",height:"100%"},children:[(0,o.jsxs)(x.Z,{direction:"row",justifyContent:"space-between",children:[(0,o.jsx)(b.Z,{ml:2,variant:"h5",sx:{fontWeight:600},children:"Assets"}),q&&!c&&(0,o.jsx)(g.Z,{sx:{mr:2},variant:"contained",color:"secondary",onClick:J,children:"Create Asset"})]}),c&&(0,o.jsx)(N,{initialFilters:p,filters:G,setFilters:L,open:S,setOpen:P}),(0,o.jsx)(u.i,{autoHeight:!1,loading:W,ref:O,columns:[{field:"mainPhoto",headerName:"Main photo",minWidth:120,sortable:!1,renderCell:function(n){var e,t=n.row;return t.mainPhoto?(0,o.jsx)("img",{loading:"lazy",onClick:function(n){var e;n.stopPropagation(),A("".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(null===(e=t.mainPhoto)||void 0===e?void 0:e.filename))},style:{width:"70px",height:"50px"},alt:"mainPhoto",src:"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(null===(e=t.mainPhoto)||void 0===e?void 0:e.filename)}):null}},{minWidth:80,flex:1,field:"name",headerName:"Name",sortable:!1},{minWidth:100,flex:1,field:"description",headerName:"Description",sortable:!1},{minWidth:80,flex:1,field:"categoryName",headerName:"Category",sortable:!1},{minWidth:120,flex:1,field:"locationName",headerName:"Location",sortable:!1,renderCell:function(n){var e=n.row;return(0,o.jsx)(Z.r,{color:"secondary",href:"/dashboard/properties/view?id=".concat(e.locationId),children:e.locationName})}},{minWidth:80,flex:1,field:"sublocationName",headerName:"Sublocation",sortable:!1,renderCell:function(n){var e=n.row;return(0,o.jsx)(Z.r,{noWrap:t,color:"secondary",href:"/dashboard/properties/view?id=".concat(e.locationId,"&tab=sublocations"),children:e.sublocationName})}},{minWidth:120,flex:1,field:"customerName",headerName:"Customer",sortable:!1,renderCell:function(n){var e=n.row;return(0,o.jsx)(Z.r,{color:"secondary",href:"/dashboard/customers/view?id=".concat(e.customerId),children:e.customerName})}},{minWidth:60,flex:1,field:"type",headerName:"Type",sortable:!1},{minWidth:60,flex:1,field:"status",headerName:"Status",sortable:!1},{minWidth:100,flex:1,field:"createdAt",headerName:"Created",sortable:!0,sortName:"createdAt"},{width:50,field:"actions",headerName:"Actions",sortable:!1,renderCell:function(n){var e=n.row;return(0,o.jsx)(_.C,{row:e,actionsData:Q})}}],rows:H.map(function(n){var t,i,o,r,a,s,c,l,u,d,m,f,p,v,g,y,x,b,Z;return{id:n.id,customer:{label:null===(t=n.customer)||void 0===t?void 0:t.name,value:null===(i=n.customer)||void 0===i?void 0:i.id},assetCategory:{label:null===(o=n.category)||void 0===o?void 0:o.name,value:null===(r=n.category)||void 0===r?void 0:r.id},description:n.description,name:n.name,location:{label:null===(a=n.location)||void 0===a?void 0:a.name,value:null===(s=n.location)||void 0===s?void 0:s.id},sublocation:{label:null===(c=n.sublocation)||void 0===c?void 0:c.name,value:null===(l=n.sublocation)||void 0===l?void 0:l.id},parent:{label:null===(u=n.parentId)||void 0===u?void 0:u.label,value:null===(d=n.parentId)||void 0===d?void 0:d.value},status:n.status,mainPhoto:null!==(e=null===(m=n.mainPhoto)||void 0===m?void 0:null===(f=m[0])||void 0===f?void 0:f.item)&&void 0!==e?e:null,locationId:null===(p=n.location)||void 0===p?void 0:p.id,customerId:null===(v=n.customer)||void 0===v?void 0:v.id,categoryName:null===(g=n.category)||void 0===g?void 0:g.name,locationName:null===(y=n.location)||void 0===y?void 0:y.name,sublocationName:null===(x=n.sublocation)||void 0===x?void 0:x.name,type:(null===(b=n.parentId)||void 0===b?void 0:b.value)?"Child":"Parent",customerName:null===(Z=n.customer)||void 0===Z?void 0:Z.name,createdAt:h()(n.createdAt).format("YYYY-MM-DD")}}),meta:B,refetch:V,onRowClick:X,containerHeight:"calc(100% - 32px)",columnVisibilityModel:{locationName:!s,customerName:!r}})]})]}),M&&(0,o.jsx)(v.Z,{open:!!M,onClose:function(){return A(null)},sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"},children:(0,o.jsx)("img",{style:{width:"500px",height:"500px"},alt:"mainPhoto",src:M})})]})};z.defaultProps={initialFilters:{},hideLink:!1,hideCustomerInfo:!1,hideLocationInfo:!1,showHeader:!0,editable:!0},z.propTypes={initialFilters:c().shape({filterType:c().string.isRequired}),hideLink:c().bool,hideCustomerInfo:c().bool,hideLocationInfo:c().bool,showHeader:c().bool,editable:c().bool,createFormDefaultValues:c().object}},4595:function(n,e,t){"use strict";t.d(e,{F:function(){return j}});var i=t(14924),o=t(26042),r=t(69396),a=t(85893),s=t(45697),c=t.n(s),l=t(10166),u=t(80482),d=t(23776),m=t(98456),f=t(16143),p=t(50135),h=t(99534),v=t(29815),g=t(74061),y=t(6498),x=t(75438),b=t(15861),Z=t(61730),I=t(67294),$=(0,I.createContext)({}),_=(0,I.forwardRef)(function(n,e){var t=(0,I.useContext)($);return(0,a.jsx)("div",(0,o.Z)({ref:e},n,t))}),q=(0,I.forwardRef)(function(n,e){var t=n.children,i=(0,h.Z)(n,["children"]),o=[];t.forEach(function(n){o.push(n),o.push.apply(o,(0,v.Z)(n.children||[]))});var r,s,c=(0,y.u)(),l=(0,Z.Z)(c.breakpoints.up("sm"),{noSsr:!0}),u=o.length,d=l?36:48,m=function(n){return n.hasOwnProperty("group")?48:d},f=(s=(0,I.useRef)(null),(0,I.useEffect)(function(){null!=s.current&&s.current.resetAfterIndex(0,!0)},[u]),s);return(0,a.jsx)("div",{ref:e,children:(0,a.jsx)($.Provider,{value:i,children:(0,a.jsx)(g.S_,{itemData:o,height:(u>8?8*d:o.map(m).reduce(function(n,e){return n+e},0))+16,width:"100%",ref:f,outerElementType:_,innerElementType:"ul",itemSize:function(n){return m(o[n])},overscanCount:5,itemCount:u,children:w})})})});function w(n){var e=n.data,t=n.index,i=n.style,s=e[t],c=(0,r.Z)((0,o.Z)({},i),{top:i.top+8});return s.hasOwnProperty("group")?(0,a.jsx)(x.Z,{component:"div",style:c,children:s.group},s.key):(0,a.jsx)(b.Z,(0,r.Z)((0,o.Z)({component:"li"},s[0]),{noWrap:!0,style:c,children:s[1].label}))}var j=function(n){var e=n.label,t=n.loading,i=n.placeholder,s=n.error,c=n.helperText,l=n.inputProps;return(0,a.jsx)(S,(0,r.Z)((0,o.Z)({},n),{disableListWrap:!0,PopperComponent:C,ListboxComponent:q,renderInput:function(n){return(0,a.jsx)(p.Z,(0,r.Z)((0,o.Z)({},n,l),{error:s,helperText:c,label:e,placeholder:i,color:"secondary",variant:"standard",InputProps:(0,r.Z)((0,o.Z)({},n.InputProps,(null==l?void 0:l.InputProps)||{}),{endAdornment:(0,a.jsxs)(a.Fragment,{children:[t?(0,a.jsx)(m.Z,{color:"inherit",size:20}):null,n.InputProps.endAdornment]})})}))},renderOption:function(n,e,t){return[n,e,t.index]},renderGroup:function(n){return n}}))};j.defaultProps={value:null,onChange:function(){},label:"",loading:!1,error:!1,onOpen:function(){},options:[],inputProps:{},withoutSelectIcon:!1},j.propTypes={value:c().shape({value:c().any,label:c().string}),onChange:c().func,label:c().string,loading:c().bool,onOpen:c().func,options:c().arrayOf(c().shape({value:c().any,label:c().string})),inputProps:c().object,withoutSelectIcon:c().bool,inputValue:c().string,onInputChange:c().func};var C=(0,l.Z)(f.Z)((0,i.Z)({zIndex:"12000 !important"},"& .".concat(u.Z.listbox),{boxSizing:"border-box","& ul":{padding:0,margin:0}})),S=(0,l.Z)(d.Z)(function(n){var e=n.withoutSelectIcon;return{"& .MuiAutocomplete-root":{cursor:"pointer"},"& .MuiAutocomplete-popper":{zIndex:"12000 "},"& .MuiAutocomplete-endAdornment":{"& .MuiButtonBase-root.MuiIconButton-root.MuiAutocomplete-popupIndicator":{"& .MuiSvgIcon-root":(0,o.Z)({},e&&{display:"none"})}}}})},83162:function(n,e,t){"use strict";t.d(e,{r:function(){return m}});var i=t(26042),o=t(69396),r=t(99534),a=t(85893),s=t(45697),c=t.n(s),l=t(41664),u=t.n(l),d=t(23795),m=function(n){var e=n.children,t=n.href,s=n.noWrap,c=n.target,l=n.sx,m=void 0===l?{}:l,f=(0,r.Z)(n,["children","href","noWrap","target","sx"]);return s?(0,a.jsx)(a.Fragment,{children:e}):t?(0,a.jsx)(u(),{href:t,target:c,passHref:!0,children:(0,a.jsx)(d.Z,(0,o.Z)((0,i.Z)({sx:m,children:e,href:t,noWrap:s,target:c},f),{children:e}))}):(0,a.jsx)(d.Z,(0,o.Z)((0,i.Z)({sx:m,children:e,href:t,noWrap:s,target:c},f),{children:e}))};m.defaultProps={onClick:function(n){n.stopPropagation()}},m.propTypes={onClick:c().func,href:c().string,noWrap:c().bool,color:c().string}},97637:function(n,e,t){"use strict";t.d(e,{G:function(){return T}});var i=t(26042),o=t(69396),r=t(7297),a=t(85893),s=t(67294),c=t(45697),l=t(6812),u=t(92711),d=t(10367),m=t(78289),f=t(41564),p=t(34953),h=t(62466),v=t(68956),g=t(73373),y=t(11585),x=t(18678),b=t(55377),Z=t(16551),I=t(77439),$=t(74297),_=t(11013),q=t(3770),w=t(452),j=t(71072),C=t(87336),S=t(12632),P=t(74944);function k(){var n=(0,r.Z)(["\n  width: 24px;\n"]);return k=function(){return n},n}function M(){var n=(0,r.Z)(["\n  border: 1px solid #eee;\n"]);return M=function(){return n},n}var T=function(n){var e=n.carousel,t=n.category,r=n.children,c=n.data,d=(n.details,n.entity),k=n.entityId,M=n.filters,T=(n.limit,n.listView),G=n.mediaMeta,L=n.onMediaAdd,D=n.onMediaRemove,N=(n.pagination,n.showActionButtons),R=n.showEntityColumn,O=n.showItemActions,z=n.summary,U=n.type,E=(0,S.x)({filters:M}),H=E.initialData,B=E.ref,W=(0,P.x)(),V=W.hasRole,J=W.user,Y=(0,s.useContext)(m.Z),Q=(0,l.a)(u.t,{variables:(0,o.Z)((0,i.Z)({},H),{entity:d,entityId:k,category:t,adminId:J.adminId,meta:G})}),X=Q.data,K=void 0===X?{items:[],meta:{aggregate:{totalCount:0}}}:X,nn=K.items,ne=K.meta,nt=Q.loading,ni=Q.refetch,no=function(n){Y.close(),c.length||ni(),L&&L(n)},nr=function(n){Y.close(),c.length||ni(),D&&D(n)},na=function(n){n.stopPropagation(),Y.show({content:(0,a.jsx)(w.z,{accept:"image/*",adminId:J.adminId,category:t,entity:d,entityId:k,expiryShow:!1,mediaMeta:G,multiple:!0,onSuccess:no,type:"image"}),title:"Upload Photos"})},ns=function(n){n.stopPropagation(),Y.show({content:(0,a.jsx)(w.z,{accept:".pdf, .doc, .docx, .xlsx",adminId:J.adminId,category:t,entity:d,entityId:k,expiryShow:!1,mediaMeta:G,onSuccess:no,type:"document"}),title:"Upload Documents"})},nc=function(n){Y.show({content:(0,a.jsx)(_.d,{mediaId:n.data.id,onSuccess:nr}),submit:!1,title:"Delete Media"})},nl=function(n){Y.show({content:(0,a.jsx)(q.z,{media:n.data,toggleShow:Y.close}),submit:!1,title:"Media Details",width:"50%"})},nu=[{context:"primary",icon:["fas","info-circle"],onClick:function(n,e){return nl(e)},tooltip:"Details"}];V("admin")&&nu.push({context:"danger",icon:["fas","trash"],onClick:function(n,e){return nc(e)},tooltip:"Delete"});var nd=[{hidden:!0},{hidden:!0},{hidden:!0,text:"Caption"},{hidden:!1,text:"File"},{hidden:!R,text:"Entity"},{formatter:function(n){var e,t=n.row;return(0,a.jsx)(A,{children:(null==t?void 0:null===(e=t.authority)||void 0===e?void 0:e.adminOnly)&&(0,a.jsx)(f.Z,{content:"Admin user only",children:(0,a.jsx)(p.Z,{alt:"Admin Only",src:"/messaging/admin-only.svg"})})})},text:"",tooltip:"Only Admin can see"},{formatter:(0,h.Z)("/dashboard/users/view","userId","uploaded"),text:"Uploaded by"},{hidden:!T,text:"Thumbnails"},{hidden:!O,formatter:v.Z,formatterData:nu,text:"Actions"}],nm=function(n,e){n.preventDefault(),window.open("".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(e))},nf=[],np=nn.map(function(n){var e=n.entity,t=n.entityId,i=n.id,o=n.item,r=o.caption,s=o.filename,c=o.meta,l=o.name,u=o.type,d=o.user;return{data:o,id:i,userId:null==d?void 0:d.id,file:function(){return(0,a.jsx)(g.Z,{onClick:function(n){return nm(n,s)},children:r||l||s})},entity:e&&"".concat(e,"#").concat(t),authority:c,uploaded:"".concat(null==d?void 0:d.nameFirst," ").concat(null==d?void 0:d.nameLast),thumbnails:(0,j.S)(u,c),actions:""}}),nh=(nn.forEach(function(n){var e=n.item,t=e.caption,i=e.filename;"image"===e.type&&nf.push({caption:t,filename:i})}),nf),nv=nh.length;return(0,a.jsxs)(y.Z,{fitParentHeight:!0,open:!0,title:z,children:[r,e&&nv>0&&(0,a.jsx)(F,{children:(0,a.jsx)(x.Z,{fullWidth:!0,height:"200px",numberOfItems:1,showNavs:!1,showPagination:!0,slides:nh.map(function(n){var e=n.caption,t=n.filename;return{node:(0,a.jsx)(p.Z,{alt:e,src:"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(t)}),text:" "}})})}),(0,a.jsx)(C.t,{columns:nd,loading:nt,fullHeight:!0,paginationSize:!1,meta:ne,ref:B,refetch:ni,rows:np}),N&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.Z,{size:"sm"}),(0,a.jsxs)(Z.Z,{align:"flex-end",children:[(!U||"document"===U)&&!V("supplier")&&(0,a.jsx)(I.Z,{content:"Add Document",context:"secondary",onClick:ns,size:"sm"}),(!U||"image"===U||"avatar"===U)&&!V("supplier")&&(0,a.jsx)(I.Z,{content:"Add ".concat((0,$.Z)(U||"Image")),context:"secondary",onClick:na,size:"sm"})]})]})]})},A=d.ZP.div.withConfig({displayName:"table__StyledIcon",componentId:"sc-fc77535-0"})(k()),F=d.ZP.div.withConfig({displayName:"table__StyledCarousel",componentId:"sc-fc77535-1"})(M());T.propTypes={carousel:c.bool,category:c.string,children:c.node,data:c.array,details:c.bool,entity:c.string,entityId:c.number,filters:c.object,limit:c.number,listView:c.bool,mediaMeta:c.object,onMediaAdd:c.func,onMediaRemove:c.func,pagination:c.object,showActionButtons:c.bool,showEntityColumn:c.bool,showItemActions:c.bool,summary:c.string,type:c.string},T.defaultProps={carousel:!0,category:null,data:[],details:!1,filters:{},limit:20,listView:!1,mediaMeta:null,showActionButtons:!0,showEntityColumn:!1,showItemActions:!0,summary:"Media",type:null}},69297:function(n,e,t){"use strict";t.d(e,{E:function(){return v}});var i=t(26042),o=t(69396),r=t(85893),a=t(45697),s=t.n(a),c=t(94054),l=t(50480),u=t(56815),d=t(40476),m=t(79717),f=t(36872),p=t(51233),h=t(15861),v=function(n){var e=n.label,t=n.options,a=n.error,s=n.helperText,v=n.stackProps,y=n.formControlProps,x=n.labelLeft,b=function(n){var e=n.children;return(0,r.jsx)(r.Fragment,{children:e})};return(0,r.jsxs)(c.Z,(0,o.Z)((0,i.Z)({sx:{m:3},error:a,variant:"standard"},void 0===y?{}:y),{children:[(0,r.jsxs)(p.Z,(0,o.Z)((0,i.Z)({},x&&g),{children:[e&&(0,r.jsx)(d.Z,{id:"radio-group",color:"secondary",children:e}),(0,r.jsx)(m.Z,(0,o.Z)((0,i.Z)({},n),{"aria-labelledby":"radio-group",children:(0,r.jsx)(p.Z,(0,o.Z)((0,i.Z)({},void 0===v?{}:v),{children:t.map(function(n){var e=n.value,t=n.label,i=n.icon,o=n.ParentComponent;return(0,r.jsx)(void 0===o?b:o,{children:(0,r.jsx)(l.Z,{value:e,control:(0,r.jsx)(f.Z,{color:"secondary"}),label:(0,r.jsxs)(p.Z,{direction:"row",alignItems:"center",spacing:1,children:[i,(0,r.jsx)(h.Z,{children:t})]})})})})}))}))]})),(0,r.jsx)(u.Z,{children:s})]}))};v.defaultProps={options:[],error:!1,helperText:"",stackProps:{},formControlProps:{},labelLeft:!1},v.propTypes={label:s().string,options:s().arrayOf(s().shape({label:s().string.isRequired,value:s().any.isRequired,ParentComponent:s().elementType})).isRequired,error:s().bool,helperText:s().string,stackProps:s().object,formControlProps:s().object,labelLeft:s().bool};var g={direction:"row",alignItems:"center",flexWrap:"wrap",spacing:1}},57493:function(n,e,t){"use strict";t.d(e,{A5:function(){return ns},Ak:function(){return z},Cj:function(){return Q},K4:function(){return ni},Oq:function(){return na},Qn:function(){return R},RJ:function(){return Y},SW:function(){return N},T_:function(){return W},UH:function(){return D},UM:function(){return ne},Ve:function(){return X},_d:function(){return E},_f:function(){return nt},by:function(){return V},cz:function(){return F},he:function(){return O},j$:function(){return U},kB:function(){return K},kx:function(){return H},nD:function(){return L},nP:function(){return nr},pY:function(){return no},qd:function(){return G},t1:function(){return B},yR:function(){return J},zR:function(){return nn}});var i=t(7297),o=t(75063);function r(){var n=(0,i.Z)(["\n  query GetAddressForSelect($q: String, $entity: String!, $entityId: Int!) {\n    items: Address(\n      where: {\n        Address_Entities: { entity: { _eq: $entity }, entityId: { _eq: $entityId } }\n        _or: [\n          { addressLine1: { _eq: $q } }\n          { addressLine2: { _eq: $q } }\n          { addressLine3: { _eq: $q } }\n          { county: { _eq: $q } }\n          { postCode: { _eq: $q } }\n          { city: { _eq: $q } }\n        ]\n      }\n    ) {\n      label: addressLine1\n      value: id\n      id\n      name\n      addressLine1\n      addressLine2\n      addressLine3\n      postCode\n      county\n      country: Country {\n        name\n      }\n      city\n      Address_Entities {\n        invoice\n      }\n    }\n  }\n"]);return r=function(){return n},n}function a(){var n=(0,i.Z)(["\n  query GetAccountsForSelect($q: String, $type: String, $limit: Int, $offset: Int) {\n    items: Account(\n      where: { name: { _ilike: $q }, type: { _eq: $type } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]);return a=function(){return n},n}function s(){var n=(0,i.Z)(['\n  query GetTaxonomy($q: String, $id: Int) {\n    items: Taxonomy(\n      where: { type: { _eq: "assetCategory" }, status: { _eq: "active" } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      options: Taxonomies(\n        where: {\n          type: { _eq: "assetCategory" }\n          name: { _ilike: $q }\n          id: { _eq: $id }\n          status: { _eq: "active" }\n        }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']);return s=function(){return n},n}function c(){var n=(0,i.Z)(["\n  query GetAssetsForSelect(\n    $locationId: Int\n    $q: String\n    $categoryId: Int\n    $bookable: String\n    $limit: Int\n    $offset: Int\n  ) {\n    items: Asset(\n      where: {\n        categoryId: { _eq: $categoryId }\n        locationId: { _eq: $locationId }\n        name: { _ilike: $q }\n        bookable: { _eq: $bookable }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n      sublocation: Sublocation {\n        name\n      }\n    }\n  }\n"]);return c=function(){return n},n}function l(){var n=(0,i.Z)(['\n  query GetCustomersForSelect($q: String, $limit: Int, $offset: Int) {\n    items: Account(\n      where: { name: { _ilike: $q }, type: { _eq: "customer" } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      admin: Admins {\n        id: adminId\n      }\n      label: name\n      spendThreshold: meta(path: "$.finance.spendThreshold")\n      serviceRateLabour: meta(path: "$.finance.serviceRateLabour")\n      serviceRateExpenses: meta(path: "$.finance.serviceRateExpenses")\n      value: id\n    }\n  }\n']);return l=function(){return n},n}function u(){var n=(0,i.Z)(["\n  query GetJobsForSelect($_q: Int, $locationId: Int) {\n    items: Job(\n      where: {\n        Location: { id: { _eq: $locationId } }\n        _or: [{ id: { _eq: $_q } }, { Invoices: { id: { _eq: $_q } } }]\n      }\n      order_by: { title: asc }\n    ) {\n      label: label\n      value: id\n      number\n      createdAt\n      description\n      status\n      timingStart\n      title\n      type\n      Location {\n        name\n      }\n      Taxonomy {\n        Taxonomy {\n          shortJobDescription: name\n        }\n      }\n    }\n  }\n"]);return u=function(){return n},n}function d(){var n=(0,i.Z)(['\n  query GetManagersForSelect($userId: Int, $accountId: Int!, $q: String) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          role: { _in: ["owner", "manager"] }\n          status: { _eq: "active" }\n          Account: { id: { _eq: $accountId } }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        id: { _neq: $userId }\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']);return d=function(){return n},n}function m(){var n=(0,i.Z)(['\n  query GetManagersForSelect(\n    $userId: Int\n    $accountId: Int!\n    $q: String\n    $invoiceThreshold: numeric\n    $quoteThreshold: numeric\n  ) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          role: { _in: ["owner", "manager"] }\n          status: { _eq: "active" }\n          Account: { id: { _eq: $accountId } }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        id: { _neq: $userId }\n        _and: [\n          {\n            _or: [\n              { invoiceThreshold: { _gt: $invoiceThreshold } }\n              { invoiceThreshold: { _is_null: true } }\n            ]\n          }\n          {\n            _or: [\n              { quoteThreshold: { _gt: $quoteThreshold } }\n              { quoteThreshold: { _is_null: true } }\n            ]\n          }\n        ]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']);return m=function(){return n},n}function f(){var n=(0,i.Z)(["\n  query GetPostCodeAreaForSelect($countryId: Int, $q: String) {\n    items: PostcodeArea(\n      where: { name: { _ilike: $q }, countryId: { _eq: $countryId } }\n      order_by: { name: asc }\n    ) {\n      area\n      label: name\n      value: id\n    }\n  }\n"]);return f=function(){return n},n}function p(){var n=(0,i.Z)(['\n  query GetPropertiesForSelect($where: Location_bool_exp, $limit: Int, $offset: Int) {\n    items: Location(where: $where, order_by: { name: asc }, limit: $limit, offset: $offset) {\n      label: name\n      value: id\n      access\n      permitsRequired\n      registeredAddress: Addresses(\n        where: { entity: { _eq: "Location" }, registered: { _eq: true } }\n      ) {\n        address: Address {\n          id\n          addressLine1\n          addressLine2\n          addressLine3\n          county\n          country: Country {\n            name\n          }\n          postCode\n          city\n        }\n      }\n    }\n  }\n']);return p=function(){return n},n}function h(){var n=(0,i.Z)(['\n  query GetServicesForSelect($q: String, $limit: Int, $offset: Int) {\n    items: Service(\n      where: { name: { _ilike: $q }, status: { _eq: "active" } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n']);return h=function(){return n},n}function v(){var n=(0,i.Z)(["\n  query GetSlasForSelect($q: String, $adminId: Int, $type: String, $subtype: sla_subtype) {\n    items: SLA(\n      where: {\n        name: { _ilike: $q }\n        type: { _eq: $type }\n        adminId: { _eq: $adminId }\n        subtype: { _eq: $subtype }\n      }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]);return v=function(){return n},n}function g(){var n=(0,i.Z)(["\n  query GetSlasForSelectNew($where: SLA_bool_exp, $limit: Int, $offset: Int) {\n    items: SLA(where: $where, order_by: { name: asc }, limit: $limit, offset: $offset) {\n      label: name\n      value: id\n    }\n  }\n"]);return g=function(){return n},n}function y(){var n=(0,i.Z)(["\n  query GetSuppliersForSelect($where: Account_bool_exp, $limit: Int, $offset: Int) {\n    items: Account(where: $where, limit: $limit, offset: $offset, order_by: { name: asc }) {\n      label: name\n      value: id\n    }\n  }\n"]);return y=function(){return n},n}function x(){var n=(0,i.Z)(['\n  query GetUsersForSelect($accountId: Int, $q: String, $limit: Int, $offset: Int) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          accountId: { _eq: $accountId }\n          isContact: { _eq: true }\n          status: { _eq: "active" }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      label: fullName\n      value: id\n      email\n      phone\n    }\n  }\n']);return x=function(){return n},n}function b(){var n=(0,i.Z)(['\n  query GetUsersForSelect($q: String) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n      email\n      phone\n    }\n  }\n']);return b=function(){return n},n}function Z(){var n=(0,i.Z)(["\n  query GetTaxonomyGroupForSelect($q: String, $type: String!) {\n    items: Taxonomy(\n      where: { isGroup: { _eq: true }, name: { _ilike: $q }, type: { _eq: $type } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]);return Z=function(){return n},n}function I(){var n=(0,i.Z)(['\n  query GetTaxonomy($q: String) {\n    items: Taxonomy(where: { type: { _eq: "expenseCategoryGroup" } }, order_by: { name: asc }) {\n      label: name\n      options: Taxonomies(\n        where: { type: { _eq: "expenseCategory" }, name: { _ilike: $q } }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']);return I=function(){return n},n}function $(){var n=(0,i.Z)(["\n  query GetUserRole($userId: Int!, $accountId: Int!) {\n    accountUsers: Account_User(\n      where: { userId: { _eq: $userId }, accountId: { _eq: $accountId } }\n    ) {\n      role\n    }\n  }\n"]);return $=function(){return n},n}function _(){var n=(0,i.Z)(["\n  query GetSublocationsForSelect($locationId: Int!, $q: String, $limit: Int, $offset: Int) {\n    items: Sublocation(\n      where: { name: { _ilike: $q }, locationId: { _eq: $locationId }, active: { _eq: true } }\n      limit: $limit\n      offset: $offset\n      order_by: { createdAt: desc }\n    ) {\n      value: id\n      label: name\n    }\n  }\n"]);return _=function(){return n},n}function q(){var n=(0,i.Z)(['\n  query GetTaxonomy($q: String, $limit: Int, $offset: Int) {\n    items: Taxonomy(\n      where: {\n        type: { _eq: "assetCategory" }\n        isGroup: { _eq: false }\n        status: { _eq: "active" }\n        name: { _ilike: $q }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n']);return q=function(){return n},n}function w(){var n=(0,i.Z)(["\n  query GetTaxonomyForSelect(\n    $where: Taxonomy_bool_exp\n    $limit: Int\n    $offset: Int\n    $orderBy: Taxonomy_order_by!\n    $includeMeta: Boolean! = false\n  ) {\n    items: Taxonomy(where: $where, limit: $limit, offset: $offset, order_by: [$orderBy]) {\n      value: id\n      label: name\n      meta @include(if: $includeMeta)\n    }\n  }\n"]);return w=function(){return n},n}function j(){var n=(0,i.Z)(['\n  query GetTagsForTask($q: String!, $limit: Int = 50, $offset: Int = 0) {\n    items: Taxonomy(\n      where: { name: { _ilike: $q }, status: { _eq: "active" }, type: { _eq: "taskTags" } }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      value: id\n      label: name\n    }\n  }\n']);return j=function(){return n},n}function C(){var n=(0,i.Z)(['\n  query GetTagsForEntity(\n    $entityId: Int\n    $entity: String!\n    $q: String!\n    $limit: Int = 50\n    $offset: Int = 0\n  ) {\n    tags: Taxonomy(\n      where: {\n        name: { _ilike: $q }\n        status: { _eq: "active" }\n        type: { _eq: "taskTags" }\n        _not: { Taxonomy_Entities: { entity: { _eq: $entity }, entityId: { _eq: $entityId } } }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      id\n      name\n      meta\n    }\n  }\n']);return C=function(){return n},n}function S(){var n=(0,i.Z)(['\n  query GetEntityTags($entityId: Int!, $entity: String!) {\n    tags: Taxonomy_Entity(\n      where: {\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n        Taxonomy: { status: { _eq: "active" }, type: { _eq: "taskTags" } }\n      }\n      order_by: { id: desc }\n    ) {\n      id\n      tag: Taxonomy {\n        id\n        name\n        meta\n      }\n    }\n  }\n']);return S=function(){return n},n}function P(){var n=(0,i.Z)(["\n  query GetCustomerManagers($accountId: Int, $q: String, $limit: Int, $offset: Int) {\n    items: User(\n      where: { Account_Users: { accountId: { _eq: $accountId } }, fullName: { _ilike: $q } }\n      order_by: { fullName: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n"]);return P=function(){return n},n}function k(){var n=(0,i.Z)(["\n  query GetServiceSchedulesForSelect(\n    $q: String\n    $serviceId: Int\n    $entity: service_schedule_entity\n    $entityId: Int\n    $limit: Int = 50\n    $offset: Int = 0\n  ) {\n    items: ServiceSchedule(\n      where: {\n        name: { _ilike: $q }\n        serviceId: { _eq: $serviceId }\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]);return k=function(){return n},n}function M(){var n=(0,i.Z)(['\n  query GetPropertyById($id: Int!) {\n    item: Location_by_pk(id: $id) {\n      label: name\n      value: id\n      access\n      registeredAddress: Addresses(\n        where: { entity: { _eq: "Location" }, registered: { _eq: true } }\n      ) {\n        address: Address {\n          id\n          addressLine1\n          addressLine2\n          addressLine3\n          county\n          country: Country {\n            name\n            code\n          }\n          postCode\n          city\n        }\n      }\n    }\n  }\n']);return M=function(){return n},n}function T(){var n=(0,i.Z)(["\n  query GetCompliancesForSelectNew($q: String, $locationId: Int, $limit: Int, $offset: Int) {\n    items: Compliance(\n      where: { name: { _ilike: $q }, locationId: { _eq: $locationId } }\n      order_by: { name: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      value: id\n      label: name\n      category: ComplianceCategory {\n        label: name\n      }\n    }\n  }\n"]);return T=function(){return n},n}function A(){var n=(0,i.Z)(['\n  query GetTaskAssignedToForSelect(\n    $accountId: Int\n    $q: String\n    $limit: Int = 50\n    $offset: Int = 0\n  ) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: { accountId: { _eq: $accountId }, status: { _eq: "active" } }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']);return A=function(){return n},n}var F=(0,o.Ps)(r()),G=(0,o.Ps)(a()),L=(0,o.Ps)(s()),D=(0,o.Ps)(c()),N=(0,o.Ps)(l()),R=(0,o.Ps)(u()),O=(0,o.Ps)(d()),z=(0,o.Ps)(m()),U=(0,o.Ps)(f()),E=(0,o.Ps)(p()),H=(0,o.Ps)(h()),B=(0,o.Ps)(v()),W=(0,o.Ps)(g()),V=(0,o.Ps)(y()),J=(0,o.Ps)(x()),Y=(0,o.Ps)(b()),Q=(0,o.Ps)(Z()),X=(0,o.Ps)(I()),K=(0,o.Ps)($()),nn=(0,o.Ps)(_()),ne=(0,o.Ps)(q()),nt=(0,o.Ps)(w());(0,o.Ps)(j()),(0,o.Ps)(C()),(0,o.Ps)(S());var ni=(0,o.Ps)(P()),no=(0,o.Ps)(k()),nr=(0,o.Ps)(M()),na=(0,o.Ps)(T()),ns=(0,o.Ps)(A())},91830:function(n,e,t){"use strict";t.d(e,{P:function(){return I}});var i=t(26042),o=t(69396),r=t(85893),a=t(67294),s=t(10166),c=t(45697),l=t.n(c),u=t(94054),d=t(47312),m=t(18972),f=t(18360),p=t(56815),h=t(51233),v=t(15861),g=t(5616),y=t(87918),x=t(69368),b={text:function(n){var e=n.option,t=n.multiple,i=n.index;return t&&i>0?", ".concat(e.label):e.label},textWithIcon:function(n){var e=n.option;return(0,r.jsxs)(h.Z,{direction:"row",alignItems:"center",spacing:1,children:[e.icon,(0,r.jsxs)(v.Z,{children:[" ",e.label]})]})},chip:function(n){var e=n.chipProps,t=n.option;return(0,a.createElement)(y.Z,(0,o.Z)((0,i.Z)({},e),{key:t.value,label:t.label,icon:t.icon,sx:{color:t.color,bgcolor:t.bgcolor}}))}},Z={text:function(n){return n.option.label},textWithIcon:function(n){var e=n.option;return(0,r.jsxs)(h.Z,{direction:"row",alignItems:"center",spacing:1,children:[e.icon,(0,r.jsxs)(v.Z,{children:[" ",e.label]})]})},chip:function(n){var e=n.chipProps,t=n.option;return(0,a.createElement)(y.Z,(0,o.Z)((0,i.Z)({},e),{key:t.value,label:t.label,icon:t.icon,sx:{color:t.color,bgcolor:t.bgcolor}}))},checkbox:function(n){var e=n.option,t=n.value;return(0,r.jsxs)(h.Z,{direction:"row",alignItems:"center",spacing:1,children:[(0,r.jsx)(x.Z,{color:"secondary",sx:{height:"10px"},checked:t.indexOf(e.value)>-1}),(0,r.jsxs)(v.Z,{children:[" ",e.label]})]})}},I=function(n){var e=n.label,t=n.value,a=n.onChange,s=n.leftSideLabel,c=n.options,l=n.inputComponent,u=n.selectComponent,d=n.withoutSelectIcon,h=n.formControl,y=n.chipProps,x=n.selectProps,I=function(n){return c.find(function(e){return e.value===n})};return(0,r.jsxs)($,(0,o.Z)((0,i.Z)({},h),{leftSideLabel:s,withoutSelectIcon:d,children:[e&&s&&(0,r.jsx)(v.Z,{children:e}),e&&!s&&(0,r.jsx)(_,{shrink:""!==t&&void 0!==t,children:e}),(0,r.jsx)(f.Z,(0,o.Z)((0,i.Z)({displayEmpty:!0},x),{value:t,onChange:a,inputProps:{shrink:!0},renderValue:function(){if(Array.isArray(t))return(0,r.jsx)(g.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:t.map(function(n,e){var t=I(n);return t?b[l]({chipProps:y,option:t,multiple:!0,index:e}):""})});var n=I(t);return n?(0,r.jsx)(g.Z,{children:b[l]({chipProps:y,option:n})}):""},children:c.map(function(n){return(0,r.jsx)(m.Z,{value:n.value,children:Z[u]({chipProps:y,option:n,value:t})},n.value)})})),(null==h?void 0:h.helperText)&&(0,r.jsx)(p.Z,{children:h.helperText})]}))};I.defaultProps={label:"",onChange:function(){},leftSideLabel:!1,options:[],inputComponent:"text",selectComponent:"text",withoutSelectIcon:!1,formControl:{error:!1,helperText:""},chipProps:{size:"small"},selectProps:{}},I.propTypes={label:l().string,value:l().oneOfType([l().string,l().array]),onChange:l().func,leftSideLabel:l().bool,options:l().arrayOf(l().shape({label:l().string.isRequired,value:l().string.isRequired,color:l().string,bgcolor:l().string,icon:l().node}).isRequired),inputComponent:l().oneOf(["text","textWithIcon","chip"]),selectComponent:l().oneOf(["text","textWithIcon","chip","checkbox"]),withoutSelectIcon:l().bool,formControl:l().object,chipProps:l().object,selectProps:l().object};var $=(0,s.Z)(u.Z)(function(n){n.theme;var e=n.leftSideLabel,t=n.withoutSelectIcon;return{"&.MuiFormControl-root":(0,i.Z)({display:"flex",flexDirection:"column",alignItems:"flex-start"},e&&{display:"flex",flexDirection:"row",alignItems:"center",gap:"10px"}),"& .MuiSelect-icon":(0,i.Z)({},t&&{display:"none"})}}),_=(0,s.Z)(d.Z)(function(n){return{"&.MuiFormLabel-root.MuiInputLabel-root.Mui-focused":{color:n.theme.palette.secondary.main}}})},45451:function(n,e,t){"use strict";t.d(e,{i:function(){return q}});var i=t(14924),o=t(26042),r=t(69396),a=t(85893),s=t(67294),c=t(11163),l=t(45697),u=t.n(l),d=t(61870),m=t(5616),f=t(51233),p=t(15861),h=t(90948),v=t(41796),g=t(29217),y=t(45111),x=t(98209),b=t(70872),Z=t(58886),I=t(61730),$=function(n){var e=n.currentPage,t=n.totalCount,i=n.pageSize,r=n.onPageChange,s=(0,I.Z)("(max-width:400px)"),c=(0,I.Z)("(max-width:500px)");return(0,a.jsx)(_,{mb:2,page:e,count:Math.ceil(t/i),onChange:function(n,e){return r(e)},variant:"outlined",shape:"rounded",size:s?"small":"medium",hidePrevButton:1===e,hideNextButton:e===Math.ceil(t/i),siblingCount:c?0:1,renderItem:function(n){return(0,a.jsx)(Z.Z,(0,o.Z)({slots:{previous:function(){return"Previous"},next:function(){return"Next"}}},n))}})};$.defaultProps={currentPage:1,totalCount:0,pageSize:50,onPageChange:function(){}},$.propTypes={currentPage:u().number,totalCount:u().number,pageSize:u().number,onPageChange:u().func};var _=(0,h.ZP)(b.Z)(function(n){var e,t=n.hidePrevButton,r=n.hideNextButton,a=n.theme;return e={},(0,i.Z)(e,"&.MuiPagination-root",{alignSelf:"center",marginTop:"16px"}),(0,i.Z)(e,"& .MuiPaginationItem-root",{fontWeight:600,margin:0,borderRadius:0}),(0,i.Z)(e,"& .MuiPagination-ul > li:last-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"0 5px 5px 0"}),(0,i.Z)(e,"& .MuiPagination-ul > li:first-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"5px 0 0 5px"}),(0,i.Z)(e,"& button.Mui-selected",(0,o.Z)({color:a.palette.white.main,backgroundColor:a.palette.secondary.main},r?{borderRadius:"0 5px 5px 0"}:{},t?{borderRadius:"5px 0 0 5px"}:{})),e}),q=(0,s.forwardRef)(function(n,e){var t=n.columns,i=n.history,r=n.initialSort,l=n.meta,u=n.refetch,d=n.paginationSize,m=n.containerHeight,h=n.containerMaxHeight,v=n.noResultsMessage,b=n.autoHeight,Z=(0,c.useRouter)(),I=Z.query,_=void 0===I?{}:I,q=(0,s.useState)(parseInt(null==_?void 0:_.page,10)||1),C=q[0],S=q[1],P=(0,s.useState)(d||x.C1.paginationSize),k=P[0],M=P[1],T=r;T||(T={item:"createdAt",order:"desc"});var A=(0,s.useState)({item:T.item,order:T.order}),F=A[0],G=A[1],L=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=Z.query,t=void 0===e?{}:e;if(n>1?t.page=n:delete t.page,!(Object.keys(t).length>0))return{};var i=Object.keys(t).map(function(e){return"page"===e?"".concat(e,"=").concat(n):"".concat(e,"=").concat(t[e])}).join("&");return"?".concat(i)},D=function(){G({item:T.item,order:T.order}),S(1);var n=L();Z.push(n),M(d||x.C1.paginationSize)};(0,s.useImperativeHandle)(e,function(){return{currentPage:C,pageSize:k,sort:F,resetPagination:function(){D()}}});var N=function(n){var e=L(n);i&&Z.push(e),S(n),!i&&u&&u()},R=function(n){n&&n.field&&n.sort?(G({item:t.find(function(e){return e.field===n.field}).sortName||n.field||n.item||T.item,order:n.sort||n.order||T.order}),u&&u()):(G({item:T.item,order:T.order}),u&&u())};return(0,a.jsxs)(w,{containerHeight:m,containerMaxHeight:h,children:[(0,a.jsx)(j,(0,o.Z)({hideFooter:!0,disableColumnMenu:!0,disableSelectionOnClick:!0,autoHeight:b,sortingMode:"server",onSortModelChange:function(n){return R(n[0])},columns:t,pageSize:k,slots:{columnSortedAscendingIcon:function(){return(0,a.jsx)(g.Z,{})},columnSortedDescendingIcon:function(){return(0,a.jsx)(y.Z,{})},columnUnsortedIcon:function(){return(0,a.jsxs)(f.Z,{alignItems:"center",sx:{width:"33px"},children:[(0,a.jsx)(g.Z,{sx:{marginBottom:"-15px"}}),(0,a.jsx)(y.Z,{})]})},noResultsOverlay:function(){return(0,a.jsx)(f.Z,{height:"100%",alignItems:"center",justifyContent:"center",spacing:1,p:1,children:(0,a.jsx)(p.Z,{children:v})})},noRowsOverlay:function(){return(0,a.jsx)(f.Z,{height:"100%",alignItems:"center",justifyContent:"center",spacing:1,p:1,children:(0,a.jsx)(p.Z,{children:v})})}}},n)),l&&Math.ceil(l.aggregate.totalCount/k)>1&&(0,a.jsx)($,{currentPage:C,totalCount:l.aggregate.totalCount,pageSize:k,onPageChange:N})]})});q.propTypes={history:u().bool,initialSort:u().object,loading:u().bool,meta:u().object,refetch:u().func,paginationSize:u().number,noResultsMessage:u().string,columns:u().array.isRequired,rows:u().array.isRequired,autoHeight:u().bool},q.defaultProps={columns:[],history:!1,loading:!1,rows:[],noResultsMessage:"There are no results.",autoHeight:!0};var w=(0,h.ZP)(m.Z)(function(n){var e;return{height:n.containerHeight,maxHeight:n.containerMaxHeight,display:"flex",flexDirection:"column"}}),j=(0,h.ZP)(d.s)(function(n){var e,t=n.theme,a=n.hideHeader,s=(n.rows,n.loading,n.rowHeight),c=n.isPdf;return e={"--DataGrid-overlayHeight":"40px"},(0,i.Z)(e,"&.MuiDataGrid-root",(0,o.Z)({color:t.palette.black.main,border:"none"},c&&{"@media print":{display:"block"}})),(0,i.Z)(e,"& .MuiDataGrid-main",(0,o.Z)({},c&&{"@media print":{overflow:"visible !important"}})),(0,i.Z)(e,"& .MuiDataGrid-columnHeaders",(0,r.Z)((0,o.Z)({},a&&{display:"none"}),{"& .MuiDataGrid-iconButtonContainer":{visibility:"visible","& .MuiButtonBase-root.MuiIconButton-root":{backgroundColor:"inherit",color:t.palette.black.main,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.1)"}}}})),(0,i.Z)(e,"& .MuiDataGrid-virtualScroller",(0,o.Z)({},a&&{marginTop:"0 !important"},c&&{"@media print":{overflow:"visible !important"}})),(0,i.Z)(e,"& .MuiDataGrid-iconSeparator",{opacity:0}),(0,i.Z)(e,"& .MuiDataGrid-columnHeaderTitle",{fontWeight:700}),(0,i.Z)(e,"& .MuiButtonBase-root.MuiDataGrid-columnHeaderTitle",{fontWeight:700}),(0,i.Z)(e,"& .MuiDataGrid-virtualScrollerContent",(0,o.Z)({},c&&{height:"initial !important",minHeight:"initial !important"})),(0,i.Z)(e,"& .MuiDataGrid-virtualScrollerRenderZone",(0,o.Z)({},c&&{position:"relative"})),(0,i.Z)(e,"& .MuiDataGrid-overlayWrapper",(0,i.Z)({},"& .MuiCircularProgress-root",{color:t.palette.secondary.main})),(0,i.Z)(e,"& .MuiDataGrid-row",(0,o.Z)({},c&&{minHeight:"".concat(s,"cm !important"),maxHeight:"".concat(s,"cm !important")})),(0,i.Z)(e,"& .MuiDataGrid-row > .MuiDataGrid-cell",(0,o.Z)({},c&&{minHeight:"".concat(s,"cm !important"),maxHeight:"".concat(s,"cm !important")})),(0,i.Z)(e,"& .MuiDataGrid-columnHeaderCheckbox",(0,i.Z)({},"& .MuiButtonBase-root.MuiCheckbox-root > .MuiSvgIcon-root",(0,i.Z)({color:t.palette.secondary.main},'&[data-testid="CheckBoxOutlineBlankIcon"]',{color:"currentColor"}))),(0,i.Z)(e,"& .MuiDataGrid-row > .MuiDataGrid-cellCheckbox",(0,i.Z)({},"& .MuiButtonBase-root.MuiCheckbox-root > .MuiSvgIcon-root",(0,i.Z)({color:t.palette.secondary.main},'&[data-testid="CheckBoxOutlineBlankIcon"]',{color:"currentColor"}))),(0,i.Z)(e,"& .MuiDataGrid-row.even",{backgroundColor:t.palette.muiLightGray.main,"&:hover, &.Mui-hovered":{backgroundColor:(0,v.Fq)(t.palette.muiLightGray.main,.3),"@media (hover: none)":{backgroundColor:"transparent"}},"&.Mui-selected":{backgroundColor:(0,v.Fq)(t.palette.muiLightGray.main,.3+t.palette.action.selectedOpacity),"&:hover, &.Mui-hovered":{backgroundColor:(0,v.Fq)(t.palette.muiLightGray.main,.3+t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,v.Fq)(t.palette.muiLightGray.main,.3+t.palette.action.selectedOpacity)}}}}),e})},87336:function(n,e,t){"use strict";t.d(e,{t:function(){return l}});var i=t(85893),o=t(67294),r=t(45697),a=t(11163),s=t(98209),c=t(16540),l=(0,o.forwardRef)(function(n,e){var t=n.columns,r=n.history,l=n.initialSort,u=n.loading,d=n.meta,m=n.paginationSize,f=n.refetch,p=n.rowClick,h=n.rows,v=n.xeroPageSize,g=(0,a.useRouter)(),y=g.query,x=void 0===y?{}:y,b=(0,o.useState)(parseInt(null==x?void 0:x.page,10)||1),Z=b[0],I=b[1],$=(0,o.useState)(v||s.C1.paginationSize),_=$[0],q=$[1];l||(l={item:"createdAt",order:"desc"});var w=(0,o.useState)({item:l.item,order:l.order}),j=w[0],C=w[1],S=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=g.query,t=void 0===e?{}:e;if(n>1?t.page=n:delete t.page,!(Object.keys(t).length>0))return{};var i=Object.keys(t).map(function(e){return"page"===e?"".concat(e,"=").concat(n):"".concat(e,"=").concat(t[e])}).join("&");return"?".concat(i)},P=function(){C({item:l.item,order:l.order}),I(1);var n=S();g.push(n),q(v||s.C1.paginationSize)};(0,o.useImperativeHandle)(e,function(){return{currentPage:Z,pageSize:_,sort:j,resetPagination:function(){P()}}});var k=function(n){var e=S(n);r&&g.push(e),I(n),!r&&f&&f()},M=function(n){n!==s.C1.paginationSize&&(q(n),f&&f())},T=function(n){var e;C({item:n.item,order:n.order}),f&&f()};return(0,i.jsx)(c.Z,{columns:t,loading:u,paginationSize:m,pagination:d&&!0,paginationProps:d&&{currentPage:Z,onPageChange:k,onPageSizeChange:M,pageCount:Math.ceil(d.aggregate.totalCount/_),perPage:_},rowClick:p,rows:h,sort:j,setSort:T})});l.propTypes={columns:r.array.isRequired,history:r.bool,initialSort:r.object,loading:r.bool,meta:r.object,refetch:r.func,rowClick:r.func,rows:r.array.isRequired},l.defaultProps={history:!0,loading:!0,paginationSize:!1}},50108:function(n,e,t){"use strict";function i(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GBP";return new Intl.NumberFormat(["en-GB"],{currency:e,currencyDisplay:"symbol",style:"currency"}).format(n)}t.d(e,{T:function(){return i}})},45307:function(n,e,t){"use strict";t.d(e,{X:function(){return p}});var i=t(14924),o=t(82670),r=t(828),a=t(7297),s=t(67294),c=t(6812),l=t(50319),u=t(75063),d=t(53767);function m(){var n=(0,a.Z)(["\n  query GetAccountUserFilters($accountUserId: Int!) {\n    accountUser: Account_User_by_pk(id: $accountUserId) {\n      filters\n    }\n  }\n"]);return m=function(){return n},n}function f(){var n=(0,a.Z)(["\n  mutation SetAccountUserFilters($accountUserId: Int!, $filters: jsonb) {\n    update_Account_User_by_pk(pk_columns: { id: $accountUserId }, _append: { filters: $filters }) {\n      id\n    }\n  }\n"]);return f=function(){return n},n}function p(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage",a=(0,d.q)().user,u=(0,s.useState)(function(){try{switch(t){case"network":case"state":return e;case"sessionStorage":return JSON.parse(window.sessionStorage.getItem(n))||e}}catch(i){return e}}),m=u[0],f=u[1],p=function(e){try{var r=(0,o.Z)(e,Function)?e(m):e;switch(f(r),t){case"network":g({variables:{accountUserId:null==a?void 0:a.accountUserId,filters:(0,i.Z)({},n,r)}});break;case"sessionStorage":window.sessionStorage.setItem(n,JSON.stringify(r))}}catch(s){}};(0,c.a)(h,{variables:{accountUserId:null==a?void 0:a.accountUserId},skip:"network"!==t,onCompleted:function(t){var i=t.accountUser;i&&f(i.filters[n]||e)}});var g=(0,r.Z)((0,l.D)(v),1)[0];return[m,p]}var h=(0,u.Ps)(m()),v=(0,u.Ps)(f())},75023:function(n,e,t){"use strict";t.r(e);var i=t(85893),o=t(11163),r=t.n(o),a=t(24716),s=t(49408),c=t(74944),l=t(53767),u=function(){var n,e,t=(0,l.q)(),o=(0,c.x)(),a=o.user,u=o.hasRole,d=null==t?void 0:null===(n=t.admin)||void 0===n?void 0:null===(e=n.modules)||void 0===e?void 0:e.assets;return a?d?(0,i.jsx)(s.E,{editable:u("admin"),initialFilters:{filterType:"assets_page"}}):(r().push("/404"),null):(r().push("/account/sign-in"),null)};u.getLayout=function(n){return(0,i.jsx)(a.Z,{children:n})},e.default=u}},function(n){n.O(0,[3662,2283,212,8890,9511,2583,6310,4599,4135,8579,4244,7645,3776,1564,2329,778,3054,1023,3911,1417,9957,6540,1870,5037,8062,1352,2429,1207,5117,1050,5444,4716,6557,9591,9774,2888,179],function(){return n(n.s=40145)}),_N_E=n.O()}]);