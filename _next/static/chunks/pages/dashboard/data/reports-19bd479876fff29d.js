(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1004,7493],{75477:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/data/reports",function(){return t(50799)}])},21830:function(e,n,t){"use strict";t.d(n,{C:function(){return _}});var a=t(85893),o=t(67294),r=t(45697),i=t.n(r),l=t(93946),u=t(25464),s=t(18972),c=t(57976),d=t(73890),p=t(69008),v=t(41687),m=t(60888),f=t(40535),h=t(63441),b=t(41733),y=t(77957),g=t(2548),x=t(24519),w=t(2391),j=t(69308),S=t(79369),Z=t(22961),C=t(28201),I=t(51233),T=t(15861),q={add:(0,a.jsx)(v.Z,{}),archive:(0,a.jsx)(d.Z,{}),avatar:(0,a.jsx)(C.Z,{}),check:(0,a.jsx)(m.Z,{}),delete:(0,a.jsx)(b.Z,{}),description:(0,a.jsx)(f.Z,{}),download:(0,a.jsx)(h.Z,{}),info:(0,a.jsx)(g.Z,{}),edit:(0,a.jsx)(y.Z,{}),location:(0,a.jsx)(j.Z,{}),unarchive:(0,a.jsx)(p.Z,{}),uploadFile:(0,a.jsx)(x.Z,{}),receipt:(0,a.jsx)(w.Z,{}),visibility:(0,a.jsx)(Z.Z,{})},A={default:(0,a.jsx)(c.Z,{}),defaultHoriz:(0,a.jsx)(S.Z,{}),description:(0,a.jsx)(f.Z,{})},_=function(e){var n=e.actionsData,t=e.icon,r=e.row,i=e.disabled,c=(0,o.useState)(null),d=c[0],p=c[1],v=function(e){e.stopPropagation(),p(e.currentTarget)},m=function(){p(null)};return(0,a.jsxs)("div",{children:[(0,a.jsx)(l.Z,{sx:{":hover":{backgroundColor:"#DDDDDD"}},disabled:i,"aria-controls":"simple-menu","aria-haspopup":"true",onClick:v,children:A[t]}),(0,a.jsx)(u.Z,{id:"simple-menu",anchorEl:d,keepMounted:!0,open:Boolean(d),onClose:m,PaperProps:{sx:{borderRadius:2}},children:n(r).map(function(e,n){return(0,a.jsx)(s.Z,{disabled:e.disabled,onClick:function(n){e.onClick(n),m()},sx:{pl:3,pr:4},children:(0,a.jsxs)(I.Z,{direction:"row",alignItems:"center",spacing:2,children:[(null==q?void 0:q[e.icon])||null,(0,a.jsx)(T.Z,{children:e.tooltip})]})},n)})})]})};_.propTypes={actionsData:i().func.isRequired,icon:i().oneOf(["default","description"]),row:i().any.isRequired,disabled:i().bool},_.defaultProps={actionsData:function(){return[{disabled:!1,onClick:function(){},icon:"edit",tooltip:"Edit"}]},icon:"default",disabled:!1}},4595:function(e,n,t){"use strict";t.d(n,{F:function(){return T}});var a=t(14924),o=t(26042),r=t(69396),i=t(85893),l=t(45697),u=t.n(l),s=t(10166),c=t(80482),d=t(23776),p=t(98456),v=t(16143),m=t(50135),f=t(99534),h=t(29815),b=t(74061),y=t(6498),g=t(75438),x=t(15861),w=t(61730),j=t(67294),S=(0,j.createContext)({}),Z=(0,j.forwardRef)(function(e,n){var t=(0,j.useContext)(S);return(0,i.jsx)("div",(0,o.Z)({ref:n},e,t))}),C=(0,j.forwardRef)(function(e,n){var t=e.children,a=(0,f.Z)(e,["children"]),o=[];t.forEach(function(e){o.push(e),o.push.apply(o,(0,h.Z)(e.children||[]))});var r,l,u=(0,y.u)(),s=(0,w.Z)(u.breakpoints.up("sm"),{noSsr:!0}),c=o.length,d=s?36:48,p=function(e){return e.hasOwnProperty("group")?48:d},v=(l=(0,j.useRef)(null),(0,j.useEffect)(function(){null!=l.current&&l.current.resetAfterIndex(0,!0)},[c]),l);return(0,i.jsx)("div",{ref:n,children:(0,i.jsx)(S.Provider,{value:a,children:(0,i.jsx)(b.S_,{itemData:o,height:(c>8?8*d:o.map(p).reduce(function(e,n){return e+n},0))+16,width:"100%",ref:v,outerElementType:Z,innerElementType:"ul",itemSize:function(e){return p(o[e])},overscanCount:5,itemCount:c,children:I})})})});function I(e){var n=e.data,t=e.index,a=e.style,l=n[t],u=(0,r.Z)((0,o.Z)({},a),{top:a.top+8});return l.hasOwnProperty("group")?(0,i.jsx)(g.Z,{component:"div",style:u,children:l.group},l.key):(0,i.jsx)(x.Z,(0,r.Z)((0,o.Z)({component:"li"},l[0]),{noWrap:!0,style:u,children:l[1].label}))}var T=function(e){var n=e.label,t=e.loading,a=e.placeholder,l=e.error,u=e.helperText,s=e.inputProps;return(0,i.jsx)(A,(0,r.Z)((0,o.Z)({},e),{disableListWrap:!0,PopperComponent:q,ListboxComponent:C,renderInput:function(e){return(0,i.jsx)(m.Z,(0,r.Z)((0,o.Z)({},e,s),{error:l,helperText:u,label:n,placeholder:a,color:"secondary",variant:"standard",InputProps:(0,r.Z)((0,o.Z)({},e.InputProps,(null==s?void 0:s.InputProps)||{}),{endAdornment:(0,i.jsxs)(i.Fragment,{children:[t?(0,i.jsx)(p.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))},renderOption:function(e,n,t){return[e,n,t.index]},renderGroup:function(e){return e}}))};T.defaultProps={value:null,onChange:function(){},label:"",loading:!1,error:!1,onOpen:function(){},options:[],inputProps:{},withoutSelectIcon:!1},T.propTypes={value:u().shape({value:u().any,label:u().string}),onChange:u().func,label:u().string,loading:u().bool,onOpen:u().func,options:u().arrayOf(u().shape({value:u().any,label:u().string})),inputProps:u().object,withoutSelectIcon:u().bool,inputValue:u().string,onInputChange:u().func};var q=(0,s.Z)(v.Z)((0,a.Z)({zIndex:"12000 !important"},"& .".concat(c.Z.listbox),{boxSizing:"border-box","& ul":{padding:0,margin:0}})),A=(0,s.Z)(d.Z)(function(e){var n=e.withoutSelectIcon;return{"& .MuiAutocomplete-root":{cursor:"pointer"},"& .MuiAutocomplete-popper":{zIndex:"12000 "},"& .MuiAutocomplete-endAdornment":{"& .MuiButtonBase-root.MuiIconButton-root.MuiAutocomplete-popupIndicator":{"& .MuiSvgIcon-root":(0,o.Z)({},n&&{display:"none"})}}}})},18531:function(e,n,t){"use strict";t.d(n,{q:function(){return m}});var a=t(26042),o=t(69396),r=t(99534),i=t(85893),l=t(87918),u=t(98456),s=t(23776),c=t(50135),d=t(67294),p=t(45697),v=t.n(p),m=function(e){var n=e.loading,t=e.setSearch,p=e.textFieldProps,v=(e.disableClearable,(0,r.Z)(e,["loading","setSearch","textFieldProps","disableClearable"])),m=(0,d.useState)(""),f=m[0],h=m[1];return(0,d.useEffect)(function(){var e=setTimeout(function(){t(f)},500);return function(){return clearTimeout(e)}},[f,t]),(0,i.jsx)(s.Z,(0,o.Z)((0,a.Z)({isOptionEqualToValue:function(e,n){return e.value===n.value}},v),{loading:n,onInputChange:function(e,n){h(n)},getOptionLabel:function(e){return"".concat(e.label)},renderTags:function(e,n){return e.map(function(e,t){return(0,i.jsx)(l.Z,(0,a.Z)({size:"small",label:e.label},n({index:t})))})},renderInput:function(e){return(0,i.jsx)(c.Z,(0,o.Z)((0,a.Z)({},e,p),{InputProps:(0,o.Z)((0,a.Z)({},e.InputProps,p.InputProps||{}),{endAdornment:(0,i.jsxs)(i.Fragment,{children:[n?(0,i.jsx)(u.Z,{color:"inherit",size:20}):null,e.InputProps.endAdornment]})})}))}}))};m.defaultProps={color:"secondary",onChange:function(){},options:[],onOpen:function(){},setSearch:function(){},textFieldProps:{}},m.propTypes={multiple:v().bool,limitTags:v().number,filterSelectedOptions:v().bool,color:v().string,loading:v().bool,value:v().oneOf([v().array,v().object]),onChange:v().func,options:v().arrayOf(v().shape({value:v().any.isRequired,label:v().string.isRequired})).isRequired,onOpen:v().func,setSearch:v().func,textFieldProps:v().shape({label:v().string,variant:v().oneOf(["standard"]),color:v().string,error:v().bool,helperText:v().string})}},53600:function(e,n,t){"use strict";t.d(n,{E:function(){return a}});var a=function(e,n){if(Array.isArray(n)){var t,a=null;return n.forEach(function(n){var t,o=null==e?void 0:null===(t=e.timings)||void 0===t?void 0:t.find(function(e){return e.status===n});a=(null==o?void 0:o.createdAt)||a}),a}var o=null==e?void 0:null===(t=e.timings)||void 0===t?void 0:t.find(function(e){return e.status===n});return(null==o?void 0:o.createdAt)||null}},96715:function(e,n,t){"use strict";t.d(n,{il:function(){return r},j$:function(){return a},wo:function(){return o}});var a=function(e,n){if(Array.isArray(n)){var t,a,o=null;return n.forEach(function(n){var t,a,r=null===(t=e.timings)||void 0===t?void 0:t.find(function(e){return e.status===n});o=(null==r?void 0:null===(a=r.user)||void 0===a?void 0:a.fullName)||o}),o}var r=null===(t=e.timings)||void 0===t?void 0:t.find(function(e){return e.status===n});return(null==r?void 0:null===(a=r.user)||void 0===a?void 0:a.fullName)||null},o=function(e,n){if(Array.isArray(n)){var t,a=null;return n.forEach(function(n){var t,o=null===(t=e.timings)||void 0===t?void 0:t.find(function(e){return e.status===n});a=(null==o?void 0:o.id)||a}),a}var o=null===(t=e.timings)||void 0===t?void 0:t.find(function(e){return e.status===n});return(null==o?void 0:o.id)||null},r=function(e,n){return!e||e>n}},82725:function(e,n,t){"use strict";t.d(n,{By:function(){return v},Rm:function(){return d},WG:function(){return p},Wj:function(){return m},bK:function(){return f}});var a=t(7297),o=t(75063);function r(){var e=(0,a.Z)(['\n  query getInvoices($jobId: Int!) {\n    invoices: Invoice(where: { entityId: { _eq: $jobId }, entity: { _eq: "Job" } }) {\n      id\n      accountEntry: AccountEntry {\n        id\n        type\n        paymentStatus\n        meta\n        dueDate\n      }\n      items\n      status\n      createdAt\n      rebate\n      meta\n      totals\n      invoiceType\n      invoiceNumber\n      invoiceDate\n      expenses\n      entityId\n      entity\n      configs\n      amounts\n      addendum\n      addresses\n      adminId\n      reconciledAmount: AccountEntry {\n        reconciliations: InvoiceReconciliations_aggregate {\n          aggregate {\n            sum {\n              amount\n            }\n          }\n        }\n      }\n    }\n    meta: Invoice_aggregate(where: { entityId: { _eq: $jobId }, entity: { _eq: "Job" } }) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n']);return r=function(){return e},e}function i(){var e=(0,a.Z)(['\n  query getInvoices($id: Int!) {\n    invoice: Invoice_by_pk(id: $id) {\n      id\n      accountEntry: AccountEntry {\n        id\n        paymentStatus\n      }\n      items\n      status\n      createdAt\n      rebate\n      meta\n      totals\n      invoiceType\n      invoiceNumber\n      invoiceDate\n      expenses\n      entityId\n      configs\n      amounts\n      addendum\n      addresses\n      adminId\n      amountPaid: AccountEntry {\n        reconciliations: InvoiceReconciliations_aggregate(\n          where: { creditEntity: { _eq: "PaymentReceipt" } }\n        ) {\n          aggregate {\n            sum {\n              amount\n            }\n          }\n        }\n      }\n      amountDeducted: AccountEntry {\n        reconciliations: InvoiceReconciliations_aggregate(\n          where: { creditEntity: { _eq: "CreditNote" } }\n        ) {\n          aggregate {\n            sum {\n              amount\n            }\n          }\n        }\n      }\n      reconciledAmount: AccountEntry {\n        reconciliations: InvoiceReconciliations_aggregate {\n          aggregate {\n            sum {\n              amount\n            }\n          }\n        }\n      }\n    }\n  }\n']);return i=function(){return e},e}function l(){var e=(0,a.Z)(['\n  query getInvoiceForPdf($id: Int!) {\n    invoice: Invoice_by_pk(id: $id) {\n      id\n      entityId\n      invoiceType\n      accountEntry: AccountEntry {\n        id\n        meta\n      }\n      amountPaid: AccountEntry {\n        reconciliations: InvoiceReconciliations_aggregate(\n          where: { creditEntity: { _eq: "PaymentReceipt" } }\n        ) {\n          aggregate {\n            sum {\n              amount\n            }\n          }\n        }\n      }\n      amountDeducted: AccountEntry {\n        reconciliations: InvoiceReconciliations_aggregate(\n          where: { creditEntity: { _eq: "CreditNote" } }\n        ) {\n          aggregate {\n            sum {\n              amount\n            }\n          }\n        }\n      }\n      reconciledAmount: AccountEntry {\n        reconciliations: InvoiceReconciliations_aggregate {\n          aggregate {\n            sum {\n              amount\n            }\n          }\n        }\n      }\n    }\n  }\n']);return l=function(){return e},e}function u(){var e=(0,a.Z)(['\n  query getInvoiceForPdfByType($jobId: Int!, $invoiceType: String!) {\n    invoices: Invoice(\n      where: {\n        entityId: { _eq: $jobId }\n        entity: { _eq: "Job" }\n        invoiceType: { _eq: $invoiceType }\n      }\n      order_by: { createdAt: desc }\n    ) {\n      id\n      invoiceType\n      accountEntry: AccountEntry {\n        id\n        type\n        meta\n      }\n      amountPaid: AccountEntry {\n        reconciliations: InvoiceReconciliations_aggregate(\n          where: { creditEntity: { _eq: "PaymentReceipt" } }\n        ) {\n          aggregate {\n            sum {\n              amount\n            }\n          }\n        }\n      }\n      amountDeducted: AccountEntry {\n        reconciliations: InvoiceReconciliations_aggregate(\n          where: { creditEntity: { _eq: "CreditNote" } }\n        ) {\n          aggregate {\n            sum {\n              amount\n            }\n          }\n        }\n      }\n      reconciledAmount: AccountEntry {\n        reconciliations: InvoiceReconciliations_aggregate {\n          aggregate {\n            sum {\n              amount\n            }\n          }\n        }\n      }\n    }\n  }\n']);return u=function(){return e},e}function s(){var e=(0,a.Z)(["\n  query getAccountEntryForPdfById($accountEntryId: Int!) {\n    accountEntry: AccountEntry_by_pk(id: $accountEntryId) {\n      id\n      meta\n    }\n  }\n"]);return s=function(){return e},e}function c(){var e=(0,a.Z)(["\n  mutation CreateProformaInvoice(\n    $jobId: Int!\n    $invoiceType: String!\n    $dueDate: timestamptz!\n    $description: String\n    $items: [jsonb]\n  ) {\n    createProformaInvoice(\n      jobId: $jobId\n      invoiceType: $invoiceType\n      description: $description\n      dueDate: $dueDate\n      items: $items\n    ) {\n      message\n      success\n    }\n  }\n"]);return c=function(){return e},e}var d=(0,o.Ps)(r());(0,o.Ps)(i());var p=(0,o.Ps)(l()),v=(0,o.Ps)(u()),m=(0,o.Ps)(s()),f=(0,o.Ps)(c())},57493:function(e,n,t){"use strict";t.d(n,{A5:function(){return el},Ak:function(){return F},Cj:function(){return W},K4:function(){return ea},Oq:function(){return ei},Qn:function(){return O},RJ:function(){return G},SW:function(){return R},T_:function(){return B},UH:function(){return M},UM:function(){return en},Ve:function(){return X},_d:function(){return V},_f:function(){return et},by:function(){return J},cz:function(){return $},he:function(){return Y},j$:function(){return z},kB:function(){return K},kx:function(){return U},nD:function(){return P},nP:function(){return er},pY:function(){return eo},qd:function(){return N},t1:function(){return H},yR:function(){return Q},zR:function(){return ee}});var a=t(7297),o=t(75063);function r(){var e=(0,a.Z)(["\n  query GetAddressForSelect($q: String, $entity: String!, $entityId: Int!) {\n    items: Address(\n      where: {\n        Address_Entities: { entity: { _eq: $entity }, entityId: { _eq: $entityId } }\n        _or: [\n          { addressLine1: { _eq: $q } }\n          { addressLine2: { _eq: $q } }\n          { addressLine3: { _eq: $q } }\n          { county: { _eq: $q } }\n          { postCode: { _eq: $q } }\n          { city: { _eq: $q } }\n        ]\n      }\n    ) {\n      label: addressLine1\n      value: id\n      id\n      name\n      addressLine1\n      addressLine2\n      addressLine3\n      postCode\n      county\n      country: Country {\n        name\n      }\n      city\n      Address_Entities {\n        invoice\n      }\n    }\n  }\n"]);return r=function(){return e},e}function i(){var e=(0,a.Z)(["\n  query GetAccountsForSelect($q: String, $type: String, $limit: Int, $offset: Int) {\n    items: Account(\n      where: { name: { _ilike: $q }, type: { _eq: $type } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]);return i=function(){return e},e}function l(){var e=(0,a.Z)(['\n  query GetTaxonomy($q: String, $id: Int) {\n    items: Taxonomy(\n      where: { type: { _eq: "assetCategory" }, status: { _eq: "active" } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      options: Taxonomies(\n        where: {\n          type: { _eq: "assetCategory" }\n          name: { _ilike: $q }\n          id: { _eq: $id }\n          status: { _eq: "active" }\n        }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']);return l=function(){return e},e}function u(){var e=(0,a.Z)(["\n  query GetAssetsForSelect(\n    $locationId: Int\n    $q: String\n    $categoryId: Int\n    $bookable: String\n    $limit: Int\n    $offset: Int\n  ) {\n    items: Asset(\n      where: {\n        categoryId: { _eq: $categoryId }\n        locationId: { _eq: $locationId }\n        name: { _ilike: $q }\n        bookable: { _eq: $bookable }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n      sublocation: Sublocation {\n        name\n      }\n    }\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,a.Z)(['\n  query GetCustomersForSelect($q: String, $limit: Int, $offset: Int) {\n    items: Account(\n      where: { name: { _ilike: $q }, type: { _eq: "customer" } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      admin: Admins {\n        id: adminId\n      }\n      label: name\n      spendThreshold: meta(path: "$.finance.spendThreshold")\n      serviceRateLabour: meta(path: "$.finance.serviceRateLabour")\n      serviceRateExpenses: meta(path: "$.finance.serviceRateExpenses")\n      value: id\n    }\n  }\n']);return s=function(){return e},e}function c(){var e=(0,a.Z)(["\n  query GetJobsForSelect($_q: Int, $locationId: Int) {\n    items: Job(\n      where: {\n        Location: { id: { _eq: $locationId } }\n        _or: [{ id: { _eq: $_q } }, { Invoices: { id: { _eq: $_q } } }]\n      }\n      order_by: { title: asc }\n    ) {\n      label: label\n      value: id\n      number\n      createdAt\n      description\n      status\n      timingStart\n      title\n      type\n      Location {\n        name\n      }\n      Taxonomy {\n        Taxonomy {\n          shortJobDescription: name\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}function d(){var e=(0,a.Z)(['\n  query GetManagersForSelect($userId: Int, $accountId: Int!, $q: String) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          role: { _in: ["owner", "manager"] }\n          status: { _eq: "active" }\n          Account: { id: { _eq: $accountId } }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        id: { _neq: $userId }\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']);return d=function(){return e},e}function p(){var e=(0,a.Z)(['\n  query GetManagersForSelect(\n    $userId: Int\n    $accountId: Int!\n    $q: String\n    $invoiceThreshold: numeric\n    $quoteThreshold: numeric\n  ) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          role: { _in: ["owner", "manager"] }\n          status: { _eq: "active" }\n          Account: { id: { _eq: $accountId } }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        id: { _neq: $userId }\n        _and: [\n          {\n            _or: [\n              { invoiceThreshold: { _gt: $invoiceThreshold } }\n              { invoiceThreshold: { _is_null: true } }\n            ]\n          }\n          {\n            _or: [\n              { quoteThreshold: { _gt: $quoteThreshold } }\n              { quoteThreshold: { _is_null: true } }\n            ]\n          }\n        ]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']);return p=function(){return e},e}function v(){var e=(0,a.Z)(["\n  query GetPostCodeAreaForSelect($countryId: Int, $q: String) {\n    items: PostcodeArea(\n      where: { name: { _ilike: $q }, countryId: { _eq: $countryId } }\n      order_by: { name: asc }\n    ) {\n      area\n      label: name\n      value: id\n    }\n  }\n"]);return v=function(){return e},e}function m(){var e=(0,a.Z)(['\n  query GetPropertiesForSelect($where: Location_bool_exp, $limit: Int, $offset: Int) {\n    items: Location(where: $where, order_by: { name: asc }, limit: $limit, offset: $offset) {\n      label: name\n      value: id\n      access\n      permitsRequired\n      registeredAddress: Addresses(\n        where: { entity: { _eq: "Location" }, registered: { _eq: true } }\n      ) {\n        address: Address {\n          id\n          addressLine1\n          addressLine2\n          addressLine3\n          county\n          country: Country {\n            name\n          }\n          postCode\n          city\n        }\n      }\n    }\n  }\n']);return m=function(){return e},e}function f(){var e=(0,a.Z)(['\n  query GetServicesForSelect($q: String, $limit: Int, $offset: Int) {\n    items: Service(\n      where: { name: { _ilike: $q }, status: { _eq: "active" } }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n']);return f=function(){return e},e}function h(){var e=(0,a.Z)(["\n  query GetSlasForSelect($q: String, $adminId: Int, $type: String, $subtype: sla_subtype) {\n    items: SLA(\n      where: {\n        name: { _ilike: $q }\n        type: { _eq: $type }\n        adminId: { _eq: $adminId }\n        subtype: { _eq: $subtype }\n      }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]);return h=function(){return e},e}function b(){var e=(0,a.Z)(["\n  query GetSlasForSelectNew($where: SLA_bool_exp, $limit: Int, $offset: Int) {\n    items: SLA(where: $where, order_by: { name: asc }, limit: $limit, offset: $offset) {\n      label: name\n      value: id\n    }\n  }\n"]);return b=function(){return e},e}function y(){var e=(0,a.Z)(["\n  query GetSuppliersForSelect($where: Account_bool_exp, $limit: Int, $offset: Int) {\n    items: Account(where: $where, limit: $limit, offset: $offset, order_by: { name: asc }) {\n      label: name\n      value: id\n    }\n  }\n"]);return y=function(){return e},e}function g(){var e=(0,a.Z)(['\n  query GetUsersForSelect($accountId: Int, $q: String, $limit: Int, $offset: Int) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: {\n          accountId: { _eq: $accountId }\n          isContact: { _eq: true }\n          status: { _eq: "active" }\n        }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      label: fullName\n      value: id\n      email\n      phone\n    }\n  }\n']);return g=function(){return e},e}function x(){var e=(0,a.Z)(['\n  query GetUsersForSelect($q: String) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n      email\n      phone\n    }\n  }\n']);return x=function(){return e},e}function w(){var e=(0,a.Z)(["\n  query GetTaxonomyGroupForSelect($q: String, $type: String!) {\n    items: Taxonomy(\n      where: { isGroup: { _eq: true }, name: { _ilike: $q }, type: { _eq: $type } }\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]);return w=function(){return e},e}function j(){var e=(0,a.Z)(['\n  query GetTaxonomy($q: String) {\n    items: Taxonomy(where: { type: { _eq: "expenseCategoryGroup" } }, order_by: { name: asc }) {\n      label: name\n      options: Taxonomies(\n        where: { type: { _eq: "expenseCategory" }, name: { _ilike: $q } }\n        order_by: { name: asc }\n      ) {\n        value: id\n        label: name\n      }\n    }\n  }\n']);return j=function(){return e},e}function S(){var e=(0,a.Z)(["\n  query GetUserRole($userId: Int!, $accountId: Int!) {\n    accountUsers: Account_User(\n      where: { userId: { _eq: $userId }, accountId: { _eq: $accountId } }\n    ) {\n      role\n    }\n  }\n"]);return S=function(){return e},e}function Z(){var e=(0,a.Z)(["\n  query GetSublocationsForSelect($locationId: Int!, $q: String, $limit: Int, $offset: Int) {\n    items: Sublocation(\n      where: { name: { _ilike: $q }, locationId: { _eq: $locationId }, active: { _eq: true } }\n      limit: $limit\n      offset: $offset\n      order_by: { createdAt: desc }\n    ) {\n      value: id\n      label: name\n    }\n  }\n"]);return Z=function(){return e},e}function C(){var e=(0,a.Z)(['\n  query GetTaxonomy($q: String, $limit: Int, $offset: Int) {\n    items: Taxonomy(\n      where: {\n        type: { _eq: "assetCategory" }\n        isGroup: { _eq: false }\n        status: { _eq: "active" }\n        name: { _ilike: $q }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n']);return C=function(){return e},e}function I(){var e=(0,a.Z)(["\n  query GetTaxonomyForSelect(\n    $where: Taxonomy_bool_exp\n    $limit: Int\n    $offset: Int\n    $orderBy: Taxonomy_order_by!\n    $includeMeta: Boolean! = false\n  ) {\n    items: Taxonomy(where: $where, limit: $limit, offset: $offset, order_by: [$orderBy]) {\n      value: id\n      label: name\n      meta @include(if: $includeMeta)\n    }\n  }\n"]);return I=function(){return e},e}function T(){var e=(0,a.Z)(['\n  query GetTagsForTask($q: String!, $limit: Int = 50, $offset: Int = 0) {\n    items: Taxonomy(\n      where: { name: { _ilike: $q }, status: { _eq: "active" }, type: { _eq: "taskTags" } }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      value: id\n      label: name\n    }\n  }\n']);return T=function(){return e},e}function q(){var e=(0,a.Z)(['\n  query GetTagsForEntity(\n    $entityId: Int\n    $entity: String!\n    $q: String!\n    $limit: Int = 50\n    $offset: Int = 0\n  ) {\n    tags: Taxonomy(\n      where: {\n        name: { _ilike: $q }\n        status: { _eq: "active" }\n        type: { _eq: "taskTags" }\n        _not: { Taxonomy_Entities: { entity: { _eq: $entity }, entityId: { _eq: $entityId } } }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { id: desc }\n    ) {\n      id\n      name\n      meta\n    }\n  }\n']);return q=function(){return e},e}function A(){var e=(0,a.Z)(['\n  query GetEntityTags($entityId: Int!, $entity: String!) {\n    tags: Taxonomy_Entity(\n      where: {\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n        Taxonomy: { status: { _eq: "active" }, type: { _eq: "taskTags" } }\n      }\n      order_by: { id: desc }\n    ) {\n      id\n      tag: Taxonomy {\n        id\n        name\n        meta\n      }\n    }\n  }\n']);return A=function(){return e},e}function _(){var e=(0,a.Z)(["\n  query GetCustomerManagers($accountId: Int, $q: String, $limit: Int, $offset: Int) {\n    items: User(\n      where: { Account_Users: { accountId: { _eq: $accountId } }, fullName: { _ilike: $q } }\n      order_by: { fullName: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n"]);return _=function(){return e},e}function k(){var e=(0,a.Z)(["\n  query GetServiceSchedulesForSelect(\n    $q: String\n    $serviceId: Int\n    $entity: service_schedule_entity\n    $entityId: Int\n    $limit: Int = 50\n    $offset: Int = 0\n  ) {\n    items: ServiceSchedule(\n      where: {\n        name: { _ilike: $q }\n        serviceId: { _eq: $serviceId }\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { name: asc }\n    ) {\n      label: name\n      value: id\n    }\n  }\n"]);return k=function(){return e},e}function D(){var e=(0,a.Z)(['\n  query GetPropertyById($id: Int!) {\n    item: Location_by_pk(id: $id) {\n      label: name\n      value: id\n      access\n      registeredAddress: Addresses(\n        where: { entity: { _eq: "Location" }, registered: { _eq: true } }\n      ) {\n        address: Address {\n          id\n          addressLine1\n          addressLine2\n          addressLine3\n          county\n          country: Country {\n            name\n            code\n          }\n          postCode\n          city\n        }\n      }\n    }\n  }\n']);return D=function(){return e},e}function L(){var e=(0,a.Z)(["\n  query GetCompliancesForSelectNew($q: String, $locationId: Int, $limit: Int, $offset: Int) {\n    items: Compliance(\n      where: { name: { _ilike: $q }, locationId: { _eq: $locationId } }\n      order_by: { name: asc }\n      limit: $limit\n      offset: $offset\n    ) {\n      value: id\n      label: name\n      category: ComplianceCategory {\n        label: name\n      }\n    }\n  }\n"]);return L=function(){return e},e}function E(){var e=(0,a.Z)(['\n  query GetTaskAssignedToForSelect(\n    $accountId: Int\n    $q: String\n    $limit: Int = 50\n    $offset: Int = 0\n  ) {\n    items: User(\n      where: {\n        status: { _eq: "active" }\n        Account_Users: { accountId: { _eq: $accountId }, status: { _eq: "active" } }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n      }\n      limit: $limit\n      offset: $offset\n      order_by: { nameFirst: asc }\n    ) {\n      label: fullName\n      value: id\n    }\n  }\n']);return E=function(){return e},e}var $=(0,o.Ps)(r()),N=(0,o.Ps)(i()),P=(0,o.Ps)(l()),M=(0,o.Ps)(u()),R=(0,o.Ps)(s()),O=(0,o.Ps)(c()),Y=(0,o.Ps)(d()),F=(0,o.Ps)(p()),z=(0,o.Ps)(v()),V=(0,o.Ps)(m()),U=(0,o.Ps)(f()),H=(0,o.Ps)(h()),B=(0,o.Ps)(b()),J=(0,o.Ps)(y()),Q=(0,o.Ps)(g()),G=(0,o.Ps)(x()),W=(0,o.Ps)(w()),X=(0,o.Ps)(j()),K=(0,o.Ps)(S()),ee=(0,o.Ps)(Z()),en=(0,o.Ps)(C()),et=(0,o.Ps)(I());(0,o.Ps)(T()),(0,o.Ps)(q()),(0,o.Ps)(A());var ea=(0,o.Ps)(_()),eo=(0,o.Ps)(k()),er=(0,o.Ps)(D()),ei=(0,o.Ps)(L()),el=(0,o.Ps)(E())},93753:function(e,n,t){"use strict";t.d(n,{_Z:function(){return d}});var a=t(47568),o=t(7297),r=t(97582),i=t(75063),l=t(35374);function u(){var e=(0,o.Z)(["\n  mutation CreateCustomerInvoicePdf($jobId: Int!, $preview: Boolean) {\n    invoice: createCustomerInvoicePdf(jobId: $jobId, preview: $preview) {\n      success\n      key\n    }\n  }\n"]);return u=function(){return e},e}function s(){var e=(0,o.Z)(["\n  mutation CreateSupplierInvoicePdf($jobId: Int!, $preview: Boolean) {\n    invoice: createSupplierInvoicePdf(jobId: $jobId, preview: $preview) {\n      success\n      key\n    }\n  }\n"]);return s=function(){return e},e}var c,d=(c=(0,a.Z)(function(e){var n,t,a,o,i,u,s,c;return(0,r.__generator)(this,function(r){switch(r.label){case 0:switch(n=e.client,t=e.jobId,a=e.type,o=e.getUrl,i=e.preview,u="",a){case"supplier":u=v;break;case"customerVat":u=p;break;default:return[2]}return(0,l.a)()||o||(s=window.open("/download","_blank")),c="",[4,n.mutate({mutation:u,variables:{jobId:t,preview:i}}).then(function(e){var n,t,a,r=e.data.invoice.key;o?c="".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(r):(null==s||null===(n=s.location)||void 0===n||n.assign("".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(r)),(null==window?void 0:null===(t=window.Capacitor)||void 0===t?void 0:null===(a=t.Plugins)||void 0===a?void 0:a.Browser)&&window.Capacitor.Plugins.Browser.open({url:"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(r)}))})];case 1:return r.sent(),[2,c]}})}),function(e){return c.apply(this,arguments)}),p=(0,i.Ps)(u()),v=(0,i.Ps)(s())},97229:function(e,n,t){"use strict";t.d(n,{e:function(){return v}});var a,o=t(47568),r=t(97582),i=t(26186),l=t(26535),u=t(53600),s=t(96715),c=t(31312),d=t(35374),p=t(48764).Buffer,v=(a=(0,o.Z)(function(e){var n,t,a,o,v,m,f,h,b,y,g,x,w,j,S,Z,C,I,T,q,A,_,k,D,L,E,$,N,P,M;return(0,r.__generator)(this,function(r){switch(r.label){case 0:return n=e.adminId,t=e.job,o=void 0===(a=e.openReport)||a,D=function(){return t.media.filter(function(e){var n;return"image"===e.item.type&&!(null===(n=e.item.meta)||void 0===n?void 0:n.adminOnly)}).map(function(e){var n,t;if(null===(n=e.item)||void 0===n?void 0:null===(t=n.meta)||void 0===t?void 0:t.thumbnails){var a=e.item.meta.thumbnails.find(function(e){return"small"===e.name});if(a)return{filename:a.relativePath}}return{filename:e.item.filename}})},L=(0,l.WE)(t.location,"registered"),E=c.hD.find(function(e){var n;return e.value===(null===(n=t.report)||void 0===n?void 0:n.completion)}),N={job:{assets:t.assets,address:null==L?void 0:L.address,sublocation:t.sublocation,contractor:null===(v=t.supplier)||void 0===v?void 0:v.name,completedAt:"incorrect"===t.timingStatus?t.correctEnd:(0,i.Z)((0,u.E)(t,"completed")),customer:null===(m=t.customer)||void 0===m?void 0:m.name,description:p.from(t.description).toString("base64"),expenses:null===(f=t.expenses)||void 0===f?void 0:f.map(function(e){return e.description}),further:(null==E?void 0:E.text)||null,id:t.id,notes:(null===(h=t.report)||void 0===h?void 0:h.notes)?p.from(null==t?void 0:null===(b=t.report)||void 0===b?void 0:b.notes).toString("base64"):"",number:t.number,raisedBy:(0,s.j$)(t,"pending"),reference:t.reference,service:null===(y=t.service)||void 0===y?void 0:y.name,dateStart:"incorrect"===t.timingStatus?t.correctStart:(0,u.E)(t,"inProgress"),dateEnd:"incorrect"===t.timingStatus?t.correctEnd:(0,u.E)(t,"completed"),priority:null===(g=t.sla)||void 0===g?void 0:g.name,passFailStatus:null===(x=t.report)||void 0===x?void 0:x.passFailStatus,customerSignature:(null===(w=t.report)||void 0===w?void 0:null===(j=w.meta)||void 0===j?void 0:j.customerSignatureName)?{name:null===(S=t.report)||void 0===S?void 0:S.meta.customerSignatureName,data:null===(Z=t.report)||void 0===Z?void 0:Z.meta.customerSignatureTime}:null,supplierSignature:(null===(C=t.report)||void 0===C?void 0:null===(I=C.meta)||void 0===I?void 0:I.supplierSignatureName)?{name:null===(T=t.report)||void 0===T?void 0:T.meta.supplierSignatureName,data:null===(q=t.report)||void 0===q?void 0:q.meta.supplierSignatureTime}:null,recommendations:(null===(A=t.report)||void 0===A?void 0:A.recommendations)?p.from(null===(_=t.report)||void 0===_?void 0:_.recommendations).toString("base64"):""},jobReportId:null!==($=null===(k=t.report)||void 0===k?void 0:k.id)&&void 0!==$?$:null,adminId:n,media:D()},!(0,d.a)()&&o&&(P=window.open("/download","_blank")),[4,window.fetch("".concat("https://aws.cleverly.works","/pdf/job-report/create"),{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(N)}).then(function(e){return e.json()}).then(function(e){if(o){var n,t,a;null==P||null===(n=P.location)||void 0===n||n.assign("".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(e.key)),(null==window?void 0:null===(t=window.Capacitor)||void 0===t?void 0:null===(a=t.Plugins)||void 0===a?void 0:a.Browser)&&window.Capacitor.Plugins.Browser.open({url:"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(e.key)})}return{blob:e,link:"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(e.key)}})];case 1:return[2,r.sent()]}})}),function(e){return a.apply(this,arguments)})},1341:function(e,n,t){"use strict";t.d(n,{$:function(){return l}});var a,o=t(47568),r=t(97582),i=t(35374),l=(a=(0,o.Z)(function(e){var n;return(0,r.__generator)(this,function(t){switch(t.label){case 0:return(0,i.a)()||(n=window.open("/download","_blank")),[4,window.fetch("".concat("https://aws.cleverly.works","/pdf/invoice/ppmNew/create"),{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){var t,a,o;null==n||null===(t=n.location)||void 0===t||t.assign("".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(e.key)),(null==window?void 0:null===(a=window.Capacitor)||void 0===a?void 0:null===(o=a.Plugins)||void 0===o?void 0:o.Browser)&&window.Capacitor.Plugins.Browser.open({url:"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(e.key)})})];case 1:return t.sent(),[2]}})}),function(e){return a.apply(this,arguments)})},9367:function(e,n,t){"use strict";t.d(n,{u:function(){return s}});var a,o=t(47568),r=t(26042),i=t(69396),l=t(97582),u=t(35374),s=(a=(0,o.Z)(function(e){var n,t,a,o,s,c,d,p,v,m,f,h,b,y,g,x;return(0,l.__generator)(this,function(l){switch(l.label){case 0:return n=e.meta,t=e.invoice,g=(0,i.Z)((0,r.Z)({},n),{title:"Proforma Invoice",amountPaid:null==t?void 0:null===(a=t.amountPaid)||void 0===a?void 0:null===(o=a.reconciliations)||void 0===o?void 0:null===(s=o.aggregate)||void 0===s?void 0:null===(c=s.sum)||void 0===c?void 0:c.amount,amountDeducted:null==t?void 0:null===(d=t.amountDeducted)||void 0===d?void 0:null===(p=d.reconciliations)||void 0===p?void 0:null===(v=p.aggregate)||void 0===v?void 0:null===(m=v.sum)||void 0===m?void 0:m.amount,reconciledAmount:null==t?void 0:null===(f=t.reconciledAmount)||void 0===f?void 0:null===(h=f.reconciliations)||void 0===h?void 0:null===(b=h.aggregate)||void 0===b?void 0:null===(y=b.sum)||void 0===y?void 0:y.amount}),(0,u.a)()||(x=window.open("/download","_blank")),[4,window.fetch("".concat("https://aws.cleverly.works","/pdf/invoice/proforma/create"),{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(g)}).then(function(e){return e.json()}).then(function(e){var n,t,a;null==x||null===(n=x.location)||void 0===n||n.assign("".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(e.key)),(null==window?void 0:null===(t=window.Capacitor)||void 0===t?void 0:null===(a=t.Plugins)||void 0===a?void 0:a.Browser)&&window.Capacitor.Plugins.Browser.open({url:"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(e.key)})})];case 1:return l.sent(),[2]}})}),function(e){return a.apply(this,arguments)})},51539:function(e,n,t){"use strict";t.d(n,{L:function(){return h},g:function(){return f}});var a=t(47568),o=t(7297),r=t(97582),i=t(26535),l=t(35374),u=t(75063),s=t(48764).Buffer;function c(){var e=(0,o.Z)(["\n  mutation PDFQuoteCreate($data: jsonb!) {\n    pdfQuoteCreate(data: $data) {\n      success\n      key\n    }\n  }\n"]);return c=function(){return e},e}var d,p,v,m=(d=(0,a.Z)(function(e,n){var t,a,o,l,u,c,d,p,v,m,f;return(0,r.__generator)(this,function(r){return(c=[],d=[],p=null,p=n?e.quotations.find(function(e){return e.id===n}):e.quotations.find(function(e){return"supplierQuoteSent"===e.status}))?(p.lineItems.forEach(function(e){var n={name:e.description,price:e.total,vatRate:.2,qty:e.qty,unit:e.qtyUnit,rate:e.unitRate};"Materials"===e.type?d.push(n):"Labour"===e.type&&c.push(n)}),v=(0,i.WE)(null==e?void 0:e.location,"registered"),m=(null===(t=p.meta)||void 0===t?void 0:t.terms)||(null==e?void 0:null===(a=e.admin)||void 0===a?void 0:null===(o=a.meta)||void 0===o?void 0:null===(l=o.quote)||void 0===l?void 0:l.terms)||"",[2,{id:p.id,job:{currency:"\xa3",customerName:null===(u=e.customer)||void 0===u?void 0:u.name,startDate:p.startDate,description:s.from(e.description).toString("base64"),duration:p.totalDuration?1===p.totalDuration?"".concat(p.totalDuration," ").concat(p.totalDurationUnit):"".concat(p.totalDuration," ").concat(p.totalDurationUnit,"s"):"-",number:e.number,reference:(null==e?void 0:e.reference)||"",labour:c,materials:d,methodStatement:p.methodStatement,propertyAddress:null==v?void 0:v.address,sublocation:e.sublocation,terms:s.from(m).toString("base64")}}]):[2,null]})}),function(e,n){return d.apply(this,arguments)}),f=(p=(0,a.Z)(function(e){var n,t,a,o,i,u,s,c=arguments;return(0,r.__generator)(this,function(r){switch(r.label){case 0:n=c.length>1&&void 0!==c[1]?c[1]:null,t=c.length>2?c[2]:void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),(0,l.a)()||(i=window.open("/download","_blank")),[4,h(e,n,t)];case 2:if(!(u=r.sent()))throw Error("Failed to download quote");return(null==i?void 0:i.location)&&(null==i||null===(s=i.location)||void 0===s||s.assign(u)),(null==window?void 0:null===(a=window.Capacitor)||void 0===a?void 0:null===(o=a.Plugins)||void 0===o?void 0:o.Browser)&&window.Capacitor.Plugins.Browser.open({url:u}),[3,4];case 3:return r.sent(),[3,4];case 4:return[2]}})}),function(e){return p.apply(this,arguments)}),h=(v=(0,a.Z)(function(e){var n,t,a,o,i,l,u,s,c,d=arguments;return(0,r.__generator)(this,function(o){switch(o.label){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:null,t=d.length>2?d[2]:void 0,[4,m(e,n)];case 1:if(!(a=o.sent()))return[3,3];return[4,t.mutate({mutation:b,variables:{data:a}})];case 2:if(s=(u=(void 0===(i=o.sent().data)?{pdfQuoteCreate:{}}:i).pdfQuoteCreate).success,c=u.key,!s)throw Error("Failed to create PDF");return[2,"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(c)];case 3:return[2,null]}})}),function(e){return v.apply(this,arguments)}),b=(0,u.Ps)(c())},12632:function(e,n,t){"use strict";t.d(n,{x:function(){return c}});var a=t(14924),o=t(26042),r=t(69396),i=t(67294),l=t(96486),u=t(98209),s=t(59577),c=function(e){var n,t,c,d,p,v,m,f,h,b,y,g=e.filters,x=e.newFilters,w=e.initialSort,j=(0,i.useRef)(),S=(0,i.useState)({}),Z=S[0],C=S[1],I=(0,i.useState)({}),T=I[0],q=I[1],A=w||{item:"createdAt",order:"desc"},_=(0,a.Z)({},(null===(n=j.current)||void 0===n?void 0:n.sort.item)||A.item,A.inneritem?(0,a.Z)({},A.inneritem,(null===(t=j.current)||void 0===t?void 0:t.sort.order)||A.order):(null===(c=j.current)||void 0===c?void 0:c.sort.order)||A.order);return(0,i.useEffect)(function(){var e=!(0,l.isEqual)(Z,g),n=!(0,l.isEqual)(T,x);if(e&&(C(g),null==j||null===(a=j.current)||void 0===a||a.resetPagination()),n&&(q(x),null==j||null===(o=j.current)||void 0===o||o.resetPagination()),(null==j?void 0:null===(t=j.current)||void 0===t?void 0:t.setSort)&&!(e||n)){var t,a,o,r,i,u,s,c,d,p,v,m=(null===(r=j.current)||void 0===r?void 0:null===(i=r.sort)||void 0===i?void 0:i.item)&&(null===(u=j.current)||void 0===u?void 0:null===(s=u.sort)||void 0===s?void 0:s.order)?{item:null===(c=j.current)||void 0===c?void 0:null===(d=c.sort)||void 0===d?void 0:d.item,order:null===(p=j.current)||void 0===p?void 0:null===(v=p.sort)||void 0===v?void 0:v.order}:_;j.current.setSort(m)}},[g,x]),{initialData:(0,r.Z)((0,o.Z)({},g),{newFilters:(null==x?void 0:x.length)>0?x:void 0,limit:(null===(d=j.current)||void 0===d?void 0:d.pageSize)==="Infinity"?null:parseInt(null===(p=j.current)||void 0===p?void 0:p.pageSize,10)||u.C1.paginationSize,offset:((null===(v=j.current)||void 0===v?void 0:v.currentPage)-1||0)*((null===(m=j.current)||void 0===m?void 0:m.pageSize)||u.C1.paginationSize),orderBy:(0,s.c)(null===(f=j.current)||void 0===f?void 0:null===(h=f.sort)||void 0===h?void 0:null===(b=h.item)||void 0===b?void 0:b.replace(/ORDER/i,null===(y=j.current)||void 0===y?void 0:y.sort.order))||_}),initialSort:w,ref:j}}},16605:function(e,n,t){"use strict";t.d(n,{S:function(){return a}});var a=function(e,n){var t=document.createElement("a");"string"==typeof t.download?(document.body.appendChild(t),t.download=n,t.href=e,t.click(),document.body.removeChild(t)):location.replace(e)}},59577:function(e,n,t){"use strict";t.d(n,{c:function(){return a}});var a=function(e){try{return JSON.parse(e)}catch(n){return!1}}},45307:function(e,n,t){"use strict";t.d(n,{X:function(){return m}});var a=t(14924),o=t(82670),r=t(828),i=t(7297),l=t(67294),u=t(6812),s=t(50319),c=t(75063),d=t(53767);function p(){var e=(0,i.Z)(["\n  query GetAccountUserFilters($accountUserId: Int!) {\n    accountUser: Account_User_by_pk(id: $accountUserId) {\n      filters\n    }\n  }\n"]);return p=function(){return e},e}function v(){var e=(0,i.Z)(["\n  mutation SetAccountUserFilters($accountUserId: Int!, $filters: jsonb) {\n    update_Account_User_by_pk(pk_columns: { id: $accountUserId }, _append: { filters: $filters }) {\n      id\n    }\n  }\n"]);return v=function(){return e},e}function m(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage",i=(0,d.q)().user,c=(0,l.useState)(function(){try{switch(t){case"network":case"state":return n;case"sessionStorage":return JSON.parse(window.sessionStorage.getItem(e))||n}}catch(a){return n}}),p=c[0],v=c[1],m=function(n){try{var r=(0,o.Z)(n,Function)?n(p):n;switch(v(r),t){case"network":b({variables:{accountUserId:null==i?void 0:i.accountUserId,filters:(0,a.Z)({},e,r)}});break;case"sessionStorage":window.sessionStorage.setItem(e,JSON.stringify(r))}}catch(l){}};(0,u.a)(f,{variables:{accountUserId:null==i?void 0:i.accountUserId},skip:"network"!==t,onCompleted:function(t){var a=t.accountUser;a&&v(a.filters[e]||n)}});var b=(0,r.Z)((0,s.D)(h),1)[0];return[p,m]}var f=(0,c.Ps)(p()),h=(0,c.Ps)(v())},4438:function(e,n,t){"use strict";t.d(n,{SR:function(){return i},Tq:function(){return l},YK:function(){return r},cJ:function(){return o},pX:function(){return a}});var a=["customerVat","supplier"],o=["ProformaInvoiceCustomer","ProformaInvoiceSupplier"],r=["customerPpmInvoice","supplierPpmInvoice"],i={customer:["customerVat","ProformaInvoiceCustomer","customerPpmInvoice"],supplier:["supplier","ProformaInvoiceSupplier","supplierPpmInvoice"]},l={customerVat:"Customer VAT Invoice",supplier:"Supplier Invoice",ProformaInvoiceCustomer:"Customer ad-hoc Invoice",ProformaInvoiceSupplier:"Supplier ad-hoc Invoice",customerPpmInvoice:"PPM Customer Invoice",supplierPpmInvoice:"PPM Supplier Invoice"}},50799:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return t_}});var a=t(85893),o=t(67294),r=t(11163),i=t.n(r),l=t(73987),u=t(53767),s=t(24716),c=t(47568),d=t(26042),p=t(69396),v=t(828),m=t(29815),f=t(97582),h=t(66252),b=t(6812),y=t(7297),g=t(75063);function x(){var e=(0,y.Z)(["\n  query getAutocompleteFields {\n    items: Service {\n      value: id\n      label: name\n    }\n  }\n"]);return x=function(){return e},e}function w(){var e=(0,y.Z)(["\n  query getAutocompleteFields {\n    items: Location {\n      value: id\n      label: name\n    }\n  }\n"]);return w=function(){return e},e}function j(){var e=(0,y.Z)(["\n  query getAddressFields {\n    items: Address {\n      id\n      name\n      addressLine: addressLine1\n      city\n    }\n  }\n"]);return j=function(){return e},e}function S(){var e=(0,y.Z)(["\n  query getAutocompleteFields($locationId: Int!) {\n    items: Sublocation(where: { locationId: { _eq: $locationId }, active: { _eq: true } }) {\n      value: id\n      label: name\n    }\n  }\n"]);return S=function(){return e},e}function Z(){var e=(0,y.Z)(['\n  query getAutocompleteFields {\n    items: Account(where: { type: { _eq: "customer" } }) {\n      value: id\n      label: name\n    }\n  }\n']);return Z=function(){return e},e}function C(){var e=(0,y.Z)(["\n  query GetPostcodeAreas {\n    items: PostcodeArea {\n      id\n      area\n      label: name\n      status\n      country: Country {\n        id\n        name\n        code\n        __typename\n      }\n      __typename\n    }\n  }\n"]);return C=function(){return e},e}function I(){var e=(0,y.Z)(['\n  query getAutocompleteFields {\n    items: Account(where: { type: { _eq: "supplier" } }) {\n      value: id\n      label: name\n    }\n  }\n']);return I=function(){return e},e}function T(){var e=(0,y.Z)(["\n  query getUserMeta($userId: Int!) {\n    user: Account(where: { id: { _eq: $userId } }) {\n      meta\n    }\n  }\n"]);return T=function(){return e},e}function q(){var e=(0,y.Z)(["\n  mutation saveUserReport($userId: Int!, $updatedMeta: jsonb!) {\n    update_Account_by_pk(pk_columns: { id: $userId }, _set: { meta: $updatedMeta }) {\n      id\n    }\n  }\n"]);return q=function(){return e},e}function A(){var e=(0,y.Z)(["\n  query getFinancialReport(\n    $adminId: Int!\n    $limit: Int\n    $offset: Int\n    $filters: jsonb\n    $columns: jsonb\n    $orderBy: jsonb\n    $requestWithoutMeta: Boolean\n  ) {\n    getFinancialReport(\n      adminId: $adminId\n      limit: $limit\n      offset: $offset\n      columns: $columns\n      filters: $filters\n      orderBy: $orderBy\n      requestWithoutMeta: $requestWithoutMeta\n    ) {\n      financialReport\n      meta\n    }\n  }\n"]);return A=function(){return e},e}function _(){var e=(0,y.Z)(['\n  query GetJobForReport($id: Int!) {\n    job: Job_by_pk(id: $id) {\n      id\n      number\n      adminId\n      description\n      admin: Admin {\n        id\n        name\n        meta\n        bankAccounts: BankAccounts {\n          id\n          bank\n          stripeId\n          accountNumber\n          routingNumber\n          bic\n          iban\n          status\n          default\n          createdAt\n          meta\n        }\n        addresses: Addresses {\n          id\n          registered\n          operating\n          trading\n          invoice\n          status\n          createdAt\n          address: Address {\n            id\n            name\n            addressLine1\n            addressLine2\n            addressLine3\n            city\n            county\n            geo\n            postCode\n            country: Country {\n              id\n              name\n            }\n          }\n        }\n      }\n      customer: Customer {\n        id\n        name\n        status\n        type\n        updatedAt\n        website\n        clientType\n        managerId\n        vatId\n        meta\n        addresses: Addresses(where: { entity: { _eq: "Account" } }) {\n          ...AddressEntityFields\n          address: Address {\n            ...AddressFields\n            country: Country {\n              id\n              name\n            }\n          }\n        }\n        media: Media {\n          id\n          medium: Medium {\n            id\n            category\n            filename\n            meta\n            type\n          }\n        }\n      }\n      sublocation: Sublocation {\n        id\n        name\n      }\n      location: Location {\n        id\n        access\n        createdAt\n        name\n        contactUserId\n        addresses: Addresses(where: { entity: { _eq: "Location" } }) {\n          ...AddressEntityFields\n          address: Address {\n            ...AddressFields\n            countryId\n            country: Country {\n              id\n              name\n              code\n            }\n          }\n        }\n        slas: SLAs(where: { entity: { _eq: "Location" } }) {\n          id\n          entity\n          entityId\n          onSite\n          onSiteUnit\n          jobReport\n          jobReportUnit\n          completion\n          completionUnit\n          notes\n          inUse\n          normalRate\n          oohRate\n          premiumRate\n          minimumInterval\n          minimumLength\n          slaId\n          sla: SLA {\n            id\n            name\n            notes\n            normalRate\n            oohRate\n            premiumRate\n            onSite\n            onSiteUnit\n            jobReport\n            jobReportUnit\n            completion\n            completionUnit\n            minimumInterval\n            minimumLength\n          }\n        }\n        services: Services(where: { entity: { _eq: "Location" } }) {\n          id\n          dayRate\n          dayRateOOH\n          dayRatePremium\n          hourRate\n          hourRateOOH\n          hourRatePremium\n          meta\n          minimumInterval\n          minimumLength\n          callOutHourRate\n          callOutHourRateOOH\n          callOutHourRatePremium\n          notes\n          delivery\n          createdAt\n          updatedAt\n          entity\n          entityId\n          serviceId\n        }\n      }\n      quotations: SupplierQuotes(\n        where: { status: { _neq: "cancelled" } }\n        order_by: { quoteNumber: asc }\n      ) {\n        id\n        createdAt\n        jobId\n        methodStatement\n        notes\n        quoteNumber\n        startDate\n        rebate\n        recommended\n        status\n        totalDuration\n        totalDurationUnit\n        meta\n        updatedAt\n        siteVisitAt\n        type\n        lineItems: SupplierQuoteLineItems {\n          id\n          description\n          item\n          qty\n          qtyUnit\n          quoteId\n          supplierTotal\n          total\n          type\n          unitRate\n        }\n        supplier: Supplier {\n          id\n          companyNumber\n          createdAt\n          name\n          status\n          type\n          updatedAt\n          website\n          clientType\n          managerId\n          vatId\n          meta\n          accountUsers: Account_Users {\n            user: User {\n              id\n              fullName\n              nameFirst\n              nameLast\n              phone\n              email\n              devices: UserDevices(where: { status: { _eq: "active" } }) {\n                id\n                playerId\n              }\n            }\n          }\n          media: Media {\n            id\n            medium: Medium {\n              id\n              category\n              filename\n              meta\n              type\n            }\n          }\n          manager: Manager {\n            id\n            fullName\n          }\n        }\n        media: Media(where: { entity: { _eq: "Quotation" } }) {\n          id\n        }\n      }\n      timings: JobTimings(order_by: { id: desc }) {\n        id\n        status\n        notes\n        meta\n        quoteId\n        createdAt\n        user: User {\n          id\n          fullName\n        }\n      }\n    }\n  }\n\n  fragment AddressFields on Address {\n    id\n    invoicingEntity\n    name\n    addressLine1\n    addressLine2\n    addressLine3\n    postCode\n    city\n    county\n    geo\n    createdAt\n    meta\n  }\n\n  fragment AddressEntityFields on Address_Entity {\n    id\n    entity\n    entityId\n    status\n    registered\n    operating\n    trading\n    invoice\n    createdAt\n  }\n']);return _=function(){return e},e}function k(){var e=(0,y.Z)(['\n  query GetJobForReport($id: Int!) {\n    job: Job_by_pk(id: $id) {\n      id\n      number\n      adminId\n      reference\n      description\n      timingStatus\n      correctStart\n      correctEnd\n      assets: Assets(where: { entity: { _eq: "Job" } }) {\n        id\n        status\n        asset: Asset {\n          id\n          name\n        }\n      }\n      media: Media {\n        id\n        item: Medium {\n          id\n          name\n          type\n          filename\n          category\n          meta\n        }\n      }\n      location: Location {\n        id\n        access\n        createdAt\n        name\n        contactUserId\n        addresses: Addresses(where: { entity: { _eq: "Location" } }) {\n          ...AddressEntityFields\n          address: Address {\n            ...AddressFields\n            countryId\n            country: Country {\n              id\n              name\n              code\n            }\n          }\n        }\n        slas: SLAs(where: { entity: { _eq: "Location" } }) {\n          id\n          entity\n          entityId\n          onSite\n          onSiteUnit\n          jobReport\n          jobReportUnit\n          completion\n          completionUnit\n          notes\n          inUse\n          normalRate\n          oohRate\n          premiumRate\n          minimumInterval\n          minimumLength\n          slaId\n          sla: SLA {\n            id\n            name\n            notes\n            normalRate\n            oohRate\n            premiumRate\n            onSite\n            onSiteUnit\n            jobReport\n            jobReportUnit\n            completion\n            completionUnit\n            minimumInterval\n            minimumLength\n          }\n        }\n        services: Services(where: { entity: { _eq: "Location" } }) {\n          id\n          dayRate\n          dayRateOOH\n          dayRatePremium\n          hourRate\n          hourRateOOH\n          hourRatePremium\n          meta\n          minimumInterval\n          minimumLength\n          callOutHourRate\n          callOutHourRateOOH\n          callOutHourRatePremium\n          notes\n          delivery\n          createdAt\n          updatedAt\n          entity\n          entityId\n          serviceId\n        }\n      }\n      report: JobReport {\n        id\n        completion\n        meta\n        notes\n        timing\n        passFailStatus\n        recommendations\n        comments\n        createdAt\n        updatedAt\n      }\n\n      sublocation: Sublocation {\n        id\n        name\n      }\n\n      supplier: Supplier {\n        id\n        name\n      }\n      customer: Customer {\n        id\n        name\n      }\n      expenses: Expenses {\n        id\n        amount\n        description\n        markup\n        total\n        unit\n        vat\n        paid\n      }\n\n      service: Service {\n        id\n        name\n      }\n      sla: SLA {\n        id\n        name\n      }\n\n      timings: JobTimings(order_by: { id: desc }) {\n        id\n        status\n        notes\n        meta\n        quoteId\n        createdAt\n        user: User {\n          id\n          fullName\n        }\n      }\n    }\n  }\n\n  fragment AddressFields on Address {\n    id\n    invoicingEntity\n    name\n    addressLine1\n    addressLine2\n    addressLine3\n    postCode\n    city\n    county\n    geo\n    createdAt\n    meta\n  }\n\n  fragment AddressEntityFields on Address_Entity {\n    id\n    entity\n    entityId\n    status\n    registered\n    operating\n    trading\n    invoice\n    createdAt\n  }\n']);return k=function(){return e},e}var D=(0,g.Ps)(x()),L=(0,g.Ps)(w()),E=(0,g.Ps)(j()),$=(0,g.Ps)(S()),N=(0,g.Ps)(Z()),P=(0,g.Ps)(C()),M=(0,g.Ps)(I()),R=(0,g.Ps)(T()),O=(0,g.Ps)(q()),Y=(0,g.Ps)(A()),F=(0,g.Ps)(_()),z=(0,g.Ps)(k()),V=t(99534),U=t(45697),H=t(98209),B=t(61870),J=t(5616),Q=t(86886),G=t(15861),W=t(51233),X=t(10367);function K(){var e=(0,y.Z)(["\n  background: transparent;\n  height: calc(100vh - 32px);\n"]);return K=function(){return e},e}function ee(){var e=(0,y.Z)(["\n  background: transparent;\n  width: 100%;\n  margin-bottom: 16px !important;\n"]);return ee=function(){return e},e}function en(){var e=(0,y.Z)(["\n  width: 64px;\n  height: 64px;\n  margin: 8px;\n"]);return en=function(){return e},e}function et(){var e=(0,y.Z)(["\n  border: 1px solid #e0e0e0;\n  border-radius: 4px;\n  border-top: none;\n  box-shadow: 0px 0px 2px 1px rgba(0, 0, 0, 0.1);\n  width: 100%;\n  height: calc(100vh - 100px);\n\n  .MuiDataGrid-columnHeaderTitle {\n    font-family: 'Nunito-Regular';\n    font-weight: 700;\n  }\n\n  .GridTableContainer {\n    height: calc(100vh - 154px);\n  }\n"]);return et=function(){return e},e}function ea(){var e=(0,y.Z)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 1rem;\n  width: 100%;\n"]);return ea=function(){return e},e}var eo=(0,X.ZP)(Q.ZP).withConfig({displayName:"materialTable__GridContainer",componentId:"sc-35ac5d69-0"})(K()),er=(0,X.ZP)(Q.ZP).withConfig({displayName:"materialTable__GridTitleSection",componentId:"sc-35ac5d69-1"})(ee()),ei=X.ZP.img.withConfig({displayName:"materialTable__StyledIcon",componentId:"sc-35ac5d69-2"})(en()),el=(0,X.ZP)(Q.ZP).withConfig({displayName:"materialTable__GridTable",componentId:"sc-35ac5d69-3"})(et()),eu=(0,X.ZP)(J.Z).withConfig({displayName:"materialTable__TitleSection",componentId:"sc-35ac5d69-4"})(ea()),es=(0,o.forwardRef)(function(e,n){var t,i,l,u,s=e.title,c=e.entityName,p=e.toolbar,v=e.customFilter,f=e.columns,h=e.history,b=e.initialSort,y=e.loading,g=e.meta,x=e.refetch,w=e.rowClick,j=e.rows,S=(0,V.Z)(e,["title","entityName","toolbar","customFilter","columns","history","initialSort","loading","meta","refetch","rowClick","rows"]),Z=(0,r.useRouter)(),C=Z.query,I=void 0===C?{}:C,T=(0,o.useState)(parseInt(null==I?void 0:I.page,10)||1),q=T[0],A=T[1],_=(0,o.useState)(H.C1.paginationSize),k=_[0],D=_[1];b||(b={item:"createdAt",order:"desc"});var L=(0,o.useState)({item:b.item,order:b.order}),E=L[0],$=L[1],N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=Z.query,t=void 0===n?{}:n;if(e>1?t.page=e:delete t.page,!(Object.keys(t).length>0))return{};var a=Object.keys(t).map(function(n){return"page"===n?"".concat(n,"=").concat(e):"".concat(n,"=").concat(t[n])}).join("&");return"?".concat(a)},P=function(){$({item:b.item,order:b.order}),A(1);var e=N();Z.push(e),D(H.C1.paginationSize)};(0,o.useImperativeHandle)(n,function(){return{currentPage:q,pageSize:k,sort:E,setSort:function(e){$(e)},resetPagination:function(){P()}}});var M=function(e){var n=N(e);h&&Z.push(n),A(e),!h&&x&&x()},R=function(e){D(e),A(1),x&&x()},O=function(e){e&&(e.field&&e.sort||e.item&&e.order)?($({item:e.field||e.item||b.item,order:e.sort||e.order||b.order}),x&&x()):($({item:b.item,order:b.order}),x&&x())},Y=f.reduce(function(e,n){return n.customSortable?(0,m.Z)(e).concat([{label:n.headerName,value:n.field}]):e},[]);return(0,a.jsxs)(eo,{container:!0,children:[(0,a.jsx)(er,{item:!0,children:(0,a.jsxs)(eu,{children:[(0,a.jsxs)(J.Z,{children:[(0,a.jsx)(G.Z,{variant:"h5",children:s}),(0,a.jsxs)(G.Z,{children:[c||"Results"," total: ",(null==g?void 0:null===(t=g.aggregate)||void 0===t?void 0:t.totalCount)||0]})]}),!!p&&p({entityName:c||"Results",columns:f,page:q-1,handlePageChange:M,pageSize:k,handlePageSizeChange:R,totalCount:(null==g?void 0:null===(i=g.aggregate)||void 0===i?void 0:i.totalCount)||0,fieldsToSort:Y,sort:E,handleSort:O})]})}),(0,a.jsxs)(el,{item:!0,children:[!!v&&(0,a.jsx)(Q.ZP,{item:!0,xs:12,sx:{borderBottom:"1px solid #E0E0E0"},children:(0,a.jsx)(v,{page:q-1,handlePageChange:M,pageSize:k,handlePageSizeChange:R,totalCount:(null==g?void 0:null===(l=g.aggregate)||void 0===l?void 0:l.totalCount)||0,fieldsToSort:Y,sort:E,handleSort:O})}),(0,a.jsx)(J.Z,{className:"GridTableContainer",children:(0,a.jsx)(B.s,(0,d.Z)({hideFooter:!!v,disableColumnMenu:!!v,columns:f,loading:y,rows:j,page:v?void 0:q-1,pageSize:v?void 0:k,rowCount:(null==g?void 0:null===(u=g.aggregate)||void 0===u?void 0:u.totalCount)||0,pagination:!v,disableSelectionOnClick:!0,onCellClick:w,onPageChange:function(e){return M(e+1)},onPageSizeChange:function(e){return R(e)},sortingMode:"server",onSortModelChange:function(e){return O(e[0])},slots:{noRowsOverlay:function(){return(0,a.jsxs)(W.Z,{height:"100%",alignItems:"center",justifyContent:"center",children:[(0,a.jsx)(ei,{src:"/static/icons/search-failed.svg"}),(0,a.jsx)(G.Z,{variant:"h5",children:"There are no results matching your criteria. Please edit your conditions and retry."})]})},noResultsOverlay:function(){return(0,a.jsxs)(W.Z,{height:"100%",alignItems:"center",justifyContent:"center",children:[(0,a.jsx)(ei,{src:"/static/icons/search-failed.svg"}),(0,a.jsx)(G.Z,{variant:"h5",children:"There are no results matching your criteria. Please edit your conditions and retry."})]})}}},S))})]})]})});es.propTypes={columns:U.array.isRequired,history:U.bool,initialSort:U.object,loading:U.bool,meta:U.object,refetch:U.func,rowClick:U.func,rows:U.array.isRequired},es.defaultProps={columns:[],history:!0,loading:!0,paginationSize:!1,rows:[]};var ec=t(93946),ed=t(36125),ep=t(99178),ev=t(87918),em=t(63205),ef=t(78200),eh=t(71381),eb=t(54559),ey=t(25213),eg=t(73752),ex=t(39646),ew={SELECT:"select",MULTI_SELECT:"multipleSelect",DATE:"date",TEXT:"text",LOCATION:"location",SEARCH:"search",SEARCH_V2:"search_v2"},ej={FULL:"full",SHORT:"short"},eS=t(874),eZ=t(65077),eC=t(24617),eI=t(40535),eT=t(19791),eq={workOrdersServiceLine:"workOrdersServiceLine",locations:"locations",sublocations:"sublocations",customers:"customers",suppliers:"suppliers",coverageAreas:"coverageAreas",address:"address",customerManager:"customerManager"},eA={regular:[{label:"is equal to",value:"equalTo"},{label:"is not equal",value:"notEqual"},{label:"is greater than",value:"greaterThan"},{label:"is greater than or equal to",value:"greaterThanOrEqualTo"},{label:"is less than",value:"lessThan"},{label:"is less or equal",value:"lessThanOrEqualTo"},{label:"is between",value:"isBetween"}],date:[{label:"is equal to",value:"equalTo"},{label:"is not equal",value:"notEqual"},{label:"is greater than",value:"greaterThan"},{label:"is greater than or equal to",value:"greaterThanOrEqualTo"},{label:"is less than",value:"lessThan"},{label:"is less or equal",value:"lessThanOrEqualTo"},{label:"is between",value:"isBetween"},{label:"today",value:"today"},{label:"last 7 days",value:"last7Days"},{label:"next 7 days",value:"next7Days"},{label:"in this month",value:"thisMonth"},{label:"last month",value:"lastMonth"},{label:"next month",value:"nextMonth"},{label:"in last 30 days",value:"last30Days"},{label:"in last 90 days",value:"last90Days"},{label:"in last Year",value:"lastYear"},{label:"year to date",value:"yearToDate"}],multiSelect:[{label:"Raised",value:"raised"},{label:"Offered",value:"offered"},{label:"Accepted",value:"accepted"},{label:"In progress",value:"inProgress"},{label:"Completed",value:"completed"},{label:"Report sent",value:"reportSent"},{label:"Invoice sent",value:"invoiceSent"},{label:"Customer paid",value:"customerPaid"},{label:"Supplier paid",value:"supplierPaid"},{label:"Closed",value:"closed"}]},e_=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}}).user;return[{label:"Work orders",name:"workOrders",icon:(0,a.jsx)(ey.Z,{size:20,opacity:"42%"}),text:"Find jobs where",filters:[{label:"Job number",name:"jobNumber",icon:(0,a.jsx)(ey.Z,{size:12,opacity:"42%"}),type:ew.SELECT,subType:ej.FULL,options:eA.regular},{label:"Type",name:"jobType",icon:(0,a.jsx)(ey.Z,{size:12,opacity:"42%"}),type:ew.MULTI_SELECT,subType:ej.SHORT,options:[{label:"Reactive",value:"reactive"},{label:"Planned Maintenance",value:"ppm"}],placeHolder:"Choose type"},{label:"Charging method",name:"jobChargingMethod",icon:(0,a.jsx)(ey.Z,{size:12,opacity:"42%"}),type:ew.MULTI_SELECT,subType:ej.SHORT,options:[{label:"Fixed price",value:"fixed"},{label:"Time & Materials",value:"time-materials"}],placeHolder:"Choose Charging method"},{label:"Status",name:"jobStatus",icon:(0,a.jsx)(ey.Z,{size:12,opacity:"42%"}),type:ew.MULTI_SELECT,options:eA.multiSelect,placeHolder:"Choose status"},{label:"Service line",name:"jobServiceId",icon:(0,a.jsx)(ey.Z,{size:12,opacity:"42%"}),type:ew.SEARCH,queryType:eq.workOrdersServiceLine,placeHolder:"Choose service line"},{label:"Job total",name:"jobTotal",icon:(0,a.jsx)(eT.Z,{fontSize:"12",opacity:"42%"}),type:ew.SELECT,subType:ej.FULL,options:eA.regular},{label:"Due from customer",name:"dueFromCustomer",icon:(0,a.jsx)(eT.Z,{fontSize:"12",opacity:"42%"}),type:ew.SELECT,subType:ej.FULL,options:eA.regular},{label:"Supplier amount",name:"supplierAmount",icon:(0,a.jsx)(eT.Z,{fontSize:"12",opacity:"42%"}),type:ew.SELECT,subType:ej.FULL,options:eA.regular},{label:"Expenses amount (Supplier)",name:"jobExpensesSupplier",icon:(0,a.jsx)(eT.Z,{fontSize:"12",opacity:"42%"}),type:ew.SELECT,subType:ej.FULL,options:eA.regular},{label:"Expenses amount (Customer)",name:"jobExpensesCustomer",icon:(0,a.jsx)(eT.Z,{fontSize:"12",opacity:"42%"}),type:ew.SELECT,subType:ej.FULL,options:eA.regular},{label:"Hourly rate",name:"jobHourlyRate",icon:(0,a.jsx)(eT.Z,{fontSize:"12",opacity:"42%"}),type:ew.SELECT,subType:ej.FULL,options:eA.regular},{label:"Job date",name:"jobDate",icon:(0,a.jsx)(eC.Z,{fontSize:"12",opacity:"42%"}),type:ew.DATE,options:eA.date},{label:"Paid date",name:"jobPaidDate",icon:(0,a.jsx)(eC.Z,{fontSize:"12",opacity:"42%"}),type:ew.DATE,options:eA.date},{label:"Invoiced date",name:"jobInvoicedDate",icon:(0,a.jsx)(eC.Z,{fontSize:"12",opacity:"42%"}),type:ew.DATE,options:eA.date},{label:"Completed date",name:"jobCompletedDate",icon:(0,a.jsx)(eC.Z,{fontSize:"12",opacity:"42%"}),type:ew.DATE,options:eA.date},{label:"Closed date",name:"jobClosedDate",icon:(0,a.jsx)(eC.Z,{fontSize:"12",opacity:"42%"}),type:ew.DATE,options:eA.date},{label:"Customers",name:"customerId",placeHolder:"Choose customer",icon:(0,a.jsx)(eg.Z,{size:12,opacity:"42%"}),type:ew.SEARCH,queryType:eq.customers},{label:"Suppliers",name:"supplierId",placeHolder:"Choose supplier",icon:(0,a.jsx)(ex.Z,{size:12,opacity:"42%"}),type:ew.SEARCH,queryType:eq.suppliers},{label:"Locations",name:"locationId",icon:(0,a.jsx)(eS.Z,{fontSize:"12",opacity:"42%"}),type:ew.LOCATION},{label:"Account Manager",name:"customerManagerId",icon:(0,a.jsx)(ey.Z,{size:12,opacity:"42%"}),type:ew.SEARCH_V2,queryType:eq.customerManager,placeHolder:"Select account manager",variables:{accountId:e.accountId},multiple:!0},{label:"SLA Breached(On site time)",name:"slaBreachedOnSiteTime",icon:(0,a.jsx)(eC.Z,{fontSize:"12",opacity:"42%"}),type:ew.SELECT,subType:ej.SHORT,options:[{label:"Yes",value:"true"},{label:"No",value:"false"}]},{label:"SLA Breached(Report submission time)",name:"slaBreachedReportSubmissionTime",icon:(0,a.jsx)(eC.Z,{fontSize:"12",opacity:"42%"}),type:ew.SELECT,subType:ej.SHORT,options:[{label:"Yes",value:"true"},{label:"No",value:"false"}]}]},{label:"Quotes",name:"quotes",text:"Find quotes where",icon:(0,a.jsx)(eZ.Z,{size:20,opacity:"42%"}),filters:[{label:"Quote number",name:"quoteNumber",icon:(0,a.jsx)(eZ.Z,{fontSize:"12",opacity:"42%"}),type:ew.SELECT,subType:ej.FULL,options:eA.regular},{label:"Status",name:"quoteStatus",placeHolder:"Choose quote status",icon:(0,a.jsx)(eZ.Z,{fontSize:"12",opacity:"42%"}),type:ew.MULTI_SELECT,options:[{label:"Raised",value:"raised"},{label:"New quote",value:"quoteNew"},{label:"Sent to supplier",value:"quoteOffered"},{label:"Sent to customer",value:"quoteSent"},{label:"Accepted",value:"quoteAccepted"},{label:"Rejected",value:"quoteRejected"},{label:"Closed",value:"quoteClosed"}]},{label:"Description",name:"quoteDescription",icon:(0,a.jsx)(eZ.Z,{fontSize:"12",opacity:"42%"}),type:ew.TEXT},{label:"Quote value",name:"quoteValue",icon:(0,a.jsx)(eT.Z,{fontSize:"12",opacity:"42%"}),type:ew.SELECT,subType:ej.FULL,options:eA.regular},{label:"Quote date",name:"quoteDate",icon:(0,a.jsx)(eC.Z,{fontSize:"12",opacity:"42%"}),type:ew.DATE,options:eA.date},{label:"Quote due date",name:"quoteDueDate",icon:(0,a.jsx)(eC.Z,{fontSize:"12",opacity:"42%"}),type:ew.DATE,options:eA.date},{label:"Closed date",name:"quoteClosedDate",icon:(0,a.jsx)(eC.Z,{fontSize:"12",opacity:"42%"}),type:ew.DATE,options:eA.date},{label:"Customers",name:"customerId",placeHolder:"Choose customer",icon:(0,a.jsx)(eg.Z,{size:12,opacity:"42%"}),type:ew.SEARCH,subType:ej.FULL,queryType:eq.customers},{label:"Suppliers",name:"supplierId",placeHolder:"Choose supplier",icon:(0,a.jsx)(ex.Z,{size:12,opacity:"42%"}),type:ew.SEARCH,queryType:eq.suppliers},{label:"Locations",name:"locationId",icon:(0,a.jsx)(eS.Z,{fontSize:"12",opacity:"42%"}),type:ew.LOCATION},{label:"Account Manager",name:"customerManagerId",icon:(0,a.jsx)(ey.Z,{size:12,opacity:"42%"}),type:ew.SEARCH_V2,queryType:eq.customerManager,placeHolder:"Select account manager",variables:{accountId:e.accountId},multiple:!0},{label:"SLA Breached",name:"slaBreachedQuote",icon:(0,a.jsx)(eC.Z,{fontSize:"12",opacity:"42%"}),type:ew.SELECT,subType:ej.SHORT,options:[{label:"Yes",value:"true"},{label:"No",value:"false"}]}]},{label:"Invoices",name:"invoices",text:"Find invoices where",icon:(0,a.jsx)(eI.Z,{size:20,opacity:"42%"}),filters:[{label:"Invoice number",name:"invoiceNumber",icon:(0,a.jsx)(eI.Z,{fontSize:"12",opacity:"42%"}),type:ew.SELECT,options:eA.regular,subType:ej.FULL},{label:"Invoice status",name:"invoiceStatus",icon:(0,a.jsx)(eI.Z,{fontSize:"12",opacity:"42%"}),type:ew.MULTI_SELECT,options:[{label:"Paid",value:"paid"},{label:"Partially paid",value:"partial"},{label:"Unpaid",value:"unpaid"}],placeHolder:"Choose invoice status"},{label:"Type",name:"invoiceType",icon:(0,a.jsx)(eI.Z,{fontSize:"12",opacity:"42%"}),type:ew.MULTI_SELECT,subType:ej.SHORT,placeHolder:"Choose type",options:[{label:"Invoice",value:["customerVat","supplier"]},{label:"Ad-hoc invoice",value:["ProformaInvoiceCustomer","ProformaInvoiceSupplier"]},{label:"PM invoice",value:["customerPpmInvoice","supplierPpmInvoice"]}]},{label:"Days outstanding",name:"outstandingDays",icon:(0,a.jsx)(eC.Z,{fontSize:"12",opacity:"42%"}),type:ew.SELECT,subType:ej.SHORT,options:[{label:"All outstanding invoices",value:"0"},{label:"1-30",value:"1-30"},{label:"31-60",value:"31-60"},{label:"61-90",value:"61-90"},{label:">90",value:"90"}]},{label:"Job date",name:"invoiceDate",icon:(0,a.jsx)(eC.Z,{fontSize:"12",opacity:"42%"}),type:ew.DATE,options:eA.date},{label:"Paid date",name:"invoicePaidDate",icon:(0,a.jsx)(eC.Z,{fontSize:"12",opacity:"42%"}),type:ew.DATE,options:eA.date},{label:"Invoiced date",name:"invoiceInvoicedDate",icon:(0,a.jsx)(eC.Z,{fontSize:"12",opacity:"42%"}),type:ew.DATE,options:eA.date},{label:"Completed date",name:"invoiceCompletedDate",icon:(0,a.jsx)(eC.Z,{fontSize:"12",opacity:"42%"}),type:ew.DATE,options:eA.date},{label:"Closed date",name:"invoiceClosedDate",icon:(0,a.jsx)(eC.Z,{fontSize:"12",opacity:"42%"}),type:ew.DATE,options:eA.date},{label:"Customers",name:"customerId",placeHolder:"Choose customer",icon:(0,a.jsx)(eg.Z,{size:12,opacity:"42%"}),type:ew.SEARCH,queryType:eq.customers},{label:"Suppliers",name:"supplierId",placeHolder:"Choose supplier",icon:(0,a.jsx)(ex.Z,{size:12,opacity:"42%"}),type:ew.SEARCH,queryType:eq.suppliers},{label:"Location",name:"locationId",icon:(0,a.jsx)(eS.Z,{fontSize:"12",opacity:"42%"}),type:ew.LOCATION},{label:"Account Manager",name:"customerManagerId",icon:(0,a.jsx)(ey.Z,{size:12,opacity:"42%"}),type:ew.SEARCH_V2,queryType:eq.customerManager,placeHolder:"Select account manager",variables:{accountId:e.accountId},multiple:!0}]},{label:"Customers",name:"customers",text:"Find customers where",icon:(0,a.jsx)(eg.Z,{size:20,opacity:"42%"}),filters:[{label:"Number of jobs",name:"numberOfJobs",icon:(0,a.jsx)(ey.Z,{size:12,opacity:"42%"}),type:ew.SELECT,subType:ej.FULL,options:eA.regular},{label:"Number of quotes",name:"numberOfQuotes",icon:(0,a.jsx)(eZ.Z,{fontSize:"12",opacity:"42%"}),type:ew.SELECT,subType:ej.FULL,options:eA.regular},{label:"Number of invoices",name:"numberOfInvoices",icon:(0,a.jsx)(eI.Z,{fontSize:"12",opacity:"42%"}),type:ew.SELECT,subType:ej.FULL,options:eA.regular},{label:"Number of locations",name:"numberOfLocations",icon:(0,a.jsx)(ey.Z,{size:12,opacity:"42%"}),type:ew.SELECT,subType:ej.FULL,options:eA.regular},{label:"Number of users",name:"numberOfUsers",icon:(0,a.jsx)(ey.Z,{size:12,opacity:"42%"}),type:ew.SELECT,subType:ej.FULL,options:eA.regular},{label:"Job status",name:"jobStatus",icon:(0,a.jsx)(ey.Z,{size:12,opacity:"42%"}),type:ew.MULTI_SELECT,subType:ej.FULL,options:eA.multiSelect,placeHolder:"Choose job status"},{label:"Job type",name:"jobType",icon:(0,a.jsx)(ey.Z,{size:12,opacity:"42%"}),type:ew.MULTI_SELECT,subType:ej.SHORT,options:[{label:"Reactive",value:"reactive"},{label:"Planned Maintenance",value:"plannedMaintenance"}],placeHolder:"Choose job type"},{label:"Quote status",name:"quoteStatus",placeHolder:"Choose quote status",icon:(0,a.jsx)(ey.Z,{size:12,opacity:"42%"}),type:ew.MULTI_SELECT,subType:ej.SHORT,options:[{label:"New quote",value:"newQuote"},{label:"Sent to supplier",value:"sentToSupplier"},{label:"Sent to customer",value:"sentToCustomer"},{label:"Accepted",value:"accepted"},{label:"Rejected",value:"rejected"},{label:"Closed",value:"closed"}]},{label:"Invoice status",name:"invoiceStatus",icon:(0,a.jsx)(ey.Z,{size:12,opacity:"42%"}),type:ew.MULTI_SELECT,subType:ej.SHORT,options:[{label:"paid",value:"paid"},{label:"partially paid",value:"partiallyPaid"},{label:"unpaid",value:"unpaid"}],placeHolder:"Choose invoice status"},{label:"Total spend",name:"totalSpend",icon:(0,a.jsx)(eT.Z,{fontSize:"12",opacity:"42%"}),type:ew.SELECT,subType:ej.FULL,options:eA.regular},{label:"Date account created",name:"dateAccountCreated",icon:(0,a.jsx)(eC.Z,{fontSize:"12",opacity:"42%"}),type:ew.DATE,options:eA.date},{label:"Last job",name:"lastJobs",icon:(0,a.jsx)(eC.Z,{fontSize:"12",opacity:"42%"}),type:ew.DATE,options:eA.date},{label:"Last quotes",name:"lastQuotes",icon:(0,a.jsx)(eZ.Z,{fontSize:"12",opacity:"42%"}),type:ew.DATE,options:eA.date},{label:"Invoice address",name:"invoiceAddressId",icon:(0,a.jsx)(eS.Z,{fontSize:"12",opacity:"42%"}),type:ew.SEARCH,queryType:eq.address,placeHolder:"Choose Invoice address"},{label:"Account Manager",name:"customerManagerId",icon:(0,a.jsx)(ey.Z,{size:12,opacity:"42%"}),type:ew.SEARCH_V2,queryType:eq.customerManager,placeHolder:"Select account manager",variables:{accountId:e.accountId},multiple:!0}]},{label:"Suppliers",name:"suppliers",text:"Find suppliers where",icon:(0,a.jsx)(ex.Z,{size:20,opacity:"42%"}),filters:[{label:"Number of jobs",name:"numberOfJobs",icon:(0,a.jsx)(ey.Z,{size:12,opacity:"42%"}),type:ew.SELECT,subType:ej.FULL,options:eA.regular},{label:"Number of quotes",name:"numberOfQuotes",icon:(0,a.jsx)(eZ.Z,{fontSize:"12",opacity:"42%"}),type:ew.SELECT,subType:ej.FULL,options:eA.regular},{label:"Number  of invoices",name:"numberOfInvoices",icon:(0,a.jsx)(eI.Z,{fontSize:"12",opacity:"42%"}),type:ew.SELECT,subType:ej.FULL,options:eA.regular},{label:"Number of users",name:"numberOfUsers",icon:(0,a.jsx)(eg.Z,{size:12,opacity:"42%"}),type:ew.SELECT,subType:ej.FULL,options:eA.regular},{label:"Job status",name:"jobStatus",icon:(0,a.jsx)(ey.Z,{size:12,opacity:"42%"}),type:ew.MULTI_SELECT,subType:ej.FULL,options:eA.multiSelect,placeHolder:"Choose job status"},{label:"Job type",name:"jobType",icon:(0,a.jsx)(ey.Z,{size:12,opacity:"42%"}),type:ew.MULTI_SELECT,subType:ej.SHORT,placeHolder:"Choose job type",options:[{label:"Reactive",value:"reactive"},{label:"Planned Maintenance",value:"plannedMaintenance"}]},{label:"Service line",name:"jobServiceId",icon:(0,a.jsx)(ey.Z,{size:12,opacity:"42%"}),type:ew.SEARCH,queryType:eq.workOrdersServiceLine,placeHolder:"Choose service line"},{label:"Quote status",name:"quoteStatus",icon:(0,a.jsx)(eZ.Z,{fontSize:"12",opacity:"42%"}),type:ew.MULTI_SELECT,subType:ej.SHORT,options:[{label:"New quote",value:"newQuote"},{label:"Sent to supplier",value:"sentToSupplier"},{label:"Sent to customer",value:"sentToCustomer"},{label:"Accepted",value:"accepted"},{label:"Rejected",value:"rejected"},{label:"Closed",value:"closed"}],placeHolder:"Choose quote status"},{label:"Invoice status",name:"invoiceStatus",icon:(0,a.jsx)(eI.Z,{fontSize:"12",opacity:"42%"}),type:ew.MULTI_SELECT,options:[{label:"paid",value:"paid"},{label:"Partially paid",value:"partial"},{label:"Unpaid",value:"unpaid"}],placeHolder:"Choose invoice status"},{label:"Date account created",name:"dateAccountCreated",icon:(0,a.jsx)(eC.Z,{fontSize:"12",opacity:"42%"}),type:ew.DATE,options:eA.date},{label:"Last job",name:"lastJobs",icon:(0,a.jsx)(eC.Z,{fontSize:"12",opacity:"42%"}),type:ew.DATE,options:eA.date},{label:"Last quotes",name:"lastQuotes",icon:(0,a.jsx)(eC.Z,{fontSize:"12",opacity:"42%"}),type:ew.DATE,options:eA.date},{label:"Coverage areas",name:"coverageAreasId",icon:(0,a.jsx)(eS.Z,{fontSize:"12",opacity:"42%"}),type:ew.SEARCH,queryType:eq.coverageAreas,placeHolder:"Choose Coverage areas"},{label:"Operating address",name:"operatingAddressId",icon:(0,a.jsx)(eS.Z,{fontSize:"12",opacity:"42%"}),type:ew.SEARCH,queryType:eq.address,placeHolder:"Choose Operating address"},{label:"Registered address",name:"registeredAddressId",icon:(0,a.jsx)(eS.Z,{fontSize:"12",opacity:"42%"}),type:ew.SEARCH,queryType:eq.address,placeHolder:"Choose Registered address"}]}]},ek={workOrders:{check:!1,jobNumber:{check:!1,operation:"equalTo",value:""},jobType:{check:!1,operation:"inTo",value:["reactive"]},jobChargingMethod:{check:!1,value:[]},jobStatus:{check:!1,value:[{label:"Select",value:""}]},jobServiceId:{check:!1,value:""},jobTotal:{check:!1,value:""},dueFromCustomer:{check:!1,value:""},supplierAmount:{check:!1,value:""},jobExpensesSupplier:{check:!1,value:""},jobExpensesCustomer:{check:!1,value:""},jobHourlyRate:{check:!1,value:""},jobDate:{check:!1,operation:"equalTo",value:null,secondValue:null},jobPaidDate:{check:!1,operation:"equalTo",value:[{}],secondValue:[{}]},jobInvoicedDate:{check:!1,operation:"equalTo",value:[{}],secondValue:[{}]},jobCompletedDate:{check:!1,operation:"equalTo",value:[{}],secondValue:[{}]},jobClosedDate:{check:!1,operation:"equalTo",value:[{}],secondValue:[{}]},customerId:{check:!1,value:""},supplierId:{check:!1,value:""},locationId:{check:!1,location:{}},customerManagerId:{check:!1,value:null},slaBreachedOnSiteTime:{check:!1,value:""},slaBreachedReportSubmissionTime:{check:!1,value:""}},quotes:{check:!1,quoteNumber:{check:!1,operation:"equalTo",value:""},quoteStatus:{check:!1,value:[{label:"Select",value:""}]},quoteDescription:{check:!1,value:""},quoteValue:{check:!1,operation:"equalTo",value:""},quoteDate:{check:!1,operation:"equalTo",value:[{}],secondValue:[{}]},quoteDueDate:{check:!1,operation:"equalTo",value:"2024-01-17",secondValue:[{}]},quoteClosedDate:{check:!1,operation:"equalTo",value:[{}],secondValue:[{}]},customerId:{check:!1,value:""},supplierId:{check:!1,value:""},locationId:{check:!1,location:{}},customerManagerId:{check:!1,value:null},slaBreachedQuote:{check:!1,value:""}},invoices:{check:!1,invoiceNumber:{check:!1,operation:"",value:""},invoiceStatus:{check:!1,value:[]},invoiceType:{check:!1,value:""},outstandingDays:{check:!1,value:""},invoiceDate:{check:!1,operation:"",value:[{}],secondValue:[{}]},invoicePaidDate:{check:!1,operation:"",value:[{}],secondValue:[{}]},invoiceInvoicedDate:{check:!1,operation:"",value:[{}],secondValue:[{}]},invoiceCompletedDate:{check:!1,operation:"",value:[{}],secondValue:[{}]},invoiceClosedDate:{check:!1,operation:"",value:[{}],secondValue:[{}]},customerId:{check:!1,value:""},supplierId:{check:!1,value:""},locationId:{check:!1,location:{}},customerManagerId:{check:!1,value:null}},customers:{numberOfJobs:{check:!1,operation:"",value:""},numberOfQuotes:{check:!1,operation:"",value:""},numberOfInvoices:{check:!1,operation:"",value:""},numberOfLocations:{check:!1,operation:"",value:""},numberOfUsers:{check:!1,operation:"",value:""},jobStatus:{check:!1,value:[{label:"Select",value:""}]},jobType:{check:!1,value:"reactive"},quoteStatus:{check:!1,value:""},invoiceStatus:{check:!1,value:"paid"},totalSpend:{check:!1,operation:"",value:""},dateAccountCreated:{check:!1,operation:"",value:[{}],secondValue:[{}]},lastJobs:{check:!1,operation:"",value:[{}],secondValue:[{}]},lastQuotes:{check:!1,operation:[{}],value:[{}]},locationId:{check:!1,location:{}},invoiceAddressId:{check:!1,1:{location:""}},customerManagerId:{check:!1,value:null}},suppliers:{numberOfJobs:{check:!1,operation:"is equal to",value:""},numberOfQuotes:{check:!1,operation:"is equal to",value:""},numberOfInvoices:{check:!1,operation:"is equal to",value:""},numberOfUsers:{check:!1,operation:"is equal to",value:""},jobStatus:{check:!1,value:[{label:"Select",value:""}]},jobType:{check:!1,value:"reactive"},jobServiceId:{check:!1,value:""},quoteStatus:{check:!1,value:"newQuote"},invoiceStatus:{check:!1,value:""},dateAccountCreated:{check:!1,operation:"i",value:[{}],secondValue:[{}]},lastJobs:{check:!1,operation:"",value:[{}],secondValue:[{}]},lastQuotes:{check:!1,operation:"",value:[{}],secondValue:[{}]},coverageAreasId:{check:!1,value:""},operatingAddressId:{check:!1,value:""},registeredAddressId:{check:!1,value:""}}},eD=function(e,n){var t,a=e_();return(null===(t=null==a?void 0:a.find(function(e){return e.name===n}))||void 0===t?void 0:t.filters.find(function(n){return n.name===e}))||e},eL=function(e){e.filtersToRender;var n=e.filter,t=eD(n.filterName,n.category),a=t.label,o="",r=!1;switch(t.type){case ew.SELECT:if(t.subType&&t.subType===ej.SHORT){if("isBetween"===n.operation){o={from:n.value,to:n.secondValue};break}o=t.options.find(function(e){return e.value===n.value}).label;break}o=n.value,"isBetween"===n.operation&&(o={from:n.value,to:n.secondValue});break;case ew.MULTI_SELECT:var i=[],l=n.value.reduce(function(e,n){return"string"==typeof n?(0,m.Z)(e).concat([n]):Array.isArray(n)?(0,m.Z)(e).concat((0,m.Z)(n)):(0,m.Z)(e).concat([n])},[]);t.options.forEach(function(e){var n;"string"==typeof e.value&&l.includes(e.value)&&i.push(e.label),Array.isArray(e.value)&&(null===(n=e.value)||void 0===n?void 0:n.some(function(e){return l.includes(e)}))&&i.push(e.label)}),o=i.join(", ");break;case ew.DATE:n.secondValue||(o=new Date(n.value)),n.secondValue&&(o={from:new Date(n.value),to:new Date(n.secondValue)}),r=!0;break;case ew.TEXT:o=n.value;break;case ew.SEARCH:o=n.label;break;case ew.SEARCH_V2:o=Array.isArray(n.value)?n.value.map(function(e){return e.label}).join(", "):n.value;break;case ew.LOCATION:if(o=n.locationName,n.operation="equalTo",n.location){o=n.location.map(function(e){var n=e.locationName;return e.subLocationName&&(n="".concat(e.locationName," in sub location: ").concat(e.subLocationName)),n}).join(" and ");break}n.locationName&&n.subLocationName&&(o="".concat(n.locationName," in sub location: ").concat(n.subLocationName));break;default:o=n.value}switch(n.operation){case"inTo":return"".concat(a," in ").concat(o);case"equalTo":if(r)return"".concat(a," is ").concat((0,ef.Z)(o,"dd-LL-yyyy"));return"".concat(a," = ").concat(o);case"notEqual":if(r)return"".concat(a," is not ").concat((0,ef.Z)(o,"dd-LL-yyyy"));return"".concat(a,"  ").concat(o);case"greaterThan":if(r)return"".concat(a," is after ").concat((0,ef.Z)(o,"dd-LL-yyyy"));return"".concat(a," > ").concat(o);case"lessThan":if(r)return"".concat(a," is before ").concat((0,ef.Z)(o,"dd-LL-yyyy"));return"".concat(a," < ").concat(o);case"lessThanOrEqualTo":if(r)return"".concat(a," is before or equal to ").concat((0,ef.Z)(o,"dd-LL-yyyy"));return"".concat(a," <= ").concat(o);case"greaterThanOrEqualTo":if(r)return"".concat(a," is after or equal to ").concat((0,ef.Z)(o,"dd-LL-yyyy"));return"".concat(a," >= ").concat(o);case"contains":return"".concat(a," like '").concat(o,"'");case"notContains":return"".concat(a," not like '").concat(o,"'");case"isBetween":if((0,eh.Z)(o.from)&&(0,eh.Z)(o.to))return"".concat(a," is between ").concat((0,ef.Z)(o.from,"dd-LL-yyyy")," and ").concat((0,ef.Z)(o.to,"dd-LL-yyyy"));return"".concat(a," is between ").concat(o.from," and ").concat(o.to);case"thisMonth":return"".concat(a," in ").concat((0,ef.Z)(new Date,"LLLL"));case"last30Days":return"".concat(a," from ").concat((0,ef.Z)((0,eb.Z)(new Date,1),"dd-LL-yyyy")," to now");case"last90Days":return"".concat(a," from ").concat((0,ef.Z)((0,eb.Z)(new Date,3),"dd-LL-yyyy")," to now");case"lastYear":return"".concat(a," from ").concat((0,ef.Z)((0,eb.Z)(new Date,12),"dd-LL-yyyy")," to now");default:return"".concat(a," ").concat(n.operator," ").concat(o)}},eE=t(11082),e$=t(26186),eN=t(21023),eP=t(48795),eM=t(59505),eR=t(21830),eO=[{label:"Select...",value:"select"},{label:"is equal to",value:"equalTo"},{label:"is not equal",value:"notEqual"},{label:"is greater than",value:"greaterThan"},{label:"is greater or equal",value:"greaterThanOrEqualTo"},{label:"is less than",value:"lessThan"},{label:"is less or equal",value:"lessThanOrEqualTo"},{label:"is between",value:"isBetween"}],eY=[{label:"Select...",value:"select"},{label:"is later than",value:"greaterThan"},{label:"is earlier than",value:"lessThan"},{label:"is equal to",value:"equalTo"},{label:"is not equal",value:"notEqual"},{label:"is between",value:"isBetween"},{label:"today",value:"today"},{label:"last 7 days",value:"last7Days"},{label:"next 7 days",value:"next7Days"},{label:"this month",value:"thisMonth"},{label:"next month",value:"nextMonth"},{label:"in last 30 days",value:"last30Days"},{label:"in last 90 days",value:"last90Days"},{label:"in last Year",value:"lastYear"}],eF=function(e){var n=e.formatAsPrice,t=e.row,o=e.value,r=e.field,i=e.multiple&&t.invoiceCount>1?"Multiple":o;return"jobStatus"===r?(0,a.jsx)(J.Z,{m:1,children:(0,a.jsx)(eM.B,{value:o})}):(0,a.jsx)(J.Z,{m:1,children:(0,a.jsx)(eN.Z,{title:n?(0,eE.Z)(i):i,children:(0,a.jsx)(G.Z,{sx:{textAlign:"left"},children:n?(0,eE.Z)(i):i})})})},ez=[{group:"workOrders",label:"Job number",value:"workOrdersJobNumber",type:"inputSelector",availableOptions:eO},{group:"workOrders",label:"Type",value:"workOrdersType",type:"checkList",availableOptions:[{label:"Select...",value:"select"},{label:"Reactive",value:"reactive"},{label:"Planned Maintenance",value:"ppm"},{label:"Quote",value:"quote"}]},{group:"workOrders",label:"Charging method",value:"jobChargingMethod",type:"checkList",availableOptions:[{label:"Select...",value:"select"},{label:"Fixed price",value:"fixed"},{label:"Time & materials",value:"time-materials"},{label:"Call out rate",value:"callOutRate"}]},{group:"workOrders",label:"Status",value:"workOrdersStatus",type:"checkList",availableOptions:[{label:"Select...",value:"select"},{label:"Raised",value:"raised"},{label:"Offered",value:"offered"},{label:"Accepted",value:"accepted"},{label:"In progress",value:"inProgress"},{label:"Completed",value:"completed"},{label:"Report sent",value:"reportSent"},{label:"Invoice sent",value:"invoiceSent"},{label:"Customer paid",value:"customerPaid"},{label:"Supplier paid",value:"supplierPaid"},{label:"Closed",value:"closed"}]},{group:"workOrders",label:"Service line",value:"workOrdersServiceLine",type:"autoComplete",availableOptions:[{label:"Select...",value:"select"}]},{group:"invoices",label:"Invoice number",value:"invoiceNumber",type:"inputSelector",availableOptions:eO},{group:"invoices",label:"Invoice type",value:"invoiceType",type:"checkList",availableOptions:[{label:"Select...",value:"select"},{label:"Customer Invoice",value:"customerVat"},{label:"Ad-hoc customer invoice",value:"ProformaInvoiceCustomer"},{label:"PM customer invoice",value:"customerPpmInvoice"},{label:"Supplier Invoice",value:"supplier"},{label:"Ad-hoc supplier invoice",value:"ProformaInvoiceSupplier"},{label:"PM supplier invoice",value:"supplierPpmInvoice"}]},{group:"invoices",label:"Invoice status",value:"invoiceStatus",type:"checkList",availableOptions:[{label:"Select...",value:"select"},{label:"Paid",value:"paid"},{label:"Partially paid",value:"partial"},{label:"Unpaid",value:"unpaid"}]},{group:"invoices",label:"Days Outstanding",value:"outstandingdays",type:"checkList",availableOptions:[{label:"Select...",value:"select"},{label:"1 - 30",value:"1-30"},{label:"31 - 60",value:"31-60"},{label:"> 90",value:"90-"}]},{group:"quotes",label:"Status",value:"quotesStatus",type:"checkList",availableOptions:[{label:"Select...",value:"select"},{label:"Raised",value:"raised"},{label:"New quote",value:"quoteNew"},{label:"Sent to supplier",value:"quoteOffered"},{label:"Sent to customer",value:"quoteSent"},{label:"Accepted",value:"quoteAccepted"},{label:"Rejected",value:"quoteRejected"},{label:"Closed",value:"quoteClosed"}]},{group:"quotes",label:"Description",value:"quotesDescription",type:"input"},{group:"values",label:"Job total",value:"valuesJobTotal",type:"inputSelector",availableOptions:eO},{group:"values",label:"Due from customer",value:"valuesDueFromCustomer",type:"inputSelector",availableOptions:eO},{group:"values",label:"Quote value",value:"valuesQuoteValue",type:"inputSelector",availableOptions:eO},{group:"values",label:"Supplier amount",value:"valuesSupplierAmount",type:"inputSelector",availableOptions:eO},{group:"values",label:"Expenses amount",value:"valuesExpensesAmount",type:"inputSelector",availableOptions:eO},{group:"values",label:"Hourly rate",value:"valuesHourlyRate",type:"inputSelector",availableOptions:eO},{group:"dates",label:"Job date",value:"datesJobDate",type:"dateSelector",availableOptions:eY},{group:"dates",label:"Paid date",value:"datesPaidDate",type:"dateSelector",availableOptions:eY},{group:"dates",label:"Invoiced date",value:"datesInvoicedDate",type:"dateSelector",availableOptions:eY},{group:"dates",label:"Completed date",value:"datesCompletedDate",type:"dateSelector",availableOptions:eY},{group:"dates",label:"Closed date",value:"datesClosedDate",type:"dateSelector",availableOptions:eY},{group:"locations",label:"Locations",value:"locations",type:"autoComplete",availableOptions:[{label:"Select...",value:"select"}],childrens:[{group:"sublocations",label:"Sublocations",value:"sublocations",type:"autoComplete",availableOptions:[{label:"Select...",value:"select"}]}]},{group:"customers",label:"Customers",value:"customers",type:"autoComplete",availableOptions:[{label:"Select...",value:"select"}]},{group:"suppliers",label:"Suppliers",value:"suppliers",type:"autoComplete",availableOptions:[{label:"Select...",value:"select"}]}],eV=[{key:"jobNumber",name:"Job ID",width:90},{key:"jobType",name:"Job type",width:50},{key:"customerName",name:"Customer",width:150},{key:"supplierName",name:"Supplier",width:150},{key:"locationName",name:"Location",width:200},{key:"jobStatus",name:"Status",width:150},{key:"jobTotal",name:"Job total",width:120},{key:"supplierAmount",name:"Supplier total",width:150},{key:"jobServiceName",name:"Service line",width:170},{key:"jobDate",name:"Job date",width:150},{key:"jobDescription",name:"Job description",width:300}],eU=function(e){var n=e.columnsToDisplay,t=e.numberPrefix,o=e.numberSuffix,r=e.downloadJobInvoice,i=(e.downloadJobReport,e.downloadJobQuote),l=e.downloadReport,u=[{field:"jobNumber",align:"left",headerAlign:"left",headerName:"Job ID",width:90,renderCell:function(e){var n=e.row;return(0,a.jsx)(J.Z,{children:(0,a.jsx)(eP.D,{id:n.jobId,number:n.jobNumber,numberPrefix:t,numberSuffix:o,openCanvas:!0,type:n.jobType})})}},{field:"jobType",headerAlign:"left",headerName:"Job type",width:50,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"invoiceNumber",headerAlign:"left",headerName:"Invoice number",width:150,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t,multiple:!0})}},{field:"invoiceType",headerAlign:"left",headerName:"Invoice type",width:150,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t,multiple:!0})}},{field:"invoiceStatus",headerAlign:"left",headerName:"Invoice status",width:150,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t,multiple:!0})}},{field:"invoiceAmount",headerAlign:"left",headerName:"Invoice amount",width:150,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t,formatAsPrice:!0,multiple:!0})}},{field:"outstandingDays",headerAlign:"left",headerName:"Outstanding days",width:170,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t,multiple:!0})}},{field:"customerName",headerAlign:"left",headerName:"Customer",width:150,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"customerManagerName",headerAlign:"left",headerName:"Account Manager",width:150,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"supplierName",headerAlign:"left",headerName:"Supplier",width:150,align:"left",renderCell:function(e){var n=e.row,t=e.value;if(!t)return(0,a.jsx)(J.Z,{mx:1,children:(0,a.jsx)(G.Z,{children:"-"})});var o=t.split("//");return(0,a.jsx)(eF,{row:n,value:o})}},{field:"locationName",headerAlign:"left",headerName:"Location",width:200,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"addressMainName",headerAlign:"left",headerName:"Address",width:200,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"addressMainPostCode",headerAlign:"left",headerName:"Post code",width:200,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"addressInvoiceName",headerAlign:"left",headerName:"Invoice address",width:200,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"sublocationName",headerAlign:"left",headerName:"Sublocation",width:200,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"jobPriority",headerAlign:"left",headerName:"Priority",width:170,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"jobStatus",headerAlign:"left",headerName:"Status",width:150,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t,field:"jobStatus"})}},{field:"jobTotal",headerAlign:"left",headerName:"Job total",width:120,align:"right",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,formatAsPrice:!0,value:t})}},{field:"dueFromCustomer",headerAlign:"left",headerName:"Due from customer",width:120,align:"right",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,formatAsPrice:!0,value:t})}},{field:"outstandingAmount",headerAlign:"left",headerName:"Outstanding amount",width:170,align:"right",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,formatAsPrice:!0,value:t,multiple:!0})}},{field:"jobNetRevenue",headerAlign:"left",headerName:"Net revenue",width:150,align:"right",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,formatAsPrice:!0,value:t})}},{field:"supplierAmount",headerAlign:"left",headerName:"Supplier total",width:150,align:"right",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,formatAsPrice:!0,value:t})}},{field:"jobExpensesCustomer",headerAlign:"left",headerName:"Expenses (Customer)",width:170,align:"right",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,formatAsPrice:!0,value:t})}},{field:"jobExpensesSupplier",headerAlign:"left",headerName:"Expenses (Supplier)",width:150,align:"right",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,formatAsPrice:!0,value:t})}},{field:"jobServiceName",headerAlign:"left",headerName:"Service line",width:170,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"jobDate",headerAlign:"left",headerName:"Job date",align:"left",width:150,renderCell:function(e){e.row;var n=e.value;return n&&(0,e$.Z)(n)}},{field:"jobReference",headerAlign:"left",headerName:"Customer reference",align:"left",width:150,renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"jobTime",headerAlign:"left",headerName:"Job time",align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"jobDuration",headerAlign:"left",headerName:"Job duration",width:130,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"jobDescription",headerAlign:"left",headerName:"Job description",width:300,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"jobShortDescription",headerAlign:"left",headerName:"Issue reported",width:200,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"jobSource",headerAlign:"left",headerName:"Source",align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"jobCostCategory",headerAlign:"left",headerName:"Cost category",width:130,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"adminUser",headerAlign:"left",headerName:"Assigned to (Admin)",align:"left",width:150,renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"customerUser",headerAlign:"left",headerName:"Assigned to (Customer)",width:150,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"supplierUser",headerAlign:"left",headerName:"Assigned to (Supplier)",width:150,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"jobCreatedAtDate",align:"left",headerAlign:"left",width:150,headerName:"Job created",valueFormatter:function(e){var n=e.value;return n&&(0,e$.Z)(n)}},{field:"jobCreatedBy",headerAlign:"left",headerName:"Created by",width:150,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"jobPaidDate",align:"left",headerAlign:"left",width:150,headerName:"Paid date",valueFormatter:function(e){var n=e.value;return n&&(0,e$.Z)(n)}},{field:"jobCompletedDate",align:"left",headerAlign:"left",headerName:"Completed date",width:150,valueFormatter:function(e){var n=e.value;return n&&(0,e$.Z)(n)}},{field:"jobInvoicedDate",align:"left",headerAlign:"left",headerName:"Invoice date",width:150,valueFormatter:function(e){var n=e.value;return n&&(0,e$.Z)(n)}},{field:"jobClosedDate",align:"left",headerAlign:"left",headerName:"Closed date",width:150,valueFormatter:function(e){var n=e.value;return n&&(0,e$.Z)(n)}},{field:"quoteDate",align:"left",headerAlign:"left",headerName:"Quote date",width:150,valueFormatter:function(e){var n=e.value;return n&&(0,e$.Z)(n)}},{field:"jobQuoteRange",headerAlign:"left",headerName:"Quote range",align:"left",width:170,renderCell:function(e){var n=e.value;return n&&n.low&&n.high?(0,a.jsxs)(J.Z,{width:"100%",children:[(0,a.jsxs)(J.Z,{display:"flex",width:"100%",justifyContent:"space-between",children:[(0,a.jsx)(G.Z,{children:"From:"}),(0,a.jsx)(G.Z,{children:(0,eE.Z)(n.low)})]}),(0,a.jsxs)(J.Z,{display:"flex",width:"100%",justifyContent:"space-between",children:[(0,a.jsx)(G.Z,{children:"To:"}),(0,a.jsx)(G.Z,{children:(0,eE.Z)(n.high)})]})]}):(0,a.jsx)(J.Z,{mx:1,children:(0,a.jsx)(G.Z,{children:"-"})})}},{field:"numberOfJobs",headerAlign:"left",headerName:"Number of jobs",width:50,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"numberOfQuotes",headerAlign:"left",headerName:"Number of quotes",width:50,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"numberOfInvoices",headerAlign:"left",headerName:"Number of invoices",width:50,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"numberOfLocations",headerAlign:"left",headerName:"Number of locations",width:50,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"numberOfUsers",headerAlign:"left",headerName:"Number of users",width:50,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"quoteDueDate",align:"left",headerAlign:"left",headerName:"Quote due date",width:150,valueFormatter:function(e){var n=e.value;return n&&(0,e$.Z)(n)}},{field:"coverageAreas",headerAlign:"left",headerName:"Coverage areas",width:50,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"operatingAddress",headerAlign:"left",headerName:"Operating address",width:120,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"registeredAddress",headerAlign:"left",headerName:"Registered address",width:50,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"invoiceAddress",headerAlign:"left",headerName:"Invoices address",width:50,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t})}},{field:"totalSpend",headerAlign:"left",headerName:"Total spend",width:90,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t,formatAsPrice:!0})}},{field:"totalRevenues",headerAlign:"left",headerName:"Total Revenues",width:90,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t,formatAsPrice:!0})}},{field:"slaBreached",headerAlign:"left",headerName:"SLA breached",width:50,align:"left",renderCell:function(e){var n=e.row,t=e.value;return(0,a.jsx)(eF,{row:n,value:t?"Yes":"No"})}},{field:"jobReport",align:"center",headerAlign:"center",headerName:"Job report",width:50,hide:!0,sortable:!1,renderCell:function(e){var n,t=e.row;if(t)return(0,a.jsx)(ec.Z,{disabled:!(null===(n=t.jobReport)||void 0===n?void 0:n.completion),onClick:function(){var e;return l(null===(e=t.jobReport)||void 0===e?void 0:e.jobId)},children:(0,a.jsx)(eZ.Z,{})})}},{field:"jobQuote",align:"center",headerAlign:"center",headerName:"Quote",width:50,hide:!0,sortable:!1,renderCell:function(e){var n,t=e.row;if(t)return(0,a.jsx)(ec.Z,{disabled:!(null===(n=t.jobQuote)||void 0===n?void 0:n.id),onClick:function(){var e,n;return i(null===(e=t.jobQuote)||void 0===e?void 0:e.jobId,null===(n=t.jobQuote)||void 0===n?void 0:n.id)},children:(0,a.jsx)(eZ.Z,{})})}},{field:"invoiceCustomer",align:"center",headerAlign:"center",headerName:"Invoice(Customer)",width:50,hide:!0,sortable:!1,renderCell:function(e){var n,t=e.row;if(t)return(0,a.jsx)(ec.Z,{disabled:!(null===(n=t.invoiceCustomer)||void 0===n?void 0:n.id),onClick:function(){var e;r(null===(e=t.invoiceCustomer)||void 0===e?void 0:e.id)},children:(0,a.jsx)(eI.Z,{})})}},{field:"invoiceSupplier",align:"center",headerAlign:"center",headerName:"Invoice(Supplier)",width:50,hide:!0,sortable:!1,renderCell:function(e){var n,t=e.row;if(t)return(0,a.jsx)(ec.Z,{disabled:!(null===(n=t.invoiceSupplier)||void 0===n?void 0:n.id),onClick:function(){var e;r(null===(e=t.invoiceSupplier)||void 0===e?void 0:e.id)},children:(0,a.jsx)(eI.Z,{})})}},{field:"proformaInvoiceCustomer",align:"center",headerAlign:"center",headerName:"Ad-hoc invoice (Customer)",width:50,hide:!0,sortable:!1,renderCell:function(e){var n,t,o,i,l=e.row;if(!((null===(n=l.proformaInvoiceCustomer)||void 0===n?void 0:null===(t=n.invoices)||void 0===t?void 0:t.length)>1))return(0,a.jsx)(ec.Z,{disabled:!(null===(o=l.proformaInvoiceCustomer)||void 0===o?void 0:null===(i=o.invoices)||void 0===i?void 0:i.length),onClick:function(){var e,n,t;r(null===(e=l.proformaInvoiceCustomer)||void 0===e?void 0:null===(n=e.invoices)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.id)},children:(0,a.jsx)(eI.Z,{})});var u=function(e){var n,t;return null===(n=e.proformaInvoiceCustomer)||void 0===n?void 0:null===(t=n.invoices)||void 0===t?void 0:t.map(function(e){return{context:"secondary",icon:"description",onClick:function(n){return r(null==e?void 0:e.id)},tooltip:"Ad-hoc invoice (Customer) - ".concat(e.invoiceNumber)}})};return(0,a.jsx)(eR.C,{icon:"description",row:l,actionsData:u})}},{field:"proformaInvoiceSupplier",align:"center",headerAlign:"center",headerName:"Ad-hoc invoice (Supplier)",width:50,hide:!0,sortable:!1,renderCell:function(e){var n,t,o,i,l=e.row;if(!((null===(n=l.proformaInvoiceSupplier)||void 0===n?void 0:null===(t=n.invoices)||void 0===t?void 0:t.length)>1))return(0,a.jsx)(ec.Z,{disabled:!(null===(o=l.proformaInvoiceSupplier)||void 0===o?void 0:null===(i=o.invoices)||void 0===i?void 0:i.length),onClick:function(){var e,n,t;r(null===(e=l.proformaInvoiceSupplier)||void 0===e?void 0:null===(n=e.invoices)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.id)},children:(0,a.jsx)(eI.Z,{})});var u=function(e){var n,t;return null===(n=e.proformaInvoiceSupplier)||void 0===n?void 0:null===(t=n.invoices)||void 0===t?void 0:t.map(function(e){return{context:"secondary",icon:"description",onClick:function(n){return r(null==e?void 0:e.id)},tooltip:"Ad-hoc invoice (Supplier) - ".concat(e.invoiceNumber)}})};return(0,a.jsx)(eR.C,{icon:"description",row:l,actionsData:u})}}];return{columns:n.map(function(e){var n=e.key,t=e.width,a=u.find(function(e){return e.field===n});return(0,p.Z)((0,d.Z)({},a),{width:t})}),fullColumnList:u}};function eH(){var e=(0,y.Z)(["\n  border: none;\n  background: transparent !important;\n  margin: 5px 5px;\n  padding: 0.8vmin 0.5vmin;\n  color: "," !important;\n\n  .MuiChip-icon {\n    color: "," !important;\n  }\n"]);return eH=function(){return e},e}var eB=(0,X.ZP)(ev.Z).withConfig({displayName:"filterChipsListBlock__StyledFirstChip",componentId:"sc-6ba93970-0"})(eH(),function(e){return e.theme.COLOUR.muiInfo},function(e){return e.theme.COLOUR.muiInfo}),eJ=function(e){var n=e.selectedFilters,t=e.onCallAddFilter,o=e.onDelete;return(0,a.jsxs)(J.Z,{sx:{overflowY:"scroll",display:"flex",alignItems:"center",flexWrap:"nowrap",height:"100%"},children:[t?n&&n.length?(0,a.jsx)(eB,{icon:(0,a.jsx)(em.Z,{}),className:"responsive-fontSize",label:"Add more filters",onClick:t}):(0,a.jsx)(eB,{icon:(0,a.jsx)(em.Z,{}),className:"responsive-fontSize",label:"Add filter",onClick:t}):null,null==n?void 0:n.map(function(e,n){return(0,a.jsx)(ev.Z,{className:"responsive-fontSize",sx:{margin:"5px 5px",padding:"0.8vmin 0.5vmin"},label:eL({filtersToRender:ez,filter:e}),onDelete:o?function(){return o(e)}:null},n)})]})},eQ=t(11057),eG=t(77533),eW=t(10155),eX=t(42283),eK=t(86532),e0=t(22797),e1=t(38895),e2=t(23508),e4=t(69368),e5=t(94054),e3=t(18972),e7=t(18360),e9=t(50135),e6=function(e){var n,t=e.parentName,r=e.label,i=void 0===r?"Select...":r,l=e.secondLabel,u=void 0===l?"Type value":l,s=e.type,c=e.options,d=void 0===c?[]:c,p=e.expanded,m=(0,eX.Gc)(),f=s===ej.SHORT?"".concat(t,".value"):"".concat(t,".operation"),h=s===ej.SHORT?"".concat(t,".operation"):"",b="".concat(t,".value"),y="".concat(t,".secondValue");m.register(f),s===ej.SHORT&&m.register(h);var g=m.watch(f),x=m.watch(b),w=m.watch(y),j=(0,v.Z)(o.useState("isBetween"===m.getValues(f)?"isBetween":"default"),2),S=j[0],Z=j[1],C=function(e){"isBetween"===e?Z("isBetween"):Z("default")};(0,o.useEffect)(function(){if(g&&t.includes("outstandingDays"))switch(g){case 1:m.setValue(b,d[1].value);break;case 31:m.setValue(b,d[2].value);break;case 61:m.setValue(b,d[3].value)}},[g,m,d,t,b]),(0,o.useEffect)(function(){!g&&(m.setValue(f,d[0].value),t.includes("outstandingDays")&&m.setValue(h,"greaterThanOrEqualTo")),p||(m.setValue(f,d[0].value),m.setValue(b,"",{shouldDirty:!0}),m.setValue(y,""),Z("default"))},[p,f,h,g,m,d,t,y,b]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e5.Z,{variant:"standard",sx:{minWidth:"35%"},children:(0,a.jsx)(eX.Qr,{control:m.control,name:f,label:i,render:function(e){return(0,a.jsxs)(e7.Z,{required:p,color:"secondary",value:g||d[0].value,placeHolder:i,onChange:function(n){t.includes("outstandingDays")&&("0"===n.target.value||"90"===n.target.value?m.setValue(h,"greaterThanOrEqualTo"):m.setValue(h,"isBetween")),C(n.target.value),e.onChange(n.target.value)},children:["//@ts-ignore",d.map(function(e,n){return(0,a.jsx)(e3.Z,{value:e.value,children:e.label},f+n)})]})}})}),s===ej.FULL&&(0,a.jsx)(e5.Z,{variant:"standard",sx:{minWidth:"55%"},children:(n="isBetween"===S?"isBetween":"default","isBetween"===n?(0,a.jsxs)(W.Z,{direction:"row",width:"100%",spacing:2,alignItems:"baseline",children:[(0,a.jsx)(eX.Qr,{name:b,control:m.control,render:function(e){return(0,a.jsx)(e9.Z,{required:p,value:e.value,defaultValue:x,onChange:function(n){e.onChange(n.target.value)},color:"secondary",placeholder:u,variant:"standard"})}}),(0,a.jsx)(eX.Qr,{name:y,control:m.control,render:function(e){return(0,a.jsx)(e9.Z,{required:p,value:e.value,defaultValue:w,onChange:function(n){e.onChange(n.target.value)},color:"secondary",placeholder:u,variant:"standard"})}})]}):(0,a.jsx)(eX.Qr,{name:b,control:m.control,render:function(e){return(0,a.jsx)(e9.Z,{required:p,value:e.value,onChange:function(n){e.onChange(n.target.value)},color:"secondary",placeholder:u,variant:"standard"})}}))})]})},e8=t(33754);function ne(){var e=(0,y.Z)(["\n  & .MuiInputBase-input {\n    font-size: 11px;\n  }\n"]);return ne=function(){return e},e}var nn=(0,X.ZP)(e8.M).withConfig({displayName:"DataSelector__CustomizedDatePicker",componentId:"sc-bd269fa8-0"})(ne()),nt=function(e){var n,t=e.parentName,r=e.label,i=void 0===r?"Some text":r,l=e.expanded,u=e.options,s=(0,eX.Gc)(),c="".concat(t,".operation"),m="".concat(t,".value"),f="".concat(t,".secondValue"),h="".concat(t,".label"),b=s.watch(c),y=s.watch(h),g=(0,v.Z)(o.useState(b||"default"),2),x=g[0],w=g[1],j=function(e){w(e.target.value)};return(0,o.useEffect)(function(){if(y)switch(y){case"today":s.setValue(c,"today"),w("today");break;case"last7Days":s.setValue(c,"last7Days"),w("last7Days");break;case"next7Days":s.setValue(c,"next7Days"),w("next7Days");break;case"lastMonth":s.setValue(c,"lastMonth"),w("lastMonth");break;case"nextMonth":s.setValue(c,"nextMonth"),w("nextMonth");break;case"thisMonth":s.setValue(c,"thisMonth"),w("thisMonth");break;case"last30Days":s.setValue(c,"last30Days"),w("last30Days");break;case"last90Days":s.setValue(c,"last90Days"),w("last90Days");break;case"lastYear":s.setValue(c,"lastYear"),w("lastYear");break;case"yearToDate":s.setValue(c,"yearToDate"),w("yearToDate")}},[]),(0,o.useEffect)(function(){l||(s.setValue(c,u[0].value),s.setValue(m,null),s.setValue(f,null),w("default"))},[l,c,s,u,f,m]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e5.Z,{variant:"standard",sx:{minWidth:"35%"},children:(0,a.jsx)(eX.Qr,{control:s.control,name:c,defaultValue:u[0].value,render:function(e){return(0,a.jsx)(e7.Z,{required:l,value:e.value,defaultValue:u[0].value,onChange:function(n){j(n),e.onChange(n.target.value)},label:i,color:"secondary",children:u.map(function(e){return(0,a.jsx)(e3.Z,{value:e.value,children:e.label})})})}})}),(0,a.jsx)(e5.Z,{variant:"standard",sx:{minWidth:"55%"},children:["today","last7Days","next7Days","lastMonth","nextMonth","thisMonth","last30Days","last90Days","lastYear","yearToDate"].includes(x)||!x?null:"isBetween"===x?(0,a.jsxs)(W.Z,{direction:"row",width:"100%",spacing:2,alignItems:"baseline",children:[(0,a.jsx)(eX.Qr,{name:m,control:s.control,render:function(e){return(0,a.jsx)(nn,{required:l,inputFormat:"DD-MM-yyyy",orientation:"portrait",defaultValue:[{}],onChange:function(n){e.onChange(n)},renderInput:function(e){return(0,a.jsx)(e9.Z,(0,p.Z)((0,d.Z)({},e),{required:l,variant:"standard",label:"From",size:"small",color:"secondary",sx:{width:"50%"}}))},value:e.value})}}),(0,a.jsx)(eX.Qr,{name:f,control:s.control,render:function(e){return(0,a.jsx)(nn,{required:l,inputFormat:"DD-MM-yyyy",orientation:"portrait",defaultValue:null,onChange:function(n){e.onChange(n)},renderInput:function(e){return(0,a.jsx)(e9.Z,(0,p.Z)((0,d.Z)({},e),{defaultValue:null,required:l,variant:"standard",label:"To",size:"small",color:"secondary",sx:{width:"50%"}}))},value:e.value})}})]}):(0,a.jsx)(eX.Qr,{name:m,control:s.control,render:function(e){return(0,a.jsx)(e8.M,{inputFormat:"DD-MM-yyyy",onChange:function(n){e.onChange(n)},renderInput:function(e){return(0,a.jsx)(e9.Z,(0,p.Z)((0,d.Z)({},e),{defaultValue:[{}],variant:"standard",size:"small",color:"secondary",required:l}))},value:e.value})}})})]})},na=t(47312),no=t(59334),nr={PaperProps:{style:{maxHeight:135,width:250,fontsize:3}}},ni=function(e){var n=e.parentName,t=e.expanded,r=(e.label,e.filterItem,e.options),i=e.placeHolder,l=(0,eX.Gc)(),u="".concat(n,".value");return(0,o.useEffect)(function(){t||l.setValue(u,[])},[t,l,u]),(0,a.jsx)(e5.Z,{variant:"standard",sx:{minWidth:"80%"},children:(0,a.jsx)(eX.Qr,{control:l.control,name:u,defaultValue:[],render:function(e){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(na.Z,{children:i}),(0,a.jsx)(e7.Z,{required:t,multiple:!0,color:"secondary",value:e.value,onChange:function(n){var t=n.target.value;e.onChange("string"==typeof t?t.split(","):t)},sx:{minWidth:"100%"},renderValue:function(e){return e.map(function(e){var n;return null===(n=r.find(function(n){return Array.isArray(n.value)&&Array.isArray(e)?n.value.every(function(n){return e.includes(n)}):e===n.value}))||void 0===n?void 0:n.label}).join(", ")},MenuProps:nr,children:r.map(function(n){return(0,a.jsxs)(e3.Z,{value:n.value,sx:{height:30},children:[(0,a.jsx)(e4.Z,{color:"secondary",checked:e.value.indexOf(n.value)>-1,size:"small"}),(0,a.jsx)(no.Z,{primary:n.label})]},n.value)})})]})}})})},nl=function(e){var n=e.parentName,t=e.label,r=e.expanded,i=(0,eX.Gc)();i.register("".concat(n,".operation")),i.setValue("".concat(n,".operation"),"contains");var l="".concat(n,".value");return(0,o.useEffect)(function(){r||i.setValue(l,"")},[r,i,l]),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(e5.Z,{variant:"standard",sx:{minWidth:"100%"},children:(0,a.jsx)(eX.Qr,{name:l,control:i.control,render:function(e){return(0,a.jsx)(e9.Z,{required:r,color:"secondary",placeholder:t,value:e.value,onChange:function(n){return e.onChange(n.target.value)},variant:"standard"})}})})})},nu=t(68309),ns=t(4595),nc={workOrdersServiceLine:D,locations:L,sublocations:$,customers:N,suppliers:M,coverageAreas:P,address:E},nd=function(e){var n=e.parentName,t=e.name,r=e.handler,i=void 0===r?function(){}:r,l=e.queryType,u=void 0===l?"locations":l,s=e.multiple,c=void 0!==s&&s,v=e.location,m=e.subLocation,f=e.label,h=e.expanded,y=e.hidden,g=(0,eX.Gc)(),x=(0,o.useState)([{label:"Select...",value:null}]),w=x[0],j=x[1],S=n?"".concat(n,".value"):t,Z=g.watch(S),C=(0,b.a)(nc[u],{variables:{locationId:null==v?void 0:v.value},onCompleted:function(e){if("address"===u){j(e.items.map(function(e,n){return{id:n,label:e.name?e.name+", "+e.addressLine:e.addressLine||e.city,value:e.id}}));return}if("coverageAreas"===u){j(e.items.map(function(e,n){return{id:n,label:"".concat(e.area,"-").concat(e.label),value:e.id}}));return}j(e.items.map(function(e,n){return(0,d.Z)({id:n},e)}))}}).loading;return(0,o.useEffect)(function(){if(v){var e=w.find(function(e){return e.value===m.value});e&&g.setValue(S,e)}if(null==Z?void 0:Z.locationName){var n=w.find(function(e){return e.value===Z.value});n&&g.setValue(S,n)}if("number"==typeof Z){var t=w.find(function(e){return e.value===Z});g.setValue(S,t)}},[Z,S,g,v,w,null==m?void 0:m.value]),(0,o.useEffect)(function(){h||g.setValue(S,"")},[S,h,g]),(0,a.jsx)(e5.Z,{variant:"standard",sx:{width:"100%"},children:(0,a.jsx)(eX.Qr,{control:g.control,name:S,render:function(e){return(0,a.jsx)(ns.F,(0,p.Z)((0,d.Z)({multiple:!!c,required:h,hidden:y,InputProps:{style:{fontSize:"30 !important"}}},e),{loading:C,size:"medium",label:f,className:"responsive-fontSize",onChange:function(n,t){i(t),e.onChange(t)},options:w}))}})})},np=function(e){var n=e.parentName,t=e.expanded,r=e.index,i=void 0===r?0:r,l=(0,eX.Gc)(),u=(0,v.Z)(o.useState(""),2),s=u[0],c=u[1],d=(0,v.Z)(o.useState(!1),2),p=d[0],m=d[1],f=(0,v.Z)(o.useState(""),2),h=f[0],b=f[1],y="".concat(n,".location.").concat(i),g="".concat(n,".sublocation.").concat(i),x=l.watch(y),w=l.watch(g),j=l.watch("".concat(n,".location.").concat(i+1)),S=function(e){c(e)};return(0,o.useEffect)(function(){x&&(c(x),j&&m(!0)),w&&b(w)},[x,j,w]),(0,o.useEffect)(function(){t||(l.setValue(y,""),c(""),m(!1))},[t,y,l]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(J.Z,{sx:{minWidth:"100%",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[(0,a.jsx)(nd,{label:"Choose location",name:y,handler:S,queryType:"locations",expanded:t}),(0,a.jsx)(nd,{label:"Choose sublocation",name:g,queryType:"sublocations",selectorType:"multiple",location:s,subLocation:h}),p&&t?(0,a.jsx)(np,{expanded:t,parentName:n,index:++i}):(0,a.jsx)(eN.Z,{title:"Add Location",placement:"top",children:(0,a.jsx)(nu.Z,{color:"secondary",fontSize:"medium",sx:{cursor:"pointer"},onClick:function(){return m(!0)}})})]})})},nv=t(18531),nm={customerManager:t(57493).K4},nf=function(e){var n=e.parentName,t=e.queryType,r=e.multiple,i=void 0!==r&&r,l=e.label,u=e.variables,s=e.expanded,c=(0,eX.Gc)(),v=(0,o.useState)([{label:"Select...",value:null}]),m=v[0],f=v[1],h=(0,o.useState)(""),y=h[0],g=h[1],x="".concat(n,".value"),w=(0,b.a)(nm[void 0===t?"customerManager":t],{variables:(0,p.Z)((0,d.Z)({},u),{q:""!==y?"%".concat(y,"%"):null}),onCompleted:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{items:[]}).items;f(e)}}).loading;return(0,o.useEffect)(function(){s||c.setValue(x,"")},[x,s,c]),(0,a.jsx)(eX.Qr,{control:c.control,name:x,render:function(e){var n=e.value,t=e.onChange;return(0,a.jsx)(nv.q,{multiple:i,value:i?n||[]:n,onChange:function(e,n){return t(n)},loading:w,options:m,setSearch:g,color:"secondary",textFieldProps:{color:"secondary",variant:"standard",label:l},sx:{width:"100%"},renderOption:function(e,n,t){var r=t.selected;return(0,o.createElement)("li",(0,p.Z)((0,d.Z)({},e),{key:n.value,children:[(0,a.jsx)(e4.Z,{color:"secondary",style:{marginRight:8},checked:r}),n.label]}))}})}})};function nh(){var e=(0,y.Z)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  gap: 0.2rem;\n  margin: 0;\n  padding: 0;\n"]);return nh=function(){return e},e}function nb(){var e=(0,y.Z)(["\n  width: 100%;\n  border-radius: 0;\n  box-shadow: none !important;\n  min-height: 30px;\n  //max-height: 85px;\n  .Mui-expanded {\n    //max-height: 25px;\n    display: flex;\n    justify-content: start;\n  }\n\n  .MuiAccordionSummary-root {\n    display: flex;\n    min-height: 35px;\n  }\n  .MuiAccordionSummary-content {\n    display: flex;\n    align-items: center;\n    gap: 0.2rem !important;\n    margin: 0 !important;\n  }\n\n  .MuiAccordionDetails-root {\n    display: flex;\n    align-items: center;\n    padding: 0 5px;\n  }\n"]);return nb=function(){return e},e}var ny=X.ZP.div.withConfig({displayName:"RuleFilter__Wrapper",componentId:"sc-f1fc8f8-0"})(nh()),ng=(0,X.ZP)(eK.Z).withConfig({displayName:"RuleFilter__InnerStyledAccordion",componentId:"sc-f1fc8f8-1"})(nb()),nx=function(e){var n=e.categoryName,t=e.label,r=e.selectType,i=e.subType,l=void 0===i?ej.SHORT:i,u=e.options,s=e.icon,c=e.queryType,d=e.categoryCheckName,p=e.filterName,v=e.placeHolder,m=e.variables,f=e.multiple,h=(0,eX.Gc)(),b="".concat(n,".").concat(p||t).replaceAll(" ",""),y="".concat(b,".check");h.register(y);var g=h.watch(y),x=h.watch(d);return(0,o.useEffect)(function(){x||h.setValue(y,!!x,{shouldDirty:!0})},[x,y,h]),(0,a.jsxs)(ny,{children:[(0,a.jsx)(eX.Qr,{control:h.control,name:y,render:function(e){return(0,a.jsx)(e4.Z,{checked:!!g,onChange:function(n){e.onChange(n.target.checked)},color:"secondary",size:"small",sx:{padding:"7px 9px 0px 9px",alignSelf:"start"}})}}),(0,a.jsxs)(ng,{expanded:g,children:[(0,a.jsxs)(e1.Z,{sx:{display:"flex",alignItems:"center",padding:0,margin:0},children:[(0,a.jsx)(W.Z,{sx:{minWidth:15},justifyContent:"center",children:s}),(0,a.jsx)(G.Z,{children:t})]}),(0,a.jsx)(e0.Z,{children:(0,a.jsx)(W.Z,{direction:"row",alignItems:"baseline",width:"100%",spacing:4,minHeight:40,children:function(e){switch(e){case ew.SELECT:return(0,a.jsx)(e6,{parentName:b,label:"check",type:l,expanded:g,options:u});case ew.DATE:return(0,a.jsx)(nt,{label:"check",parentName:b,expanded:g,options:u});case ew.MULTI_SELECT:return(0,a.jsx)(ni,{label:"check",parentName:b,expanded:g,options:u,placeHolder:v});case ew.TEXT:return(0,a.jsx)(nl,{label:"Type value",parentName:b,expanded:g});case ew.LOCATION:return(0,a.jsx)(np,{label:"check",expanded:g,parentName:b});case ew.SEARCH:return(0,a.jsx)(nd,{parentName:b,expanded:g,queryType:c,label:v});case ew.SEARCH_V2:return(0,a.jsx)(nf,{parentName:b,queryType:c,multiple:f,label:v,variables:m,expanded:g});default:return(0,a.jsx)(G.Z,{variant:"h5",children:"Incorrect DataReportsFilter Type"})}}(r)})})]})]})};function nw(){var e=(0,y.Z)(["\n  width: 100%;\n"]);return nw=function(){return e},e}function nj(){var e=(0,y.Z)(["\n  width: 100%;\n  border-radius: 0;\n  box-shadow: none !important;\n  color: #000 !important;\n  .Mui-expanded {\n  }\n  .MuiAccordionSummary-content {\n    display: flex;\n    align-items: center;\n    gap: 1rem;\n  }\n"]);return nj=function(){return e},e}var nS=X.ZP.div.withConfig({displayName:"CategoryFilter__AccordionWrapper",componentId:"sc-28c44e1-0"})(nw()),nZ=(0,X.ZP)(eK.Z).withConfig({displayName:"CategoryFilter__StyledAccordion",componentId:"sc-28c44e1-1"})(nj()),nC=function(e){var n=e.categoryLabel,t=e.text,r=e.icon,i=e.filters,l=e.name,u=(0,eX.Gc)(),s=(0,v.Z)(o.useState(!1),2),c=s[0],d=s[1],p="".concat(l,".check");u.register(p);var m=!!u.watch(p);return(0,o.useEffect)(function(){var e=u.getValues(),n=e.invoices,t=e.customers,a=e.suppliers,o=e.quotes,r=e.workOrders;d("workOrders"===l&&(n.check||t.check||a.check)||"quotes"===l&&(n.check||t.check||a.check)||"invoices"===l&&(r.check||o.check||t.check||a.check)||"suppliers"===l&&(r.check||o.check||n.check)||"customers"===l&&(r.check||o.check||n.check))},[u,l]),(0,a.jsx)(nS,{children:(0,a.jsxs)(nZ,{expanded:m,disabled:c,onChange:function(e,n){u.setValue(p,n,{shouldDirty:!0})},children:[(0,a.jsxs)(e1.Z,{expandIcon:(0,a.jsx)(e2.Z,{}),sx:{borderBottom:"2px rgba(0, 0, 0, 0.42) solid",paddingX:0},children:[(0,a.jsx)(W.Z,{width:25,direction:"row",justifyContent:"justify-center",children:r}),(0,a.jsx)(G.Z,{sx:{fontWeight:"bold"},children:n})]}),(0,a.jsxs)(e0.Z,{children:[(0,a.jsx)(G.Z,{sx:{paddingLeft:"10px"},children:t}),i.map(function(e,n){return(0,a.jsx)(nx,{selectType:e.type,label:e.label,filterName:e.name,categoryName:l,categoryCheckName:p,icon:e.icon,options:e.options,subType:null==e?void 0:e.subType,queryType:null==e?void 0:e.queryType,placeHolder:null==e?void 0:e.placeHolder,variables:null==e?void 0:e.variables,multiple:null==e?void 0:e.multiple},n)})]})]})})},nI=t(45307),nT=t(14924),nq=t(30381),nA=t.n(nq),n_=t(96486),nk=function(e){var n={};for(var t in e){var a=t.charAt(0).toLowerCase()+t.slice(1);for(var o in e[t]){var r=e[t][o];if(null==r?void 0:r.check){var i=[];void 0===n[a]&&(n[a]={});var l={operation:r.operation?null==r?void 0:r.operation:"equalTo",value:null==r?void 0:r.value,label:null==r?void 0:r.label};switch(r.secondValue&&(l.secondValue=r.secondValue),null==r?void 0:r.value){case"1-30":l.operation="isBetween",l.value=1,l.secondValue=30;break;case"31-60":l.operation="isBetween",l.value=31,l.secondValue=60;break;case"61-90":l.operation="isBetween",l.value=61,l.secondValue=90;break;case">90":l.operation="greaterThan",l.value=90}switch(null==r?void 0:r.operation){case"today":l.operation="equalTo",l.value=nA()().format("YYYY-MM-DD"),l.label="today";break;case"last7Days":l.operation="isBetween",l.value=nA()().subtract(7,"days").format("YYYY-MM-DD"),l.secondValue=nA()().format("YYYY-MM-DD"),l.label="last7Days";break;case"next7Days":l.operation="isBetween",l.value=nA()().format("YYYY-MM-DD"),l.secondValue=nA()().add(7,"days").format("YYYY-MM-DD"),l.label="next7Days";break;case"lastMonth":l.operation="isBetween",l.value=nA()().subtract(1,"month").startOf("month").format("YYYY-MM-DD"),l.secondValue=nA()().subtract(1,"month").endOf("month").format("YYYY-MM-DD"),l.label="lastMonth";break;case"nextMonth":l.operation="isBetween",l.value=nA()().format("YYYY-MM-DD"),l.secondValue=nA()().add(1,"month").format("YYYY-MM-DD"),l.label="nextMonth";break;case"thisMonth":l.operation="isBetween",l.value=nA()().startOf("month").format("YYYY-MM-DD"),l.secondValue=nA()().endOf("month").format("YYYY-MM-DD"),l.label="thisMonth";break;case"last30Days":l.operation="isBetween",l.value=nA()().subtract(30,"days").format("YYYY-MM-DD"),l.secondValue=nA()().format("YYYY-MM-DD"),l.label="last30Days";break;case"last90Days":l.operation="isBetween",l.value=nA()().subtract(90,"days").format("YYYY-MM-DD"),l.secondValue=nA()().format("YYYY-MM-DD"),l.label="last90Days";break;case"lastYear":l.operation="isBetween",l.value=nA()().subtract(1,"years").format("YYYY-MM-DD"),l.secondValue=nA()().format("YYYY-MM-DD"),l.label="lastYear";break;case"yearToDate":l.operation="isBetween",l.value=nA()().startOf("year").format("YYYY-MM-DD"),l.secondValue=nA()().format("YYYY-MM-DD"),l.label="yearToDate"}if(("coverageAreas"===o||"object"==typeof(null==r?void 0:r.value))&&((null==r?void 0:null===(s=r.value)||void 0===s?void 0:s._d)?(l.value=nA()(null==r?void 0:r.value).format("YYYY-MM-DD"),(null==r?void 0:r.secondValue)&&(l.secondValue=nA()(null==r?void 0:r.secondValue).format("YYYY-MM-DD"))):(l.operation="equalTo",l.value=null==r?void 0:r.value.value,l.label=null==r?void 0:null===(c=r.value)||void 0===c?void 0:c.label,Array.isArray(r.value)&&(l.operation="inTo",l.value=null==r?void 0:r.value))),null==r?void 0:r.location)for(var u in r.location){var s,c,d,p,v,m,f,h,b,y={};"check"!==u&&(y.operation="equalTo",y.value=null===(d=null==r?void 0:r.location[u])||void 0===d?void 0:d.value,y.locationName=null===(p=r.location[u])||void 0===p?void 0:p.label,y.label=null===(v=r.location[u])||void 0===v?void 0:v.label,(null===(m=r.sublocation[u])||void 0===m?void 0:m.value)&&(y.secondOperation="equalTo",y.secondValue=null===(f=null==r?void 0:r.sublocation[u])||void 0===f?void 0:f.value,y.subLocationName=null===(h=null==r?void 0:r.sublocation[u])||void 0===h?void 0:h.label,y.secondLabel=null===(b=null==r?void 0:r.sublocation[u])||void 0===b?void 0:b.label)),i.push(y)}else i.push(l);n[a][o]=i}}}return n},nD=function(e){var n=e[0],t=JSON.parse(JSON.stringify(ek));return 0===Object.keys(n).length?ek:(Object.keys(n).forEach(function(e){Object.keys(n[e]).forEach(function(a){var o;n[e][a].length>1||(null===(o=n[e][a][0])||void 0===o?void 0:o.locationName)?(t[e][a].location=[],t[e][a].sublocation=[],n[e][a].forEach(function(o,r){t[e][a].location.push({locationName:n[e][a][r].locationName,value:n[e][a][r].value}),n[e][a][r].secondValue&&t[e][a].sublocation.push({locationName:n[e][a][r].subLocationName,value:n[e][a][r].secondValue})}),t[e][a].check=!0,t[e].check=!0):(t[e][a]=(0,p.Z)((0,d.Z)({},n[e][a][0]),{check:!0}),t[e].check=!0)})}),t)},nL=function(e){var n=e[0];return Object.keys(n).reduce(function(e,t){return e.concat(Object.keys(n[t]).map(function(e){if(n[t][e].length>1){var a={category:t,filterName:e,location:[]};return n[t][e].forEach(function(o,r){var i,l,u,s;a.location.push({locationName:null===(i=n[t][e][r])||void 0===i?void 0:i.locationName,value:null===(l=n[t][e][r])||void 0===l?void 0:l.value,secondValue:null===(u=n[t][e][r])||void 0===u?void 0:u.secondValue,subLocationName:null===(s=n[t][e][r])||void 0===s?void 0:s.subLocationName})}),a}return(0,d.Z)({category:t,filterName:e},n[t][e][0])}))},[])},nE=function(e,n){var t=e.category,a=e.filterName,o=e.operation,r=e.value,i=n.map(function(e){var n=e[t];if(n){var i=(0,d.Z)({},n),l=i[a];if(l){var u={};"locationId"!==a&&(u=l.filter(function(e){return!(e.operation===o&&e.value===r)})),u.length>0?i[a]=u:delete i[a],Object.keys(i).length>0?(Object.isFrozen(e)&&(e=(0,d.Z)({},e)),e[t]=i):delete e[t]}}return e}).filter(function(e){return Object.keys(e).length>0});return 0===i.length?[{}]:i},n$=function(e){if(n_.isEmpty(e))return{};var n=Object.entries(Object.values(e)[0]).reduce(function(e,n){var t=(0,v.Z)(n,2),a=t[0],o=t[1],r={};switch(o[0].label){case"today":r.operation="equalTo",r.value=nA()().format("YYYY-MM-DD"),r.label="today";break;case"last7Days":r.operation="isBetween",r.value=nA()().subtract(7,"days").format("YYYY-MM-DD"),r.secondValue=nA()().format("YYYY-MM-DD"),r.label="last7Days";break;case"next7Days":r.operation="isBetween",r.value=nA()().format("YYYY-MM-DD"),r.secondValue=nA()().add(7,"days").format("YYYY-MM-DD"),r.label="next7Days";break;case"lastMonth":r.operation="isBetween",r.value=nA()().subtract(1,"month").startOf("month").format("YYYY-MM-DD"),r.secondValue=nA()().subtract(1,"month").endOf("month").format("YYYY-MM-DD"),r.label="lastMonth";break;case"nextMonth":r.operation="isBetween",r.value=nA()().format("YYYY-MM-DD"),r.secondValue=nA()().add(1,"month").format("YYYY-MM-DD"),r.label="nextMonth";break;case"thisMonth":r.operation="isBetween",r.value=nA()().startOf("month").format("YYYY-MM-DD"),r.secondValue=nA()().endOf("month").format("YYYY-MM-DD"),r.label="thisMonth";break;case"last30Days":r.operation="isBetween",r.value=nA()().subtract(30,"days").format("YYYY-MM-DD"),r.secondValue=nA()().format("YYYY-MM-DD"),r.label="last30Days";break;case"last90Days":r.operation="isBetween",r.value=nA()().subtract(90,"days").format("YYYY-MM-DD"),r.secondValue=nA()().format("YYYY-MM-DD"),r.label="last90Days";break;case"lastYear":r.operation="isBetween",r.value=nA()().subtract(1,"years").format("YYYY-MM-DD"),r.secondValue=nA()().format("YYYY-MM-DD"),r.label="lastYear";break;case"yearToDate":r.operation="isBetween",r.value=nA()().startOf("year").format("YYYY-MM-DD"),r.secondValue=nA()().format("YYYY-MM-DD"),r.label="yearToDate";break;default:r=o[0]}return(0,p.Z)((0,d.Z)({},e),(0,nT.Z)({},a,[r]))},{});return(0,nT.Z)({},Object.keys(e)[0],n)},nN=t(74944);function nP(){var e=(0,y.Z)(["\n  width: 35vw;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  .responsive-fontSize,\n  li {\n    input {\n      font-size: 0.7vmax !important;\n    }\n    font-size: 0.7vmax !important;\n  }\n  .MuiSelect-select,\n  .MuiInputBase-input {\n    //padding: 0.5rem 1.5rem;\n  }\n  .MuiAccordion-root {\n    //margin: 0.75rem 0 !important;\n  }\n\n  .MuiButton-root {\n    text-transform: none !important;\n  }\n  p,\n  span,\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6,\n  label,\n  button,\n  div {\n    font-family: ",";\n  }\n\n  .MuiInputLabel-root {\n    font-size: 0.7vmax !important;\n    color: "," !important;\n  }\n"]);return nP=function(){return e},e}function nM(){var e=(0,y.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n"]);return nM=function(){return e},e}var nR=(0,X.ZP)(J.Z).withConfig({displayName:"DataReportsFilter__ModalRootBlock",componentId:"sc-a3cd47e3-0"})(nP(),function(e){return e.theme.THEME_TYPOGRAPHY.newFont},function(e){return e.theme.THEME_TYPOGRAPHY.fontColour}),nO=X.ZP.form.withConfig({displayName:"DataReportsFilter__Form",componentId:"sc-a3cd47e3-1"})(nM()),nY=function(e){var n=e.label,t=e.name,r=void 0===t?"filter-modal":t,i=e.open,l=e.onClose,u=e.initialValues,s=e.onFilterApply,c=(e.onRemoveFilterItem,e.onFilterClear),m=(0,nN.x)().user,f=(0,v.Z)((0,nI.X)("form_data_data_reports",u),2),h=(f[0],f[1]),b=(0,v.Z)(o.useState(u),2),y=b[0],g=b[1],x=(0,eX.cI)({defaultValues:nD(y)}),w=function(){g([{}]),x.reset(y),c()},j=function(e){var n=nk(e);g([n]),h({filtersToRender:n,filterType:r}),s([n])},S=function(){var e=nk(x.getValues());h({filtersToRender:e,filterType:r}),l()};return(0,a.jsx)(eG.ZP,{open:i,anchor:"right",onClose:S,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,a.jsx)(nR,{p:2,children:(0,a.jsx)(eX.RV,(0,p.Z)((0,d.Z)({},x),{children:(0,a.jsxs)(nO,{onSubmit:x.handleSubmit(j),children:[(0,a.jsxs)(eW.Z,{disableGutters:!0,sx:{display:"flex",width:"100%",justifyContent:"space-between",marginBottom:2},children:[(0,a.jsx)(G.Z,{variant:"h5",children:n}),(0,a.jsxs)(J.Z,{sx:{width:"40%",display:"flex",justifyContent:"flex-end"},children:[(0,a.jsx)(eQ.Z,{className:"responsive-fontSize",color:"secondary",variant:"outlined",onClick:w,children:"Clear"}),(0,a.jsx)(eQ.Z,{sx:{ml:3},className:"responsive-fontSize",color:"secondary",variant:"contained",type:"submit",children:"Submit"})]})]}),e_({user:m}).map(function(e){return(0,a.jsx)(nC,{categoryLabel:e.label,icon:e.icon,filters:e.filters,text:e.text,name:e.name})})]})}))})})};function nF(){var e=(0,y.Z)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 0 1rem;\n  background-color: ",";\n\n  .filter-block {\n    display: flex;\n    width: 50%;\n    height: 100%;\n  }\n\n  .pagination-block {\n    display: flex;\n    width: 50%;\n    height: 100%;\n    justify-content: flex-end;\n    align-items: center;\n  }\n"]);return nF=function(){return e},e}var nz=ec.Z,nV=(0,X.ZP)(J.Z).withConfig({displayName:"navigation__NavigationBlock",componentId:"sc-6563d869-0"})(nF(),function(e){return e.theme.COLOUR.muiLight}),nU=function(e){e.user;var n=e.page,t=e.handlePageChange,r=e.pageSize,i=e.handlePageSizeChange,l=e.totalCount,u=e.fieldsToSort,s=e.initialFilters,c=e.updateFilters,d=e.onCallChangeColumnList,p=e.onFilterClear,v=e.updateFilterFromChips,m=(0,o.useState)(!1),f=m[0],h=m[1],b=function(e){i(e.target.value)},y=function(e){h(!1),c(e)},g=function(e){c(s.filter(function(n){return n.field!==e.field&&n.filterId!==e.filterId}))};return(0,a.jsxs)(J.Z,{children:[(0,a.jsxs)(nV,{children:[(0,a.jsx)(J.Z,{className:"filter-block",children:(0,a.jsx)(eJ,{selectedFilters:nL(s),onCallAddFilter:function(){return h(!0)},onDelete:function(e){var n=nE(e,s);v(n)}})}),(0,a.jsxs)(J.Z,{className:"pagination-block",sx:{flexDirection:u.length?"column":"row"},children:[(0,a.jsx)(J.Z,{children:(0,a.jsx)(nz,{size:"medium",variant:"outlined",sx:{minWidth:"auto",padding:"1px"},onClick:d,children:(0,a.jsx)(ep.Z,{fontSize:"inherit"})})}),(0,a.jsx)(ed.Z,{component:"div",count:l,page:n,onPageChange:function(e,n){t(n+1)},rowsPerPage:r,onRowsPerPageChange:b,showFirstButton:!0,showLastButton:!0})]})]}),(0,a.jsx)(nY,{label:"Filters",name:"reports-filter",open:f,onClose:function(){return h(!1)},initialValues:s||[{}],onFilterApply:y,onRemoveFilterItem:g,onFilterClear:p})]})},nH=t(72866),nB=t(57460),nJ=t.n(nB),nQ=t(98456),nG=t(16605),nW=t(64666),nX=t(31425),nK=t(6514),n0=t(58951),n1=t(37645),n2=t(67720),n4=t(79332),n5=t(41733),n3=t(66818);function n7(){var e=(0,y.Z)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-end;\n  margin-right: 5px;\n  width: 80%;\n  height: 100%;\n"]);return n7=function(){return e},e}var n9,n6=(0,X.ZP)(J.Z).withConfig({displayName:"reportsActionsNavigation__ReportsNavigationBlock",componentId:"sc-35d3d78a-0"})(n7()),n8=function(e){var n=e.entityName,t=e.preSavedReports,r=e.selectedFilters,i=e.selectedOrder,l=e.selectedColumns,u=e.onSelectReport,s=e.onSaveReport,c=e.onCallReportDelete,d=(0,o.useState)(""),p=d[0],v=d[1],m=(0,o.useState)(""),f=m[0],h=m[1],b=(0,o.useState)(!1),y=b[0],g=b[1],x=(0,o.useState)(!1),w=x[0],j=x[1],S=(0,o.useState)(null),Z=S[0],C=S[1],I=function(e){v(e.name),u(e),q()},T=function(){j(!w)},q=function(){j(!1)},A=function(){g(!0)},_=function(){s(f),g(!1)},k=function(){c(Z),C(null)};return(0,a.jsxs)(n6,{children:[t?(0,a.jsxs)(e5.Z,{size:"small",sx:{marginRight:2},children:[(0,a.jsx)(na.Z,{className:"responsive-fontSize",id:"select-report-label",children:"Select Report"}),(0,a.jsx)(e7.Z,{sx:{minWidth:200},open:w,onClick:T,labelId:"select-report-label",variant:"standard",value:p,renderValue:function(e){return e},onClose:q,children:t.map(function(e,n){return(0,a.jsxs)(e3.Z,{className:"responsive-fontSize",sx:{display:"flex",justifyContent:"space-between"},value:e.name,onClick:function(){I(e)},children:[(0,a.jsx)(G.Z,{children:e.name}),(0,a.jsx)(ec.Z,{onClick:function(n){n.stopPropagation(),C(e)},children:(0,a.jsx)(n5.Z,{})})]},n)})})]}):null,(0,a.jsx)(eQ.Z,{className:"responsive-fontSize",sx:{width:"max-content"},color:"secondary",variant:"outlined",onClick:A,startIcon:(0,a.jsx)(n3.Z,{}),children:"Save as Report"}),(0,a.jsxs)(nW.Z,{open:y,onClose:function(){return g(!1)},children:[(0,a.jsx)(n1.Z,{children:"Save as a Report"}),(0,a.jsxs)(nK.Z,{children:[(0,a.jsx)(n0.Z,{children:"Report Name"}),(0,a.jsx)(n4.Z,{variant:"outlined",sx:{width:"100%"},value:f,onChange:function(e){return h(e.currentTarget.value)}}),(0,a.jsx)(n2.Z,{sx:{my:2}}),(0,a.jsxs)(n0.Z,{children:["Display the next fields for all ",n,":"]}),(0,a.jsx)(J.Z,{children:l.map(function(e,n){return(0,a.jsx)(ev.Z,{className:"responsive-fontSize",sx:{margin:"5px 5px",padding:"0.8vmin 0.5vmin"},label:e},n)})}),(0,a.jsx)(n2.Z,{sx:{my:2}}),(0,a.jsx)(n0.Z,{children:"Which meet the following Requirements:"}),(0,a.jsx)(eJ,{selectedFilters:nL(r)}),(0,a.jsx)(n2.Z,{sx:{my:2}}),(0,a.jsx)(n0.Z,{children:"And has next Order:"}),(0,a.jsx)(J.Z,{children:(0,a.jsx)(ev.Z,{className:"responsive-fontSize",sx:{margin:"5px 5px",padding:"0.8vmin 0.5vmin"},label:"".concat(i.label," - ").concat(i.value)})})]}),(0,a.jsxs)(nX.Z,{children:[(0,a.jsx)(eQ.Z,{onClick:function(){return g(!1)},children:"Cancel"}),(0,a.jsx)(eQ.Z,{disabled:!f.length,onClick:_,children:"Save"})]})]}),(0,a.jsxs)(nW.Z,{open:!!Z,onClose:function(){return C(null)},children:[(0,a.jsxs)(n1.Z,{children:["Are you sure to delete ",Z?Z.name:"report","?"]}),(0,a.jsxs)(nX.Z,{children:[(0,a.jsx)(eQ.Z,{onClick:function(){return C(null)},children:"Cancel"}),(0,a.jsx)(eQ.Z,{onClick:k,children:"Delete"})]})]})]})},te=t(64277),tn=t(35374),tt=function(e){var n=e.columnsToDisplay,t=e.financialReport,a=e.getJobPrefix,o=e.numberPrefix,r=e.numberSuffix;return t.map(function(e){return n.reduce(function(n,t){var i=t.key,l=t.name;return"jobId"===i?n:"jobNumber"===i?(0,p.Z)((0,d.Z)({},n),(0,nT.Z)({},l||i,"".concat(a(e.jobType||null)," ").concat(o," ").concat(e.jobNumber," ").concat(r))):"jobDuration"===i?(0,p.Z)((0,d.Z)({},n),(0,nT.Z)({},l||i,e[i]||"less 1 minute")):isNaN(e[i])?"jobQuoteRange"===i?(0,p.Z)((0,d.Z)({},n),{minimum_quotation:e.jobQuoteRange.low||"-",maximum_quotation:e.jobQuoteRange.high||"-"}):(0,p.Z)((0,d.Z)({},n),(0,nT.Z)({},l||i,e[i]||"-")):(0,p.Z)((0,d.Z)({},n),(0,nT.Z)({},l||i,e[i]||0))},{})})},ta=(n9=(0,c.Z)(function(e){var n;return(0,f.__generator)(this,function(t){var a,o;if(n=e.data,(0,tn.a)())throw Error("This feature is unavailable on mobile");return[2,window.fetch("".concat("https://aws.cleverly.works","/pdf/data/reports/create"),{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer ".concat(localStorage.getItem("bearerToken"))},body:JSON.stringify(n)}).then((a=(0,c.Z)(function(e){var n;return(0,f.__generator)(this,function(n){switch(n.label){case 0:if(e.ok)return[2,e];return[4,e.json()];case 1:throw Error(n.sent().error)}})}),function(e){return a.apply(this,arguments)})).then((o=(0,c.Z)(function(e){var n,t,a,o,r;return(0,f.__generator)(this,function(i){switch(i.label){case 0:return o=window.open("/download","_blank"),[4,e.blob()];case 1:return r=i.sent(),null==o||null===(n=o.location)||void 0===n||n.assign(window.URL.createObjectURL(r)),(null==window?void 0:null===(t=window.Capacitor)||void 0===t?void 0:null===(a=t.Plugins)||void 0===a?void 0:a.Browser)&&window.Capacitor.Plugins.Browser.open({url:window.URL.createObjectURL(r)}),[2]}})}),function(e){return o.apply(this,arguments)}))]})}),function(e){return n9.apply(this,arguments)});function to(){var e=(0,y.Z)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-end;\n\n  .MuiButton-root {\n    text-transform: none !important;\n  }\n"]);return to=function(){return e},e}var tr=X.ZP.div.withConfig({displayName:"toolbar__StyledToolbar",componentId:"sc-ab98d3c-0"})(to()),ti=function(e){var n,t,r,i,l,s=e.columns,v=e.entityName,y=e.filters,g=e.filterVariable,x=e.columnsToDisplay,w=e.orderBy,j=e.sort,S=e.updateFilters,Z=e.handleSort,C=e.handleSetColumns,I=e.setAlert,T=e.isLimitAlert,q=(0,u.q)(),A=(0,nN.x)().user,_=null===(n=q.admin)||void 0===n?void 0:null===(t=n.jobSetting)||void 0===t?void 0:t.jobNumberPrefix,k=null===(r=q.admin)||void 0===r?void 0:null===(i=r.jobSetting)||void 0===i?void 0:i.jobNumberSuffix,D=(0,h.x)(),L=(0,o.useState)({}),E=L[0],$=L[1],N=(0,o.useState)(!1),P=N[0],M=N[1],F=(0,o.useState)(!1),z=F[0],V=F[1],U=(0,b.a)(R,{variables:{userId:A.accountId}}),H=U.data,B=U.loading,J=U.refetch;(0,o.useEffect)(function(){H&&!B&&$(H.user[0].meta)},[H,B]);var Q,G,W,X=(l=(0,c.Z)(function(e){var n;return(0,f.__generator)(this,function(t){switch(t.label){case 0:return n={name:e,columns:x,filters:y,sort:j},[4,D.mutate({mutation:O,variables:{userId:A.accountId,updatedMeta:(0,p.Z)((0,d.Z)({},E),{reports:(0,m.Z)(E.reports||[]).concat([n])})}})];case 1:return t.sent(),J(),[2]}})}),function(e){return l.apply(this,arguments)}),K=(Q=(0,c.Z)(function(e){var n;return(0,f.__generator)(this,function(t){switch(t.label){case 0:return n=(E.reports||[]).filter(function(n){return n.name!==e.name}),[4,D.mutate({mutation:O,variables:{userId:A.accountId,updatedMeta:(0,p.Z)((0,d.Z)({},E),{reports:n})}})];case 1:return t.sent(),J(),[2]}})}),function(e){return Q.apply(this,arguments)}),ee=function(e){C(e.columns),S(e.filters),Z(e.sort)},en=(G=(0,c.Z)(function(e){var n,t,a,o,r,i,l,u;return(0,f.__generator)(this,function(n){switch(n.label){case 0:if(n.trys.push([0,2,3,4]),e.stopPropagation(),M(!0),T)return[2,I({error:!0,message:"System exports are limited to 5,000 entries.\n          If you require a data export or transfer\n          that contains more than this, please contact your account manager."})];return[4,D.query({query:Y,variables:{adminId:A.accountId,filters:g[0],columns:x.filter(function(e){return!e.hide}).map(function(e){return e.key}),orderBy:w,limit:5e3,requestWithoutMeta:!0}})];case 1:return r=tt({columnsToDisplay:x,financialReport:(void 0===(t=n.sent().data)?{getFinancialReport:{financialReport:[]}}:t).getFinancialReport.financialReport,getJobPrefix:te.y,numberPrefix:_,numberSuffix:k}),i=nJ().unparse(r),l="data:application/octet-stream,"+encodeURIComponent(i),(0,nG.S)(l,"FinancialData.csv"),[3,4];case 2:return I({error:!0,message:n.sent().message}),[3,4];case 3:return M(!1),[7];case 4:return[2]}})}),function(e){return G.apply(this,arguments)}),et=(W=(0,c.Z)(function(e){var n;return(0,f.__generator)(this,function(n){switch(n.label){case 0:if(n.trys.push([0,2,3,4]),e.stopPropagation(),V(!0),T)return[2,I({error:!0,message:"System exports are limited to 5,000 entries.\n          If you require a data export or transfer\n          that contains more than this, please contact your account manager."})];return[4,ta({data:{filters:g[0],columns:x.filter(function(e){return!e.hide}),orderBy:w}})];case 1:return n.sent(),[3,4];case 2:return I({error:!0,message:n.sent().message}),[3,4];case 3:return V(!1),[7];case 4:return[2]}})}),function(e){return W.apply(this,arguments)}),ea={label:j.item,value:j.order},eo=s.reduce(function(e,n){return(n.field===j.item&&(ea={label:n.headerName,value:j.order}),(null==x?void 0:x.find(function(e){var t=e.key;return n.field===t}))&&"jobId"!==n.field)?(0,m.Z)(e).concat([n.headerName]):e},[]);return(0,a.jsxs)(tr,{children:[(0,a.jsx)(n8,{entityName:v,preSavedReports:E.reports,selectedFilters:y,selectedOrder:ea,selectedColumns:eo,onSelectReport:ee,onSaveReport:X,onCallReportDelete:K}),(0,a.jsx)(e5.Z,{fullWidth:!0,children:(0,a.jsx)(eQ.Z,{disabled:P,variant:"contained",color:"secondary",onClick:en,startIcon:!P&&(0,a.jsx)(nH.Z,{}),sx:{marginRight:"5px",width:"150px",height:"32px"},children:P?(0,a.jsx)(nQ.Z,{color:"secondary",size:25}):"Export to CSV"})}),(0,a.jsx)(e5.Z,{fullWidth:!0,children:(0,a.jsx)(eQ.Z,{disabled:z,variant:"contained",color:"secondary",onClick:et,startIcon:!z&&(0,a.jsx)(nH.Z,{}),sx:{width:"150px",height:"32px"},children:z?(0,a.jsx)(nQ.Z,{color:"secondary",size:25}):"Export to PDF"})})]})},tl=t(23776),tu=t(90629),ts=t(39628),tc=t(17171),td=(0,a.jsx)(ts.Z,{fontSize:"small"}),tp=(0,a.jsx)(tc.Z,{fontSize:"small"}),tv=eQ.Z,tm=function(e){return(0,a.jsx)(tu.Z,(0,p.Z)((0,d.Z)({elevation:8},e),{anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"},sx:{"& .MuiAutocomplete-listbox":{height:"25vh"}}}))},tf=function(e){var n=e.open,t=e.selectedColumns,r=e.fullColumnList,i=e.onClose,l=e.onApplyColumnList,u=r.filter(function(e){return e.headerName&&e.headerName.length}),s=u.filter(function(e){return t.find(function(n){var t=n.key;return e.field===t})}).sort(function(e,n){var a=t.map(function(e){return e.key});return a.indexOf(e.field)-a.indexOf(n.field)}),c=(0,o.useState)(u),v=c[0],f=c[1],h=function(e,n){f(n)},b=function(){var e=v.map(function(e){return{key:e.field,name:e.headerName,width:e.width,hide:e.hide}});l((0,m.Z)(e))};return(0,a.jsxs)(nW.Z,{width:"50vw",open:n,onClose:i,children:[(0,a.jsx)(n1.Z,{children:"Column Selection"}),(0,a.jsxs)(nK.Z,{children:[(0,a.jsx)(n0.Z,{children:"Select the columns you would like to see in the table."}),(0,a.jsx)(n2.Z,{sx:{marginY:2}}),(0,a.jsx)(e5.Z,{fullWidth:!0,children:(0,a.jsx)(tl.Z,{multiple:!0,defaultValue:s,options:u,disableCloseOnSelect:!0,size:"small",color:"secondary",getOptionLabel:function(e){return e.headerName},renderTags:function(e,n){return e.map(function(e,t){var o=n({index:t});return(0,a.jsx)(ev.Z,(0,p.Z)((0,d.Z)({},o),{size:"small",label:e.headerName}))})},onChange:h,renderOption:function(e,n,t){return(0,a.jsxs)(e3.Z,(0,p.Z)((0,d.Z)({},e),{value:n.field,children:[(0,a.jsx)(e4.Z,{color:"secondary",icon:td,checkedIcon:tp,style:{marginRight:8},checked:t.selected}),(0,a.jsx)(no.Z,{children:n.headerName})]}))},PaperComponent:tm,renderInput:function(e){return(0,a.jsx)(e9.Z,(0,p.Z)((0,d.Z)({},e),{color:"secondary",label:"Columns",placeholder:"Select..."}))}})})]}),(0,a.jsxs)(nX.Z,{children:[(0,a.jsx)(tv,{color:"danger",variant:"contained",onClick:i,children:"Cancel"}),(0,a.jsx)(tv,{color:"secondary",variant:"contained",onClick:b,children:"Apply"})]})]})},th=t(12632),tb=t(4438),ty=t(82725),tg=t(93753),tx=t(1341),tw=t(9367),tj=t(1691),tS=t(77651),tZ=t(51539),tC=t(97229),tI=[{workOrders:{jobDate:[{operation:"equalTo",value:nA()().format("YYYY-MM-DD")}]}}],tT={item:"jobNumber",order:"desc"},tq=function(){var e,n,t,r,i,l,s,y=(0,nN.x)().user,g=(0,h.x)(),x=(0,u.q)(),w=(0,o.useState)({error:!1,message:null}),j=w[0],S=w[1],Z=null===(e=x.admin)||void 0===e?void 0:null===(n=e.jobSetting)||void 0===n?void 0:n.jobNumberPrefix,C=null===(t=x.admin)||void 0===t?void 0:null===(r=t.jobSetting)||void 0===r?void 0:r.jobNumberSuffix,I=(0,o.useState)(tI),T=I[0],q=I[1],A=(0,th.x)({newFilters:T,initialSort:tT}),_=A.initialData,k=A.ref,D=eV.map(function(e){return e.key}),L=(0,o.useState)(D),E=L[0],$=L[1],N=(0,o.useState)(eV),P=N[0],M=N[1],R=(0,o.useState)(!1),O=R[0],V=R[1],U=(0,o.useMemo)(function(){return n$(_.newFilters[0])},[_.newFilters]),H=(0,b.a)(Y,{variables:(0,p.Z)((0,d.Z)({adminId:y.accountId},_),{filters:U,columns:E})}),B=H.data,J=(void 0===B?{getFinancialReport:{financialReport:[],meta:{aggregate:{avg:{customer_amount:0,supplier_amount:0,job_expenses_customer:0,job_expenses_supplier:0},sum:{customer_amount:0,supplier_amount:0,job_expenses_customer:0,job_expenses_supplier:0},totalCount:0}}}}:B).getFinancialReport,Q=J.financialReport,G=J.meta,W=H.loading,X=H.refetch,K=(i=(0,c.Z)(function(e){var n,t,a,o,r;return(0,f.__generator)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,g.query({query:ty.WG,variables:{id:e}})];case 1:if(!(null==(o=a.sent().data.invoice)?void 0:o.id))throw Error("Can`t find this invoice");return tb.cJ.includes(o.invoiceType)&&(0,tw.u)({invoice:o,meta:null==o?void 0:null===(n=o.accountEntry)||void 0===n?void 0:n.meta}),tb.pX.includes(o.invoiceType)&&(0,tg._Z)({client:g,jobId:null==o?void 0:o.entityId,type:null==o?void 0:o.invoiceType}),tb.YK.includes(o.type)&&(0,tx.$)(null==o?void 0:null===(t=o.accountEntry)||void 0===t?void 0:t.meta),[3,3];case 2:return S({error:!0,message:a.sent().message}),[3,3];case 3:return[2]}})}),function(e){return i.apply(this,arguments)}),ee=(l=(0,c.Z)(function(e,n){var t,a,o;return(0,f.__generator)(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,g.query({query:F,variables:{id:e}})];case 1:if(!(a=t.sent().data.job))throw Error("Fetching data error");return[4,(0,tZ.g)(a,n,g)];case 2:return t.sent(),[3,4];case 3:return S({error:!0,message:t.sent().message}),[3,4];case 4:return[2]}})}),function(e,n){return l.apply(this,arguments)}),en=(s=(0,c.Z)(function(e){var n,t,a;return(0,f.__generator)(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,g.query({query:z,variables:{id:e}})];case 1:if(!(t=n.sent().data.job))throw Error("Fetching data error");return[4,(0,tC.e)({job:t,adminId:t.adminId})];case 2:return n.sent(),[3,4];case 3:return S({error:!0,message:n.sent().message}),[3,4];case 4:return[2]}})}),function(e){return s.apply(this,arguments)}),et=function(e){q(e),X()},ea=function(e){q(e),X()},eo=function(e){var n=e&&e.length?e:eV;$(n.map(function(e){return e.key})),M(n),V(!1)},er=function(){q([{}]),X()},ei=function(e){var n=e.oldIndex,t=e.targetIndex;M(function(e){var a=(0,m.Z)(e),o=(0,v.Z)(a.splice(n,1),1)[0];return a.splice(t,0,o),a})},el=function(e){var n=e.colDef,t=e.width,a=n.field;M(function(e){return(0,m.Z)(e).map(function(e){return e.key!==a?e:(0,p.Z)((0,d.Z)({},e),{width:t})})})},eu=eU({columnsToDisplay:P,numberPrefix:Z,numberSuffix:C,downloadJobInvoice:K,downloadJobQuote:ee,downloadReport:en}),ec=eu.columns,ed=eu.fullColumnList;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tS.Z,{open:null==j?void 0:j.error,autoHideDuration:6e3,onClose:function(){S({error:!1,message:null})},anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,a.jsx)(tj.Z,{onClose:function(){return S({error:!1,message:null})},severity:"error",variant:"filled",sx:{width:"500px"},children:(null==j?void 0:j.message)||"Oops some error occurred. Please try again later"})}),(0,a.jsx)(es,{toolbar:function(e){return(0,a.jsx)(ti,(0,p.Z)((0,d.Z)({},e),{columnsToDisplay:P,orderBy:_.orderBy,filters:[U],filterVariable:T,updateFilters:et,handleSetColumns:eo,setAlert:S,isLimitAlert:G.aggregate.totalCount>5e3}))},customFilter:function(e){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(nU,(0,p.Z)((0,d.Z)({},e),{user:y,initialFilters:[U],updateFilters:et,onFilterClear:er,updateFilterFromChips:ea,onCallChangeColumnList:function(){return V(!0)}})),(0,a.jsx)(tf,{open:O,selectedColumns:P,fullColumnList:ed,onClose:function(){return V(!1)},onApplyColumnList:eo})]})},title:"Reports",history:!0,columns:ec,loading:W,initialSort:tT,meta:G,ref:k,refetch:X,rows:Q.map(function(e,n){return(0,p.Z)((0,d.Z)({},e),{index:n,id:e.jobId,jobDuration:e.jobDuration||"less 1 minute"})}),getRowId:function(e){var n=e.jobId,t=e.invoiceType,a=e.index;return"".concat(n,"-").concat(a,"-").concat(t)},columnVisibilityModel:{jobId:!1},onColumnOrderChange:ei,onColumnWidthChange:el})]})},tA=function(){var e,n,t=(0,o.useContext)(l.Z).user,r=(0,u.q)();return t?(null==r?void 0:null===(e=r.admin)||void 0===e?void 0:null===(n=e.modules)||void 0===n?void 0:n.dataReports)?(0,a.jsx)(s.Z,{children:(0,a.jsx)(tq,{})}):(i().push("/404"),null):(i().push("/account/sign-in"),null)};tA.getLayout=function(e){return e};var t_=tA}},function(e){e.O(0,[3662,2283,212,8890,9511,2583,6310,4599,4135,8579,4244,3776,1564,2329,778,1023,3911,9957,3425,1870,8062,2429,5117,2600,9291,4716,8359,9774,2888,179],function(){return e(e.s=75477)}),_N_E=e.O()}]);