(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[501],{31328:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/users",function(){return t(95699)}])},19512:function(e,r,t){"use strict";t.d(r,{D:function(){return i}});var n=t(67294),s=t(21925),i=function(){var e=(0,n.useContext)(s.S);if(!e)throw Error("useSnackbarContext must be used within the SnackbarProvider");return e}},67101:function(e,r,t){"use strict";t.d(r,{r:function(){return u}});var n=t(85893),s=t(45697),i=t(95103),u=function(e){var r=e.errors,t=e.name,s=e.onChange,u=e.options,o=e.register;return(0,n.jsx)(i.Z,{errors:r,name:t,onChange:s,options:u,register:o})};u.propTypes={errors:s.object.isRequired,name:s.string,onChange:s.func,options:s.array.isRequired,register:s.func.isRequired},u.defaultProps={name:"status"}},45307:function(e,r,t){"use strict";t.d(r,{X:function(){return h}});var n=t(14924),s=t(82670),i=t(828),u=t(7297),o=t(67294),c=t(6812),a=t(50319),l=t(75063),f=t(53767);function d(){var e=(0,u.Z)(["\n  query GetAccountUserFilters($accountUserId: Int!) {\n    accountUser: Account_User_by_pk(id: $accountUserId) {\n      filters\n    }\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,u.Z)(["\n  mutation SetAccountUserFilters($accountUserId: Int!, $filters: jsonb) {\n    update_Account_User_by_pk(pk_columns: { id: $accountUserId }, _append: { filters: $filters }) {\n      id\n    }\n  }\n"]);return p=function(){return e},e}function h(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage",u=(0,f.q)().user,l=(0,o.useState)(function(){try{switch(t){case"network":case"state":return r;case"sessionStorage":return JSON.parse(window.sessionStorage.getItem(e))||r}}catch(n){return r}}),d=l[0],p=l[1],h=function(r){try{var i=(0,s.Z)(r,Function)?r(d):r;switch(p(i),t){case"network":b({variables:{accountUserId:null==u?void 0:u.accountUserId,filters:(0,n.Z)({},e,i)}});break;case"sessionStorage":window.sessionStorage.setItem(e,JSON.stringify(i))}}catch(o){}};(0,c.a)(m,{variables:{accountUserId:null==u?void 0:u.accountUserId},skip:"network"!==t,onCompleted:function(t){var n=t.accountUser;n&&p(n.filters[e]||r)}});var b=(0,i.Z)((0,a.D)(Z),1)[0];return[d,h]}var m=(0,l.Ps)(d()),Z=(0,l.Ps)(p())},66267:function(e,r,t){"use strict";t.d(r,{J:function(){return y}});var n=t(26042),s=t(69396),i=t(99534),u=t(828),o=t(85893),c=t(11163),a=t(67294),l=t(45697),f=t(9270),d=t(62140),p=t(42283),h=t(76600),m=t(11585),Z=t(49501),b=t(75903),g=t(77439),v=t(31113),j=t(45307),x=function(e){var r=e.initialValues,t=e.renderFilters,i=e.setFilters,c=e.lastQuery,l=e.filters,x=(0,u.Z)((0,j.X)("form_data_".concat(r.filterType),r),2),y=x[0],_=x[1],w=(0,p.cI)({defaultValues:y||r}),F=w.control,C=w.errors,S=w.handleSubmit,T=w.register,k=w.reset,q=w.watch,U=w.setValue,I=q(),N=(0,s.Z)((0,n.Z)({},I),{filterType:r.filterType});(0,a.useEffect)(function(){k(N)},[k]),(0,a.useEffect)(function(){_(N)},[l]);var R=function(e){var t=e.query;if(t!==c){var s={q:"%".concat(t,"%")||0},u=/^\d+$/.test(t);"id"in r&&(s.id=u?Number(t):null),"meta"in r&&(s.meta=u?{invoiceNumbers:[t]}:null),"jobNumber"in r&&(s.jobNumber=u?String(t):null,s.invoiceNumber=u?Number(t):null),i(function(e){return(0,n.Z)({},e,s)})}},E=function(e){Object.keys(r).map(function(e){return U(e,null)}),i(r),k(r),R("")};return(0,o.jsx)(h.Z,{handleSubmit:S(R),children:(0,o.jsxs)(m.Z,{title:"Filters",children:[(0,o.jsxs)(f.Z,{children:[(0,o.jsx)(d.Z,{sm:12,lg:12,children:(0,o.jsx)(Z.Z,{label:"",children:(0,o.jsx)(b.Z,{errors:C,label:"Search",name:"email",placeholder:"Search...",prependSearchIcon:!0,register:T,type:"search"})})}),(0,o.jsx)(d.Z,{sm:12,lg:12,children:t({control:F,errors:C,initialValues:r,register:T,setFilters:i,watch:q,setValue:U,reset:k})})]}),(0,o.jsx)(v.H,{content:"Search",context:"secondary",handleClick:R,type:"submit",children:(0,o.jsx)(g.Z,{content:"Clear",context:"danger",onClick:E,size:"sm"})})]})})};x.propTypes={initialValues:l.object,renderFilters:l.func.isRequired,setFilters:l.func.isRequired};var y=function(e){var r=e.FiltersComp,t=e.initialFilters,l=e.TableComp,p=(0,i.Z)(e,["FiltersComp","initialFilters","TableComp"]),h=(0,u.Z)((0,j.X)("form_data_".concat(t.filterType),t),2),m=h[0],Z=h[1],b=(0,a.useState)(m||t),g=b[0],v=b[1],y=(0,c.useRouter)().query.show;return(0,a.useEffect)(function(){Z(g)},[g,Z]),(0,o.jsx)(f.Z,{children:(0,o.jsxs)(d.Z,{sm:12,lg:12,children:[(0,o.jsx)(x,{initialValues:t,renderFilters:function(e){return(0,o.jsx)(r,(0,s.Z)((0,n.Z)({},e,p),{show:y}))},setFilters:v,filters:g}),(0,o.jsx)(l,(0,n.Z)({filters:g,initialFilters:t},p))]})})};y.propTypes={FiltersComp:l.func,initialFilters:l.object.isRequired,TableComp:l.func}},95699:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return g}});var n=t(85893),s=t(19076),i=t(66267),u=t(39071),o=t(26042),c=t(69396),a=t(45697),l=t(9270),f=t(62140),d=t(67101),p=t(22378),h=t(15897),m=function(e){var r=e.errors,t=e.register,s=e.setFilters,i={errors:r,register:t};return(0,n.jsxs)(l.Z,{children:[(0,n.jsx)(f.Z,{md:6,children:(0,n.jsx)(d.r,(0,c.Z)((0,o.Z)({},i),{onChange:function(e){return s(function(r){return(0,c.Z)((0,o.Z)({},r),{status:e.target.value||null})})},options:h.bg}))}),(0,n.jsx)(f.Z,{md:6,children:(0,n.jsx)(d.r,(0,c.Z)((0,o.Z)({},i),{name:"accountType",onChange:function(e){return s(function(r){return(0,c.Z)((0,o.Z)({},r),{accountType:e.target.value||null})})},options:p.l}))})]})};m.propTypes={errors:a.object.isRequired,register:a.func.isRequired,setFilters:a.func.isRequired};var Z={accountType:null,q:null,status:"active",filterType:"users_table"},b=function(){return(0,n.jsx)(i.J,{FiltersComp:m,initialFilters:Z,TableComp:u.P})},g=function(){return(0,n.jsx)(s.Z,{pageHeading:{heading:"Users"},View:(0,n.jsx)(b,{})})}}},function(e){e.O(0,[3662,2283,212,8890,9511,2583,6310,4599,4135,7645,3776,1564,2329,778,3054,1023,1417,6540,1870,5037,1352,1207,5497,8980,6557,1662,9774,2888,179],function(){return e(e.s=31328)}),_N_E=e.O()}]);