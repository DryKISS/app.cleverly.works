(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5355],{14843:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/tenant/view",function(){return t(84892)}])},95839:function(e,n,t){"use strict";t.d(n,{W:function(){return u}});var i=t(47568),o=t(7297),r=t(97582),a=t(75063),l=t(35374);function s(){var e=(0,o.Z)(["\n  mutation CreateSupplierPpmInvoicePdf($accountEntryId: Int!) {\n    invoice: createSupplierPpmInvoicePdf(accountEntryId: $accountEntryId) {\n      success\n      key\n    }\n  }\n"]);return s=function(){return e},e}var d,u=(d=(0,i.Z)(function(e){var n,t,i,o,a,s,d,u,m,v,p;return(0,r.__generator)(this,function(r){switch(r.label){case 0:n=e.client,t=e.accountEntryId,i=e.getUrl,r.label=1;case 1:return r.trys.push([1,3,,4]),a="",(0,l.a)()||i||(o=window.open("/download","_blank")),[4,n.mutate({mutation:c,variables:{accountEntryId:t}})];case 2:return u=r.sent().data.invoice.key,i?a="".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(u):(null==o||null===(m=o.location)||void 0===m||m.assign("".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(u)),(null==window?void 0:null===(v=window.Capacitor)||void 0===v?void 0:null===(p=v.Plugins)||void 0===p?void 0:p.Browser)&&window.Capacitor.Plugins.Browser.open({url:"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(u)})),[2,a];case 3:return r.sent(),[3,4];case 4:return[2]}})}),function(e){return d.apply(this,arguments)}),c=(0,a.Ps)(s())},70768:function(e,n,t){"use strict";t.d(n,{I:function(){return m}});var i=t(26042),o=t(69396),r=t(99534),a=t(85893),l=t(5616),s=t(51233),d=t(50135),u=t(90948),c=t(15861),m=function(e){var n=e.leftLabel,t=e.rightLabel,l=e.error,d=(0,r.Z)(e,["leftLabel","rightLabel","error"]);return(0,a.jsxs)(s.Z,{direction:"row",alignItems:"center",children:[(0,a.jsx)(v,{sx:{borderTopLeftRadius:"5px",borderBottomLeftRadius:"5px"},error:l,children:(0,a.jsx)(c.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",whiteSpace:"nowrap"},children:n})}),(0,a.jsx)(p,(0,o.Z)((0,i.Z)({},d),{variant:"outlined",size:"small",error:l})),(0,a.jsx)(v,{sx:{borderTopRightRadius:"5px",borderBottomRightRadius:"5px"},error:l,children:(0,a.jsx)(c.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",whiteSpace:"nowrap"},variant:"body2",fontWeight:700,children:t})})]})},v=(0,u.ZP)(l.Z)(function(e){var n=e.theme;return{display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:e.error?n.palette.danger.main:"#D9D9D9",minwidth:"28px",height:"28px",padding:"0 5px"}}),p=(0,u.ZP)(d.Z)(function(e){var n=e.theme,t=e.error;return{height:"28px","& .MuiInputBase-root ":{borderRadius:"0px","&.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{borderColor:t?n.palette.danger.main:"#D9D9D9"}},"& .MuiInputBase-input":{padding:"2px 14px",borderColor:t?n.palette.danger.main:"#D9D9D9",borderStyle:"solid",borderBottomWidth:"2.5px",borderTopWidth:"2px"},"& .MuiOutlinedInput-notchedOutline":{border:"none"}}}})},246:function(e,n,t){"use strict";t.d(n,{A:function(){return U}});var i=t(26042),o=t(69396),r=t(828),a=t(85893),l=t(67294),s=t(30381),d=t.n(s),u=t(45697),c=t(11163),m=t.n(c),v=t(57460),p=t.n(v),f=t(96486),h=t(11057),g=t(90629),x=t(51233),b=t(15861),y=t(98456),I=t(81261),j=t(29952),w=t(34187),Z=t(45451),C=t(59505),_=t(21830),N=t(48795),A=t(6812),$=t(73359),P=t(7297),S=t(75063);function k(){var e=(0,P.Z)(['\n  query GetFinancialJob(\n    $adminId: Int\n    $customerId: Int\n    $endDate: timestamptz\n    $startDate: timestamptz\n    $limit: Int\n    $status: [String]\n    $managerId: Int\n    $locationId: Int\n    $offset: Int\n    $supplierId: Int\n    $q: String\n    $orderBy: Job_order_by!\n    $sublocationId: Int\n    $userId: Int\n  ) {\n    jobs: Job(\n      limit: $limit\n      offset: $offset\n      where: {\n        type: { _in: ["reactive", "ppm"] }\n        _and: [\n          {\n            _or: [\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { Invoices: { invoiceNumber: { _ilike: $q } } }\n            ]\n          }\n          {\n            _or: [\n              { _and: [{ timingStart: { _gte: $startDate } }, { timingStart: { _lte: $endDate } }] }\n              { _and: [{ scheduledAt: { _gte: $startDate } }, { scheduledAt: { _lte: $endDate } }] }\n            ]\n          }\n        ]\n        status: { _in: $status }\n        customerId: { _eq: $customerId }\n        supplierId: { _eq: $supplierId }\n        managerId: { _eq: $managerId }\n        adminId: { _eq: $adminId }\n        locationId: { _eq: $locationId }\n        sublocationId: { _eq: $sublocationId }\n        _or: [{ customerUserId: { _eq: $userId } }, { supplierUserId: { _eq: $userId } }]\n        ','\n      }\n      order_by: [$orderBy]\n    ) {\n      id\n      type\n      number\n      status\n      description\n      reference\n      timingStart\n      scheduledAt\n      createdAt\n      customerTotal: customerFinances(path: "amountInfo.total")\n      supplierTotal: supplierFinances(path: "amountInfo.total")\n      customerVatTotal: customerFinances(path: "amountInfo.vatTotal")\n      supplierVatTotal: supplierFinances(path: "amountInfo.vatTotal")\n      customerExpensesTotal: customerFinances(path: "expensesInfo.expensesTotal")\n      supplierExpensesTotal: supplierFinances(path: "expensesInfo.expensesTotal")\n      customerRebateAmount: customerFinances(path: "rebate.amount")\n      slaId\n      tags: Taxonomy(\n        where: {\n          entity: { _eq: "Job" }\n          Taxonomy: { status: { _eq: "active" }, type: { _eq: "tags" } }\n        }\n      ) {\n        id\n        tag: Taxonomy {\n          id\n          name\n          meta\n          type\n        }\n      }\n      invoices: Invoices(order_by: { createdAt: desc }) {\n        invoiceNumber\n        outstandingAmounts: AccountEntry {\n          amount: outstandingAmount\n        }\n      }\n      customer: Customer {\n        id\n        name\n      }\n      supplier: Supplier {\n        id\n        name\n      }\n      location: Location {\n        id\n        name\n      }\n      sublocation: Sublocation {\n        id\n        name\n      }\n      sla: SLA {\n        name\n      }\n      manager: Manager {\n        fullName\n        nameLast\n        nameFirst\n        id\n      }\n      service: Service {\n        id\n        name\n      }\n    }\n    meta: Job_aggregate(\n      where: {\n        type: { _in: ["reactive", "ppm"] }\n        _and: [\n          {\n            _or: [\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { Invoices: { invoiceNumber: { _ilike: $q } } }\n            ]\n          }\n          {\n            _or: [\n              { _and: [{ timingStart: { _gte: $startDate } }, { timingStart: { _lte: $endDate } }] }\n              { _and: [{ scheduledAt: { _gte: $startDate } }, { scheduledAt: { _lte: $endDate } }] }\n            ]\n          }\n        ]\n        status: { _in: $status }\n        customerId: { _eq: $customerId }\n        supplierId: { _eq: $supplierId }\n        managerId: { _eq: $managerId }\n        adminId: { _eq: $adminId }\n        locationId: { _eq: $locationId }\n        sublocationId: { _eq: $sublocationId }\n        _or: [{ customerUserId: { _eq: $userId } }, { supplierUserId: { _eq: $userId } }]\n        ',"\n\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"]);return k=function(){return e},e}var T=function(e){var n=e.tagsWhere,t=void 0===n?"":n;return(0,S.Ps)(k(),t,t)},D=t(16605),F=t(91027),q=t(26186),R=t(11082),M=function(e,n,t){var i=t.numberPrefix,o=void 0===i?"":i,r=t.numberSuffix,a=void 0===r?"":r,l="customer"===n,s="supplier"===n;return e.map(function(e){var n,t,i,r,d,u,c,m,v,p,f,h,g,x,b,y,I,j,w,Z=e.manager?"".concat(e.manager.nameFirst," ").concat(e.manager.nameLast):"Unassigned",C=e.scheduledAt?(0,q.Z)(e.scheduledAt,!0):e.timingStart?(0,q.Z)(e.timingStart,!0):"-",_=e.customerRebateAmount>0?e.customerVatTotal-e.customerRebateAmount-e.supplierTotal:e.customerTotal-e.supplierTotal;return s?{id:"".concat(o," ").concat(e.number," ").concat(a),type:e.type,invoiceNumber:(null===(n=e.invoices)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.invoiceNumber)||"-",priority:(null===(i=e.sla)||void 0===i?void 0:i.name)||"-",service:(null===(r=e.service)||void 0===r?void 0:r.name)||"-",description:e.description||"-",location:(null===(d=e.location)||void 0===d?void 0:d.name)||"-",sublocation:(null===(u=e.sublocation)||void 0===u?void 0:u.name)||"-",scheduleDate:C,created:(0,q.Z)(e.createdAt),status:e.status}:l?{id:"".concat(o," ").concat(e.number," ").concat(a),type:e.type,invoiceNumber:(null===(c=e.invoices)||void 0===c?void 0:null===(m=c[0])||void 0===m?void 0:m.invoiceNumber)||"-",ref:e.reference,jobTotal:(0,R.Z)(e.customerVatTotal)||0,expensesAmountCustomer:(0,R.Z)(e.customerExpensesTotal)||0,priority:(null===(v=e.sla)||void 0===v?void 0:v.name)||"-",service:(null===(p=e.service)||void 0===p?void 0:p.name)||"-",description:e.description||"-",manager:Z,location:(null===(f=e.location)||void 0===f?void 0:f.name)||"-",sublocation:(null===(h=e.sublocation)||void 0===h?void 0:h.name)||"-",scheduleDate:C,created:(0,q.Z)(e.createdAt),status:e.status}:{id:"".concat(o," ").concat(e.number," ").concat(a),type:e.type,invoiceNumber:(null===(g=e.invoices)||void 0===g?void 0:null===(x=g[0])||void 0===x?void 0:x.invoiceNumber)||"-",ref:e.reference,jobTotal:(0,R.Z)(e.customerVatTotal)||0,expensesAmountCustomer:(0,R.Z)(e.customerExpensesTotal)||0,supplierAmount:(0,R.Z)(e.supplierVatTotal)||0,expensesAmountSupplier:(0,R.Z)(e.supplierExpensesTotal)||0,revenue:(0,R.Z)(_)||0,priority:(null===(b=e.sla)||void 0===b?void 0:b.name)||"-",service:(null===(y=e.service)||void 0===y?void 0:y.name)||"-",description:e.description||"-",manager:Z,location:(null===(I=e.location)||void 0===I?void 0:I.name)||"-",sublocation:(null===(j=e.sublocation)||void 0===j?void 0:j.name)||"-",supplier:(null===(w=e.supplier)||void 0===w?void 0:w.name)||"-",scheduleDate:C,created:(0,q.Z)(e.createdAt),status:e.status}})},E=t(74944),W=t(53767),L=t(35374),V=t(12632),B=t(83162),O=t(79928),z=t(71559),U=function(e){var n,t,s=e.initialFilters,u=e.entityRelationToFetch,v=e.filtersVisibilityModel,P=e.columnVisibilityModel,S=(0,E.x)(),k=S.user,q=S.hasRole,R=(0,W.q)(),U=(null===(n=R.admin.jobSetting)||void 0===n?void 0:n.jobNumberPrefix)||"",Y=(null===(t=R.admin.jobSetting)||void 0===t?void 0:t.jobNumberSuffix)||"",G=(0,c.useRouter)().pathname,H=(0,l.useState)(!1),Q=H[0],X=H[1],K=(0,l.useState)((0,i.Z)({},s)),ee=K[0],en=K[1],et=(0,L.s)(),ei=(0,V.x)({filters:ee}),eo=ei.initialData,er=ei.ref,ea=(0,A.a)(T({tagsWhere:(0,z.Y)(eo.tags)}),{variables:(0,o.Z)((0,i.Z)({},eo,u),{number:eo.id?String(eo.id):null,startDate:eo.startDate,endDate:eo.endDate,adminId:k.adminId})}),el=ea.data,es=void 0===el?{jobs:[],meta:{aggregate:{totalCount:0}}}:el,ed=es.jobs,eu=es.meta,ec=ea.loading,em=ea.refetch,ev=eo.customerId,ep=eo.endDate,ef=eo.locationId,eh=eo.orderBy,eg=eo.startDate,ex=eo.status,eb=eo.supplierId,ey=(0,r.Z)((0,$.t)(T({tagsWhere:(0,z.Y)(eo.tags)}),{variables:{adminId:k.adminId,customerId:ev,endDate:ep,locationId:ef,orderBy:eh,startDate:eg,status:ex,supplierId:eb},onCompleted:function(e){var n,t=M(e.jobs,k.accountType,{numberPrefix:U,numberSuffix:Y}),i=(null===(n=e.jobs[0])||void 0===n?void 0:n.id)||"New-report",o=p().unparse(t),r="data:application/octet-stream,"+encodeURIComponent(o);(0,D.S)(r,"".concat(i,"-work-orders.csv"))}}),2),eI=ey[0],ej=ey[1].loading,ew=function(e){m().push("".concat("/dashboard/issues/","manage?id=").concat(e.number))},eZ=function(e){m().push("/dashboard/issues/view?id=".concat(e.number))},eC=function(e){return d()(e).format("YYYY-MM-DD")},e_=function(e){var n=[{context:"secondary",icon:"info",onClick:function(n){return eZ(e)},tooltip:"Info"}];return q("admin")&&n.unshift({context:"secondary",icon:"edit",onClick:function(n){return ew(e)},tooltip:"Edit"}),n},eN=[{headerName:"Job ID",field:"jobId",sortable:!1,flex:1,minWidth:100,renderCell:function(e){var n=e.row;return(0,a.jsx)(N.D,{id:n.id,number:n.number,openCanvas:!0,type:n.type,numberPrefix:U,numberSuffix:Y})}},{headerName:"Invoice number",field:"invoiceNumber",sortable:!1,flex:1,minWidth:100},{headerName:"Reference",field:"ref",sortable:!1,flex:1,minWidth:100},{minWidth:300,field:"tags",headerName:"Tags",sortable:!1,renderCell:function(e){var n=e.row;return(0,a.jsx)(O.K,{row:n,refetchQueries:["GetFinancialJob"],entity:"Job"})}},{headerName:"Service",field:"service",sortName:'{"Service": {"name": "ORDER"}}',flex:1,minWidth:100},{headerName:"Priority",field:"priority",sortName:'{"SLA": {"name": "ORDER"}}',flex:1,minWidth:100},{headerName:"Customer",field:"customer",minWidth:200,flex:1,renderCell:function(e){var n,t,i=e.row;return(0,a.jsx)(B.r,{color:"secondary",href:"/dashboard/customers/view?id=".concat(null===(n=i.customer)||void 0===n?void 0:n.id),noWrap:!i.customer,children:(null===(t=i.customer)||void 0===t?void 0:t.name)||"-"})}},{headerName:"Location",field:"location",minWidth:300,flex:1,renderCell:function(e){var n,t,i=e.row;return(0,a.jsx)(B.r,{color:"secondary",href:"/dashboard/properties/view?id=".concat(null===(n=i.location)||void 0===n?void 0:n.id),noWrap:!i.location||q(["supplier","tenant"]),children:(null===(t=i.location)||void 0===t?void 0:t.name)||"-"})}},{headerName:"Customer (NET)",field:"customerNet",minWidth:150,sortable:!1,flex:1,valueFormatter:function(e){var n=e.value;return"\xa3".concat((+(null!=n?n:0)).toFixed(2))}},{headerName:"Amount Outstanding",field:"amountOutstanding",sortable:!1,minWidth:150,flex:1,valueFormatter:function(e){var n=e.value;return"\xa3".concat((+(null!=n?n:0)).toFixed(2))}},{headerName:"Supplier (NET)",field:"supplierNet",minWidth:150,sortable:!1,flex:1,valueFormatter:function(e){var n=e.value;return"\xa3".concat((+(null!=n?n:0)).toFixed(2))}},{headerName:q("admin")?"Net Revenue":"Revenue",field:"revenue",minWidth:150,sortable:!1,flex:1,valueFormatter:function(e){var n=e.value;return"\xa3".concat((+(null!=n?n:0)).toFixed(2))}},{headerName:"Scheduled",field:"scheduleDate",minWidth:130,flex:1},{headerName:"Created",field:"date",flex:1,minWidth:100},{headerName:"Supplier",field:"supplier",sortName:'{"Supplier": {"name": "ORDER"}}',flex:1,minWidth:140,renderCell:function(e){var n,t,i=e.row;return(0,a.jsx)(B.r,{color:"secondary",noWrap:!q("admin")||!i.supplier,href:"/dashboard/suppliers/view?id=".concat(null===(n=i.supplier)||void 0===n?void 0:n.id),children:(null===(t=i.supplier)||void 0===t?void 0:t.name)||""})}},{headerName:"Status",field:"status",flex:1,minWidth:100,renderCell:function(e){var n=e.row;return(0,a.jsx)(C.B,{value:n.status})}},{headerName:"Actions",field:"actions",sortable:!1,minWidth:130,flex:1,renderCell:function(e){var n=e.row;return(0,a.jsx)(_.C,{actionsData:e_,row:n})}}],eA=(0,l.useMemo)(function(){return null==ed?void 0:ed.map(function(e){var n,t,i,o,r,a=e.scheduledAt?eC(e.scheduledAt,!0):e.timingStart?eC(e.timingStart,!0):"-",l=e.customerRebateAmount>0?e.customerVatTotal-e.customerRebateAmount-e.supplierTotal:e.customerTotal-e.supplierTotal;return{id:e.id,jobId:"J ".concat(e.number," "),type:e.type,number:e.number,invoiceNumber:(null===(n=e.invoices)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.invoiceNumber)||"-",amountOutstanding:null==e?void 0:null===(i=e.invoices)||void 0===i?void 0:i.reduce(function(e,n){var t;return e+((null==n?void 0:null===(t=n.outstandingAmounts)||void 0===t?void 0:t.amount)||0)},0),ref:e.reference||"-",description:e.description||"-",service:(null===(o=e.service)||void 0===o?void 0:o.name)||"-",priority:(null===(r=e.sla)||void 0===r?void 0:r.name)||"-",location:e.location,customerNet:null==e?void 0:e.customerTotal,supplierNet:null==e?void 0:e.supplierTotal,supplier:null==e?void 0:e.supplier,tags:e.tags,revenue:l||0,scheduleDate:a,customer:null==e?void 0:e.customer,date:eC(e.createdAt),status:e.status}})},[ed]),e$=(0,l.useCallback)(function(e){e.stopPropagation();var n=(0,F.Uu)(ee);m().push("/dashboard/issues/manage".concat(n))},[ee]),eP=(0,l.useMemo)(function(){var e={};return eA.length||f.isEqual(ee,s)?{title:"No work orders",subtitleFirstLine:"You currently have no work orders set up in the system",subtitleSecondLine:"Click create work orders to get started building.",buttonText:"Create work orders",onAction:e$}:{title:"No results",subtitleFirstLine:"The filters you have applied have returned no results",subtitleSecondLine:"Please amend and try again if necessary."}},[ee,e$,s,eA]),eS=(0,i.Z)({ref:q(["admin","customer"]),service:q(["admin","customer"]),customerNet:q(["admin","customer"]),amountOutstanding:q(["admin","customer"]),supplierNet:q(["admin","supplier"]),revenue:q("admin"),supplier:q("admin"),tags:q("admin"),customer:G.includes("suppliers")&&q("admin")},P);return(0,a.jsxs)(a.Fragment,{children:[Q&&(0,a.jsx)(j.h,{initialFilters:s,open:Q,setFilters:en,setOpen:X,filtersVisibilityModel:v}),(0,a.jsxs)(x.Z,{spacing:2,sx:J.header,children:[(0,a.jsxs)(x.Z,{width:"100%",direction:"row",justifyContent:"space-between",children:[(0,a.jsx)(h.Z,{variant:"contained",startIcon:(0,a.jsx)(I.Z,{}),onClick:function(){return X(!0)},children:"Filters"}),(0,a.jsxs)(x.Z,{direction:"row",spacing:2,children:[!q(["supplier","tenant"])&&(0,a.jsx)(h.Z,{variant:"contained",color:"secondary",onClick:e$,children:"Create Work Order"}),!et&&(0,a.jsx)(h.Z,{startIcon:!ej&&(0,a.jsx)("img",{src:"/static/icons/csv.svg"}),disabled:ej,variant:"contained",color:"success",onClick:function(e){e.stopPropagation(),eI()},children:ej?(0,a.jsx)(y.Z,{size:20,color:"secondary"}):"Export"})]})]}),(0,a.jsxs)(g.Z,{sx:J.tableContainer,children:[(0,a.jsx)(b.Z,{ml:2,variant:"h5",sx:J.title,children:"Work Orders"}),(null==eA?void 0:eA.length)?(0,a.jsx)(Z.i,{ref:er,loading:ec,columns:eN,rows:eA,columnVisibilityModel:eS,meta:eu,refetch:em,autoHeight:!1,onRowClick:eZ,containerHeight:"calc(100% - 52px)"}):!ec&&(0,a.jsx)(w.C,(0,i.Z)({imageSrc:"/static/icons/no_locations_found.svg"},eP))]})]})]})},J={header:{width:"100%",height:"100%"},tableContainer:{padding:"16px 0px",height:"calc(80vh - 22px)"},title:{fontWeight:600,marginBottom:"15px"}};U.propTypes={filters:u.object},U.defaultProps={filters:{assetId:null,managerId:null},columnVisibilityModel:{}}},96715:function(e,n,t){"use strict";t.d(n,{il:function(){return r},j$:function(){return i},wo:function(){return o}});var i=function(e,n){if(Array.isArray(n)){var t,i,o=null;return n.forEach(function(n){var t,i,r=null===(t=e.timings)||void 0===t?void 0:t.find(function(e){return e.status===n});o=(null==r?void 0:null===(i=r.user)||void 0===i?void 0:i.fullName)||o}),o}var r=null===(t=e.timings)||void 0===t?void 0:t.find(function(e){return e.status===n});return(null==r?void 0:null===(i=r.user)||void 0===i?void 0:i.fullName)||null},o=function(e,n){if(Array.isArray(n)){var t,i=null;return n.forEach(function(n){var t,o=null===(t=e.timings)||void 0===t?void 0:t.find(function(e){return e.status===n});i=(null==o?void 0:o.id)||i}),i}var o=null===(t=e.timings)||void 0===t?void 0:t.find(function(e){return e.status===n});return(null==o?void 0:o.id)||null},r=function(e,n){return!e||e>n}},57779:function(e,n,t){"use strict";t.d(n,{G:function(){return E}});var i=t(26042),o=t(69396),r=t(85893),a=t(45697),l=t.n(a),s=t(6812),d=t(92711),u=t(45451),c=t(11013),m=t(3770),v=t(452),p=t(40826),f=function(e,n){var t=function(){return(0,r.jsx)(p.Z,{context:"success",icon:"check",size:"sm",title:"Yes"})},i=function(){return(0,r.jsx)(p.Z,{context:"warning",icon:"times",size:"sm",title:"No"})},o=function(){return(0,r.jsx)(p.Z,{context:"dark",icon:"minus",size:"sm",title:"Unavailable"})};return"image"===e?(null==n?void 0:n.thumbnails)&&(null==n?void 0:n.thumbnails.length)?t:i:o},h=t(12632),g=t(74944),x=t(86532),b=t(22797),y=t(38895),I=t(5616),j=t(11057),w=t(51233),Z=t(21023),C=t(15861),_=t(14924),N=t(70872),A=t(58886),$=t(90948),P=t(67294),S=t(77314),k=(0,t(42850).bH)(S.ZP),T=function(e){var n=e.images,t=e.showPagination,o=e.height,a=(0,P.useState)(0),l=a[0],s=a[1],d=function(e){s(e)};return(0,r.jsxs)(w.Z,{width:"100%",alignItems:"center",children:[(0,r.jsx)(k,{index:l,onChangeIndex:d,enableMouseEvents:!0,interval:1e4,children:n.map(function(e){return(0,r.jsx)(I.Z,{component:"img",sx:{height:o,display:"block",overflow:"hidden",width:"100%",objectFit:"cover"},src:e.filename,alt:e.caption},e.caption)})}),t&&n.length>1&&(0,r.jsx)(D,{page:l+1,count:n.length,onChange:function(e,n){return d(n-1)},variant:"outlined",shape:"rounded",renderItem:function(e){return(0,r.jsx)(A.Z,(0,i.Z)({slots:{previous:function(){return"Previous"},next:function(){return"Next"}}},e))}})]})};T.defaultProps={images:[],showPagination:!0},T.propTypes={height:l().oneOfType([l().string,l().number]),images:l().arrayOf(l().shape({caption:l().string,filename:l().string.isRequired}).isRequired).isRequired,showPagination:l().bool};var D=(0,$.ZP)(N.Z)(function(e){e.hidePrevButton,e.hideNextButton;var n,t=e.theme;return n={},(0,_.Z)(n,"&.MuiPagination-root",{alignSelf:"center",marginTop:"16px"}),(0,_.Z)(n,"& .MuiPaginationItem-root",{fontWeight:600,margin:0,borderRadius:0}),(0,_.Z)(n,"& .MuiPagination-ul > li:last-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"0 5px 5px 0"}),(0,_.Z)(n,"& .MuiPagination-ul > li:first-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"5px 0 0 5px"}),(0,_.Z)(n,"& button.Mui-selected",{color:t.palette.white.main,backgroundColor:t.palette.secondary.main}),n}),F=t(27434),q=t(21830),R=t(83162),M=t(74492),E=function(e){var n=e.carousel,t=e.category,a=e.data,l=e.entity,p=e.entityId,_=e.filters,N=e.listView,A=e.mediaMeta,$=e.onMediaAdd,P=e.onMediaRemove,S=e.showActionButtons,k=e.showEntityColumn,D=e.showItemActions,E=e.title,W=e.type,L=e.expanded,V=e.onChangeExpanded,B=e.hideExpandIcon,O=e.mediaFormProps,z=e.offCanvasProps,U=e.onlySingleMedia,J=e.elevation,Y=e.accordionSx,G=e.refetch,H=(0,h.x)({filters:_}),Q=H.initialData,X=H.ref,K=(0,g.x)(),ee=K.hasRole,en=K.user,et=(0,M.a)(),ei=(0,s.a)(d.t,{variables:(0,o.Z)((0,i.Z)({},Q),{entity:l,entityId:p,category:t,adminId:en.adminId,meta:A})}),eo=ei.data,er=void 0===eo?{items:[],meta:{aggregate:{totalCount:0}}}:eo,ea=er.items,el=er.meta,es=ei.loading,ed=ei.refetch,eu=function(e){et.close(),a.length||ed();var n=e.map(function(e){return(0,o.Z)((0,i.Z)({},e),{link:"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(e.filename)})});$&&$(n),G&&G()},ec=function(e){et.close(),a.length||ed(),P&&P(e),G&&G()},em=function(e){e.stopPropagation(),et.show((0,i.Z)({content:(0,r.jsx)(v.z,(0,i.Z)({accept:"image/*",adminId:en.adminId,category:t,entity:l,entityId:p,expiryShow:!1,mediaMeta:A,multiple:!0,onSuccess:eu,type:"image"},O)),title:"Upload Photos"},z))},ev=function(e){e.stopPropagation(),et.show((0,i.Z)({content:(0,r.jsx)(v.z,(0,i.Z)({accept:".pdf, .doc, .docx, .xlsx",adminId:en.adminId,category:t,entity:l,entityId:p,expiryShow:!1,mediaMeta:A,onSuccess:eu,type:"document"},O)),title:"Upload Documents"},z))},ep=function(e){et.show({content:(0,r.jsx)(c.d,{mediaId:e.data.id,onSuccess:ec}),submit:!1,title:"Delete Media"})},ef=function(e){et.show({content:(0,r.jsx)(m.z,{media:e.data,toggleShow:et.close}),title:"Media Details"})},eh=function(e){return[{context:"primary",icon:"info",onClick:function(n){return ef(e)},tooltip:"Details"},{context:"danger",icon:"delete",onClick:function(n){return ep(e)},tooltip:"Delete"}]},eg=[{field:"file",headerName:"File",flex:1,sortable:!1,renderCell:function(e){var n=e.row,t=e.value;return(0,r.jsx)(R.r,{color:"secondary",onClick:function(e){e.preventDefault(),window.open("".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(n.filename))},children:t})}},{field:"visibility",headerName:"Visible to",flex:1,sortable:!1},{hide:!k,field:"entity",headerName:"Entity",flex:1,sortable:!1},{field:"authority",headerName:"",width:50,sortable:!1,renderCell:function(e){var n=e.value;return(0,r.jsx)(r.Fragment,{children:(null==n?void 0:n.adminOnly)&&(0,r.jsx)(Z.Z,{title:"Admin user only",children:(0,r.jsx)(I.Z,{component:"img",alt:"Admin Only",src:"/messaging/admin-only.svg",sx:{height:"24px"}})})})}},{field:"uploaded",headerName:"Uploaded by",flex:1,sortable:!1},{hide:!N,field:"thumbnails",headerName:"Thumbnails",flex:1,sortable:!1,renderCell:function(e){var n=e.value;return"function"==typeof n?n():n}},{hide:!D,field:"actions",headerName:"",width:50,sortable:!1,renderCell:function(e){var n=e.row;return ee("admin")?(0,r.jsx)(q.C,{actionsData:eh,row:n}):en.id===n.userId?(0,r.jsx)(q.C,{actionsData:eh,row:n}):null}}],ex=[],eb=ea.filter(function(e){var n=e.item;return(null==n?void 0:n.visibility)&&ee(null==n?void 0:n.visibility)}).map(function(e){var n=e.entity,t=e.entityId,i=e.id,o=e.item,r=o.caption,a=o.filename,l=o.meta,s=o.name,d=o.type,u=o.user,c=o.visibility;return{data:o,id:i,userId:null==u?void 0:u.id,filename:a,visibility:c.join(", "),file:r||s||a,entity:n&&"".concat(n,"#").concat(t),authority:l,uploaded:"".concat(null==u?void 0:u.nameFirst," ").concat(null==u?void 0:u.nameLast),thumbnails:f(d,l),actions:""}}),ey=(ea.filter(function(e){var n=e.item;return(null==n?void 0:n.visibility)&&ee(null==n?void 0:n.visibility)}).forEach(function(e){var n=e.item,t=n.caption,i=n.filename;"image"===n.type&&ex.push({caption:t,filename:"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(i)})}),ex),eI=ey.length;return(0,r.jsxs)(x.Z,{elevation:J,expanded:L,onChange:V,sx:Y,children:[(0,r.jsx)(y.Z,(0,o.Z)((0,i.Z)({},B?{}:{expandIcon:(0,r.jsx)(F.Z,{})}),{children:(0,r.jsx)(C.Z,{variant:"h6",children:E})})),(0,r.jsxs)(b.Z,{children:[n&&eI>0&&(0,r.jsx)(T,{height:"200px",images:ey}),(0,r.jsx)(u.i,{columns:eg,rows:eb,loading:es,meta:el,ref:X,refetch:ed,columnVisibilityModel:{entity:k,thumbnails:N,actions:D}}),S&&!(U&&eb.length>0)&&(0,r.jsxs)(w.Z,{direction:"row",justifyContent:"center",spacing:2,mt:2,children:[(!W||"document"===W)&&(0,r.jsx)(j.Z,{variant:"contained",color:"secondary",onClick:ev,children:"Add Document"}),(!W||"image"===W||"avatar"===W)&&(0,r.jsxs)(j.Z,{variant:"contained",color:"secondary",onClick:em,children:["Add ",W?"".concat(W.charAt(0).toUpperCase()).concat(W.slice(1)):"Image"]})]})]})]})};E.propTypes={carousel:l().bool,category:l().string,data:l().array,entity:l().string,entityId:l().number,filters:l().object,listView:l().bool,mediaMeta:l().object,onMediaAdd:l().func,onMediaRemove:l().func,showActionButtons:l().bool,showEntityColumn:l().bool,showItemActions:l().bool,title:l().string,type:l().string,expanded:l().bool,onChangeExpanded:l().func,hideExpandIcon:l().bool,mediaFormProps:l().object,offCanvasProps:l().object,onlySingleMedia:l().bool,elevation:l().number,accordionSx:l().object,refetch:l().func},E.defaultProps={carousel:!0,data:[],filters:{},listView:!1,mediaMeta:null,showActionButtons:!0,showEntityColumn:!1,showItemActions:!0,title:"Media",type:null,onChangeExpanded:function(){},mediaFormProps:{},offCanvasProps:{},category:"media",onlySingleMedia:!1,elevation:1,accordionSx:{},refetch:function(){}}},32725:function(e,n,t){"use strict";t.d(n,{E:function(){return B}});var i=t(47568),o=t(26042),r=t(828),a=t(97582),l=t(85893),s=t(67294),d=t(45697),u=t(6812),c=t(50319),m=t(7297),v=t(75063);function p(){var e=(0,m.Z)(["\n  query GetNote($entityId: Int!) {\n    note: Note(where: { entityId: { _eq: $entityId } }, order_by: { createdAt: desc }) {\n      accountId\n      comments\n      createdAt\n      id\n      userId\n      user: User {\n        nameFirst\n        nameLast\n      }\n    }\n  }\n"]);return p=function(){return e},e}function f(){var e=(0,m.Z)(["\n  mutation AddNote(\n    $accountId: Int\n    $comments: String\n    $entity: String\n    $entityId: Int\n    $userId: Int\n  ) {\n    insert_Note(\n      objects: {\n        accountId: $accountId\n        comments: $comments\n        entity: $entity\n        entityId: $entityId\n        userId: $userId\n      }\n    ) {\n      returning {\n        id\n        comments\n      }\n    }\n  }\n"]);return f=function(){return e},e}function h(){var e=(0,m.Z)(["\n  mutation UpdateNote($id: Int!, $change: Note_set_input) {\n    update_Note_by_pk(pk_columns: { id: $id }, _set: $change) {\n      id\n      comments\n    }\n  }\n"]);return h=function(){return e},e}var g=(0,v.Ps)(p()),x=(0,v.Ps)(f()),b=(0,v.Ps)(h()),y=t(78289),I=t(16551),j=t(77439),w=t(11585),Z=t(86036),C=t(69396),_=t(42283),N=t(79665),A=t(76600),$=t(9270),P=t(62140),S=t(49501),k=t(6710),T=t(55563),D=t(16310),F=(0,D.Ry)().shape({comments:(0,D.Z_)().required()}),q=function(e){var n=e.defaultValues,t=e.onSubmit,i=(0,_.cI)({defaultValues:(0,o.Z)({},n),resolver:(0,N.S)(F)}),r=i.control,a=i.errors,s=i.handleSubmit,d={control:r,errors:a,register:i.register};return(0,l.jsxs)(A.Z,{id:"offCanvasForm",handleSubmit:s(t),children:[(0,l.jsx)($.Z,{children:(0,l.jsx)(P.Z,{md:12,children:(0,l.jsx)(S.Z,{label:"Title",children:(0,l.jsx)(k.Z,(0,C.Z)((0,o.Z)({},d),{name:"comments",rows:4}))})})}),n.id&&(0,l.jsx)(T.Z,(0,C.Z)((0,o.Z)({},d),{name:"id",type:"hidden"}))]})};q.propTypes={defaultValues:d.object,onSubmit:d.func.isRequired};var R=t(68956),M=t(26186),E=t(55843),W=t(16540),L=function(e){var n=e.note,t=e.loading,i=e.handleClick,o=e.userId,r=[{hidden:!0},{hidden:!0},{text:"Title"},{text:"By"},{text:"Created"},{formatter:R.Z,formatterData:function(e){return[{context:"secondary",disabled:o!==e.userId,icon:["fas","edit"],onClick:function(e,n){return i(e,n)},tooltip:"Edit"}]},text:"Actions"}];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(E.Z,{marginBottom:"xs"}),(0,l.jsx)(W.Z,{columns:r,loading:t,rows:n.map(function(e){var n,t;return{id:e.id,userId:e.userId,comments:e.comments,user:"".concat(null===(n=e.user)||void 0===n?void 0:n.nameFirst," ").concat(null===(t=e.user)||void 0===t?void 0:t.nameLast),date:(0,M.Z)(e.createdAt),actions:""}})})]})};L.propTypes={userId:d.number.isRequired,note:d.array.isRequired,loading:d.bool.isRequired,handleClick:d.func.isRequired},L.defaultProps={note:[]};var V=t(74944),B=function(e){var n,t=e.entity,d=e.entityId,m=(e.open,e.title),v=e.single,p=(0,s.useContext)(y.Z),f=(0,V.x)().user,h=(0,u.a)(g,{variables:{entity:t,entityId:d}}),C=h.loading,_=h.data,N=(void 0===_?{note:[]}:_).note,A=h.refetch,$=(0,r.Z)((0,c.D)(x,{onCompleted:function(){p.close(),A()}}),1)[0],P=(0,r.Z)((0,c.D)(b,{onCompleted:function(){p.close(),A()}}),1)[0],S=(n=(0,i.Z)(function(e){return(0,a.__generator)(this,function(n){switch(n.label){case 0:if(!e.id)return[3,2];return[4,P({variables:{id:e.id,change:e}})];case 1:return n.sent(),[3,4];case 2:return e.accountId=f.accountId,e.entity=t,e.entityId=d,e.userId=f.id,[4,$({variables:e})];case 3:n.sent(),n.label=4;case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),k=function(e,n){e.preventDefault(),e.stopPropagation();var t=(0,o.Z)({},n);p.show({content:(0,l.jsx)(q,{defaultValues:t,onCancel:T,onSubmit:S}),title:n?"Edit note":"Add note"})},T=function(){p.close()},D=function(){return(0,l.jsx)(I.Z,{children:v&&N.length?(0,l.jsx)(j.Z,{context:"secondary",content:"Edit",onClick:function(e){return k(e,N[0])},size:"sm"}):(0,l.jsx)(j.Z,{context:"secondary",content:"Add new",onClick:k,size:"sm"})})};return(0,l.jsxs)(w.Z,{fitParentHeight:!0,title:m,toolbar:(0,l.jsx)(D,{}),children:[v&&N.length>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Z.Z,{text:N[0].comments}),(0,l.jsx)(Z.Z,{content:"By",text:"".concat(N[0].user.nameFirst," ").concat(N[0].user.nameLast)})]}),!v&&(0,l.jsx)(L,{entity:t,entityId:d,note:N,loading:C,refetch:A,handleClick:k,userId:f.id})]})};B.propTypes={entity:d.string.isRequired,entityId:d.number.isRequired,single:d.bool,title:d.string},B.defaultProps={open:!0,single:!1,title:"Note"}},19504:function(e,n,t){"use strict";t.d(n,{l:function(){return i}});var i=function(e,n){var t=Math.pow(10,n);return Math.round(e*t)/t}},4438:function(e,n,t){"use strict";t.d(n,{SR:function(){return a},Tq:function(){return l},YK:function(){return r},cJ:function(){return o},pX:function(){return i}});var i=["customerVat","supplier"],o=["ProformaInvoiceCustomer","ProformaInvoiceSupplier"],r=["customerPpmInvoice","supplierPpmInvoice"],a={customer:["customerVat","ProformaInvoiceCustomer","customerPpmInvoice"],supplier:["supplier","ProformaInvoiceSupplier","supplierPpmInvoice"]},l={customerVat:"Customer VAT Invoice",supplier:"Supplier Invoice",ProformaInvoiceCustomer:"Customer ad-hoc Invoice",ProformaInvoiceSupplier:"Supplier ad-hoc Invoice",customerPpmInvoice:"PPM Customer Invoice",supplierPpmInvoice:"PPM Supplier Invoice"}},58632:function(e,n,t){"use strict";t.d(n,{x:function(){return i}});var i=[{text:"Reactive",value:"reactive",context:"#2EE6CA"},{text:"Planned Maintenance",value:"ppm",context:"#D67EFF"},{text:"Quote",value:"quote",context:"#7D7"},{text:"Compliance",value:"cppm",context:"#CC7429"}]},84892:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return D}});var i=t(85893),o=t(11163),r=t.n(o),a=t(67294),l=t(6812),s=t(41085),d=t(45697),u=t(9270),c=t(62140),m=t(11585),v=t(16540),p=t(74280),f=t(32725),h=t(81777),g=t(19611),x=t(56236),b=t(26535),y=t(74944),I=function(e){var n,t,o,r,a,l,s,d,I,j,w=e.tenant,Z=e.refetch,C=e.location,_=(0,y.x)().hasRole,N=(0,b.WE)(C,"registered"),A=C.createdAt;return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(u.Z,{children:(0,i.jsxs)(c.Z,{md:4,children:[(0,i.jsx)(h.g,{avatar:(0,p.Q)(null===(n=C.customer[0].account)||void 0===n?void 0:n.media),entity:{id:C.id,description:C.customer[0].account.name,name:w.fullName||"Not Specified"},entityName:"Tenant"}),(0,i.jsx)(x.J,{data:{accountName:null,country:null==N?void 0:null===(t=N.address)||void 0===t?void 0:null===(o=t.country)||void 0===o?void 0:o.name,createdAt:A,fullName:null==w?void 0:w.fullName,position:null==w?void 0:w.position,phone:null==w?void 0:w.phone,xeroContactId:null===(r=C.customer)||void 0===r?void 0:null===(a=r[0])||void 0===a?void 0:null===(l=a.account)||void 0===l?void 0:null===(s=l.meta)||void 0===s?void 0:s.xeroContactId}}),(0,i.jsx)(m.Z,{title:"Contact",children:(0,i.jsxs)("div",{children:[(0,i.jsx)(v.Z,{rows:[{key:"Name",value:"".concat(w.nameFirst," ").concat(w.nameLast)},{key:"Phone",value:w.phone},{key:"Email",value:w.email}]}),(0,i.jsx)("br",{})]})}),w&&(0,i.jsx)(g.f,{address:null===(I=null===(d=null==w?void 0:w.booking[0])||void 0===d?void 0:d.location.addresses[0])||void 0===I?void 0:I.address,entity:"Account",entityId:null==w?void 0:w.id,id:null==w?void 0:w.id,refetch:Z,title:"Registered Address",type:"registered"}),_("admin")&&(0,i.jsx)(f.E,{entity:"Account",entityId:w.id,open:!0,title:"Notes"})]})})})};I.propTypes={tenant:d.object.isRequired};var j=t(7297),w=t(75063);function Z(){var e=(0,j.Z)(['\n  query GetTenant($id: Int!) {\n    tenant: User_by_pk(id: $id) {\n      email\n      fullName\n      id\n      phone\n      invoiceThreshold\n      meta\n      nameFirst\n      nameLast\n      booking: TenantBookings {\n        id\n        location: Location {\n          name\n          id\n          addresses: Addresses {\n            address: Address {\n              geo\n              id\n              invoicingEntity\n              name\n              county\n              addressLine1\n              addressLine2\n              addressLine3\n              postCode\n              city\n            }\n          }\n          customer: Account_Locations(where: { Account: { type: { _eq: "customer" } } }) {\n            account: Account {\n              id\n              companyNumber\n              createdAt\n              name\n              status\n              type\n              updatedAt\n              website\n              clientType\n              managerId\n              vatId\n              meta\n              media: Media {\n                id\n                medium: Medium {\n                  id\n                  category\n                  filename\n                  meta\n                  type\n                }\n              }\n              manager: Manager {\n                id\n                fullName\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n']);return Z=function(){return e},e}var C=(0,w.Ps)(Z()),_=t(98456),N=t(51233),A=t(246),$=t(52619),P=function(e){var n,t,d,u,c,m,v,p,f,h,g,x,b,j,w,Z,P,S,k,T,D,F,q,R,M,E,W,L=e.id,V=(0,y.x)().hasRole,B=(0,o.useRouter)().query,O=(0,a.useMemo)(function(){return B.tab||"details"},[B.tab]),z=(0,l.a)(C,{fetchPolicy:"no-cache",variables:{id:L}}),U=z.loading,J=z.data,Y=z.error,G=z.refetch;if(Y)return r().push("/404"),!1;if(U)return(0,i.jsx)(N.Z,{height:"100%",width:"100%",justifyContent:"center",alignItems:"center",children:(0,i.jsx)(_.Z,{color:"secondary"})});var H=[(0,i.jsx)("div",{active:"details"===O||!O,label:"Details",children:(0,i.jsx)(I,{tenant:J.tenant,refetch:G,location:J.tenant.booking[0].location})}),(0,i.jsx)("div",{active:"work-orders"===O,label:"Work Orders",children:(0,i.jsx)(A.A,{filtersVisibilityModel:{customer:V("admin"),location:V(["admin","supplier"]),user:V("supplier"),manager:!1,customerManager:!1,accountManager:!1},entityRelationToFetch:{locationId:null===(t=null==J?void 0:null===(n=J.tenant)||void 0===n?void 0:n.booking[0])||void 0===t?void 0:null===(d=t.location)||void 0===d?void 0:d.id},initialFilters:{startDate:null,endDate:null,status:null,id:null,filterType:"tenants_work_orders_tab"}})}),(0,i.jsx)("div",{active:"planned-maintenance"===O,label:"Planned Maintenance",children:(0,i.jsx)($.A,{locationId:null===(c=null==J?void 0:null===(u=J.tenant)||void 0===u?void 0:u.booking[0])||void 0===c?void 0:null===(m=c.location)||void 0===m?void 0:m.id,locationName:null===(p=null==J?void 0:null===(v=J.tenant)||void 0===v?void 0:v.booking[0])||void 0===p?void 0:null===(f=p.location)||void 0===f?void 0:f.name,calendarInitialFilters:{filterType:"tenant_".concat(null===(g=null==J?void 0:null===(h=J.tenant)||void 0===h?void 0:h.booking[0])||void 0===g?void 0:null===(x=g.location)||void 0===x?void 0:x.id),locationId:null===(j=null==J?void 0:null===(b=J.tenant)||void 0===b?void 0:b.booking[0])||void 0===j?void 0:null===(w=j.location)||void 0===w?void 0:w.id},hideCalendarFilters:["location"],tableInitialFilters:{filterType:"tenant_".concat(null===(P=null==J?void 0:null===(Z=J.tenant)||void 0===Z?void 0:Z.booking[0])||void 0===P?void 0:null===(S=P.location)||void 0===S?void 0:S.id),locationId:null===(T=null==J?void 0:null===(k=J.tenant)||void 0===k?void 0:k.booking[0])||void 0===T?void 0:null===(D=T.location)||void 0===D?void 0:D.id},hideTableFilters:["location"],itemsInitialFilters:{locationId:null===(q=null==J?void 0:null===(F=J.tenant)||void 0===F?void 0:F.booking[0])||void 0===q?void 0:null===(R=q.location)||void 0===R?void 0:R.id,filterType:"tenant_".concat(null===(E=null==J?void 0:null===(M=J.tenant)||void 0===M?void 0:M.booking[0])||void 0===E?void 0:null===(W=E.location)||void 0===W?void 0:W.id)},hideItemsFilters:["location","complianceCategory"],hideFinances:!0,hideItems:!0})})];return(0,i.jsx)(s.Z,{children:H.filter(function(e){return!e.props.hide}).map(function(e){return e})},O)},S=function(){var e=(0,o.useRouter)().query,n=(0,y.x)(),t=n.hasRole,a=n.user,l=t("tenant"),s=l?a.id:e.id;return s?(0,i.jsx)(P,{id:s,isTenant:l,adminId:null==a?void 0:a.adminId}):(r().push("/404"),null)},k=t(24716),T=function(){return(0,i.jsx)(S,{})};T.getLayout=function(e){return(0,i.jsx)(k.Z,{children:e})};var D=T}},function(e){e.O(0,[3662,367,6898,9809,2283,212,8890,9511,2583,6310,4599,4135,8579,4244,7645,3776,1564,2329,778,3054,1023,3911,1417,9957,6540,1870,5037,8062,1352,2429,1207,5117,9313,4211,3704,1121,2461,5926,4594,5889,4716,8359,6557,6937,3762,4664,2619,9774,2888,179],function(){return e(e.s=14843)}),_N_E=e.O()}]);