(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6305],{50594:function(n,e,t){"use strict";var i=t(64836);e.Z=void 0;var r=i(t(64938)),o=t(85893);e.Z=(0,r.default)((0,o.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},34193:function(n,e,t){"use strict";var i=t(64836);e.Z=void 0;var r=i(t(64938)),o=t(85893);e.Z=(0,r.default)((0,o.jsx)("path",{d:"m12 5.69 5 4.5V18h-2v-6H9v6H7v-7.81zM12 3 2 12h3v8h6v-6h2v6h6v-8h3z"}),"HomeOutlined")},58951:function(n,e,t){"use strict";t.d(e,{Z:function(){return h}});var i=t(63366),r=t(87462),o=t(67294),a=t(63961),s=t(58510),u=t(90948),c=t(14136),d=t(71657),l=t(15861),m=t(1977),p=t(8027);function f(n){return(0,p.ZP)("MuiDialogContentText",n)}(0,m.Z)("MuiDialogContentText",["root"]);var _=t(85893);let y=["children","className"],g=n=>{let{classes:e}=n,t=(0,s.Z)({root:["root"]},f,e);return(0,r.Z)({},e,t)},$=(0,u.ZP)(l.Z,{shouldForwardProp:n=>(0,c.Z)(n)||"classes"===n,name:"MuiDialogContentText",slot:"Root",overridesResolver:(n,e)=>e.root})({}),v=o.forwardRef(function(n,e){let t=(0,d.Z)({props:n,name:"MuiDialogContentText"}),{className:o}=t,s=(0,i.Z)(t,y),u=g(s);return(0,_.jsx)($,(0,r.Z)({component:"p",variant:"body1",color:"text.secondary",ref:e,ownerState:s,className:(0,a.Z)(u.root,o)},t,{classes:u}))});var h=v},37645:function(n,e,t){"use strict";var i=t(87462),r=t(63366),o=t(67294),a=t(63961),s=t(58510),u=t(15861),c=t(90948),d=t(71657),l=t(4472),m=t(34182),p=t(85893);let f=["className","id"],_=n=>{let{classes:e}=n;return(0,s.Z)({root:["root"]},l.a,e)},y=(0,c.ZP)(u.Z,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(n,e)=>e.root})({padding:"16px 24px",flex:"0 0 auto"}),g=o.forwardRef(function(n,e){let t=(0,d.Z)({props:n,name:"MuiDialogTitle"}),{className:s,id:u}=t,c=(0,r.Z)(t,f),l=_(t),{titleId:g=u}=o.useContext(m.Z);return(0,p.jsx)(y,(0,i.Z)({component:"h2",className:(0,a.Z)(l.root,s),ownerState:t,ref:e,variant:"h6",id:null!=u?u:g},c))});e.Z=g},23795:function(n,e,t){"use strict";t.d(e,{Z:function(){return j}});var i=t(63366),r=t(87462),o=t(67294),a=t(63961),s=t(58510),u=t(98216),c=t(90948),d=t(71657),l=t(79674),m=t(51705),p=t(15861),f=t(1977),_=t(8027);function y(n){return(0,_.ZP)("MuiLink",n)}let g=(0,f.Z)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var $=t(54844),v=t(2101);let h={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},I=n=>h[n]||n,b=({theme:n,ownerState:e})=>{let t=I(e.color),i=(0,$.DW)(n,`palette.${t}`,!1)||e.color,r=(0,$.DW)(n,`palette.${t}Channel`);return"vars"in n&&r?`rgba(${r} / 0.4)`:(0,v.Fq)(i,.4)};var x=t(85893);let q=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],Z=n=>{let{classes:e,component:t,focusVisible:i,underline:r}=n,o={root:["root",`underline${(0,u.Z)(r)}`,"button"===t&&"button",i&&"focusVisible"]};return(0,s.Z)(o,y,e)},S=(0,c.ZP)(p.Z,{name:"MuiLink",slot:"Root",overridesResolver(n,e){let{ownerState:t}=n;return[e.root,e[`underline${(0,u.Z)(t.underline)}`],"button"===t.component&&e.button]}})(({theme:n,ownerState:e})=>(0,r.Z)({},"none"===e.underline&&{textDecoration:"none"},"hover"===e.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===e.underline&&(0,r.Z)({textDecoration:"underline"},"inherit"!==e.color&&{textDecorationColor:b({theme:n,ownerState:e})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===e.component&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${g.focusVisible}`]:{outline:"auto"}})),A=o.forwardRef(function(n,e){let t=(0,d.Z)({props:n,name:"MuiLink"}),{className:s,color:u="primary",component:c="a",onBlur:p,onFocus:f,TypographyClasses:_,underline:y="always",variant:g="inherit",sx:$}=t,v=(0,i.Z)(t,q),{isFocusVisibleRef:I,onBlur:b,onFocus:A,ref:j}=(0,l.Z)(),[k,w]=o.useState(!1),C=(0,m.Z)(e,j),T=n=>{b(n),!1===I.current&&w(!1),p&&p(n)},P=n=>{A(n),!0===I.current&&w(!0),f&&f(n)},U=(0,r.Z)({},t,{color:u,component:c,focusVisible:k,underline:y,variant:g}),D=Z(U);return(0,x.jsx)(S,(0,r.Z)({color:u,className:(0,a.Z)(D.root,s),classes:_,component:c,onBlur:T,onFocus:P,ref:C,ownerState:U,variant:g,sx:[...Object.keys(h).includes(u)?[]:[{color:u}],...Array.isArray($)?$:[$]]},v))});var j=A},76312:function(n,e,t){"use strict";var i,r=t(18391),o=t(51174),a=t(67294),s=t(45697),u=t(10367),c=t(28368),d=Array(12).fill(""),l=u.ZP.div(i||(i=(0,o.Z)(["\n  display: inline-block;\n  height: ","px;\n  position: relative;\n  width: ","px;\n\n  div {\n    animation: lds-spinner 1.2s linear infinite;\n    transform-origin: ","px ","px;\n\n    ::after {\n      background: ",";\n      border-radius: ","%;\n      content: ' ';\n      display: block;\n      height: ","px;\n      left: ","px;\n      position: absolute;\n      top: ","px;\n      width: ","px;\n    }\n  }\n\n  ","\n\n  @keyframes lds-spinner {\n    0% {\n      opacity: 1;\n    }\n    100% {\n      opacity: 0;\n    }\n  }\n"])),function(n){return n.size},function(n){return n.size},function(n){return n.size/2},function(n){return n.size/2},function(n){var e=n.context;return n.theme.COLOUR[e]},function(n){return n.size/4},function(n){return n.size/4-2},function(n){return n.size/2-3},function(n){return n.size/10-5},function(n){return n.size/10-2},function(n){var e=n.spinner,t="";return e.forEach(function(n,e){t+="\n        div:nth-child(".concat(e+1,") {\n          transform: rotate(").concat(30*e,"deg);\n          animation-delay: ").concat(-1.1+parseFloat(.1*e),"s;\n        }\n      ")}),t}),m=function(n){return a.createElement(l,(0,r.Z)({},n,{spinner:d}),d.map(function(n,e){return a.createElement("div",{key:"spin"+e})}))};m.displayName="LdsSpinner",m.propTypes={size:s.number,context:(0,s.oneOf)(Object.values(c.Z))},m.defaultProps={context:"dark",size:56},e.Z=m},18645:function(n,e,t){"use strict";var i,r=t(51174),o=t(18391),a=t(66080),s=t(67294),u=t(45697),c=t(10367),d=["children","dataCy","indicator"],l=function(n){var e=n.children,t=n.dataCy,i=n.indicator,r=(0,a.Z)(n,d);return s.createElement(m,(0,o.Z)({"data-cy":t},r),i||e)};l.displayName="PageLoading";var m=c.ZP.div(i||(i=(0,r.Z)(["\n  align-items: center;\n  background-color: ",";\n  color: #fff;\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  left: 0;\n  opacity: ",";\n  position: ",";\n  right: 0;\n  top: 0;\n  width: 100%;\n  z-index: 99;\n"])),function(n){return n.backgroundColor},function(n){return n.opacity},function(n){return n.position});l.propTypes={backgroundColor:u.string,children:u.any,dataCy:u.string,indicator:u.any,opacity:u.number,position:u.string},l.defaultProps={backgroundColor:"#fff",dataCy:"loadingIndicator",opacity:1,position:"fixed"},e.Z=l},68956:function(n,e,t){"use strict";t.d(e,{Z:function(){return I}});var i,r,o=t(67294),a=t(45697),s=t(16551),u=t(28368),c=t(41564),d=function(n){var e=n.children,t=n.tooltip;return o.createElement(c.Z,{content:t},e)};d.displayName="TableActionsTooltip",d.propTypes={children:a.node.isRequired,tooltip:a.string.isRequired};var l=t(51174),m=t(11163),p=t.n(m),f=t(10367),_=t(77439),y=t(40826),g=(0,o.forwardRef)(function(n,e){var t,i=n.context,r=n.disabled,a=n.icon,s=n.numberOverlay,u=n.onClick,c=n.overlayCustom,d=n.row,l=n.to,m=Array.isArray(a),f=d[s]||c,_=u?function(n){return u(n,d)}:(t="".concat(l,"?id=").concat(d.id),function(n){n.preventDefault(),n.stopPropagation(),p().push(t)});return o.createElement($,{forwardedAs:"a",context:i,disabled:r,itemCount:f,onClick:_,ref:e,size:"sm"},o.createElement(v,{icon:a?m?a[1]:a:null,prefix:a&&m&&a[0]}))}),$=(0,f.ZP)(_.Z)(i||(i=(0,l.Z)(["\n  font-size: 14px;\n  padding: 0.5rem;\n  position: relative;\n"]))),v=(0,f.ZP)(y.Z)(r||(r=(0,l.Z)(["\n  pointer-events: 'none';\n"])));g.propTypes={context:(0,a.oneOf)(Object.values(u.Z)),disabled:a.bool,icon:(0,a.oneOfType)([a.array,a.string]),numberOverlay:a.string,onClick:a.func,overlayCustom:a.string,row:a.object.isRequired,to:a.string};var h=function(n){var e,t=n.align,i=n.data,r=n.row;return e="function"==typeof i?i()(r):i,o.createElement(s.Z,{align:t},e.map(function(n,e){var t=n.context,i=n.disabled,a=n.icon,s=n.numberOverlay,u=n.onClick,c=n.overlayCustom,l=n.to,m=n.tooltip;return o.createElement(d,{key:e,tooltip:m},o.createElement(g,{context:t,disabled:i,icon:a,numberOverlay:s,onClick:u,overlayCustom:c,row:r,to:l}))}))};h.displayName="TableActions",h.propTypes={align:a.string,data:(0,a.arrayOf)((0,a.shape)({content:a.string,context:(0,a.oneOf)(Object.values(u.Z)),disabled:a.bool,icon:(0,a.oneOfType)([a.array,a.string]),numberOverlay:a.string,onClick:a.func,overlayCustom:a.string,to:a.string,tooltip:a.string})).isRequired,row:a.object.isRequired},h.defaultProps={align:"flex-start"};var I=h},89593:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/scheduledjob",function(){return t(21428)}])},95839:function(n,e,t){"use strict";t.d(e,{W:function(){return d}});var i=t(47568),r=t(7297),o=t(97582),a=t(75063),s=t(35374);function u(){var n=(0,r.Z)(["\n  mutation CreateSupplierPpmInvoicePdf($accountEntryId: Int!) {\n    invoice: createSupplierPpmInvoicePdf(accountEntryId: $accountEntryId) {\n      success\n      key\n    }\n  }\n"]);return u=function(){return n},n}var c,d=(c=(0,i.Z)(function(n){var e,t,i,r,a,u,c,d,m,p,f;return(0,o.__generator)(this,function(o){switch(o.label){case 0:e=n.client,t=n.accountEntryId,i=n.getUrl,o.label=1;case 1:return o.trys.push([1,3,,4]),a="",(0,s.a)()||i||(r=window.open("/download","_blank")),[4,e.mutate({mutation:l,variables:{accountEntryId:t}})];case 2:return d=o.sent().data.invoice.key,i?a="".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(d):(null==r||null===(m=r.location)||void 0===m||m.assign("".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(d)),(null==window?void 0:null===(p=window.Capacitor)||void 0===p?void 0:null===(f=p.Plugins)||void 0===f?void 0:f.Browser)&&window.Capacitor.Plugins.Browser.open({url:"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(d)})),[2,a];case 3:return o.sent(),[3,4];case 4:return[2]}})}),function(n){return c.apply(this,arguments)}),l=(0,a.Ps)(u())},70768:function(n,e,t){"use strict";t.d(e,{I:function(){return m}});var i=t(26042),r=t(69396),o=t(99534),a=t(85893),s=t(5616),u=t(51233),c=t(50135),d=t(90948),l=t(15861),m=function(n){var e=n.leftLabel,t=n.rightLabel,s=n.error,c=(0,o.Z)(n,["leftLabel","rightLabel","error"]);return(0,a.jsxs)(u.Z,{direction:"row",alignItems:"center",children:[(0,a.jsx)(p,{sx:{borderTopLeftRadius:"5px",borderBottomLeftRadius:"5px"},error:s,children:(0,a.jsx)(l.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",whiteSpace:"nowrap"},children:e})}),(0,a.jsx)(f,(0,r.Z)((0,i.Z)({},c),{variant:"outlined",size:"small",error:s})),(0,a.jsx)(p,{sx:{borderTopRightRadius:"5px",borderBottomRightRadius:"5px"},error:s,children:(0,a.jsx)(l.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center",whiteSpace:"nowrap"},variant:"body2",fontWeight:700,children:t})})]})},p=(0,d.ZP)(s.Z)(function(n){var e=n.theme;return{display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:n.error?e.palette.danger.main:"#D9D9D9",minwidth:"28px",height:"28px",padding:"0 5px"}}),f=(0,d.ZP)(c.Z)(function(n){var e=n.theme,t=n.error;return{height:"28px","& .MuiInputBase-root ":{borderRadius:"0px","&.Mui-focused":{"& .MuiOutlinedInput-notchedOutline":{borderColor:t?e.palette.danger.main:"#D9D9D9"}},"& .MuiInputBase-input":{padding:"2px 14px",borderColor:t?e.palette.danger.main:"#D9D9D9",borderStyle:"solid",borderBottomWidth:"2.5px",borderTopWidth:"2px"},"& .MuiOutlinedInput-notchedOutline":{border:"none"}}}})},17868:function(n,e,t){"use strict";t.d(e,{z:function(){return a}});var i=t(7297),r=t(75063);function o(){var n=(0,i.Z)(["\n  fragment AccountFields on Account {\n    id\n    type\n    name\n    status\n    vatId\n  }\n"]);return o=function(){return n},n}var a=(0,r.Ps)(o())},16951:function(n,e,t){"use strict";t.d(e,{k:function(){return h}});var i=t(26042),r=t(69396),o=t(85893),a=t(45697),s=t(42283),u=t(79665),c=t(76600),d=t(9270),l=t(62140),m=t(49501),p=t(55563),f=t(6710),_=t(95103),y=t(16310),g=(0,y.Ry)().shape({name:(0,y.Z_)(),invoicingEntity:(0,y.Z_)(),addressLine1:(0,y.Z_)().required(),addressLine2:(0,y.Z_)(),addressLine3:(0,y.Z_)(),city:(0,y.Z_)().required(),postCode:(0,y.Z_)().matches("^([Gg][Ii][Rr] 0[Aa]{2})|((([A-Za-z][0-9]{1,2})|(([A-Za-z][A-Ha-hJ-Yj-y][0-9]{1,2})|(([A-Za-z][0-9][A-Za-z])|([A-Za-z][A-Ha-hJ-Yj-y][0-9][A-Za-z]?))))\\s?[0-9][A-Za-z]{2})$|^([AC-FHKNPRTV-Y]\\d{2}|D6W)\\s[0-9AC-FHKNPRTV-Y]{4}$").required(),county:(0,y.Z_)(),countryId:(0,y.Z_)().required()}),$=t(31113),v=t(98521),h=function(n){var e=n.defaultValues,t=n.onSubmit,a=n.type,y=(0,s.cI)({defaultValues:(0,i.Z)({},e),resolver:(0,u.S)(g)}),h=y.control,I=y.errors,b=y.handleSubmit,x={control:h,errors:I,register:y.register};return(0,o.jsxs)(c.Z,{id:"offCanvasForm",handleSubmit:b(t),children:[(0,o.jsxs)(d.Z,{children:[(0,o.jsx)(l.Z,{md:12,children:(0,o.jsx)(m.Z,{label:"Address name",children:(0,o.jsx)(p.Z,(0,r.Z)((0,i.Z)({},x),{name:"name"}))})}),"invoice"===a&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.Z,{md:12,children:(0,o.jsx)(m.Z,{label:"invoicing email",children:(0,o.jsx)(p.Z,(0,r.Z)((0,i.Z)({},x),{name:"invoicingEmail",type:"email"}))})}),(0,o.jsx)(l.Z,{md:12,children:(0,o.jsx)(m.Z,{label:"Invoicing entity",children:(0,o.jsx)(f.Z,(0,r.Z)((0,i.Z)({},x),{name:"invoicingEntity",rows:4}))})})]}),(0,o.jsx)(l.Z,{md:6,children:(0,o.jsx)(m.Z,{label:"Address Line 1",children:(0,o.jsx)(p.Z,(0,r.Z)((0,i.Z)({},x),{name:"addressLine1"}))})}),(0,o.jsx)(l.Z,{md:6,children:(0,o.jsx)(m.Z,{label:"Address Line 2",children:(0,o.jsx)(p.Z,(0,r.Z)((0,i.Z)({},x),{name:"addressLine2"}))})}),(0,o.jsx)(l.Z,{md:6,children:(0,o.jsx)(m.Z,{label:"Address Line 3",children:(0,o.jsx)(p.Z,(0,r.Z)((0,i.Z)({},x),{name:"addressLine3"}))})}),(0,o.jsx)(l.Z,{md:6,children:(0,o.jsx)(m.Z,{label:"City",children:(0,o.jsx)(p.Z,(0,r.Z)((0,i.Z)({},x),{name:"city"}))})}),(0,o.jsx)(l.Z,{md:6,children:(0,o.jsx)(m.Z,{label:"Post Code",children:(0,o.jsx)(p.Z,(0,r.Z)((0,i.Z)({},x),{name:"postCode"}))})}),(0,o.jsx)(l.Z,{md:6,children:(0,o.jsx)(m.Z,{label:"County",children:(0,o.jsx)(p.Z,(0,r.Z)((0,i.Z)({},x),{name:"county"}))})}),(0,o.jsx)(l.Z,{md:6,children:(0,o.jsx)(m.Z,{label:"Country",children:(0,o.jsx)(_.Z,(0,r.Z)((0,i.Z)({},x),{name:"countryId",options:v.O}))})})]}),(0,o.jsx)(d.Z,{justify:"end",children:(0,o.jsx)(l.Z,{md:12,children:(0,o.jsx)($.H,{content:"Submit",type:"submit"})})}),(null==e?void 0:e.id)&&(0,o.jsx)(p.Z,(0,r.Z)((0,i.Z)({},x),{name:"id",type:"hidden"})),(null==e?void 0:e.meta)&&(0,o.jsx)(p.Z,(0,r.Z)((0,i.Z)({},x),{name:"meta",type:"hidden"}))]})};h.propTypes={defaultValues:a.object,onCancel:a.func.isRequired,onSubmit:a.func.isRequired,type:a.string}},32791:function(n,e,t){"use strict";t.d(e,{H:function(){return w}});var i=t(47568),r=t(14924),o=t(828),a=t(29815),s=t(97582),u=t(85893),c=t(67294),d=t(45697),l=t(6812),m=t(50319),p=t(22666),f=t(33006),_=t(15214),y=t(26042),g=t(68956),$=t(49501),v=t(62047),h=t(51466),I=t(2931),b=t(55843),x=t(16540),q=t(31113),Z=t(16951),S=t(74492),A=function(n){var e,t=n.addresses,r=n.entity,a=n.entityId,d=(n.id,n.loading),l=n.onSelected,f=n.refetch,_=n.selectable,A=n.selected,j=n.type,k=n.editable,w=(0,S.a)(),C=(0,c.useState)(1),T=C[0],P=C[1],U=(0,o.Z)((0,m.D)(p.BO,{onCompleted:function(){w.close(),f()}}),1)[0],D=(0,o.Z)((0,m.D)(p._r,{onCompleted:function(){w.close(),f()}}),1)[0],L=function(n,e){l(n,e)},R=(e=(0,i.Z)(function(n){var e,t,i,o,u;return(0,s.__generator)(this,function(s){switch(s.label){case 0:return(e=n).countryId||(e.countryId=1),t={address:e},[4,window.fetch("".concat("https://aws.cleverly.works","/google/maps/geocode"),{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(t)}).then(function(n){return n.json()})];case 1:if(i=s.sent(),n.id?e.meta=(0,y.Z)({invoicingEmail:n.invoicingEmail},n.meta):e.meta={invoicingEmail:n.invoicingEmail},delete e.invoicingEmail,(null==(o=(null==i?void 0:i.coordinates)||null)?void 0:o.lat)&&(null==o?void 0:o.lng)&&(e.geo={type:"Point",coordinates:[o.lng,o.lat]}),!n.id)return[3,3];return u=parseInt(n.id),[4,D({variables:{id:u,changes:e}})];case 2:return s.sent(),[3,5];case 3:return e.Address_Entities={data:{entity:r,entityId:a,status:"active"}},[4,U({variables:{objects:[e]}})];case 4:s.sent(),s.label=5;case 5:return[2]}})}),function(n){return e.apply(this,arguments)}),N=function(n){w.close()},M=function(n){var e,i={},r=t.find(function(e){return e.id===n.id}),o=r?r.address:null;o&&(i.id=o.id,i.invoicingEmail=null===(e=o.meta)||void 0===e?void 0:e.invoicingEmail,i.invoicingEntity=o.invoicingEntity,i.name=o.name,i.addressLine1=o.addressLine1,i.addressLine2=o.addressLine2,i.addressLine3=o.addressLine3,i.city=o.city,i.postCode=o.postCode,i.county=o.county,i.countryId=o.countryId),w.show({content:(0,u.jsx)(Z.k,{defaultValues:i,onCancel:N,onSubmit:R,type:j}),title:o?"Edit address":"invoice"===j?"Add new invoice address":"Add new address",submit:!1})},z=[{hidden:!0},{hidden:!_||!k,text:"Select"},{text:"Address"},{hidden:"invoice"!==j,text:"Email"},{formatter:g.Z,formatterData:[{context:"secondary",icon:["fas","edit"],onClick:function(n,e){return M(e)},tooltip:"Edit"}],text:"Actions",hidden:!k}],F=(null==t?void 0:t.map(function(n,e){var t,i=n.address;return{id:n.id,select:function(){return(0,u.jsx)($.Z,{children:(0,u.jsx)(v.Z,{context:"secondary",onToggle:function(n){return L(i.id,n)},size:"sm",toggled:Number(A)===i.id})})},address:function(){var n;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(h.Z,{content:null==i?void 0:i.name,size:"md"}),(0,u.jsx)(I.Z,{country:(null===(n=i.country)||void 0===n?void 0:n.name)||"",line1:i.addressLine1,town:i.city})]})},email:(null===(t=i.meta)||void 0===t?void 0:t.invoicingEmail)||"-",actions:""}}))||[];return(0,u.jsxs)(u.Fragment,{children:[k&&(0,u.jsx)(q.H,{content:"Add new address",handleClick:M}),(0,u.jsx)(b.Z,{marginBottom:"xs"}),(0,u.jsx)(x.Z,{columns:z,loading:d,pagination:!0,paginationProps:{currentPage:T,onPageChange:function(n){P(n)},onPageSizeChange:function(){},pageCount:Math.ceil((null==F?void 0:F.length)/50),perPage:50},rows:null==F?void 0:F.slice((T-1)*50,50*T)})]})};A.propTypes={addresses:d.array.isRequired,entity:d.string.isRequired,entityId:d.number.isRequired,id:d.number,loading:d.bool.isRequired,onSelected:d.func.isRequired,refetch:d.func.isRequired,selectable:d.bool.isRequired,selected:d.number,type:d.string},A.defaultProps={addresses:[],selectable:!1,selected:""};var j=t(26535),k=t(74944),w=function(n){var e,t,d,y,g=n.addressId,$=n.entity,v=n.entityId,h=n.id,I=n.onSubmit,b=n.type,x=(0,c.useState)(g||null),q=x[0],Z=x[1],S=(0,c.useState)(!1),w=S[0],C=S[1],T=(0,c.useState)(null),P=T[0],U=T[1],D=(0,j.DM)(b),L=(0,j.VJ)($),R=(0,(0,k.x)().hasRole)("customer"),N=(0,l.a)(L,{variables:{id:v}}),M=N.loading,z=N.data,F=(void 0===z?{item:null}:z).item,J=N.refetch,E=(0,o.Z)((0,m.D)(p.x0,{onCompleted:function(n){I&&I(n)}}),1)[0],O=(0,o.Z)((0,m.D)(p.y8,{onCompleted:function(n){I&&I(n)}}),1)[0],B=[];F&&(F.addresses&&B.push.apply(B,(0,a.Z)(F.addresses)),F.accounts&&(null===(e=F.accounts[0])||void 0===e?void 0:null===(t=e.account)||void 0===t?void 0:t.addresses)&&F.accounts[0].account.addresses.forEach(function(n){B.find(function(e){return e.address.id===n.address.id})||B.push(n)}));var H,V=(y=(0,i.Z)(function(n,e){return(0,s.__generator)(this,function(t){switch(t.label){case 0:if(U(!1),C(!1),!e)return[3,2];return Z(parseInt(n)),[4,W(parseInt(n))];case 1:return t.sent(),[3,3];case 2:C(!0),t.label=3;case 3:return[2]}})}),function(n,e){return y.apply(this,arguments)}),W=(H=(0,i.Z)(function(n){var e,t,i,o,a;return(0,s.__generator)(this,function(o){switch(o.label){case 0:if(!(q!==n))return[3,5];if(e=null,t=null,B.forEach(function(i){i.address.id===n&&(e=i.entity,t=i.id)}),!(t&&e===$))return[3,2];return i={id:parseInt(t),changes:(0,r.Z)({},b,!0),whereOld:(0,r.Z)({entityId:{_eq:v}},b,{_eq:!0}),changesOld:(0,r.Z)({},b,!1)},[4,O({variables:i})];case 1:return o.sent(),U(!0),[3,4];case 2:return a={objects:[(0,r.Z)({addressId:parseInt(n),entity:$,entityId:v,status:"active"},b,!0)],whereOld:(0,r.Z)({entityId:{_eq:v}},b,{_eq:!0}),changesOld:(0,r.Z)({},b,!1)},[4,E({variables:a})];case 3:o.sent(),U(!0),o.label=4;case 4:return[3,6];case 5:I&&I(null),o.label=6;case 6:return[2]}})}),function(n){return H.apply(this,arguments)});return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(f.Z,{tag:"h4",content:D}),P&&(0,u.jsx)(_.Z,{content:"Selection saved.",context:"primary"}),w&&(0,u.jsx)(_.Z,{content:"You should select at least one address.",context:"info"}),(0,u.jsx)(A,{addresses:B,entity:$,entityId:v,id:h,loading:M,refetch:J,selectable:!0,selected:q,type:b,onSelected:V,editable:!R})]})};w.propTypes={addressId:d.number,entity:d.string.isRequired,entityId:d.number.isRequired,id:d.number,onSubmit:d.func.isRequired,type:d.string.isRequired}},96715:function(n,e,t){"use strict";t.d(e,{il:function(){return o},j$:function(){return i},wo:function(){return r}});var i=function(n,e){if(Array.isArray(e)){var t,i,r=null;return e.forEach(function(e){var t,i,o=null===(t=n.timings)||void 0===t?void 0:t.find(function(n){return n.status===e});r=(null==o?void 0:null===(i=o.user)||void 0===i?void 0:i.fullName)||r}),r}var o=null===(t=n.timings)||void 0===t?void 0:t.find(function(n){return n.status===e});return(null==o?void 0:null===(i=o.user)||void 0===i?void 0:i.fullName)||null},r=function(n,e){if(Array.isArray(e)){var t,i=null;return e.forEach(function(e){var t,r=null===(t=n.timings)||void 0===t?void 0:t.find(function(n){return n.status===e});i=(null==r?void 0:r.id)||i}),i}var r=null===(t=n.timings)||void 0===t?void 0:t.find(function(n){return n.status===e});return(null==r?void 0:r.id)||null},o=function(n,e){return!n||n>e}},91027:function(n,e,t){"use strict";t.d(e,{lR:function(){return p},Uu:function(){return m}});var i=t(828);t(39831),t(20924);var r=t(7297),o=t(75063),a=t(20725),s=t(17868),u=t(22666),c=t(94885);function d(){var n=(0,r.Z)(['\n  query GetDashboardList(\n    $accountId: Int\n    $adminId: Int\n    $asAt: timestamptz\n    $jobHoldReasonId: Int\n    $limit: Int\n    $monthStart: timestamptz\n    $offset: Int\n    $orderBy: dashboard_home_details_order_by!\n    $q: String\n    $tileName: String\n    $dayStart: timestamptz\n    $userId: Int\n    $yearStart: timestamptz\n  ) {\n    jobs: getDashboard_HomeTile_Details(\n      args: {\n        accountId: $accountId\n        adminId: $adminId\n        asAt: $asAt\n        jobHoldReasonId: $jobHoldReasonId\n        monthStart: $monthStart\n        tileName: $tileName\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n      }\n      where: {\n        _and: [\n          {\n            _or: [\n              { reference: { _ilike: $q } }\n              { description: { _ilike: $q } }\n              { customerName: { _ilike: $q } }\n              { serviceName: { _ilike: $q } }\n              { assignedTo: { _ilike: $q } }\n              { supplierName: { _ilike: $q } }\n              { location: { _ilike: $q } }\n              { number: { _ilike: $q } }\n            ]\n          }\n        ]\n      }\n      order_by: [$orderBy]\n      limit: $limit\n      offset: $offset\n    ) {\n      Assets(where: { entity: { _eq: "Job" } }) {\n        id\n        assetId\n        __typename\n      }\n      ...JobFields\n      ...JobAdminFields\n      admin: Admin {\n        id\n        name\n        __typename\n      }\n      customer: Customer {\n        ...AccountFields\n        __typename\n      }\n      location: Location {\n        id\n        name\n        __typename\n      }\n      manager: Manager {\n        ...UserFields\n        __typename\n      }\n      service: Service {\n        id\n        name\n        __typename\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n          __typename\n        }\n        __typename\n      }\n      sla: SLA {\n        id\n        name\n        __typename\n      }\n      supplier: Supplier {\n        ...AccountFields\n        __typename\n      }\n      supplierOffers: SupplierOffers {\n        status\n        rate\n        supplier: Supplier {\n          ...AccountFields\n          __typename\n        }\n        __typename\n      }\n      timings: JobTimings(order_by: { createdAt: asc }) {\n        id\n        status\n        createdAt\n        user: User {\n          ...UserFields\n          __typename\n        }\n        __typename\n      }\n      id: jobId\n      number\n      # location\n      priority\n      scheduledAt\n      assignedTo\n      jobHoldReason\n      locationId\n      meta\n      managerId\n      description\n      customerName\n      customerId\n      reference\n      serviceName\n      status\n      supplierId\n      supplierName\n      timingStart\n      type\n      quoteNumber\n      quoteDue\n      createdAt\n    }\n    meta: getDashboard_HomeTile_Details_aggregate(\n      args: {\n        accountId: $accountId\n        adminId: $adminId\n        asAt: $asAt\n        jobHoldReasonId: $jobHoldReasonId\n        monthStart: $monthStart\n        tileName: $tileName\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n      }\n      where: {\n        _and: [\n          {\n            _or: [\n              { reference: { _ilike: $q } }\n              { description: { _ilike: $q } }\n              { customerName: { _ilike: $q } }\n              { serviceName: { _ilike: $q } }\n              { assignedTo: { _ilike: $q } }\n              { supplierName: { _ilike: $q } }\n              { location: { _ilike: $q } }\n              { number: { _ilike: $q } }\n            ]\n          }\n        ]\n      }\n    ) {\n      aggregate {\n        totalCount: count\n        __typename\n      }\n      __typename\n    }\n  }\n  ',"\n  ","\n  ","\n  ","\n  ","\n"]);return d=function(){return n},n}(0,o.Ps)(d(),s.z,u.WW,a.aL,a.wd,c.Px);var l=t(31312),m=function(n){var e=["locationId","customerId","assetId"],t="";return n&&n.constructor===Object&&Object.keys(n).length>0&&(t="?",Object.entries(n).map(function(n){var r=(0,i.Z)(n,2),o=r[0],a=r[1];return a&&e.includes(o)&&(t+="".concat([o],"=").concat(a,"&")),0}),t=(t=t.substring(0,t.length-1)).replace("customerId","accountId")),t},p=function(n){var e=["completed","inDispute","disputeResolved","reportSent","invoiceSent","customerPaid","supplierPaid","closed"];switch(n){case"offered":return l.cj.filter(function(n){return"offered"===n.value});case"current":return l.cj.filter(function(n){var e=n.value;return"accepted"===e||"inProgress"===e});case"openJobs":return l.cj.filter(function(n){var e=n.value;return"raised"===e||"pending"===e});case"raised":return l.cj.filter(function(n){return"raised"===n.value});case"pending":return l.cj.filter(function(n){return"pending"===n.value});case"past":return l.cj.filter(function(n){var t=n.value;return e.includes(t)});default:return l.cj}}},39831:function(n,e,t){"use strict";t.d(e,{ct:function(){return d},lS:function(){return c},p7:function(){return u}});var i=t(7297),r=t(75063);function o(){var n=(0,i.Z)(['\n  query GetJobs(\n    $endDate: timestamptz\n    $number: String\n    $limit: Int\n    $offset: Int\n    $orderBy: Job_order_by!\n    $q: String\n    $startDate: timestamptz\n    $status: [String!]\n    $type: String\n    $userId: Int\n  ) {\n    jobs: Job(\n      limit: $limit\n      offset: $offset\n      where: {\n        _and: [\n          {\n            _or: [\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { description: { _ilike: $q } }\n              { Customer: { name: { _ilike: $q } } }\n              { CustomerUser: { email: { _ilike: $q } } }\n              { Location: { name: { _ilike: $q } } }\n              { Taxonomy: { Taxonomy: { name: { _ilike: $q } } } }\n              { number: { _ilike: $q } }\n              { Invoices: { invoiceNumber: { _ilike: $q } } }\n            ]\n          }\n          {\n            _or: [\n              { _and: [{ timingStart: { _gte: $startDate } }, { timingStart: { _lte: $endDate } }] }\n              { _and: [{ scheduledAt: { _gte: $startDate } }, { scheduledAt: { _lte: $endDate } }] }\n            ]\n          }\n        ]\n        status: { _in: $status }\n        type: { _eq: $type }\n        supplierUserId: { _eq: $userId }\n      }\n      order_by: [$orderBy]\n    ) {\n      id\n      type\n      number\n      status\n      scheduledAt\n      timingStart\n      createdAt\n      invoices: Invoices(order_by: { createdAt: desc }) {\n        invoiceNumber\n      }\n\n      customer: Customer {\n        id\n        type\n        name\n        status\n        vatId\n      }\n      location: Location {\n        id\n        name\n      }\n      manager: Manager {\n        id\n        nameFirst\n        nameLast\n      }\n      service: Service {\n        id\n        name\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n      sla: SLA {\n        name\n      }\n      supplier: Supplier {\n        id\n        name\n      }\n      supplierUser: SupplierUser {\n        id\n        fullName\n      }\n      supplierOffers: SupplierOffers {\n        supplier: Supplier {\n          id\n          name\n        }\n      }\n      timings: JobTimings(order_by: { createdAt: asc }) {\n        user: User {\n          fullName\n        }\n      }\n    }\n    meta: Job_aggregate(\n      where: {\n        _and: [\n          {\n            _or: [\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { description: { _ilike: $q } }\n              { Customer: { name: { _ilike: $q } } }\n              { CustomerUser: { email: { _ilike: $q } } }\n              { Location: { name: { _ilike: $q } } }\n              { Taxonomy: { Taxonomy: { name: { _ilike: $q } } } }\n              { number: { _ilike: $q } }\n              { Invoices: { invoiceNumber: { _ilike: $q } } }\n            ]\n          }\n          {\n            _or: [\n              { _and: [{ timingStart: { _gte: $startDate } }, { timingStart: { _lte: $endDate } }] }\n              { _and: [{ scheduledAt: { _gte: $startDate } }, { scheduledAt: { _lte: $endDate } }] }\n            ]\n          }\n        ]\n        status: { _in: $status }\n        type: { _eq: $type }\n        supplierUserId: { _eq: $userId }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n']);return o=function(){return n},n}function a(){var n=(0,i.Z)(['\n  query GetJobs(\n    $endDate: timestamptz\n    $number: String\n    $limit: Int\n    $offset: Int\n    $q: String\n    $orderBy: Job_order_by!\n    $startDate: timestamptz\n    $status: [String!]\n    $type: [String!]\n    $userId: Int\n    $locationId: Int\n  ) {\n    jobs: Job(\n      limit: $limit\n      offset: $offset\n      where: {\n        _and: [\n          {\n            _or: [\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { description: { _ilike: $q } }\n              { Supplier: { name: { _ilike: $q } } }\n              { SupplierUser: { email: { _ilike: $q } } }\n              { Location: { name: { _ilike: $q } } }\n              { Taxonomy: { Taxonomy: { name: { _ilike: $q } } } }\n              { number: { _ilike: $q } }\n              { Invoices: { invoiceNumber: { _ilike: $q } } }\n            ]\n          }\n          {\n            _or: [\n              { _and: [{ timingStart: { _gte: $startDate } }, { timingStart: { _lte: $endDate } }] }\n              { _and: [{ scheduledAt: { _gte: $startDate } }, { scheduledAt: { _lte: $endDate } }] }\n            ]\n          }\n        ]\n        status: { _in: $status }\n        type: { _in: $type }\n        customerUserId: { _eq: $userId }\n        locationId: { _eq: $locationId }\n      }\n      order_by: [$orderBy]\n    ) {\n      id\n      type\n      number\n      status\n      scheduledAt\n      timingStart\n      createdAt\n      invoices: Invoices(order_by: { createdAt: desc }) {\n        invoiceNumber\n      }\n\n      customer: Customer {\n        id\n        type\n        name\n        status\n        vatId\n      }\n      location: Location {\n        id\n        name\n      }\n      sublocation: Sublocation {\n        id\n        name\n      }\n      manager: Manager {\n        id\n        nameFirst\n        nameLast\n      }\n      service: Service {\n        id\n        name\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n      sla: SLA {\n        name\n      }\n      supplier: Supplier {\n        id\n        name\n      }\n      supplierOffers: SupplierOffers {\n        supplier: Supplier {\n          id\n          name\n        }\n      }\n      timings: JobTimings(order_by: { createdAt: asc }) {\n        user: User {\n          fullName\n        }\n      }\n    }\n    meta: Job_aggregate(\n      where: {\n        _and: [\n          {\n            _or: [\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { description: { _ilike: $q } }\n              { Supplier: { name: { _ilike: $q } } }\n              { SupplierUser: { email: { _ilike: $q } } }\n              { Location: { name: { _ilike: $q } } }\n              { Taxonomy: { Taxonomy: { name: { _ilike: $q } } } }\n              { number: { _ilike: $q } }\n              { Invoices: { invoiceNumber: { _ilike: $q } } }\n            ]\n          }\n          {\n            _or: [\n              { _and: [{ timingStart: { _gte: $startDate } }, { timingStart: { _lte: $endDate } }] }\n              { _and: [{ scheduledAt: { _gte: $startDate } }, { scheduledAt: { _lte: $endDate } }] }\n            ]\n          }\n        ]\n        status: { _in: $status }\n        type: { _in: $type }\n        customerUserId: { _eq: $userId }\n        locationId: { _eq: $locationId }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n']);return a=function(){return n},n}function s(){var n=(0,i.Z)(["\n  query GetJobs(\n    $assetId: Int\n    $customerId: Int\n    $endDate: timestamptz\n    $number: String\n    $limit: Int\n    $locationId: Int\n    $sublocationId: Int\n    $managerId: Int\n    $customerManagerId: Int\n    $offset: Int\n    $orderBy: Job_order_by!\n    $paid: Boolean\n    $type: [String!]\n    $q: String\n    $startDate: timestamptz\n    $status: [String!]\n    $tags: [Int!]\n    $supplierId: Int\n    $slaId: [Int!]\n  ) {\n    jobs: Job(\n      limit: $limit\n      offset: $offset\n      where: {\n        _and: [\n          {\n            _or: [\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { description: { _ilike: $q } }\n              { Customer: { name: { _ilike: $q } } }\n              { CustomerUser: { email: { _ilike: $q } } }\n              { Supplier: { name: { _ilike: $q } } }\n              { SupplierUser: { email: { _ilike: $q } } }\n              { Location: { name: { _ilike: $q } } }\n              { Taxonomy: { Taxonomy: { name: { _ilike: $q } } } }\n              { number: { _ilike: $q } }\n              { Invoices: { invoiceNumber: { _ilike: $q } } }\n            ]\n          }\n          {\n            _or: [\n              { _and: [{ timingStart: { _gte: $startDate } }, { timingStart: { _lte: $endDate } }] }\n              { _and: [{ scheduledAt: { _gte: $startDate } }, { scheduledAt: { _lte: $endDate } }] }\n            ]\n          }\n        ]\n        ",'\n        assetId: { _eq: $assetId }\n        status: { _in: $status }\n        type: { _in: $type }\n        slaId: {_in: $slaId}\n        customerId: { _eq: $customerId }\n        locationId: { _eq: $locationId }\n        sublocationId: { _eq: $sublocationId }\n        managerId: { _eq: $managerId }\n        Customer: { managerId: { _eq: $customerManagerId } }\n        paid: { _eq: $paid }\n        _or: [\n          { supplierId: { _eq: $supplierId } }\n          { SupplierOffers: { Supplier: { id: { _eq: $supplierId } } } }\n        ]\n      }\n      order_by: [$orderBy]\n    ) {\n      id\n      type\n      number\n      status\n      scheduledAt\n      timingStart\n      createdAt\n      tags: Taxonomy(\n        where: {\n          entity: { _eq: "Job" }\n          Taxonomy: {\n            _and: [\n              {status: { _eq: "active" }},\n              {type: { _eq: "tags" }}\n            ]\n\n          }\n        }\n      ) {\n        id\n        tag: Taxonomy {\n          id\n          name\n          meta\n          type\n        }\n      }\n\n      invoices: Invoices(order_by: { createdAt: desc }) {\n        invoiceNumber\n      }\n\n      customer: Customer {\n        id\n        type\n        name\n        status\n        vatId\n\n        manager: Manager {\n          id\n          fullName\n        }\n      }\n      location: Location {\n        id\n        name\n      }\n      sublocation: Sublocation {\n        id\n        name\n      }\n      manager: Manager {\n        id\n        nameFirst\n        nameLast\n      }\n      service: Service {\n        id\n        name\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n      sla: SLA {\n        name\n      }\n      supplier: Supplier {\n        id\n        name\n      }\n      supplierOffers: SupplierOffers {\n        supplier: Supplier {\n          id\n          name\n        }\n      }\n      timings: JobTimings(order_by: { createdAt: asc }) {\n        user: User {\n          fullName\n        }\n      }\n    }\n    meta: Job_aggregate(\n      where: {\n        _and: [\n          {\n            _or: [\n              { reference: { _ilike: $q } }\n              { title: { _ilike: $q } }\n              { number: { _ilike: $q } }\n              { description: { _ilike: $q } }\n              { Customer: { name: { _ilike: $q } } }\n              { CustomerUser: { email: { _ilike: $q } } }\n              { Supplier: { name: { _ilike: $q } } }\n              { SupplierUser: { email: { _ilike: $q } } }\n              { Location: { name: { _ilike: $q } } }\n              { Taxonomy: { Taxonomy: { name: { _ilike: $q } } } }\n              { number: { _ilike: $q } }\n              { Invoices: { invoiceNumber: { _ilike: $q } } }\n            ]\n          }\n          {\n            _or: [\n              { _and: [{ timingStart: { _gte: $startDate } }, { timingStart: { _lte: $endDate } }] }\n              { _and: [{ scheduledAt: { _gte: $startDate } }, { scheduledAt: { _lte: $endDate } }] }\n            ]\n          }\n        ]\n        ',"\n        assetId: { _eq: $assetId }\n        status: { _in: $status }\n        type: { _in: $type }\n        slaId: {_in: $slaId}\n        customerId: { _eq: $customerId }\n        locationId: { _eq: $locationId }\n        sublocationId: { _eq: $sublocationId }\n        managerId: { _eq: $managerId }\n        Customer: { managerId: { _eq: $customerManagerId } }\n        paid: { _eq: $paid }\n        _or: [\n          { supplierId: { _eq: $supplierId } }\n          { SupplierOffers: { Supplier: { id: { _eq: $supplierId } } } }\n        ]\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"]);return s=function(){return n},n}var u=(0,r.Ps)(o()),c=(0,r.Ps)(a()),d=function(n){var e=n.tagsWhere;return(0,r.Ps)(s(),e,e)}},20924:function(n,e,t){"use strict";var i=t(7297),r=t(75063),o=t(20725),a=t(17868),s=t(22666),u=t(94885);function c(){var n=(0,i.Z)(["\n  query GetDashboardList(\n    $accountId: Int\n    $customerId: Int\n    $supplierId: Int\n    $locationId: Int\n    $managerId: Int\n    $customerManagerId: Int\n    $adminId: Int\n    $startDate: timestamptz\n    $endDate: timestamptz\n    $asAt: timestamptz\n    $jobHoldReasonId: Int\n    $limit: Int\n    $monthStart: timestamptz\n    $offset: Int\n    $orderBy: dashboard_home_details_order_by!\n    $q: String\n    $tileName: String\n    $dayStart: timestamptz\n    $userId: Int\n    $yearStart: timestamptz\n    $number: String\n    $status: [String!]\n  ) {\n    jobs: getDashboard_HomeTile_Details(\n      args: {\n        accountId: $accountId\n        adminId: $adminId\n        asAt: $asAt\n        jobHoldReasonId: $jobHoldReasonId\n        monthStart: $monthStart\n        tileName: $tileName\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n        locationId: $locationId\n        managerId: $managerId\n        customerManagerId: $customerManagerId\n      }\n      where: {\n        _and: [\n          {\n            _or: [\n              { number: { _eq: $number } }\n              { reference: { _ilike: $q } }\n              { description: { _ilike: $q } }\n              { customerName: { _ilike: $q } }\n              { serviceName: { _ilike: $q } }\n              { assignedTo: { _ilike: $q } }\n              { supplierName: { _ilike: $q } }\n              { location: { _ilike: $q } }\n              { number: { _ilike: $q } }\n            ]\n          }\n          {\n            _or: [\n              { _and: [{ timingStart: { _gte: $startDate } }, { timingStart: { _lte: $endDate } }] }\n              { _and: [{ scheduledAt: { _gte: $startDate } }, { scheduledAt: { _lte: $endDate } }] }\n            ]\n          }\n        ]\n        ",'\n        status: { _in: $status }\n        customerId: { _eq: $customerId }\n        locationId: { _eq: $locationId }\n        managerId: { _eq: $managerId }\n        _or: [\n          { supplierId: { _eq: $supplierId } }\n          { SupplierOffers: { Supplier: { id: { _eq: $supplierId } } } }\n        ]\n      }\n      order_by: [$orderBy]\n      limit: $limit\n      offset: $offset\n    ) {\n      Assets(where: { entity: { _eq: "Job" } }) {\n        id\n        assetId\n        __typename\n      }\n      ...JobFields\n      ...JobAdminFields\n      admin: Admin {\n        id\n        name\n        __typename\n      }\n      customer: Customer {\n        ...AccountFields\n        manager: Manager {\n          id\n          fullName\n        }\n        __typename\n      }\n      location: Location {\n        id\n        name\n        __typename\n      }\n      job: Job {\n        status\n      }\n      manager: Manager {\n        ...UserFields\n        __typename\n      }\n      service: Service {\n        id\n        name\n        __typename\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n          __typename\n        }\n        __typename\n      }\n      tags: Taxonomy(\n        where: {\n          entity: { _eq: "Job" }\n          Taxonomy: {\n            status: { _eq: "active" }\n            type: { _eq: "tags" }\n          }\n        }\n      ) {\n        id\n        tag: Taxonomy {\n          id\n          name\n          meta\n          type\n        }\n      }\n      sla: SLA {\n        id\n        name\n        __typename\n      }\n      supplier: Supplier {\n        ...AccountFields\n        __typename\n      }\n      supplierOffers: SupplierOffers {\n        status\n        rate\n        supplier: Supplier {\n          ...AccountFields\n          __typename\n        }\n        __typename\n      }\n      timings: JobTimings(order_by: { createdAt: asc }) {\n        id\n        status\n        createdAt\n        user: User {\n          ...UserFields\n          __typename\n        }\n        __typename\n      }\n      id: jobId\n      number\n      # location\n      priority\n      scheduledAt\n      assignedTo\n      jobHoldReason\n      locationId\n      meta\n      managerId\n      description\n      customerName\n      customerId\n      reference\n      serviceName\n      status\n      supplierId\n      supplierName\n      timingStart\n      type\n      quoteNumber\n      quoteDue\n      createdAt\n    }\n    meta: getDashboard_HomeTile_Details_aggregate(\n      args: {\n        accountId: $accountId\n        adminId: $adminId\n        asAt: $asAt\n        jobHoldReasonId: $jobHoldReasonId\n        monthStart: $monthStart\n        tileName: $tileName\n        dayStart: $dayStart\n        userId: $userId\n        yearStart: $yearStart\n        locationId: $locationId\n        managerId: $managerId\n        customerManagerId: $customerManagerId\n      }\n      where: {\n        _and: [\n          {\n            _or: [\n              { number: { _eq: $number } }\n              { reference: { _ilike: $q } }\n              { description: { _ilike: $q } }\n              { customerName: { _ilike: $q } }\n              { serviceName: { _ilike: $q } }\n              { assignedTo: { _ilike: $q } }\n              { supplierName: { _ilike: $q } }\n              { location: { _ilike: $q } }\n              { number: { _ilike: $q } }\n            ]\n          }\n          {\n            _or: [\n              { _and: [{ timingStart: { _gte: $startDate } }, { timingStart: { _lte: $endDate } }] }\n              { _and: [{ scheduledAt: { _gte: $startDate } }, { scheduledAt: { _lte: $endDate } }] }\n            ]\n          }\n        ]\n        ',"\n        status: { _in: $status }\n        customerId: { _eq: $customerId }\n        locationId: { _eq: $locationId }\n        managerId: { _eq: $managerId }\n        supplierId: { _eq: $supplierId }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n        __typename\n      }\n      __typename\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return c=function(){return n},n}var d=function(n){var e=n.tagsWhere;return(0,r.Ps)(c(),e,e,a.z,s.WW,o.aL,o.wd,u.Px)};e.Z=d},20725:function(n,e,t){"use strict";t.d(e,{H_:function(){return g},aL:function(){return f},pf:function(){return _},sW:function(){return h},wd:function(){return y},xY:function(){return $},yT:function(){return v}});var i=t(7297),r=t(75063),o=t(22666);function a(){var n=(0,i.Z)(["\n  fragment JobFields on Job {\n    access\n    issueReportedDescription\n    adminId\n    costCategory\n    createdAt\n    description\n    id\n    meta\n    pricing\n    reference\n    scheduledAt\n    status\n    supplierLabourAmount\n    supplierMaterialsAmount\n    timing\n    timingEnd\n    timingNormalHours\n    timingStart\n    title\n    type\n    siteVisitStart\n    siteVisitEnd\n    siteVisitWeekends\n    amount\n    number\n    quoted\n    timingStatus\n    correctDuration\n    correctStart\n    correctEnd\n  }\n"]);return a=function(){return n},n}function s(){var n=(0,i.Z)(["\n  fragment JobQuoteFields on Job {\n    quoted\n    quoteNumber\n    quoteDue\n    quoteDueSupplier\n    quoteCharge\n  }\n"]);return s=function(){return n},n}function u(){var n=(0,i.Z)(["\n  fragment JobAdminFields on Job {\n    supplierId\n    supplierUserId\n  }\n"]);return u=function(){return n},n}function c(){var n=(0,i.Z)(["\n  fragment JobSupplierFields on Job {\n    supplierId\n    supplierUserId\n  }\n"]);return c=function(){return n},n}function d(){var n=(0,i.Z)(["\n  mutation UpdateJob(\n    $id: Int!\n    $changes: Job_set_input\n    $timing: [JobTiming_insert_input!]!\n    $_append: Job_append_input = {}\n  ) {\n    update_Job_by_pk(pk_columns: { id: $id }, _set: $changes, _append: $_append) {\n      id\n    }\n    insert_JobTiming(objects: $timing) {\n      returning {\n        id\n        status\n        createdAt\n      }\n    }\n  }\n"]);return d=function(){return n},n}function l(){var n=(0,i.Z)(["\n  mutation InsertJobTiming($timing: [JobTiming_insert_input!]!) {\n    insert_JobTiming(objects: $timing) {\n      returning {\n        id\n        status\n        createdAt\n      }\n    }\n  }\n"]);return l=function(){return n},n}function m(){var n=(0,i.Z)(['\n  query GetJobHistory(\n    $jobId: Int\n    $locationId: Int!\n    $limit: Int\n    $offset: Int\n    $serviceId: Int\n    $startDate: timestamptz!\n  ) {\n    jobs: Job(\n      limit: $limit\n      offset: $offset\n      order_by: { createdAt: desc }\n      where: {\n        createdAt: { _gte: $startDate }\n        id: { _neq: $jobId }\n        locationId: { _eq: $locationId }\n        serviceId: { _eq: $serviceId }\n        status: { _nin: ["pending", "raised", "offered", "accepted", "inProgress"] }\n      }\n    ) {\n      id\n      title\n      status\n      scheduledAt\n      createdAt\n      meta\n      service: Service {\n        id\n        name\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n    }\n    meta: Job_aggregate(\n      where: {\n        createdAt: { _gte: $startDate }\n        id: { _neq: $jobId }\n        locationId: { _eq: $locationId }\n        serviceId: { _eq: $serviceId }\n        status: { _nin: ["pending", "raised", "offered", "accepted", "inProgress"] }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n']);return m=function(){return n},n}function p(){var n=(0,i.Z)(['\n  query GetJobOffCanvas($jobId: Int!) {\n    job: Job_by_pk(id: $jobId) {\n      access\n      costCategory\n      customerSpendThreshold\n      description\n      supplierLabourAmount\n      supplierMaterialsAmount\n      quoteDue\n      quoteNumber\n      id\n      number\n      meta\n      paymentMethod\n      reference\n      status\n      title\n      type\n      quoted\n      invoices: Invoices(order_by: { createdAt: desc }) {\n        id\n        invoiceNumber\n      }\n      quotations: SupplierQuotes {\n        id\n        quoteNumber\n        status\n        lineItems: SupplierQuoteLineItems {\n          id\n          description\n          item\n          qty\n          qtyUnit\n          quoteId\n          total\n          type\n          unitRate\n          supplierTotal\n        }\n        supplier: Supplier {\n          id\n          type\n          name\n          accountUsers: Account_Users {\n            user: User {\n              id\n              fullName\n              nameFirst\n              nameLast\n              phone\n              email\n              devices: UserDevices(where: { status: { _eq: "active" } }) {\n                id\n                playerId\n              }\n            }\n          }\n        }\n      }\n      admin: Admin {\n        id\n        name\n      }\n      service: Service {\n        id\n        name\n      }\n      manager: Manager {\n        id\n        nameFirst\n        nameLast\n      }\n      customer: Customer {\n        id\n        name\n        website\n        slas: SLAs(where: { entity: { _eq: "Account" } }) {\n          id\n          entity\n          entityId\n          onSite\n          onSiteUnit\n          jobReport\n          jobReportUnit\n          completion\n          completionUnit\n          notes\n          inUse\n          normalRate\n          oohRate\n          premiumRate\n          minimumInterval\n          minimumLength\n          slaId\n          sla: SLA {\n            id\n            name\n            notes\n            normalRate\n            oohRate\n            premiumRate\n            onSite\n            onSiteUnit\n            jobReport\n            jobReportUnit\n            completion\n            completionUnit\n            minimumInterval\n            minimumLength\n          }\n        }\n      }\n      customerUser: CustomerUser {\n        id\n        nameFirst\n        nameLast\n        fullName\n        email\n        phone\n      }\n      supplier: Supplier {\n        id\n        name\n        contactUsers: Account_Users(where: { isContact: { _eq: true } }) {\n          id\n          role\n          position\n          isContact\n          lastSignInAt\n          userId\n          user: User {\n            id\n            fullName\n            nameFirst\n            nameLast\n            email\n            phone\n          }\n        }\n      }\n      supplierUser: SupplierUser {\n        id\n        fullName\n        nameFirst\n        nameLast\n        email\n        phone\n      }\n      location: Location {\n        id\n        name\n        addresses: Addresses(where: { entity: { _eq: "Location" } }) {\n          ...AddressEntityFields\n          address: Address {\n            ...AddressFields\n            country: Country {\n              id\n              name\n            }\n          }\n        }\n        slas: SLAs(where: { entity: { _eq: "Location" } }) {\n          id\n          entity\n          entityId\n          onSite\n          onSiteUnit\n          jobReport\n          jobReportUnit\n          completion\n          completionUnit\n          notes\n          inUse\n          normalRate\n          oohRate\n          premiumRate\n          minimumInterval\n          minimumLength\n          slaId\n          sla: SLA {\n            id\n            name\n            notes\n            normalRate\n            oohRate\n            premiumRate\n            onSite\n            onSiteUnit\n            jobReport\n            jobReportUnit\n            completion\n            completionUnit\n            minimumInterval\n            minimumLength\n          }\n        }\n      }\n      sla: SLA {\n        id\n        name\n        notes\n        normalRate\n        oohRate\n        premiumRate\n        onSite\n        onSiteUnit\n        jobReport\n        jobReportUnit\n        completion\n        completionUnit\n        minimumInterval\n        minimumLength\n      }\n      costCategoryTaxonomy: CostCategory {\n        id\n        name\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        id\n        taxonomyId\n        comments\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n    }\n  }\n  ',"\n  ","\n"]);return p=function(){return n},n}var f=(0,r.Ps)(a()),_=(0,r.Ps)(s()),y=(0,r.Ps)(u()),g=(0,r.Ps)(c()),$=(0,r.Ps)(d()),v=(0,r.Ps)(l()),h=(0,r.Ps)(m());(0,r.Ps)(p(),o.WW,o.MR)},57779:function(n,e,t){"use strict";t.d(e,{G:function(){return M}});var i=t(26042),r=t(69396),o=t(85893),a=t(45697),s=t.n(a),u=t(6812),c=t(92711),d=t(45451),l=t(11013),m=t(3770),p=t(452),f=t(40826),_=function(n,e){var t=function(){return(0,o.jsx)(f.Z,{context:"success",icon:"check",size:"sm",title:"Yes"})},i=function(){return(0,o.jsx)(f.Z,{context:"warning",icon:"times",size:"sm",title:"No"})},r=function(){return(0,o.jsx)(f.Z,{context:"dark",icon:"minus",size:"sm",title:"Unavailable"})};return"image"===n?(null==e?void 0:e.thumbnails)&&(null==e?void 0:e.thumbnails.length)?t:i:r},y=t(12632),g=t(74944),$=t(86532),v=t(22797),h=t(38895),I=t(5616),b=t(11057),x=t(51233),q=t(21023),Z=t(15861),S=t(14924),A=t(70872),j=t(58886),k=t(90948),w=t(67294),C=t(77314),T=(0,t(42850).bH)(C.ZP),P=function(n){var e=n.images,t=n.showPagination,r=n.height,a=(0,w.useState)(0),s=a[0],u=a[1],c=function(n){u(n)};return(0,o.jsxs)(x.Z,{width:"100%",alignItems:"center",children:[(0,o.jsx)(T,{index:s,onChangeIndex:c,enableMouseEvents:!0,interval:1e4,children:e.map(function(n){return(0,o.jsx)(I.Z,{component:"img",sx:{height:r,display:"block",overflow:"hidden",width:"100%",objectFit:"cover"},src:n.filename,alt:n.caption},n.caption)})}),t&&e.length>1&&(0,o.jsx)(U,{page:s+1,count:e.length,onChange:function(n,e){return c(e-1)},variant:"outlined",shape:"rounded",renderItem:function(n){return(0,o.jsx)(j.Z,(0,i.Z)({slots:{previous:function(){return"Previous"},next:function(){return"Next"}}},n))}})]})};P.defaultProps={images:[],showPagination:!0},P.propTypes={height:s().oneOfType([s().string,s().number]),images:s().arrayOf(s().shape({caption:s().string,filename:s().string.isRequired}).isRequired).isRequired,showPagination:s().bool};var U=(0,k.ZP)(A.Z)(function(n){n.hidePrevButton,n.hideNextButton;var e,t=n.theme;return e={},(0,S.Z)(e,"&.MuiPagination-root",{alignSelf:"center",marginTop:"16px"}),(0,S.Z)(e,"& .MuiPaginationItem-root",{fontWeight:600,margin:0,borderRadius:0}),(0,S.Z)(e,"& .MuiPagination-ul > li:last-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"0 5px 5px 0"}),(0,S.Z)(e,"& .MuiPagination-ul > li:first-child .MuiPaginationItem-previousNext:last-child",{margin:0,borderRadius:"5px 0 0 5px"}),(0,S.Z)(e,"& button.Mui-selected",{color:t.palette.white.main,backgroundColor:t.palette.secondary.main}),e}),D=t(27434),L=t(21830),R=t(83162),N=t(74492),M=function(n){var e=n.carousel,t=n.category,a=n.data,s=n.entity,f=n.entityId,S=n.filters,A=n.listView,j=n.mediaMeta,k=n.onMediaAdd,w=n.onMediaRemove,C=n.showActionButtons,T=n.showEntityColumn,U=n.showItemActions,M=n.title,z=n.type,F=n.expanded,J=n.onChangeExpanded,E=n.hideExpandIcon,O=n.mediaFormProps,B=n.offCanvasProps,H=n.onlySingleMedia,V=n.elevation,W=n.accordionSx,G=n.refetch,Y=(0,y.x)({filters:S}),K=Y.initialData,X=Y.ref,Q=(0,g.x)(),nn=Q.hasRole,ne=Q.user,nt=(0,N.a)(),ni=(0,u.a)(c.t,{variables:(0,r.Z)((0,i.Z)({},K),{entity:s,entityId:f,category:t,adminId:ne.adminId,meta:j})}),nr=ni.data,no=void 0===nr?{items:[],meta:{aggregate:{totalCount:0}}}:nr,na=no.items,ns=no.meta,nu=ni.loading,nc=ni.refetch,nd=function(n){nt.close(),a.length||nc();var e=n.map(function(n){return(0,r.Z)((0,i.Z)({},n),{link:"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(n.filename)})});k&&k(e),G&&G()},nl=function(n){nt.close(),a.length||nc(),w&&w(n),G&&G()},nm=function(n){n.stopPropagation(),nt.show((0,i.Z)({content:(0,o.jsx)(p.z,(0,i.Z)({accept:"image/*",adminId:ne.adminId,category:t,entity:s,entityId:f,expiryShow:!1,mediaMeta:j,multiple:!0,onSuccess:nd,type:"image"},O)),title:"Upload Photos"},B))},np=function(n){n.stopPropagation(),nt.show((0,i.Z)({content:(0,o.jsx)(p.z,(0,i.Z)({accept:".pdf, .doc, .docx, .xlsx",adminId:ne.adminId,category:t,entity:s,entityId:f,expiryShow:!1,mediaMeta:j,onSuccess:nd,type:"document"},O)),title:"Upload Documents"},B))},nf=function(n){nt.show({content:(0,o.jsx)(l.d,{mediaId:n.data.id,onSuccess:nl}),submit:!1,title:"Delete Media"})},n_=function(n){nt.show({content:(0,o.jsx)(m.z,{media:n.data,toggleShow:nt.close}),title:"Media Details"})},ny=function(n){return[{context:"primary",icon:"info",onClick:function(e){return n_(n)},tooltip:"Details"},{context:"danger",icon:"delete",onClick:function(e){return nf(n)},tooltip:"Delete"}]},ng=[{field:"file",headerName:"File",flex:1,sortable:!1,renderCell:function(n){var e=n.row,t=n.value;return(0,o.jsx)(R.r,{color:"secondary",onClick:function(n){n.preventDefault(),window.open("".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(e.filename))},children:t})}},{field:"visibility",headerName:"Visible to",flex:1,sortable:!1},{hide:!T,field:"entity",headerName:"Entity",flex:1,sortable:!1},{field:"authority",headerName:"",width:50,sortable:!1,renderCell:function(n){var e=n.value;return(0,o.jsx)(o.Fragment,{children:(null==e?void 0:e.adminOnly)&&(0,o.jsx)(q.Z,{title:"Admin user only",children:(0,o.jsx)(I.Z,{component:"img",alt:"Admin Only",src:"/messaging/admin-only.svg",sx:{height:"24px"}})})})}},{field:"uploaded",headerName:"Uploaded by",flex:1,sortable:!1},{hide:!A,field:"thumbnails",headerName:"Thumbnails",flex:1,sortable:!1,renderCell:function(n){var e=n.value;return"function"==typeof e?e():e}},{hide:!U,field:"actions",headerName:"",width:50,sortable:!1,renderCell:function(n){var e=n.row;return nn("admin")?(0,o.jsx)(L.C,{actionsData:ny,row:e}):ne.id===e.userId?(0,o.jsx)(L.C,{actionsData:ny,row:e}):null}}],n$=[],nv=na.filter(function(n){var e=n.item;return(null==e?void 0:e.visibility)&&nn(null==e?void 0:e.visibility)}).map(function(n){var e=n.entity,t=n.entityId,i=n.id,r=n.item,o=r.caption,a=r.filename,s=r.meta,u=r.name,c=r.type,d=r.user,l=r.visibility;return{data:r,id:i,userId:null==d?void 0:d.id,filename:a,visibility:l.join(", "),file:o||u||a,entity:e&&"".concat(e,"#").concat(t),authority:s,uploaded:"".concat(null==d?void 0:d.nameFirst," ").concat(null==d?void 0:d.nameLast),thumbnails:_(c,s),actions:""}}),nh=(na.filter(function(n){var e=n.item;return(null==e?void 0:e.visibility)&&nn(null==e?void 0:e.visibility)}).forEach(function(n){var e=n.item,t=e.caption,i=e.filename;"image"===e.type&&n$.push({caption:t,filename:"".concat("https://cleverly-media.s3.eu-west-2.amazonaws.com","/").concat(i)})}),n$),nI=nh.length;return(0,o.jsxs)($.Z,{elevation:V,expanded:F,onChange:J,sx:W,children:[(0,o.jsx)(h.Z,(0,r.Z)((0,i.Z)({},E?{}:{expandIcon:(0,o.jsx)(D.Z,{})}),{children:(0,o.jsx)(Z.Z,{variant:"h6",children:M})})),(0,o.jsxs)(v.Z,{children:[e&&nI>0&&(0,o.jsx)(P,{height:"200px",images:nh}),(0,o.jsx)(d.i,{columns:ng,rows:nv,loading:nu,meta:ns,ref:X,refetch:nc,columnVisibilityModel:{entity:T,thumbnails:A,actions:U}}),C&&!(H&&nv.length>0)&&(0,o.jsxs)(x.Z,{direction:"row",justifyContent:"center",spacing:2,mt:2,children:[(!z||"document"===z)&&(0,o.jsx)(b.Z,{variant:"contained",color:"secondary",onClick:np,children:"Add Document"}),(!z||"image"===z||"avatar"===z)&&(0,o.jsxs)(b.Z,{variant:"contained",color:"secondary",onClick:nm,children:["Add ",z?"".concat(z.charAt(0).toUpperCase()).concat(z.slice(1)):"Image"]})]})]})]})};M.propTypes={carousel:s().bool,category:s().string,data:s().array,entity:s().string,entityId:s().number,filters:s().object,listView:s().bool,mediaMeta:s().object,onMediaAdd:s().func,onMediaRemove:s().func,showActionButtons:s().bool,showEntityColumn:s().bool,showItemActions:s().bool,title:s().string,type:s().string,expanded:s().bool,onChangeExpanded:s().func,hideExpandIcon:s().bool,mediaFormProps:s().object,offCanvasProps:s().object,onlySingleMedia:s().bool,elevation:s().number,accordionSx:s().object,refetch:s().func},M.defaultProps={carousel:!0,data:[],filters:{},listView:!1,mediaMeta:null,showActionButtons:!0,showEntityColumn:!1,showItemActions:!0,title:"Media",type:null,onChangeExpanded:function(){},mediaFormProps:{},offCanvasProps:{},category:"media",onlySingleMedia:!1,elevation:1,accordionSx:{},refetch:function(){}}},94885:function(n,e,t){"use strict";t.d(e,{$E:function(){return L},AX:function(){return q},I4:function(){return x},JA:function(){return S},MT:function(){return C},Px:function(){return j},WF:function(){return A},ZA:function(){return M},a8:function(){return k},fA:function(){return D},fo:function(){return Z},ge:function(){return N},iM:function(){return U},nE:function(){return T},nh:function(){return P},r1:function(){return w},tW:function(){return z},uz:function(){return R}});var i=t(7297),r=t(75063);function o(){var n=(0,i.Z)(["\n  mutation InsertAccountUser($objects: [Account_User_insert_input!]!) {\n    insert_Account_User(objects: $objects) {\n      returning {\n        id\n      }\n    }\n  }\n"]);return o=function(){return n},n}function a(){var n=(0,i.Z)(["\n  mutation UpdateUser(\n    $id: Int!\n    $accountUserId: Int!\n    $accountUserChanges: Account_User_set_input\n    $changes: User_set_input\n    $updateAccountUser: Boolean!\n  ) {\n    update_Account_User_by_pk(pk_columns: { id: $accountUserId }, _set: $accountUserChanges)\n      @include(if: $updateAccountUser) {\n      id\n    }\n    update_User_by_pk(pk_columns: { id: $id }, _set: $changes) {\n      id\n    }\n  }\n"]);return a=function(){return n},n}function s(){var n=(0,i.Z)(["\n  query GetUsers(\n    $accountId: Int\n    $accountType: String\n    $date: timestamptz\n    $limit: Int\n    $offset: Int\n    $q: String\n    $orderBy: User_order_by!\n    $status: String\n  ) {\n    users: User(\n      limit: $limit\n      offset: $offset\n      where: {\n        Account_Users: { Account: { id: { _eq: $accountId }, type: { _eq: $accountType } } }\n        createdAt: { _eq: $date }\n        _or: [\n          { email: { _ilike: $q } }\n          { nameFirst: { _ilike: $q } }\n          { nameLast: { _ilike: $q } }\n        ]\n        status: { _eq: $status }\n      }\n      order_by: [$orderBy]\n    ) {\n      id\n      name: nameFirst\n      nameFirst\n      nameLast\n      phone\n      status\n      email\n      createdAt\n      meta\n      invoiceThreshold\n      quoteThreshold\n      media: Media {\n        id\n        medium: Medium {\n          id\n          category\n          filename\n          meta\n          type\n        }\n      }\n      accounts: Account_Users {\n        id\n        role\n        position\n        isContact\n        status\n        account: Account {\n          id\n          name\n          type\n        }\n        userLocations: User_Account_Locations {\n          accountLocationId\n        }\n      }\n    }\n    meta: User_aggregate(\n      where: {\n        Account_Users: { Account: { id: { _eq: $accountId }, type: { _eq: $accountType } } }\n        createdAt: { _eq: $date }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        status: { _eq: $status }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"]);return s=function(){return n},n}function u(){var n=(0,i.Z)(["\n  query GetUser($id: Int!) {\n    user: User_by_pk(id: $id) {\n      id\n      fullName\n      name: nameFirst\n      nameFirst\n      nameLast\n      phone\n      status\n      email\n      createdAt\n      meta\n      invoiceThreshold\n      quoteThreshold\n      media: Media {\n        id\n        medium: Medium {\n          id\n          category\n          filename\n          meta\n          type\n        }\n      }\n      accounts: Account_Users {\n        id\n        role\n        position\n        isContact\n        status\n        account: Account {\n          id\n          name\n          type\n        }\n      }\n    }\n  }\n"]);return u=function(){return n},n}function c(){var n=(0,i.Z)(["\n  query CheckDuplicateEmail($email: String!) {\n    users: User_public(where: { email: { _eq: $email } }) {\n      id\n      nameFirst\n      nameLast\n      email\n      phone\n    }\n  }\n"]);return c=function(){return n},n}function d(){var n=(0,i.Z)(["\n  fragment UserFields on User {\n    id\n    email\n    nameFirst\n    nameLast\n    fullName\n    phone\n    status\n  }\n"]);return d=function(){return n},n}function l(){var n=(0,i.Z)(["\n  mutation SendGoogleAuthCode($code: String!, $id: Int!, $type: String!) {\n    createGoogleToken(code: $code, id: $id, type: $type) {\n      success\n      tokens\n      error\n    }\n  }\n"]);return l=function(){return n},n}function m(){var n=(0,i.Z)(["\n  mutation GenerateMSURL($type: String!, $id: Int!) {\n    genenrateMSURL(id: $id, type: $type) {\n      url\n    }\n  }\n"]);return m=function(){return n},n}function p(){var n=(0,i.Z)(["\n  mutation signoutMS($id: Int!, $type: String!, $email: String!) {\n    signoutMS(id: $id, type: $type, email: $email) {\n      error\n      msId\n      success\n    }\n  }\n"]);return p=function(){return n},n}function f(){var n=(0,i.Z)(["\n  query getAccountMeta($id: Int!) {\n    account: Account_by_pk(id: $id) {\n      meta\n    }\n  }\n"]);return f=function(){return n},n}function _(){var n=(0,i.Z)(["\n  query user($id: Int!) {\n    user: User_by_pk(id: $id) {\n      meta\n      invoiceThreshold\n      quoteThreshold\n    }\n  }\n"]);return _=function(){return n},n}function y(){var n=(0,i.Z)(["\n  query GetAccountUserMeta($userId: Int!, $accountId: Int!) {\n    accountUser: Account_User(where: { userId: { _eq: $userId }, accountId: { _eq: $accountId } }) {\n      meta\n    }\n  }\n"]);return y=function(){return n},n}function g(){var n=(0,i.Z)(["\n  mutation UpdateAccountUserByUserIdAccoutId(\n    $userId: Int!\n    $accountId: Int!\n    $changes: Account_User_set_input!\n  ) {\n    update_Account_User(\n      where: { userId: { _eq: $userId }, accountId: { _eq: $accountId } }\n      _set: $changes\n    ) {\n      returning {\n        id\n      }\n    }\n  }\n"]);return g=function(){return n},n}function $(){var n=(0,i.Z)(["\n  mutation updateAccount($accountId: Int!, $set: Account_set_input!) {\n    update_Account_by_pk(pk_columns: { id: $accountId }, _set: $set) {\n      id\n    }\n  }\n"]);return $=function(){return n},n}function v(){var n=(0,i.Z)(["\n  mutation updateUserMeta($userId: Int!, $meta: jsonb!) {\n    update_User_by_pk(pk_columns: { id: $userId }, _set: { meta: $meta }) {\n      id\n      meta\n    }\n  }\n"]);return v=function(){return n},n}function h(){var n=(0,i.Z)(['\n  query userDevices($accountId: Int!) {\n    users: User(\n      where: {\n        Account_Users: { accountId: { _eq: $accountId }, status: { _eq: "active" } }\n        UserDevices: { status: { _eq: "active" } }\n        status: { _eq: "active" }\n      }\n    ) {\n      id\n      fullName\n      devices: UserDevices(\n        order_by: { updatedAt: desc_nulls_last }\n        where: { status: { _eq: "active" } }\n        limit: 1\n      ) {\n        id\n        playerId\n      }\n    }\n  }\n']);return h=function(){return n},n}function I(){var n=(0,i.Z)(['\n  query GetAccountLocations($accountId: Int, $limit: Int, $offset: Int) {\n    location: Location(\n      offset: $offset\n      limit: $limit\n      where: {\n        Account_Locations: {\n          accountId: { _eq: $accountId }\n          Account: { type: { _eq: "customer" } }\n        }\n      }\n    ) {\n      id\n      name\n      accountLocations: Account_Locations {\n        id\n      }\n      addresses: Addresses(where: { entity: { _eq: "Location" }, registered: { _eq: true } }) {\n        id\n        status\n        address: Address {\n          id\n          name\n          addressLine1\n          postCode\n        }\n      }\n    }\n    meta: Location_aggregate(\n      where: {\n        Account_Locations: {\n          accountId: { _eq: $accountId }\n          Account: { type: { _eq: "customer" } }\n        }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n']);return I=function(){return n},n}function b(){var n=(0,i.Z)(["\n  mutation InsertUserAccountLocations(\n    $accountUserId: Int!\n    $objects: [User_Account_Location_insert_input!]!\n  ) {\n    delete_User_Account_Location(where: { accountUserId: { _eq: $accountUserId } }) {\n      affected_rows\n    }\n    insert_User_Account_Location(objects: $objects) {\n      affected_rows\n      returning {\n        id\n      }\n    }\n  }\n"]);return b=function(){return n},n}var x=(0,r.Ps)(o()),q=(0,r.Ps)(a()),Z=(0,r.Ps)(s()),S=(0,r.Ps)(u()),A=(0,r.Ps)(c()),j=(0,r.Ps)(d()),k=(0,r.Ps)(l()),w=(0,r.Ps)(m()),C=(0,r.Ps)(p()),T=(0,r.Ps)(f()),P=(0,r.Ps)(_()),U=(0,r.Ps)(y()),D=(0,r.Ps)(g()),L=(0,r.Ps)($()),R=(0,r.Ps)(v()),N=(0,r.Ps)(h()),M=(0,r.Ps)(I()),z=(0,r.Ps)(b())},16605:function(n,e,t){"use strict";t.d(e,{S:function(){return i}});var i=function(n,e){var t=document.createElement("a");"string"==typeof t.download?(document.body.appendChild(t),t.download=e,t.href=n,t.click(),document.body.removeChild(t)):location.replace(n)}},19504:function(n,e,t){"use strict";t.d(e,{l:function(){return i}});var i=function(n,e){var t=Math.pow(10,e);return Math.round(n*t)/t}},98521:function(n,e,t){"use strict";t.d(e,{O:function(){return i},v:function(){return r}});var i=[{text:"Country",value:""},{text:"United Kingdom",value:1},{text:"Ireland",value:4}],r=[{label:"United Kingdom",value:1},{label:"Ireland",value:4}]},4438:function(n,e,t){"use strict";t.d(e,{SR:function(){return a},Tq:function(){return s},YK:function(){return o},cJ:function(){return r},pX:function(){return i}});var i=["customerVat","supplier"],r=["ProformaInvoiceCustomer","ProformaInvoiceSupplier"],o=["customerPpmInvoice","supplierPpmInvoice"],a={customer:["customerVat","ProformaInvoiceCustomer","customerPpmInvoice"],supplier:["supplier","ProformaInvoiceSupplier","supplierPpmInvoice"]},s={customerVat:"Customer VAT Invoice",supplier:"Supplier Invoice",ProformaInvoiceCustomer:"Customer ad-hoc Invoice",ProformaInvoiceSupplier:"Supplier ad-hoc Invoice",customerPpmInvoice:"PPM Customer Invoice",supplierPpmInvoice:"PPM Supplier Invoice"}},21428:function(n,e,t){"use strict";t.r(e);var i=t(85893),r=t(24716),o=t(52619),a={filterType:"page"},s={filterType:"page"},u={filterType:"page"},c=function(){return(0,i.jsx)(o.A,{showLocationSelector:!0,calendarInitialFilters:a,tableInitialFilters:s,itemsInitialFilters:u,hideItemsFilters:["complianceCategory"]})};c.getLayout=function(n){return(0,i.jsx)(r.Z,{children:n})},e.default=c},40872:function(n,e,t){"use strict";function i(){return(i=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}).apply(this,arguments)}function r(){return i.apply(this,arguments)}t.d(e,{Z:function(){return r}})}},function(n){n.O(0,[3662,6898,9809,2283,212,8890,9511,2583,6310,4599,4135,8579,4244,7645,3776,1564,2329,778,1023,3911,1417,9957,6540,3425,1870,5037,8062,1352,2429,9313,4211,3704,1121,2461,5926,4594,4716,8359,6557,6937,2619,9774,2888,179],function(){return n(n.s=89593)}),_N_E=n.O()}]);