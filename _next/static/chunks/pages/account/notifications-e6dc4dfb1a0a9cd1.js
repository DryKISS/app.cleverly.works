(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2769],{55843:function(n,e,t){"use strict";t.d(e,{Z:function(){return _}});var r,i,a,o,c,s=t(39725),u=t(51174),d=t(67294),l=t(45697),m=t(10367),p=t(66349),g=t(55255),f={xxsSize:"0.25rem",xsSize:"0.5rem",smSize:"0.75rem",mdSize:"1rem",lgSize:"1.5rem",xlSize:"2rem",xxlSize:"2.5rem",xxxlSize:"3rem"},v=function(n){var e="",t=0;return(n.forEach(function(n){n.v&&(t++,e+="".concat(n.k,": ").concat(f[n.v+"Size"],";\n      ").concat(g.Z.desktop(r||(r=(0,u.Z)(["\n        ",": calc("," * 2);"])),n.k,f[n.v+"Size"]),"\n      "))}),0===t)?(0,m.iv)(i||(i=(0,u.Z)(["\n      margin-bottom: ",";\n      ","\n    "])),f.mdSize,g.Z.desktop(a||(a=(0,u.Z)(["\n        margin-bottom: calc("," * 2);"])),f.mdSize)):(0,m.iv)(o||(o=(0,u.Z)(["\n    ","\n  "])),e)},h=function(n){var e=n.children,t=n.className,r=n.content,i=n.margin,a=n.marginX,o=n.marginY,c=n.marginTop,s=n.marginRight,u=n.marginBottom,l=n.marginLeft,m=n.padding,p=n.paddingX,g=n.paddingY,f=n.paddingTop,v=n.paddingRight,h=n.paddingBottom,_=n.paddingLeft;return d.createElement(b,{className:t,margin:i,marginX:a,marginY:o,marginTop:c,marginRight:s,marginBottom:u,marginLeft:l,padding:m,paddingX:p,paddingY:g,paddingTop:f,paddingRight:v,paddingBottom:h,paddingLeft:_},r||e)};h.displayName="Space";var b=m.ZP.div(c||(c=(0,u.Z)(["\n  margin: 0;\n  padding: 0;\n  ","\n"])),function(n){var e=n.margin,t=n.marginBottom,r=n.marginTop,i=n.marginLeft,a=n.marginRight,o=n.marginX,c=n.marginY,u=n.padding,d=n.paddingBottom,l=n.paddingLeft,m=n.paddingRight,p=n.paddingTop,g=n.paddingX,f=n.paddingY;return v([{k:"margin",v:e},{k:"margin-bottom",v:t},{k:"margin-left",v:i},{k:"margin-right",v:a},{k:"margin-top",v:r},{k:"padding",v:u},{k:"padding-bottom",v:d},{k:"padding-left",v:l},{k:"padding-right",v:m},{k:"padding-top",v:p}].concat((0,s.Z)(c?[{k:"margin-top",v:c},{k:"margin-bottom",v:c}]:[]),(0,s.Z)(o?[{k:"margin-left",v:o},{k:"margin-right",v:o}]:[]),(0,s.Z)(f?[{k:"padding-top",v:f},{k:"padding-bottom",v:f}]:[]),(0,s.Z)(g?[{k:"padding-left",v:g},{k:"padding-right",v:g}]:[])))});h.propTypes={children:l.node,content:l.string,margin:(0,l.oneOf)(Object.values(p.Z)),marginY:(0,l.oneOf)(Object.values(p.Z)),marginX:(0,l.oneOf)(Object.values(p.Z)),marginTop:(0,l.oneOf)(Object.values(p.Z)),marginRight:(0,l.oneOf)(Object.values(p.Z)),marginBottom:(0,l.oneOf)(Object.values(p.Z)),marginLeft:(0,l.oneOf)(Object.values(p.Z)),padding:(0,l.oneOf)(Object.values(p.Z)),paddingY:(0,l.oneOf)(Object.values(p.Z)),paddingX:(0,l.oneOf)(Object.values(p.Z)),paddingTop:(0,l.oneOf)(Object.values(p.Z)),paddingRight:(0,l.oneOf)(Object.values(p.Z)),paddingBottom:(0,l.oneOf)(Object.values(p.Z)),paddingLeft:(0,l.oneOf)(Object.values(p.Z))};var _=h},58594:function(n,e,t){"use strict";t.d(e,{Z:function(){return k}});var r,i,a,o,c,s=t(51174),u=t(18391),d=t(66080),l=t(67294),m=t(45697),p=t(10367),g=t(64522),f=["disabled"],v=(0,l.forwardRef)(function(n,e){var t=n.disabled,r=(0,d.Z)(n,f);return l.createElement(h,(0,u.Z)({disabled:t,ref:e,type:"checkbox"},r))}),h=p.ZP.input(r||(r=(0,s.Z)(["\n  cursor: pointer;\n  margin-right: 0.5rem;\n"])));v.propTypes={disabled:m.bool},v.defaultProps={stacked:!1};var b=t(92415),_=["data","errors","legend","stacked"],y=["disabled","label"],Z=function(n){var e=n.data,t=n.errors,r=n.legend,i=n.stacked,a=(0,d.Z)(n,_);return l.createElement($,{error:t[a.name]},r&&l.createElement("legend",null,r),e.map(function(n){var e=n.disabled,r=n.label,o=(0,d.Z)(n,y);return l.createElement(O,{htmlFor:o.id,key:o.id,stacked:i},l.createElement(g.Z,(0,u.Z)({component:v,disabled:e,errors:t[a.name],showError:!1},o,a)),r)}))};Z.displayName="Checkbox";var $=p.ZP.fieldset(i||(i=(0,s.Z)(["\n  border-radius: 0.25rem;\n  color: ",";\n  ","\n"])),function(n){return n.theme.COLOUR.dark},function(n){return n.error&&(0,p.iv)(a||(a=(0,s.Z)(["\n      ","\n      padding: 0.5rem;\n    "])),function(n){return(0,b.Z)(n)})}),O=p.ZP.label(o||(o=(0,s.Z)(["\n  cursor: pointer;\n  margin-right: 1.25rem;\n  position: relative;\n  ","\n"])),function(n){return n.stacked&&(0,p.iv)(c||(c=(0,s.Z)(["\n      display: block;\n      margin: 0.5rem 0;\n    "])))});Z.propTypes={data:m.array.isRequired,errors:m.object,legend:m.string,stacked:m.bool},Z.defaultProps={data:[],errors:{},stacked:!1};var k=Z},70982:function(n,e,t){"use strict";var r,i=t(51174),a=t(66080),o=t(67294),c=t(45697),s=t(10367),u=t(55843),d=t(66349),l=["message","colour"],m=function(n){var e=n.message,t=n.colour;return(0,a.Z)(n,l),o.createElement(u.Z,{marginTop:d.Z.XS},o.createElement(p,{color:t},e))};m.displayName="FormError";var p=s.ZP.small(r||(r=(0,i.Z)(["\n  color: ",";\n  display: block;\n  font-size: 0.625rem;\n  font-weight: 400;\n  width: 100%;\n"])),function(n){var e=n.theme,t=n.colour;return null!=t?t:e.COLOUR.danger});m.propTypes={message:c.string.isRequired,colour:c.string},e.Z=m},76600:function(n,e,t){"use strict";var r,i=t(51174),a=t(67294),o=t(45697),c=t(10367),s=function(n){var e=n.children,t=n.className,r=n.handleSubmit,i=n.id,o=n.style;return a.createElement(u,{className:t,id:i,onSubmit:r,style:o},e)};s.displayName="Form";var u=c.ZP.form(r||(r=(0,i.Z)(["\n  margin-bottom: 1rem;\n"])));s.propTypes={children:o.node.isRequired,className:o.any,handleSubmit:o.func.isRequired,id:o.string,style:o.any},e.Z=s},64522:function(n,e,t){"use strict";var r=t(18391),i=t(21614),a=t(66080),o=t(67294),c=t(70982),s=t(55843),u=t(51466),d=t(66349),l=["component","errors","children","helperMessage","register","show","showError","validate"];function m(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function p(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?m(Object(t),!0).forEach(function(e){(0,i.Z)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var g=function(n){var e=n.component,t=n.errors,i=n.children,m=n.helperMessage,g=n.register,f=n.show,v=n.showError,h=n.validate,b=(0,a.Z)(n,l);return o.createElement(o.Fragment,null,o.createElement(e,(0,r.Z)({"aria-label":b.name,errors:null==t?void 0:t.message,key:b.name,name:b.name,ref:g(p(p(p(p(p({validate:h},b.max&&{max:b.max}),b.min&&{min:b.min}),b.maxLength&&{maxLength:b.maxLength}),b.minLength&&{minLength:b.minLength}),b.regExp&&{pattern:RegExp(b.regExp)})),style:p({display:f?void 0:"none"},b.style)},b),i),m&&o.createElement(s.Z,{marginTop:d.Z.SM,marginBottom:d.Z.XS},o.createElement(u.Z,{size:d.Z.XS,context:"default"},m)),v&&o.createElement(c.Z,{message:(null==t?void 0:t.message)||""}))};g.defaultProps={errors:{},register:function(){},show:!0,showError:!1},e.Z=g},92415:function(n,e,t){"use strict";var r,i,a=t(51174),o=t(10367),c=function(n){var e=n.theme,t=n.isTyping,c=n.withAddon;return(0,o.iv)(r||(r=(0,a.Z)(["\n    border-color: ",";\n    border-image: initial;\n    border-style: solid;\n    border-left-width: ",";\n    &:hover {\n      border-color: ",";\n    }\n    &:focus {\n      border-color: ",";\n    }\n\n    ","\n  "])),e.COLOUR.danger,!c&&"0.25rem",!t&&e.COLOUR.danger,e.COLOUR.danger,!0===t&&(0,o.iv)(i||(i=(0,a.Z)(["\n      box-shadow: 0px 0px 4px ",";\n    "])),e.COLOUR.danger))};e.Z=c},19076:function(n,e,t){"use strict";var r=t(21614),i=t(67294),a=t(45697),o=t(15214),c=t(76312),s=t(17813),u=t(18645),d=t(55843),l=t(28368);function m(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,r)}return t}function p(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?m(Object(t),!0).forEach(function(e){(0,r.Z)(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}var g=function(n){var e=n.children,t=n.meta,r=n.pageHeading,a=n.resultAlert,l=n.View,m=a.context,g=a.message,f=p(p({},{description:"Admin",path:"/",title:"Admin"}),t);return i.createElement(i.Suspense,{fallback:i.createElement(u.Z,{indicator:i.createElement(c.Z,null)})},i.createElement(s.Z,{fluid:!0,meta:f,pageHeading:r},l||e,g&&i.createElement(i.Fragment,null,i.createElement(d.Z,null),i.createElement(o.Z,{content:g,context:m}))))};g.displayName="Dashboard",g.propTypes={children:a.node,meta:(0,a.shape)({description:a.string,path:a.string,title:a.string}),pageHeading:(0,a.shape)({center:a.bool,context:(0,a.oneOf)(Object.values(l.Z)),divider:a.bool,heading:a.any.isRequired,help:a.bool,helpContent:a.any,strapline:a.string}),resultAlert:(0,a.shape)({context:a.string,message:a.string}),View:a.node},g.defaultProps={resultAlert:{context:"success",message:""}},e.Z=g},17813:function(n,e,t){"use strict";t.d(e,{Z:function(){return _}});var r,i=t(51174),a=t(67294),o=t(45697),c=t(10367),s=t(94303),u=t(74147),d=t(9008),l=t.n(d),m=function(n){var e=n.canonical,t=n.brand,r=n.meta,i=r.description,o=r.path,c=r.title;return a.createElement(l(),null,a.createElement("title",null,c," | ",t),a.createElement("meta",{name:"description",content:i,key:"description"}),a.createElement("meta",{rel:"canonical",href:e+o,key:"canonical"}),a.createElement("meta",{property:"og:title",content:c}),a.createElement("meta",{property:"og:description",content:i}),a.createElement("meta",{property:"og:url",content:e+o}),a.createElement("meta",{name:"twitter:url",content:e+o}),a.createElement("meta",{name:"twitter:title",content:c}),a.createElement("meta",{name:"twitter:description",content:i}))};m.displayName="MetaHead",m.propTypes={brand:o.string.isRequired,meta:o.object.isRequired};var p=t(35599),g=t(55843),f=t(28368),v=t(66349),h=function(n){var e=n.children,t=n.fluid,r=n.meta,i=n.padding,o=n.pageHeading,c=(0,a.useContext)(s.Z).config,d=c.Brand,l=c.Canonical;return a.createElement(b,null,i&&a.createElement(g.Z,{paddingTop:i}),r&&a.createElement(m,{canonical:l,brand:d.name,meta:r}),a.createElement(u.Z,{fluid:t},o&&a.createElement(p.Z,o),e),i&&a.createElement(g.Z,{paddingBottom:i}))};h.displayName="Page";var b=c.ZP.div(r||(r=(0,i.Z)(["\n  background-color: ",";\n"])),function(n){return n.theme.PAGE.backGroundColour});h.propTypes={children:o.node.isRequired,fluid:o.bool,meta:(0,o.shape)({description:o.string.isRequired,path:o.string,title:o.string.isRequired}),padding:(0,o.oneOfType)([o.bool,(0,o.oneOf)(Object.values(v.Z))]),pageHeading:(0,o.shape)({center:o.bool,context:(0,o.oneOf)(Object.values(f.Z)),divider:o.bool,heading:o.any.isRequired,help:o.bool,helpContent:o.any,strapline:o.string})},h.defaultProps={fluid:!1,padding:"md"};var _=h},35599:function(n,e,t){"use strict";var r,i,a,o,c,s=t(51174),u=t(67294),d=t(45697),l=t(10367),m=t(55377),p=t(33006),g=t(28368),f=function(n){var e=n.center,t=n.children,r=n.context,i=n.divider,a=n.heading,o=n.help,c=n.helpContent,s=n.strapline;return u.createElement(v,{center:e,divider:i},u.createElement(h,null,u.createElement(_,{content:a,context:r,pageHeading:!0}),s&&u.createElement("div",null,s)),(t||o)&&u.createElement(b,null,t||c),i&&u.createElement(y,{size:"md"}))};f.displayName="PageHeading";var v=l.ZP.header(r||(r=(0,s.Z)(["\n  align-items: center;\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: space-between;\n  margin-bottom: ",";\n  text-align: ",";\n"])),function(n){return!n.divider&&"2rem"},function(n){return n.center&&"center"}),h=l.ZP.span(i||(i=(0,s.Z)(["\n  flex: 1;\n"]))),b=l.ZP.span(a||(a=(0,s.Z)(["\n  display: flex;\n  flex: 1;\n  justify-content: flex-end;\n"]))),_=(0,l.ZP)(p.Z)(o||(o=(0,s.Z)(["\n  margin-bottom: ",";\n"])),function(n){return n.divider?"0.5rem":"0"}),y=(0,l.ZP)(m.Z)(c||(c=(0,s.Z)(["\n  width: 100%;\n"])));f.propTypes={center:d.bool,children:d.element,context:(0,d.oneOf)(Object.values(g.Z)),divider:d.bool,heading:d.any.isRequired,help:d.bool,helpContent:d.any,strapline:d.string},f.defaultProps={center:!1,context:"primary",divider:!0,help:!1,helpContent:"",strapline:""},e.Z=f},89780:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/notifications",function(){return t(97432)}])},94885:function(n,e,t){"use strict";t.d(e,{$E:function(){return T},AX:function(){return k},I4:function(){return O},JA:function(){return E},MT:function(){return q},Px:function(){return U},WF:function(){return P},ZA:function(){return N},a8:function(){return j},fA:function(){return L},fo:function(){return I},ge:function(){return C},iM:function(){return S},nE:function(){return w},nh:function(){return x},r1:function(){return A},tW:function(){return M},uz:function(){return R}});var r=t(7297),i=t(75063);function a(){var n=(0,r.Z)(["\n  mutation InsertAccountUser($objects: [Account_User_insert_input!]!) {\n    insert_Account_User(objects: $objects) {\n      returning {\n        id\n      }\n    }\n  }\n"]);return a=function(){return n},n}function o(){var n=(0,r.Z)(["\n  mutation UpdateUser(\n    $id: Int!\n    $accountUserId: Int!\n    $accountUserChanges: Account_User_set_input\n    $changes: User_set_input\n    $updateAccountUser: Boolean!\n  ) {\n    update_Account_User_by_pk(pk_columns: { id: $accountUserId }, _set: $accountUserChanges)\n      @include(if: $updateAccountUser) {\n      id\n    }\n    update_User_by_pk(pk_columns: { id: $id }, _set: $changes) {\n      id\n    }\n  }\n"]);return o=function(){return n},n}function c(){var n=(0,r.Z)(["\n  query GetUsers(\n    $accountId: Int\n    $accountType: String\n    $date: timestamptz\n    $limit: Int\n    $offset: Int\n    $q: String\n    $orderBy: User_order_by!\n    $status: String\n  ) {\n    users: User(\n      limit: $limit\n      offset: $offset\n      where: {\n        Account_Users: { Account: { id: { _eq: $accountId }, type: { _eq: $accountType } } }\n        createdAt: { _eq: $date }\n        _or: [\n          { email: { _ilike: $q } }\n          { nameFirst: { _ilike: $q } }\n          { nameLast: { _ilike: $q } }\n        ]\n        status: { _eq: $status }\n      }\n      order_by: [$orderBy]\n    ) {\n      id\n      name: nameFirst\n      nameFirst\n      nameLast\n      phone\n      status\n      email\n      createdAt\n      meta\n      invoiceThreshold\n      quoteThreshold\n      media: Media {\n        id\n        medium: Medium {\n          id\n          category\n          filename\n          meta\n          type\n        }\n      }\n      accounts: Account_Users {\n        id\n        role\n        position\n        isContact\n        status\n        account: Account {\n          id\n          name\n          type\n        }\n        userLocations: User_Account_Locations {\n          accountLocationId\n        }\n      }\n    }\n    meta: User_aggregate(\n      where: {\n        Account_Users: { Account: { id: { _eq: $accountId }, type: { _eq: $accountType } } }\n        createdAt: { _eq: $date }\n        _or: [{ nameFirst: { _ilike: $q } }, { nameLast: { _ilike: $q } }]\n        status: { _eq: $status }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n"]);return c=function(){return n},n}function s(){var n=(0,r.Z)(["\n  query GetUser($id: Int!) {\n    user: User_by_pk(id: $id) {\n      id\n      fullName\n      name: nameFirst\n      nameFirst\n      nameLast\n      phone\n      status\n      email\n      createdAt\n      meta\n      invoiceThreshold\n      quoteThreshold\n      media: Media {\n        id\n        medium: Medium {\n          id\n          category\n          filename\n          meta\n          type\n        }\n      }\n      accounts: Account_Users {\n        id\n        role\n        position\n        isContact\n        status\n        account: Account {\n          id\n          name\n          type\n        }\n      }\n    }\n  }\n"]);return s=function(){return n},n}function u(){var n=(0,r.Z)(["\n  query CheckDuplicateEmail($email: String!) {\n    users: User_public(where: { email: { _eq: $email } }) {\n      id\n      nameFirst\n      nameLast\n      email\n      phone\n    }\n  }\n"]);return u=function(){return n},n}function d(){var n=(0,r.Z)(["\n  fragment UserFields on User {\n    id\n    email\n    nameFirst\n    nameLast\n    fullName\n    phone\n    status\n  }\n"]);return d=function(){return n},n}function l(){var n=(0,r.Z)(["\n  mutation SendGoogleAuthCode($code: String!, $id: Int!, $type: String!) {\n    createGoogleToken(code: $code, id: $id, type: $type) {\n      success\n      tokens\n      error\n    }\n  }\n"]);return l=function(){return n},n}function m(){var n=(0,r.Z)(["\n  mutation GenerateMSURL($type: String!, $id: Int!) {\n    genenrateMSURL(id: $id, type: $type) {\n      url\n    }\n  }\n"]);return m=function(){return n},n}function p(){var n=(0,r.Z)(["\n  mutation signoutMS($id: Int!, $type: String!, $email: String!) {\n    signoutMS(id: $id, type: $type, email: $email) {\n      error\n      msId\n      success\n    }\n  }\n"]);return p=function(){return n},n}function g(){var n=(0,r.Z)(["\n  query getAccountMeta($id: Int!) {\n    account: Account_by_pk(id: $id) {\n      meta\n    }\n  }\n"]);return g=function(){return n},n}function f(){var n=(0,r.Z)(["\n  query user($id: Int!) {\n    user: User_by_pk(id: $id) {\n      meta\n      invoiceThreshold\n      quoteThreshold\n    }\n  }\n"]);return f=function(){return n},n}function v(){var n=(0,r.Z)(["\n  query GetAccountUserMeta($userId: Int!, $accountId: Int!) {\n    accountUser: Account_User(where: { userId: { _eq: $userId }, accountId: { _eq: $accountId } }) {\n      meta\n    }\n  }\n"]);return v=function(){return n},n}function h(){var n=(0,r.Z)(["\n  mutation UpdateAccountUserByUserIdAccoutId(\n    $userId: Int!\n    $accountId: Int!\n    $changes: Account_User_set_input!\n  ) {\n    update_Account_User(\n      where: { userId: { _eq: $userId }, accountId: { _eq: $accountId } }\n      _set: $changes\n    ) {\n      returning {\n        id\n      }\n    }\n  }\n"]);return h=function(){return n},n}function b(){var n=(0,r.Z)(["\n  mutation updateAccount($accountId: Int!, $set: Account_set_input!) {\n    update_Account_by_pk(pk_columns: { id: $accountId }, _set: $set) {\n      id\n    }\n  }\n"]);return b=function(){return n},n}function _(){var n=(0,r.Z)(["\n  mutation updateUserMeta($userId: Int!, $meta: jsonb!) {\n    update_User_by_pk(pk_columns: { id: $userId }, _set: { meta: $meta }) {\n      id\n      meta\n    }\n  }\n"]);return _=function(){return n},n}function y(){var n=(0,r.Z)(['\n  query userDevices($accountId: Int!) {\n    users: User(\n      where: {\n        Account_Users: { accountId: { _eq: $accountId }, status: { _eq: "active" } }\n        UserDevices: { status: { _eq: "active" } }\n        status: { _eq: "active" }\n      }\n    ) {\n      id\n      fullName\n      devices: UserDevices(\n        order_by: { updatedAt: desc_nulls_last }\n        where: { status: { _eq: "active" } }\n        limit: 1\n      ) {\n        id\n        playerId\n      }\n    }\n  }\n']);return y=function(){return n},n}function Z(){var n=(0,r.Z)(['\n  query GetAccountLocations($accountId: Int, $limit: Int, $offset: Int) {\n    location: Location(\n      offset: $offset\n      limit: $limit\n      where: {\n        Account_Locations: {\n          accountId: { _eq: $accountId }\n          Account: { type: { _eq: "customer" } }\n        }\n      }\n    ) {\n      id\n      name\n      accountLocations: Account_Locations {\n        id\n      }\n      addresses: Addresses(where: { entity: { _eq: "Location" }, registered: { _eq: true } }) {\n        id\n        status\n        address: Address {\n          id\n          name\n          addressLine1\n          postCode\n        }\n      }\n    }\n    meta: Location_aggregate(\n      where: {\n        Account_Locations: {\n          accountId: { _eq: $accountId }\n          Account: { type: { _eq: "customer" } }\n        }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n']);return Z=function(){return n},n}function $(){var n=(0,r.Z)(["\n  mutation InsertUserAccountLocations(\n    $accountUserId: Int!\n    $objects: [User_Account_Location_insert_input!]!\n  ) {\n    delete_User_Account_Location(where: { accountUserId: { _eq: $accountUserId } }) {\n      affected_rows\n    }\n    insert_User_Account_Location(objects: $objects) {\n      affected_rows\n      returning {\n        id\n      }\n    }\n  }\n"]);return $=function(){return n},n}var O=(0,i.Ps)(a()),k=(0,i.Ps)(o()),I=(0,i.Ps)(c()),E=(0,i.Ps)(s()),P=(0,i.Ps)(u()),U=(0,i.Ps)(d()),j=(0,i.Ps)(l()),A=(0,i.Ps)(m()),q=(0,i.Ps)(p()),w=(0,i.Ps)(g()),x=(0,i.Ps)(f()),S=(0,i.Ps)(v()),L=(0,i.Ps)(h()),T=(0,i.Ps)(b()),R=(0,i.Ps)(_()),C=(0,i.Ps)(y()),N=(0,i.Ps)(Z()),M=(0,i.Ps)($())},97432:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return U}});var r=t(26042),i=t(828),a=t(85893),o=t(67294),c=t(6812),s=t(50319),u=t(73359),d=t(7297),l=t(75063);function m(){var n=(0,d.Z)(["\n  query GetNotificationSetting($userId: Int!) {\n    notificationSetting: User(where: { id: { _eq: $userId } }) {\n      meta\n    }\n  }\n"]);return m=function(){return n},n}function p(){var n=(0,d.Z)(["\n  mutation UpdateNotificationSetting($userId: Int!, $changes: User_set_input) {\n    update_User_by_pk(pk_columns: { id: $userId }, _set: $changes) {\n      id\n    }\n  }\n"]);return p=function(){return n},n}var g=(0,l.Ps)(m()),f=(0,l.Ps)(p()),v=t(94885),h=t(42283),b=t(73987),_=t(19076),y=t(11585),Z=t(76600),$=t(51466),O=t(58594),k=t(77439),I=["email","sms","pushNotification","toast"],E=[{id:"email",label:"Email",value:"email"},{id:"sms",label:"Text message",value:"sms"},{id:"pushNotification",label:"Push Notification",value:"pushNotification"},{id:"toast",label:"Toast",value:"toast"}],P={settings:[]},U=function(){var n=(0,o.useContext)(b.Z).user.id,e=(0,c.a)(g,{variables:{userId:n}}),t=e.loading,d=e.data,l=(void 0===d?{notificationSetting:{}}:d).notificationSetting,m=(0,h.cI)({defaultValues:P}),p=m.errors,U=m.handleSubmit,j=m.register,A=m.setValue,q=(0,o.useState)({context:"",message:""}),w=q[0],x=q[1];(0,o.useEffect)(function(){var n,e;if(!t&&l.length&&(null===(n=l[0])||void 0===n?void 0:null===(e=n.meta)||void 0===e?void 0:e.notificationSettings)){var r,i,a=null===(r=l[0])||void 0===r?void 0:null===(i=r.meta)||void 0===i?void 0:i.notificationSettings;A("settings",Object.keys(a).filter(function(n){return!0===a[n]}))}},[t]);var S=(0,i.Z)((0,s.D)(f),1)[0],L=(0,i.Z)((0,u.t)(v.JA,{variables:{id:n}}),2),T=L[0],R=L[1].data,C=(void 0===R?{user:{}}:R).user;(0,o.useEffect)(function(){n&&T()},[]);var N=function(n){var e={};I.map(function(t){return e[t]=n.settings.includes(t)});var t=(0,r.Z)({},C.meta);t.notificationSettings=e,S({variables:{userId:C.id,changes:{meta:t}}}),x({context:"success",message:"Your changes have been saved."})};return(0,a.jsx)(_.Z,{heading:"Notifications",pageHeading:{heading:"Notifications"},resultAlert:w,children:(0,a.jsx)(y.Z,{fitParentHeight:!0,open:!0,title:"Global",children:(0,a.jsxs)(Z.Z,{handleSubmit:U(N),children:[(0,a.jsx)($.Z,{children:"Choose where you'd like to receive notifications on your devices. You can turn them on or off here too."}),(0,a.jsx)(O.Z,{data:E,errors:p,name:"settings",register:j,stacked:!0}),(0,a.jsx)(k.Z,{content:"Submit",type:"submit"})]})})})}},73359:function(n,e,t){"use strict";t.d(e,{t:function(){return u}});var r=t(97582),i=t(73914),a=t(14012),o=t(6812),c=t(66252),s=["refetch","reobserve","fetchMore","updateQuery","startPolling","subscribeToMore",];function u(n,e){var t,u=i.useRef(),d=i.useRef(),l=i.useRef(),m=(0,a.J)(e,u.current||{}),p=null!==(t=null==m?void 0:m.query)&&void 0!==t?t:n;d.current=e,l.current=p;var g=(0,o.A)((0,c.x)(e&&e.client),p),f=g.useQuery((0,r.__assign)((0,r.__assign)({},m),{skip:!u.current})),v=f.observable.options.initialFetchPolicy||g.getDefaultFetchPolicy(),h=Object.assign(f,{called:!!u.current}),b=i.useMemo(function(){for(var n={},e=0;e<s.length;e++)!function(e){var t=h[e];n[e]=function(){return u.current||(u.current=Object.create(null),g.forceUpdateState()),t.apply(this,arguments)}}(s[e]);return n},[]);return Object.assign(h,b),[i.useCallback(function(n){u.current=n?(0,r.__assign)((0,r.__assign)({},n),{fetchPolicy:n.fetchPolicy||v}):{fetchPolicy:v};var e=(0,a.J)(d.current,(0,r.__assign)({query:l.current},u.current)),t=g.executeQuery((0,r.__assign)((0,r.__assign)({},e),{skip:!1})).then(function(n){return Object.assign(n,b)});return t.catch(function(){}),t},[]),h]}}},function(n){n.O(0,[2283,3054,9774,2888,179],function(){return n(n.s=89780)}),_N_E=n.O()}]);