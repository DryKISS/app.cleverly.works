"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9591],{71628:function(e,n,t){t.d(n,{W:function(){return a}});var r=t(50108),a={make:{label:"Make",name:"make"},model:{label:"Model",name:"model"},serialNumber:{label:"Serial number",name:"serialNumber"},initialCost:{label:"Initial cost",name:"initialCost",formatter:function(e){return(0,r.T)(e)}},datePutInService:{label:"Date put in service",name:"datePutInService"},estimatedAnnualMaintenance:{label:"Estimated Annual Maintenance",name:"estimatedAnnualMaintenance",formatter:function(e){return(0,r.T)(e)}},estimatedEndDate:{label:"Estimated end date",name:"estimatedEndDate"},residualValue:{label:"Residual value",name:"residualValue",formatter:function(e){return(0,r.T)(e)}},purchaseDate:{label:"Purchase date",name:"purchaseDate"},warrantyExpiry:{label:"Warranty expiry",name:"warrantyExpiry"},condition:{label:"Condition",name:"condition"}}},89591:function(e,n,t){t.d(n,{R:function(){return U}});var r=t(14924),a=t(26042),o=t(69396),i=t(828),l=t(85893),s=t(45697),u=t.n(s),d=t(30381),c=t.n(d),m=t(6812),v=t(50319),p=t(73359),f=t(42283),b=t(79665),y=t(16310),h=t(71628),g=function(e){var n,t=x(e);return(0,y.Ry)().shape((0,a.Z)((n={customer:(0,y.Ry)().required("Customer is required field").typeError("Customer is required field"),location:(0,y.Ry)().required("Location is required field").typeError("Location is required field"),sublocation:(0,y.Ry)().nullable(),assetCategory:(0,y.Ry)().required("Asset category is required field").typeError("Asset category is required field"),name:(0,y.Z_)().required("Name is required field"),description:(0,y.Z_)().required("Description is required field"),relationType:(0,y.Z_)().required("Relation is required field"),parent:(0,y.Ry)().when("relationType",{is:"child",then:function(e){return e.required("Parent asset is required field").typeError("Parent asset is required field")},otherwise:function(e){return e.nullable()}}),preparationStatus:(0,y.Ry)().required("Status is required field").typeError("Status is required field"),condition:(0,y.Ry)().required("Condition is required field").typeError("Condition is required field"),status:(0,y.Z_)().oneOf(["active","inactive"]).required("Status is required field").typeError("Status is required field")},(0,r.Z)(n,h.W.datePutInService.name,(0,y.hT)().nullable().typeError("Field ".concat(h.W.datePutInService.label," should be a date"))),(0,r.Z)(n,h.W.estimatedEndDate.name,(0,y.hT)().nullable().typeError("Field ".concat(h.W.estimatedEndDate.label," should be a date"))),(0,r.Z)(n,h.W.purchaseDate.name,(0,y.hT)().nullable().typeError("Field ".concat(h.W.purchaseDate.label," should be a date"))),(0,r.Z)(n,h.W.warrantyExpiry.name,(0,y.hT)().nullable().typeError("Field ".concat(h.W.warrantyExpiry.label," should be a date"))),n),t))},x=function(e){var n={};return null==e||e.forEach(function(e){var t,r,a,o,i,l,s,u,d,c,m,v,p,f,b;n[e.name]=(0,y.Z_)(),n[e.name]=(0,y.Z_)(),(null===(t=e.meta)||void 0===t?void 0:t.input)==="media"&&(n[e.name]=void 0),(null===(r=e.meta)||void 0===r?void 0:r.input)==="checkbox"&&(n[e.name]=(0,y.IX)().of((0,y.nK)().transform(function(e){return"false"!==e&&e}))),(null===(a=e.meta)||void 0===a?void 0:a.input)==="currencyInput"&&(n[e.name]=(0,y.Rx)().typeError("".concat((null===(c=e.meta)||void 0===c?void 0:c.label)||""," is a required field"))),(null===(o=e.meta)||void 0===o?void 0:o.input)==="datepicker"&&(n[e.name]=(0,y.hT)().typeError("".concat((null===(m=e.meta)||void 0===m?void 0:m.label)||""," is a required field"))),(null===(i=e.meta)||void 0===i?void 0:i.input)==="selectRange"&&(n[e.name]=(0,y.Rx)().typeError("".concat((null===(v=e.meta)||void 0===v?void 0:v.label)||""," is a required field"))),(null===(l=e.meta)||void 0===l?void 0:l.inputType)==="email"&&(n[e.name]=n[e.name].email("".concat((null===(p=e.meta)||void 0===p?void 0:p.label)||""," must be an email"))),(null===(s=e.meta)||void 0===s?void 0:s.inputType)==="number"&&(n[e.name]=(0,y.Rx)().typeError("".concat((null===(f=e.meta)||void 0===f?void 0:f.label)||""," must be a number"))),(null===(u=e.meta)||void 0===u?void 0:u.required)&&(null===(d=e.meta)||void 0===d?void 0:d.input)!=="media"&&(n[e.name]=n[e.name].required("".concat((null===(b=e.meta)||void 0===b?void 0:b.label)||""," is a required field")))}),n},Z=t(57493),I=t(80426),j=t(4595),q=t(98456),T=t(51233),C=t(50135),A=t(87109),_=t(33754),M=t(69297),P=t(91830),$=t(67294),S=t(97637),E=t(5616),D=t(11057),R=t(69368),k=t(94054),w=t(50480),W=t(53457),Y=t(56815),F=t(40476),Q=t(1050),N=t(15861),V=t(74492),G=t(24519),L=D.Z,J=function(e){var n=e.entity,t=e.entityId,r=e.mediaMeta,i=e.register,s=e.control,u=e.errors,d=e.input,c=(e.inputType,e.label),m=e.name,v=e.options,p=(0,V.a)(),b=function(){var e,n,t,r,a,o,l,p;switch("".concat(d)){case"input":return{fullWidth:!0,variant:"standard",color:"secondary",label:c,name:m,inputRef:i,error:u[m],helperText:null===(e=u[m])||void 0===e?void 0:e.message};case"textArea":return{multiline:!0,rows:4,fullWidth:!0,variant:"filled",color:"secondary",label:c,name:m,inputRef:i,error:u[m],helperText:null===(n=u[m])||void 0===n?void 0:n.message};case"currencyInput":return{fullWidth:!0,variant:"standard",color:"secondary",label:c,name:m,type:"number",min:0,inputRef:i,error:u[m],helperText:null===(t=u[m])||void 0===t?void 0:t.message};case"radio":return{name:m,label:c,control:s,options:v,error:u[m],helperText:null===(r=u[m])||void 0===r?void 0:r.message};case"select":return{name:m,label:c,control:s,options:v,error:u[m],helperText:null===(a=u[m])||void 0===a?void 0:a.message};case"selectRange":return{name:m,label:c,control:s,options:[{value:0,label:"0"},{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"},{value:5,label:"5"},{value:6,label:"6"},{value:7,label:"7"},{value:8,label:"8"},{value:9,label:"9"}],error:u[m],helperText:null===(o=u[m])||void 0===o?void 0:o.message};case"datepicker":return{name:m,label:c,control:s,error:u[m],helperText:null===(l=u[m])||void 0===l?void 0:l.message,inputFormat:"Do MMM YYYY"};case"checkbox":return{name:function(e){return"".concat(m,".").concat(e)},label:c,control:s,options:v,error:u[m],helperText:null===(p=u[m])||void 0===p?void 0:p.message};default:return{}}}(),y=function(){n&&t&&p.show({content:(0,l.jsx)(S.G,{entity:n,entityId:t,mediaMeta:r,category:"supplierQuestion"}),submit:!1,title:c})};return(0,l.jsx)(l.Fragment,{children:"media"===d&&n&&t?(0,l.jsxs)(T.Z,{children:[(0,l.jsx)(N.Z,{mb:1,children:c}),(0,l.jsx)(L,{variant:"contained",color:"info",onClick:y,size:"sm",children:(0,l.jsx)(G.Z,{})})]}):function(e){switch("".concat(d)){case"input":case"textArea":return(0,l.jsx)(C.Z,(0,a.Z)({},e));case"currencyInput":return(0,l.jsx)(C.Z,(0,o.Z)((0,a.Z)({},e),{InputProps:{slotProps:{input:{min:0}},startAdornment:(0,l.jsx)(A.Z,{position:"start",children:"\xa3"})}}));case"radio":return(0,l.jsx)(f.Qr,(0,o.Z)((0,a.Z)({},e),{render:function(n){var t,r=n.value,a=n.onChange;return(0,l.jsx)(M.E,{label:e.label,value:r,onChange:a,options:e.options,error:u.relationType,helperText:null===(t=u.relationType)||void 0===t?void 0:t.message})}}));case"selectRange":return(0,l.jsxs)(E.Z,{children:[e.label&&(0,l.jsx)(N.Z,{id:"track-slider",gutterBottom:!0,children:e.label}),(0,l.jsx)(f.Qr,(0,o.Z)((0,a.Z)({},e),{render:function(n){return(0,l.jsx)(Q.ZP,(0,o.Z)((0,a.Z)({},n),{"aria-labelledby":"track-slider",color:"secondary",defaultValue:30,getAriaValueText:function(e){return"".concat(e)},valueLabelDisplay:"auto",shiftStep:1,step:1,marks:e.options,min:0,max:9}))}}))]});case"select":return(0,l.jsx)(f.Qr,(0,o.Z)((0,a.Z)({},e),{render:function(n){var t,r=n.value,a=n.onChange;return(0,l.jsx)(P.P,{formControl:{variant:"standard",color:"secondary",fullWidth:!0,error:u.status,helperText:null===(t=u.status)||void 0===t?void 0:t.message},label:e.label,value:r,onChange:a,options:e.options})}}));case"datepicker":return(0,l.jsx)(f.Qr,(0,o.Z)((0,a.Z)({},e),{render:function(n){return(0,l.jsx)(_.M,(0,o.Z)((0,a.Z)({},n),{label:e.label,inputFormat:e.inputFormat,renderInput:function(n){return(0,l.jsx)(C.Z,(0,o.Z)((0,a.Z)({},n),{error:e.error,helperText:e.helperText,color:"secondary",variant:"standard"}))}}))}}));case"checkbox":var n;return(0,l.jsxs)(k.Z,{sx:{m:3},error:e.error,color:"secondary",component:"fieldset",variant:"standard",children:[(null==e?void 0:e.label)&&(0,l.jsx)(F.Z,{component:"legend",children:e.label}),(0,l.jsx)(W.Z,{children:null===(n=e.options)||void 0===n?void 0:n.map(function(n,t){return(0,l.jsx)(w.Z,{control:(0,l.jsx)(f.Qr,{name:e.name(t),control:e.control,render:function(e){var t=e.value,r=e.onChange;return(0,l.jsx)(R.Z,{color:"secondary",checked:t===n.value,onChange:function(e){return r(!!e.target.checked&&n.value)}})}}),label:n.label})})}),(null==e?void 0:e.helperText)&&(0,l.jsx)(Y.Z,{children:e.helperText})]});default:return(0,l.jsx)(l.Fragment,{})}}(b)})};J.propTypes={entity:u().oneOf(["Asset"]),entityId:u().number,mediaMeta:u().object,register:u().object.isRequired,control:u().object.isRequired,errors:u().object.isRequired,input:u().oneOf(["input","textArea","currencyInput","radio","select","selectRange","datepicker","checkbox"]).isRequired,inputType:u().oneOf(["email","number","text"]),label:u().string.isRequired,name:u().string.isRequired,options:u().arrayOf(u().shape({label:u().string.isRequired,value:u().string.isRequired}))},J.defaultProps={input:"input",options:[],inputType:"text",label:"Label"};var O=t(8152),U=function(e){var n,t,s,u,d,y,x,S,E=e.assetId,D=e.offCanvas,R=e.defaultValues,k=(0,m.a)(I.yC,{skip:!E,variables:{id:E}}),w=k.loading,W=k.data,Y=(void 0===W?{asset:{}}:W).asset,F=(0,$.useMemo)(function(){var e;return(null===(e=Y.category)||void 0===e?void 0:e.childs)||[]},[]),Q=(0,f.cI)({defaultValues:(0,o.Z)((0,a.Z)({},R),{status:"active",relationType:"parent"}),resolver:(0,b.S)(g(F))}),N=Q.control,V=Q.errors,G=Q.handleSubmit,L=Q.register,U=Q.watch,B=Q.reset,z=U("customer"),H=U("location"),K=U("relationType");(0,$.useEffect)(function(){if(null==Y?void 0:Y.id){var e,n,t,i,l,s,u,d,c,m,v,p,f,b,y,h,g;B((0,a.Z)((0,o.Z)((0,a.Z)({},F.reduce(function(e,n){var t,i;return(0,o.Z)((0,a.Z)({},e),(0,r.Z)({},n.name,null===(t=Y.meta)||void 0===t?void 0:null===(i=t.categoryQuestions)||void 0===i?void 0:i[n.name]))},{})),{id:Y.id,condition:Y.condition?(0,O.wo)(O.Fn,Y.condition):null,preparationStatus:Y.preparationStatus?(0,O.wo)(O.of,Y.preparationStatus):null,customer:(null===(e=Y.customer)||void 0===e?void 0:e.id)?{label:null===(n=Y.customer)||void 0===n?void 0:n.name,value:null===(t=Y.customer)||void 0===t?void 0:t.id}:null,assetCategory:(null===(i=Y.category)||void 0===i?void 0:i.id)?{label:null===(l=Y.category)||void 0===l?void 0:l.name,value:null===(s=Y.category)||void 0===s?void 0:s.id}:null,description:Y.description,name:Y.name,location:(null===(u=Y.location)||void 0===u?void 0:u.id)?{label:null===(d=Y.location)||void 0===d?void 0:d.name,value:null===(c=Y.location)||void 0===c?void 0:c.id}:null,sublocation:(null===(m=Y.sublocation)||void 0===m?void 0:m.id)?{label:null===(v=Y.sublocation)||void 0===v?void 0:v.name,value:null===(p=Y.sublocation)||void 0===p?void 0:p.id}:null,relationType:(null===(f=Y.parentAsset)||void 0===f?void 0:f.id)?"child":"parent",parent:(null===(b=Y.parentAsset)||void 0===b?void 0:b.id)?{label:null===(y=Y.parentAsset)||void 0===y?void 0:y.name,value:null===(h=Y.parentAsset)||void 0===h?void 0:h.id}:null,status:Y.status}),Y?null==Y?void 0:null===(g=Y.meta)||void 0===g?void 0:g.assetAdditional:{}))}},[Y,F,B]);var X=(0,i.Z)((0,v.D)(I.RL,{refetchQueries:["GetAsset","GetAssets"],onCompleted:function(){return(null==D?void 0:D.close)&&D.close()}}),1)[0],ee=(0,i.Z)((0,v.D)(I.Wx,{refetchQueries:["GetAsset","GetAssets"],onCompleted:function(){return(null==D?void 0:D.close)&&D.close()}}),1)[0],en=(0,i.Z)((0,p.t)(Z.SW),2),et=en[0],er=en[1],ea=er.loading,eo=er.data,ei=(void 0===eo?{items:[]}:eo).items,el=(0,i.Z)((0,p.t)(Z._d,{variables:{where:{status:{_eq:"active"},Account_Locations:{accountId:{_eq:null==z?void 0:z.value}}}}}),2),es=el[0],eu=el[1],ed=eu.loading,ec=eu.data,em=(void 0===ec?{items:[]}:ec).items,ev=(0,i.Z)((0,p.t)(Z.UH,{variables:{locationId:null==H?void 0:H.value}}),2),ep=ev[0],ef=ev[1],eb=ef.loading,ey=ef.data,eh=(void 0===ey?{items:[]}:ey).items,eg=(0,i.Z)((0,p.t)(Z.UM),2),ex=eg[0],eZ=eg[1],eI=eZ.loading,ej=eZ.data,eq=(void 0===ej?{items:[]}:ej).items,eT=(0,i.Z)((0,p.t)(Z.zR,{variables:{locationId:null==H?void 0:H.value}}),2),eC=eT[0],eA=eT[1],e_=eA.loading,eM=eA.data,eP=(void 0===eM?{items:[]}:eM).items,e$=function(e){var n,t,i,l={accountId:e.customer.value,bookable:"no",categoryId:e.assetCategory.value,description:e.description,name:e.name,locationId:e.location.value,sublocationId:null===(n=e.sublocation)||void 0===n?void 0:n.value,parentId:null===(t=e.parent)||void 0===t?void 0:t.value,userId:null,status:e.status,preparationStatus:e.preparationStatus.value,condition:e.condition.value,meta:(0,o.Z)((0,a.Z)({},Y.meta||{}),{categoryQuestions:(0,a.Z)({},F.reduce(function(n,t){return(0,o.Z)((0,a.Z)({},n),(0,r.Z)({},t.name,e[t.name]))},{})),assetAdditional:(0,o.Z)((0,a.Z)({},Y?null==Y?void 0:null===(i=Y.meta)||void 0===i?void 0:i.assetAdditional:{}),{make:e.make||null,model:e.model||null,serialNumber:e.serialNumber,initialCost:+e.initialCost,datePutInService:e.datePutInService?c()(e.datePutInService).format("YYYY-MM-DD"):null,estimatedAnnualMaintenance:+e.estimatedAnnualMaintenance,estimatedEndDate:e.estimatedEndDate?c()(e.estimatedEndDate).format("YYYY-MM-DD"):null,residualValue:+e.residualValue,purchaseDate:e.purchaseDate?c()(e.purchaseDate).format("YYYY-MM-DD"):null,warrantyExpiry:e.warrantyExpiry?c()(e.warrantyExpiry).format("YYYY-MM-DD"):null})})};E?ee({variables:{id:E,changes:l}}):X({variables:{objects:[l]}})};return w?(0,l.jsx)(T.Z,{width:"100%",direction:"column",justifyContent:"center",alignItems:"center",children:(0,l.jsx)(q.Z,{color:"secondary"})}):(0,l.jsx)("form",{id:"offCanvasForm",onSubmit:G(e$),children:(0,l.jsxs)(T.Z,{width:"100%",direction:"column",spacing:3,children:[(0,l.jsx)(f.Qr,{name:"customer",control:N,render:function(e){var n,t=e.value,r=e.onChange;return(0,l.jsx)(j.F,{inputProps:{required:!0},disabled:!!(null==R?void 0:R.customer),value:t,onChange:function(e,n){return r(n)},label:"Select customer",loading:ea,onOpen:function(){return et()},options:ei,error:V.customer,helperText:null===(n=V.customer)||void 0===n?void 0:n.message})}}),(0,l.jsx)(f.Qr,{name:"location",control:N,render:function(e){var n,t=e.value,r=e.onChange;return(0,l.jsx)(j.F,{inputProps:{required:!0},disabled:!(null==z?void 0:z.value)||(null==R?void 0:R.location),value:t,onChange:function(e,n){return r(n)},label:"Select location",loading:ed,onOpen:function(){return es()},options:em,error:V.location,helperText:null===(n=V.location)||void 0===n?void 0:n.message})}}),(0,l.jsx)(f.Qr,{name:"sublocation",control:N,render:function(e){var n,t=e.value,r=e.onChange;return(0,l.jsx)(j.F,{disabled:!(null==H?void 0:H.value),value:t,onChange:function(e,n){return r(n)},label:"Select sublocation",loading:e_,onOpen:function(){return eC()},options:eP,error:V.sublocation,helperText:null===(n=V.sublocation)||void 0===n?void 0:n.message})}}),(0,l.jsx)(f.Qr,{name:"assetCategory",control:N,render:function(e){var n,t=e.value,r=e.onChange;return(0,l.jsx)(j.F,{inputProps:{required:!0},value:t,onChange:function(e,n){return r(n)},label:"Select category",loading:eI,onOpen:function(){return ex()},options:eq,error:V.assetCategory,helperText:null===(n=V.assetCategory)||void 0===n?void 0:n.message})}}),(0,l.jsx)(f.Qr,{name:"condition",control:N,render:function(e){var n,t=e.value,r=e.onChange;return(0,l.jsx)(j.F,{inputProps:{required:!0},value:t,onChange:function(e,n){return r(n)},label:"Select condition",options:O.Fn,error:V.condition,helperText:null===(n=V.condition)||void 0===n?void 0:n.message})}}),(0,l.jsx)(f.Qr,{name:"preparationStatus",control:N,render:function(e){var n,t=e.value,r=e.onChange;return(0,l.jsx)(j.F,{inputProps:{required:!0},value:t,onChange:function(e,n){return r(n)},label:"Select status",options:O.of,error:V.status,helperText:null===(n=V.status)||void 0===n?void 0:n.message})}}),(0,l.jsx)(C.Z,{fullWidth:!0,variant:"standard",color:"secondary",label:"Name",name:"name",required:!0,inputRef:L,error:V.name,helperText:null===(n=V.name)||void 0===n?void 0:n.message}),(0,l.jsx)(C.Z,(0,o.Z)((0,a.Z)({variant:"standard"},h.W.make),{color:"secondary",inputRef:L,error:V.make,helperText:null===(t=V.make)||void 0===t?void 0:t.message})),(0,l.jsx)(C.Z,(0,o.Z)((0,a.Z)({variant:"standard"},h.W.model),{color:"secondary",inputRef:L,error:V.model,helperText:null===(s=V.model)||void 0===s?void 0:s.message})),(0,l.jsx)(C.Z,(0,o.Z)((0,a.Z)({variant:"standard"},h.W.serialNumber),{color:"secondary",inputRef:L,error:V.serialNumber,helperText:null===(u=V.serialNumber)||void 0===u?void 0:u.message})),(0,l.jsx)(C.Z,(0,o.Z)((0,a.Z)({fullWidth:!0,variant:"standard",color:"secondary"},h.W.initialCost),{inputRef:L,type:"number",min:0,defaultValue:0,error:V.initialCost,helperText:null===(d=V.initialCost)||void 0===d?void 0:d.message,InputProps:{slotProps:{input:{min:0}},startAdornment:(0,l.jsx)(A.Z,{position:"start",children:"\xa3"})}})),(0,l.jsx)(f.Qr,{name:h.W.datePutInService.name,control:N,render:function(e){return(0,l.jsx)(_.M,(0,o.Z)((0,a.Z)({},e),{value:e.value||null,label:h.W.datePutInService.label,inputFormat:"Do MMM YYYY",renderInput:function(e){var n;return e.inputProps.placeholder="",(0,l.jsx)(C.Z,(0,o.Z)((0,a.Z)({},e),{error:V.datePutInService,helperText:null===(n=V.datePutInService)||void 0===n?void 0:n.message,color:"secondary",variant:"standard"}))}}))}}),(0,l.jsx)(C.Z,(0,o.Z)((0,a.Z)({fullWidth:!0,variant:"standard",color:"secondary"},h.W.estimatedAnnualMaintenance),{inputRef:L,type:"number",min:0,defaultValue:0,error:V.estimatedAnnualMaintenance,helperText:null===(y=V.estimatedAnnualMaintenance)||void 0===y?void 0:y.message,InputProps:{slotProps:{input:{min:0}},startAdornment:(0,l.jsx)(A.Z,{position:"start",children:"\xa3"})}})),(0,l.jsx)(f.Qr,{name:h.W.estimatedEndDate.name,control:N,render:function(e){return(0,l.jsx)(_.M,(0,o.Z)((0,a.Z)({},e),{value:e.value||null,label:h.W.estimatedEndDate.label,inputFormat:"Do MMM YYYY",renderInput:function(e){var n;return e.inputProps.placeholder="",(0,l.jsx)(C.Z,(0,o.Z)((0,a.Z)({},e),{error:V.estimatedEndDate,helperText:null===(n=V.estimatedEndDate)||void 0===n?void 0:n.message,color:"secondary",variant:"standard"}))}}))}}),(0,l.jsx)(C.Z,(0,o.Z)((0,a.Z)({fullWidth:!0,variant:"standard",color:"secondary"},h.W.residualValue),{inputRef:L,type:"number",defaultValue:0,error:V.residualValue,helperText:null===(x=V.residualValue)||void 0===x?void 0:x.message,InputProps:{slotProps:{input:{min:0}},startAdornment:(0,l.jsx)(A.Z,{position:"start",children:"\xa3"})}})),(0,l.jsx)(f.Qr,{name:h.W.purchaseDate.name,control:N,render:function(e){return(0,l.jsx)(_.M,(0,o.Z)((0,a.Z)({},e),{value:e.value||null,label:h.W.purchaseDate.label,inputFormat:"Do MMM YYYY",renderInput:function(e){var n;return e.inputProps.placeholder="",(0,l.jsx)(C.Z,(0,o.Z)((0,a.Z)({},e),{error:V.purchaseDate,helperText:null===(n=V.purchaseDate)||void 0===n?void 0:n.message,color:"secondary",variant:"standard"}))}}))}}),(0,l.jsx)(f.Qr,{name:h.W.warrantyExpiry.name,control:N,render:function(e){return(0,l.jsx)(_.M,(0,o.Z)((0,a.Z)({},e),{value:e.value||null,label:h.W.warrantyExpiry.label,inputFormat:"Do MMM YYYY",renderInput:function(e){var n;return e.inputProps.placeholder="",(0,l.jsx)(C.Z,(0,o.Z)((0,a.Z)({},e),{error:V.warrantyExpiry,helperText:null===(n=V.warrantyExpiry)||void 0===n?void 0:n.message,color:"secondary",variant:"standard"}))}}))}}),(0,l.jsx)(C.Z,{fullWidth:!0,multiline:!0,required:!0,rows:4,variant:"filled",color:"secondary",label:"Description",name:"description",inputRef:L,error:V.description,helperText:null===(S=V.description)||void 0===S?void 0:S.message}),(0,l.jsx)(f.Qr,{name:"relationType",control:N,render:function(e){var n,t=e.value,r=e.onChange;return(0,l.jsx)(M.E,{stackProps:{direction:"row"},value:t,onChange:r,options:[{label:"Parent",value:"parent"},{label:"Child",value:"child"}],error:V.relationType,helperText:null===(n=V.relationType)||void 0===n?void 0:n.message})}}),"child"===K&&(0,l.jsx)(f.Qr,{name:"parent",control:N,render:function(e){var n,t=e.value,r=e.onChange;return(0,l.jsx)(j.F,{inputProps:{required:!0},value:t,disabled:!(null==H?void 0:H.value),onChange:function(e,n){return r(n)},label:"Parent asset",loading:eb,onOpen:function(){return ep()},options:eh,error:V.parent,helperText:null===(n=V.parent)||void 0===n?void 0:n.message})}}),(0,l.jsx)(f.Qr,{name:"status",control:N,render:function(e){var n,t=e.value,r=e.onChange;return(0,l.jsx)(P.P,{formControl:{fullWidth:!0,variant:"standard",color:"secondary",error:V.status,helperText:null===(n=V.status)||void 0===n?void 0:n.message},selectProps:{fullWidth:!0},label:"Status",value:t,onChange:r,options:[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}]})}}),F.map(function(e){var n,t,r,a;return(0,l.jsx)(J,{register:L,control:N,errors:V,input:null===(n=e.meta)||void 0===n?void 0:n.input,inputType:null===(t=e.meta)||void 0===t?void 0:t.inputType,label:null===(r=e.meta)||void 0===r?void 0:r.label,name:e.name,options:null===(a=e.meta)||void 0===a?void 0:a.options})})]})})};U.defaultProps={assetId:null,offCanvas:{},defaultValues:{}},U.propTypes={assetId:u().number,offCanvas:u().shape({close:u().func.isRequired}),defaultValues:u().shape({customer:u().shape({label:u().string,value:u().number}),location:u().shape({label:u().string,value:u().number})})}},80426:function(e,n,t){t.d(n,{Jt:function(){return g},RL:function(){return b},Wx:function(){return y},YG:function(){return x},tG:function(){return p},yC:function(){return f},zu:function(){return h}});var r=t(7297),a=t(75063);function o(){var e=(0,r.Z)(['\n  query GetAssets(\n    $q: String\n    $customerId: Int\n    $locationId: Int\n    $categoryId: Int\n    $limit: Int\n    $offset: Int\n    $orderBy: Asset_order_by!\n  ) {\n    assets: Asset(\n      limit: $limit\n      offset: $offset\n      where: {\n        name: { _ilike: $q }\n        accountId: { _eq: $customerId }\n        locationId: { _eq: $locationId }\n        categoryId: { _eq: $categoryId }\n      }\n      order_by: [$orderBy]\n    ) {\n      id\n      name\n      bookable\n      customFields\n      description\n      meta\n      status\n      createdAt\n      category: Category {\n        id\n        name\n      }\n      customer: Account {\n        id\n        name\n      }\n      location: Location {\n        id\n        name\n      }\n      sublocation: Sublocation {\n        id\n        name\n      }\n      userId: User {\n        value: id\n        label: fullName\n      }\n      parentId: ParentAsset {\n        value: id\n        label: fullName\n      }\n      media: Media {\n        id\n        item: Medium {\n          id\n          filename\n        }\n      }\n      mainPhoto: Media(where: { Medium: { category: { _eq: "assetMainPhoto" } } }) {\n        id\n        item: Medium {\n          filename\n        }\n      }\n    }\n    meta: Asset_aggregate(\n      where: {\n        name: { _ilike: $q }\n        accountId: { _eq: $customerId }\n        locationId: { _eq: $locationId }\n        categoryId: { _eq: $categoryId }\n      }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n']);return o=function(){return e},e}function i(){var e=(0,r.Z)(['\n  query GetAsset($id: Int!) {\n    asset: Asset_by_pk(id: $id) {\n      id\n      name\n      fullName\n      description\n      meta\n      status\n      createdAt\n      condition\n      preparationStatus\n      parentAsset: ParentAsset {\n        id\n        name\n        fullName\n      }\n      customer: Account {\n        id\n        name\n      }\n      location: Location {\n        id\n        name\n        access\n        customerUser: User {\n          id\n          nameFirst\n          nameLast\n        }\n      }\n      sublocation: Sublocation {\n        id\n        name\n      }\n      category: Category {\n        id\n        name\n        childs: Taxonomies(\n          where: { status: { _eq: "active" }, type: { _eq: "assetQuestion" } }\n          order_by: { id: asc }\n        ) {\n          id\n          name\n          type\n          meta\n        }\n      }\n      media: Media {\n        id\n        item: Medium {\n          id\n          filename\n        }\n      }\n    }\n  }\n']);return i=function(){return e},e}function l(){var e=(0,r.Z)(["\n  subscription GetAssetMeterByAssetId($assetId: Int!) {\n    meters: AssetMeter(where: { assetId: { _eq: $assetId } }, order_by: { id: desc }) {\n      id\n      name\n      unit\n      frequency\n      rangeLower\n      rangeUpper\n      status\n      meta\n      logs: AssetLogs(limit: 1000, order_by: { id: desc }) {\n        id\n        status\n        eventTime\n        type\n        value\n      }\n    }\n  }\n"]);return l=function(){return e},e}function s(){var e=(0,r.Z)(["\n  mutation AddAsset($objects: [Asset_insert_input!]!) {\n    insert_Asset(objects: $objects) {\n      returning {\n        id\n      }\n    }\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,r.Z)(["\n  mutation UpdateAsset($id: Int!, $changes: Asset_set_input) {\n    update_Asset_by_pk(pk_columns: { id: $id }, _set: $changes) {\n      id\n    }\n  }\n"]);return u=function(){return e},e}function d(){var e=(0,r.Z)(["\n  mutation DeleteAsset($id: Int!) {\n    delete_Asset_by_pk(id: $id) {\n      id\n    }\n  }\n"]);return d=function(){return e},e}function c(){var e=(0,r.Z)(['\n  query GetJobs($assetId: Int!, $limit: Int, $offset: Int, $orderBy: Job_order_by!) {\n    jobs: Job(\n      limit: $limit\n      offset: $offset\n      where: { Assets: { entity: { _eq: "Job" }, Asset: { id: { _eq: $assetId } } } }\n      order_by: [$orderBy]\n    ) {\n      id\n      type\n      number\n      status\n      scheduledAt\n      timingStart\n      createdAt\n      invoices: Invoices(order_by: { createdAt: desc }) {\n        invoiceNumber\n      }\n      customer: Customer {\n        id\n        type\n        name\n        status\n        vatId\n      }\n      location: Location {\n        id\n        name\n      }\n      sublocation: Sublocation {\n        id\n        name\n      }\n      manager: Manager {\n        id\n        fullName\n      }\n      service: Service {\n        id\n        name\n      }\n      shortJobDesc: Taxonomy(where: { Taxonomy: { type: { _eq: "jobTags" } } }) {\n        taxonomy: Taxonomy {\n          name\n        }\n      }\n      sla: SLA {\n        name\n      }\n      supplier: Supplier {\n        id\n        name\n      }\n      supplierUser: SupplierUser {\n        id\n        fullName\n      }\n      supplierOffers: SupplierOffers {\n        supplier: Supplier {\n          id\n          name\n        }\n      }\n      timings: JobTimings(order_by: { createdAt: asc }) {\n        user: User {\n          fullName\n        }\n      }\n    }\n    meta: Job_aggregate(\n      where: { Assets: { entity: { _eq: "Job" }, Asset: { id: { _eq: $assetId } } } }\n    ) {\n      aggregate {\n        totalCount: count\n      }\n    }\n  }\n']);return c=function(){return e},e}function m(){var e=(0,r.Z)(["\n  query MEDIAS($category: String, $entity: String, $entityId: Int, $type: String, $adminId: Int) {\n    items: Media_Entity(\n      where: {\n        entity: { _eq: $entity }\n        entityId: { _eq: $entityId }\n        Medium: { adminId: { _eq: $adminId }, category: { _eq: $category }, type: { _eq: $type } }\n      }\n    ) {\n      id\n      item: Medium {\n        id\n        filename\n      }\n    }\n  }\n"]);return m=function(){return e},e}function v(){var e=(0,r.Z)(['\n  query GetAssetJobsByPeriod($assetId: Int!, $start: timestamptz, $end: timestamptz) {\n    jobs: Job(\n      where: {\n        Assets: { entity: { _eq: "Job" }, Asset: { id: { _eq: $assetId } } }\n        _or: [\n          { scheduledAt: { _gte: $start, _lte: $end } }\n          { timingStart: { _gte: $start, _lte: $end } }\n        ]\n      }\n    ) {\n      scheduledAt\n      timingStart\n      customerVatTotal: customerFinances(path: "amountInfo.vatTotal")\n      assets: Assets(where: { entity: { _eq: "Job" } }) {\n        id\n      }\n    }\n  }\n']);return v=function(){return e},e}var p=(0,a.Ps)(o()),f=(0,a.Ps)(i());(0,a.Ps)(l());var b=(0,a.Ps)(s()),y=(0,a.Ps)(u());(0,a.Ps)(d());var h=(0,a.Ps)(c()),g=(0,a.Ps)(m()),x=(0,a.Ps)(v())},8152:function(e,n,t){t.d(n,{Fn:function(){return r},of:function(){return a},wo:function(){return o}});var r=[{label:"Excellent",value:"excellent",color:"success.main",fontColor:"success.contrastText"},{label:"Good",value:"good",color:"success.main",fontColor:"success.contrastText"},{label:"Fair",value:"fair",color:"info.main",fontColor:"success.contrastText"},{label:"Poor",value:"poor",color:"pink.main",fontColor:"pink.contrastText"},{label:"Very poor",value:"veryPoor",color:"danger.main",fontColor:"danger.contrastText"}],a=[{label:"Discarded",value:"discarded",color:"black.main",fontColor:"black.contrastText"},{label:"Pending disposal",value:"pendingDisposal",color:"muiGray.main",fontColor:"muiGray.contrastText"},{label:"In repairs",value:"inRepairs",color:"help.main",fontColor:"help.contrastText"},{label:"Offline",value:"offline",color:"danger.main",fontColor:"danger.contrastText"},{label:"In storage",value:"inStorage",color:"secondary.main",fontColor:"secondary.contrastText"},{label:"In use",value:"inUse",color:"success.main",fontColor:"success.contrastText"},{label:"Not ready",value:"notReady",color:"info.main",fontColor:"info.contrastText"}],o=function(e,n){return e.find(function(e){return e.value===n})||{backgroundColor:"success",color:"success"}}}}]);